var D$=Object.defineProperty,O$=Object.defineProperties;var M$=Object.getOwnPropertyDescriptors;var VC=Object.getOwnPropertySymbols;var F$=Object.prototype.hasOwnProperty,$$=Object.prototype.propertyIsEnumerable;var jC=(t,e,n)=>e in t?D$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lc=(t,e)=>{for(var n in e||(e={}))F$.call(e,n)&&jC(t,n,e[n]);if(VC)for(var n of VC(e))$$.call(e,n)&&jC(t,n,e[n]);return t},HC=(t,e)=>O$(t,M$(e));var L$=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Wce=L$((jce,S$)=>{function B$(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const U$=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};U$();function oR(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),e}var T={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vh=Symbol.for("react.element"),z$=Symbol.for("react.portal"),W$=Symbol.for("react.fragment"),V$=Symbol.for("react.strict_mode"),j$=Symbol.for("react.profiler"),H$=Symbol.for("react.provider"),q$=Symbol.for("react.context"),G$=Symbol.for("react.forward_ref"),K$=Symbol.for("react.suspense"),X$=Symbol.for("react.memo"),Y$=Symbol.for("react.lazy"),qC=Symbol.iterator;function Q$(t){return t===null||typeof t!="object"?null:(t=qC&&t[qC]||t["@@iterator"],typeof t=="function"?t:null)}var iR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aR=Object.assign,sR={};function Dl(t,e,n){this.props=t,this.context=e,this.refs=sR,this.updater=n||iR}Dl.prototype.isReactComponent={};Dl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uR(){}uR.prototype=Dl.prototype;function pw(t,e,n){this.props=t,this.context=e,this.refs=sR,this.updater=n||iR}var mw=pw.prototype=new uR;mw.constructor=pw;aR(mw,Dl.prototype);mw.isPureReactComponent=!0;var GC=Array.isArray,lR=Object.prototype.hasOwnProperty,vw={current:null},cR={key:!0,ref:!0,__self:!0,__source:!0};function dR(t,e,n){var r,o={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)lR.call(e,r)&&!cR.hasOwnProperty(r)&&(o[r]=e[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];o.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:vh,type:t,key:i,ref:a,props:o,_owner:vw.current}}function J$(t,e){return{$$typeof:vh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gw(t){return typeof t=="object"&&t!==null&&t.$$typeof===vh}function Z$(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var KC=/\/+/g;function vy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Z$(""+t.key):e.toString(36)}function fp(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case vh:case z$:a=!0}}if(a)return a=t,o=o(a),t=r===""?"."+vy(a,0):r,GC(o)?(n="",t!=null&&(n=t.replace(KC,"$&/")+"/"),fp(o,e,n,"",function(l){return l})):o!=null&&(gw(o)&&(o=J$(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(KC,"$&/")+"/")+t)),e.push(o)),1;if(a=0,r=r===""?".":r+":",GC(t))for(var s=0;s<t.length;s++){i=t[s];var u=r+vy(i,s);a+=fp(i,e,n,u,o)}else if(u=Q$(t),typeof u=="function")for(t=u.call(t),s=0;!(i=t.next()).done;)i=i.value,u=r+vy(i,s++),a+=fp(i,e,n,u,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function yf(t,e,n){if(t==null)return t;var r=[],o=0;return fp(t,r,"","",function(i){return e.call(n,i,o++)}),r}function eL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ar={current:null},pp={transition:null},tL={ReactCurrentDispatcher:ar,ReactCurrentBatchConfig:pp,ReactCurrentOwner:vw};Ye.Children={map:yf,forEach:function(t,e,n){yf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yf(t,function(){e++}),e},toArray:function(t){return yf(t,function(e){return e})||[]},only:function(t){if(!gw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ye.Component=Dl;Ye.Fragment=W$;Ye.Profiler=j$;Ye.PureComponent=pw;Ye.StrictMode=V$;Ye.Suspense=K$;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tL;Ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=aR({},t.props),o=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=vw.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)lR.call(e,u)&&!cR.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:vh,type:t.type,key:o,ref:i,props:r,_owner:a}};Ye.createContext=function(t){return t={$$typeof:q$,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H$,_context:t},t.Consumer=t};Ye.createElement=dR;Ye.createFactory=function(t){var e=dR.bind(null,t);return e.type=t,e};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(t){return{$$typeof:G$,render:t}};Ye.isValidElement=gw;Ye.lazy=function(t){return{$$typeof:Y$,_payload:{_status:-1,_result:t},_init:eL}};Ye.memo=function(t,e){return{$$typeof:X$,type:t,compare:e===void 0?null:e}};Ye.startTransition=function(t){var e=pp.transition;pp.transition={};try{t()}finally{pp.transition=e}};Ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ye.useCallback=function(t,e){return ar.current.useCallback(t,e)};Ye.useContext=function(t){return ar.current.useContext(t)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(t){return ar.current.useDeferredValue(t)};Ye.useEffect=function(t,e){return ar.current.useEffect(t,e)};Ye.useId=function(){return ar.current.useId()};Ye.useImperativeHandle=function(t,e,n){return ar.current.useImperativeHandle(t,e,n)};Ye.useInsertionEffect=function(t,e){return ar.current.useInsertionEffect(t,e)};Ye.useLayoutEffect=function(t,e){return ar.current.useLayoutEffect(t,e)};Ye.useMemo=function(t,e){return ar.current.useMemo(t,e)};Ye.useReducer=function(t,e,n){return ar.current.useReducer(t,e,n)};Ye.useRef=function(t){return ar.current.useRef(t)};Ye.useState=function(t){return ar.current.useState(t)};Ye.useSyncExternalStore=function(t,e,n){return ar.current.useSyncExternalStore(t,e,n)};Ye.useTransition=function(){return ar.current.useTransition()};Ye.version="18.1.0";T.exports=Ye;var yo=T.exports,gs=B$({__proto__:null,default:yo},[T.exports]),q0={},wv={exports:{}},zr={},hR={exports:{}},fR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,L){var z=A.length;A.push(L);e:for(;0<z;){var j=z-1>>>1,q=A[j];if(0<o(q,L))A[j]=L,A[z]=q,z=j;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var L=A[0],z=A.pop();if(z!==L){A[0]=z;e:for(var j=0,q=A.length,Y=q>>>1;j<Y;){var Z=2*(j+1)-1,oe=A[Z],se=Z+1,de=A[se];if(0>o(oe,z))se<q&&0>o(de,oe)?(A[j]=de,A[se]=z,j=se):(A[j]=oe,A[Z]=z,j=Z);else if(se<q&&0>o(de,z))A[j]=de,A[se]=z,j=se;else break e}}return L}function o(A,L){var z=A.sortIndex-L.sortIndex;return z!==0?z:A.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,d=null,h=3,f=!1,p=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(A){for(var L=n(l);L!==null;){if(L.callback===null)r(l);else if(L.startTime<=A)r(l),L.sortIndex=L.expirationTime,e(u,L);else break;L=n(l)}}function w(A){if(v=!1,x(A),!p)if(n(u)!==null)p=!0,D(b);else{var L=n(l);L!==null&&U(w,L.startTime-A)}}function b(A,L){p=!1,v&&(v=!1,m(S),S=-1),f=!0;var z=h;try{for(x(L),d=n(u);d!==null&&(!(d.expirationTime>L)||A&&!I());){var j=d.callback;if(typeof j=="function"){d.callback=null,h=d.priorityLevel;var q=j(d.expirationTime<=L);L=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(u)&&r(u),x(L)}else r(u);d=n(u)}if(d!==null)var Y=!0;else{var Z=n(l);Z!==null&&U(w,Z.startTime-L),Y=!1}return Y}finally{d=null,h=z,f=!1}}var C=!1,E=null,S=-1,k=5,_=-1;function I(){return!(t.unstable_now()-_<k)}function N(){if(E!==null){var A=t.unstable_now();_=A;var L=!0;try{L=E(!0,A)}finally{L?$():(C=!1,E=null)}}else C=!1}var $;if(typeof g=="function")$=function(){g(N)};else if(typeof MessageChannel!="undefined"){var M=new MessageChannel,B=M.port2;M.port1.onmessage=N,$=function(){B.postMessage(null)}}else $=function(){y(N,0)};function D(A){E=A,C||(C=!0,$())}function U(A,L){S=y(function(){A(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,D(b))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(A){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var z=h;h=L;try{return A()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,L){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var z=h;h=A;try{return L()}finally{h=z}},t.unstable_scheduleCallback=function(A,L,z){var j=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?j+z:j):z=j,A){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=z+q,A={id:c++,callback:L,priorityLevel:A,startTime:z,expirationTime:q,sortIndex:-1},z>j?(A.sortIndex=z,e(l,A),n(u)===null&&A===n(l)&&(v?(m(S),S=-1):v=!0,U(w,z-j))):(A.sortIndex=q,e(u,A),p||f||(p=!0,D(b))),A},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(A){var L=h;return function(){var z=h;h=L;try{return A.apply(this,arguments)}finally{h=z}}}})(fR);hR.exports=fR;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR=T.exports,Lr=hR.exports;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mR=new Set,yd={};function Us(t,e){nl(t,e),nl(t+"Capture",e)}function nl(t,e){for(yd[t]=e,t=0;t<e.length;t++)mR.add(e[t])}var Ti=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),G0=Object.prototype.hasOwnProperty,nL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XC={},YC={};function rL(t){return G0.call(YC,t)?!0:G0.call(XC,t)?!1:nL.test(t)?YC[t]=!0:(XC[t]=!0,!1)}function oL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iL(t,e,n,r){if(e===null||typeof e=="undefined"||oL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,n,r,o,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dn[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dn[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dn[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dn[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dn[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dn[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dn[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dn[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dn[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var yw=/[\-:]([a-z])/g;function xw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yw,xw);Dn[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yw,xw);Dn[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yw,xw);Dn[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dn[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dn[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ww(t,e,n,r){var o=Dn.hasOwnProperty(e)?Dn[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iL(e,n,o,r)&&(n=null),r||o===null?rL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mi=pR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xf=Symbol.for("react.element"),wu=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),bw=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),vR=Symbol.for("react.provider"),gR=Symbol.for("react.context"),Ew=Symbol.for("react.forward_ref"),X0=Symbol.for("react.suspense"),Y0=Symbol.for("react.suspense_list"),Cw=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),yR=Symbol.for("react.offscreen"),QC=Symbol.iterator;function cc(t){return t===null||typeof t!="object"?null:(t=QC&&t[QC]||t["@@iterator"],typeof t=="function"?t:null)}var zt=Object.assign,gy;function Oc(t){if(gy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gy=e&&e[1]||""}return`
`+gy+t}var yy=!1;function xy(t,e){if(!t||yy)return"";yy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var o=l.stack.split(`
`),i=r.stack.split(`
`),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==i[s]){var u=`
`+o[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{yy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oc(t):""}function aL(t){switch(t.tag){case 5:return Oc(t.type);case 16:return Oc("Lazy");case 13:return Oc("Suspense");case 19:return Oc("SuspenseList");case 0:case 2:case 15:return t=xy(t.type,!1),t;case 11:return t=xy(t.type.render,!1),t;case 1:return t=xy(t.type,!0),t;default:return""}}function Q0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bu:return"Fragment";case wu:return"Portal";case K0:return"Profiler";case bw:return"StrictMode";case X0:return"Suspense";case Y0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gR:return(t.displayName||"Context")+".Consumer";case vR:return(t._context.displayName||"Context")+".Provider";case Ew:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cw:return e=t.displayName||null,e!==null?e:Q0(t.type)||"Memo";case Ki:e=t._payload,t=t._init;try{return Q0(t(e))}catch{}}return null}function sL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q0(e);case 8:return e===bw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _a(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uL(t){var e=xR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wf(t){t._valueTracker||(t._valueTracker=uL(t))}function wR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qp(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function J0(t,e){var n=e.checked;return zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function JC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_a(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bR(t,e){e=e.checked,e!=null&&ww(t,"checked",e,!1)}function Z0(t,e){bR(t,e);var n=_a(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?e1(t,e.type,n):e.hasOwnProperty("defaultValue")&&e1(t,e.type,_a(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ZC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function e1(t,e,n){(e!=="number"||Qp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mc=Array.isArray;function Ou(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_a(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function t1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return zt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function e_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(te(92));if(Mc(n)){if(1<n.length)throw Error(te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_a(n)}}function ER(t,e){var n=_a(e.value),r=_a(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function t_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function n1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bf,_R=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bf=bf||document.createElement("div"),bf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lL=["Webkit","ms","Moz","O"];Object.keys(Kc).forEach(function(t){lL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kc[e]=Kc[t]})});function SR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kc.hasOwnProperty(t)&&Kc[t]?(""+e).trim():e+"px"}function kR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=SR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var cL=zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r1(t,e){if(e){if(cL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function o1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var i1=null;function _w(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var a1=null,Mu=null,Fu=null;function n_(t){if(t=xh(t)){if(typeof a1!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Sv(e),a1(t.stateNode,t.type,e))}}function IR(t){Mu?Fu?Fu.push(t):Fu=[t]:Mu=t}function TR(){if(Mu){var t=Mu,e=Fu;if(Fu=Mu=null,n_(t),e)for(t=0;t<e.length;t++)n_(e[t])}}function RR(t,e){return t(e)}function AR(){}var wy=!1;function NR(t,e,n){if(wy)return t(e,n);wy=!0;try{return RR(t,e,n)}finally{wy=!1,(Mu!==null||Fu!==null)&&(AR(),TR())}}function wd(t,e){var n=t.stateNode;if(n===null)return null;var r=Sv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(te(231,e,typeof n));return n}var s1=!1;if(Ti)try{var dc={};Object.defineProperty(dc,"passive",{get:function(){s1=!0}}),window.addEventListener("test",dc,dc),window.removeEventListener("test",dc,dc)}catch{s1=!1}function dL(t,e,n,r,o,i,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Xc=!1,Jp=null,Zp=!1,u1=null,hL={onError:function(t){Xc=!0,Jp=t}};function fL(t,e,n,r,o,i,a,s,u){Xc=!1,Jp=null,dL.apply(hL,arguments)}function pL(t,e,n,r,o,i,a,s,u){if(fL.apply(this,arguments),Xc){if(Xc){var l=Jp;Xc=!1,Jp=null}else throw Error(te(198));Zp||(Zp=!0,u1=l)}}function zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function r_(t){if(zs(t)!==t)throw Error(te(188))}function mL(t){var e=t.alternate;if(!e){if(e=zs(t),e===null)throw Error(te(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return r_(o),t;if(i===r)return r_(o),e;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?t:e}function DR(t){return t=mL(t),t!==null?OR(t):null}function OR(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OR(t);if(e!==null)return e;t=t.sibling}return null}var MR=Lr.unstable_scheduleCallback,o_=Lr.unstable_cancelCallback,vL=Lr.unstable_shouldYield,gL=Lr.unstable_requestPaint,Ht=Lr.unstable_now,yL=Lr.unstable_getCurrentPriorityLevel,Sw=Lr.unstable_ImmediatePriority,FR=Lr.unstable_UserBlockingPriority,em=Lr.unstable_NormalPriority,xL=Lr.unstable_LowPriority,$R=Lr.unstable_IdlePriority,bv=null,Ho=null;function wL(t){if(Ho&&typeof Ho.onCommitFiberRoot=="function")try{Ho.onCommitFiberRoot(bv,t,void 0,(t.current.flags&128)===128)}catch{}}var Eo=Math.clz32?Math.clz32:CL,bL=Math.log,EL=Math.LN2;function CL(t){return t>>>=0,t===0?32:31-(bL(t)/EL|0)|0}var Ef=64,Cf=4194304;function Fc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~o;s!==0?r=Fc(s):(i&=a,i!==0&&(r=Fc(i)))}else a=n&~o,a!==0?r=Fc(a):i!==0&&(r=Fc(i));if(r===0)return 0;if(e!==0&&e!==r&&(e&o)===0&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Eo(e),o=1<<n,r|=t[n],e&=~o;return r}function _L(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Eo(i),s=1<<a,u=o[a];u===-1?((s&n)===0||(s&r)!==0)&&(o[a]=_L(s,e)):u<=e&&(t.expiredLanes|=s),i&=~s}}function l1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LR(){var t=Ef;return Ef<<=1,(Ef&4194240)===0&&(Ef=64),t}function by(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Eo(e),t[e]=n}function kL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Eo(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function kw(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Eo(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var ft=0;function BR(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var UR,Iw,zR,WR,VR,c1=!1,_f=[],da=null,ha=null,fa=null,bd=new Map,Ed=new Map,Qi=[],IL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i_(t,e){switch(t){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":bd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ed.delete(e.pointerId)}}function hc(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=xh(e),e!==null&&Iw(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function TL(t,e,n,r,o){switch(e){case"focusin":return da=hc(da,t,e,n,r,o),!0;case"dragenter":return ha=hc(ha,t,e,n,r,o),!0;case"mouseover":return fa=hc(fa,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return bd.set(i,hc(bd.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ed.set(i,hc(Ed.get(i)||null,t,e,n,r,o)),!0}return!1}function jR(t){var e=es(t.target);if(e!==null){var n=zs(e);if(n!==null){if(e=n.tag,e===13){if(e=PR(n),e!==null){t.blockedOn=e,VR(t.priority,function(){zR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=d1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);i1=r,n.target.dispatchEvent(r),i1=null}else return e=xh(n),e!==null&&Iw(e),t.blockedOn=n,!1;e.shift()}return!0}function a_(t,e,n){mp(t)&&n.delete(e)}function RL(){c1=!1,da!==null&&mp(da)&&(da=null),ha!==null&&mp(ha)&&(ha=null),fa!==null&&mp(fa)&&(fa=null),bd.forEach(a_),Ed.forEach(a_)}function fc(t,e){t.blockedOn===e&&(t.blockedOn=null,c1||(c1=!0,Lr.unstable_scheduleCallback(Lr.unstable_NormalPriority,RL)))}function Cd(t){function e(o){return fc(o,t)}if(0<_f.length){fc(_f[0],t);for(var n=1;n<_f.length;n++){var r=_f[n];r.blockedOn===t&&(r.blockedOn=null)}}for(da!==null&&fc(da,t),ha!==null&&fc(ha,t),fa!==null&&fc(fa,t),bd.forEach(e),Ed.forEach(e),n=0;n<Qi.length;n++)r=Qi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qi.length&&(n=Qi[0],n.blockedOn===null);)jR(n),n.blockedOn===null&&Qi.shift()}var $u=Mi.ReactCurrentBatchConfig,nm=!0;function AL(t,e,n,r){var o=ft,i=$u.transition;$u.transition=null;try{ft=1,Tw(t,e,n,r)}finally{ft=o,$u.transition=i}}function NL(t,e,n,r){var o=ft,i=$u.transition;$u.transition=null;try{ft=4,Tw(t,e,n,r)}finally{ft=o,$u.transition=i}}function Tw(t,e,n,r){if(nm){var o=d1(t,e,n,r);if(o===null)Ny(t,e,r,rm,n),i_(t,r);else if(TL(o,t,e,n,r))r.stopPropagation();else if(i_(t,r),e&4&&-1<IL.indexOf(t)){for(;o!==null;){var i=xh(o);if(i!==null&&UR(i),i=d1(t,e,n,r),i===null&&Ny(t,e,r,rm,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Ny(t,e,r,null,n)}}var rm=null;function d1(t,e,n,r){if(rm=null,t=_w(r),t=es(t),t!==null)if(e=zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rm=t,null}function HR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yL()){case Sw:return 1;case FR:return 4;case em:case xL:return 16;case $R:return 536870912;default:return 16}default:return 16}}var oa=null,Rw=null,vp=null;function qR(){if(vp)return vp;var t,e=Rw,n=e.length,r,o="value"in oa?oa.value:oa.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===o[i-r];r++);return vp=o.slice(t,1<r?1-r:void 0)}function gp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sf(){return!0}function s_(){return!1}function Wr(t){function e(n,r,o,i,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sf:s_,this.isPropagationStopped=s_,this}return zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sf)},persist:function(){},isPersistent:Sf}),e}var Ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Aw=Wr(Ol),yh=zt({},Ol,{view:0,detail:0}),PL=Wr(yh),Ey,Cy,pc,Ev=zt({},yh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pc&&(pc&&t.type==="mousemove"?(Ey=t.screenX-pc.screenX,Cy=t.screenY-pc.screenY):Cy=Ey=0,pc=t),Ey)},movementY:function(t){return"movementY"in t?t.movementY:Cy}}),u_=Wr(Ev),DL=zt({},Ev,{dataTransfer:0}),OL=Wr(DL),ML=zt({},yh,{relatedTarget:0}),_y=Wr(ML),FL=zt({},Ol,{animationName:0,elapsedTime:0,pseudoElement:0}),$L=Wr(FL),LL=zt({},Ol,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BL=Wr(LL),UL=zt({},Ol,{data:0}),l_=Wr(UL),zL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VL[t])?!!e[t]:!1}function Nw(){return jL}var HL=zt({},yh,{key:function(t){if(t.key){var e=zL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nw,charCode:function(t){return t.type==="keypress"?gp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qL=Wr(HL),GL=zt({},Ev,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c_=Wr(GL),KL=zt({},yh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nw}),XL=Wr(KL),YL=zt({},Ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),QL=Wr(YL),JL=zt({},Ev,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZL=Wr(JL),eB=[9,13,27,32],Pw=Ti&&"CompositionEvent"in window,Yc=null;Ti&&"documentMode"in document&&(Yc=document.documentMode);var tB=Ti&&"TextEvent"in window&&!Yc,GR=Ti&&(!Pw||Yc&&8<Yc&&11>=Yc),d_=String.fromCharCode(32),h_=!1;function KR(t,e){switch(t){case"keyup":return eB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eu=!1;function nB(t,e){switch(t){case"compositionend":return XR(e);case"keypress":return e.which!==32?null:(h_=!0,d_);case"textInput":return t=e.data,t===d_&&h_?null:t;default:return null}}function rB(t,e){if(Eu)return t==="compositionend"||!Pw&&KR(t,e)?(t=qR(),vp=Rw=oa=null,Eu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GR&&e.locale!=="ko"?null:e.data;default:return null}}var oB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oB[t.type]:e==="textarea"}function YR(t,e,n,r){IR(r),e=om(e,"onChange"),0<e.length&&(n=new Aw("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qc=null,_d=null;function iB(t){sA(t,0)}function Cv(t){var e=Su(t);if(wR(e))return t}function aB(t,e){if(t==="change")return e}var QR=!1;if(Ti){var Sy;if(Ti){var ky="oninput"in document;if(!ky){var p_=document.createElement("div");p_.setAttribute("oninput","return;"),ky=typeof p_.oninput=="function"}Sy=ky}else Sy=!1;QR=Sy&&(!document.documentMode||9<document.documentMode)}function m_(){Qc&&(Qc.detachEvent("onpropertychange",JR),_d=Qc=null)}function JR(t){if(t.propertyName==="value"&&Cv(_d)){var e=[];YR(e,_d,t,_w(t)),NR(iB,e)}}function sB(t,e,n){t==="focusin"?(m_(),Qc=e,_d=n,Qc.attachEvent("onpropertychange",JR)):t==="focusout"&&m_()}function uB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cv(_d)}function lB(t,e){if(t==="click")return Cv(e)}function cB(t,e){if(t==="input"||t==="change")return Cv(e)}function dB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var So=typeof Object.is=="function"?Object.is:dB;function Sd(t,e){if(So(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!G0.call(e,o)||!So(t[o],e[o]))return!1}return!0}function v_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function g_(t,e){var n=v_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v_(n)}}function ZR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ZR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eA(){for(var t=window,e=Qp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qp(t.document)}return e}function Dw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hB(t){var e=eA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ZR(n.ownerDocument.documentElement,n)){if(r!==null&&Dw(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=g_(n,i);var a=g_(n,r);o&&a&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fB=Ti&&"documentMode"in document&&11>=document.documentMode,Cu=null,h1=null,Jc=null,f1=!1;function y_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;f1||Cu==null||Cu!==Qp(r)||(r=Cu,"selectionStart"in r&&Dw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jc&&Sd(Jc,r)||(Jc=r,r=om(h1,"onSelect"),0<r.length&&(e=new Aw("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cu)))}function kf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _u={animationend:kf("Animation","AnimationEnd"),animationiteration:kf("Animation","AnimationIteration"),animationstart:kf("Animation","AnimationStart"),transitionend:kf("Transition","TransitionEnd")},Iy={},tA={};Ti&&(tA=document.createElement("div").style,"AnimationEvent"in window||(delete _u.animationend.animation,delete _u.animationiteration.animation,delete _u.animationstart.animation),"TransitionEvent"in window||delete _u.transitionend.transition);function _v(t){if(Iy[t])return Iy[t];if(!_u[t])return t;var e=_u[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tA)return Iy[t]=e[n];return t}var nA=_v("animationend"),rA=_v("animationiteration"),oA=_v("animationstart"),iA=_v("transitionend"),aA=new Map,x_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pa(t,e){aA.set(t,e),Us(e,[t])}for(var Ty=0;Ty<x_.length;Ty++){var Ry=x_[Ty],pB=Ry.toLowerCase(),mB=Ry[0].toUpperCase()+Ry.slice(1);Pa(pB,"on"+mB)}Pa(nA,"onAnimationEnd");Pa(rA,"onAnimationIteration");Pa(oA,"onAnimationStart");Pa("dblclick","onDoubleClick");Pa("focusin","onFocus");Pa("focusout","onBlur");Pa(iA,"onTransitionEnd");nl("onMouseEnter",["mouseout","mouseover"]);nl("onMouseLeave",["mouseout","mouseover"]);nl("onPointerEnter",["pointerout","pointerover"]);nl("onPointerLeave",["pointerout","pointerover"]);Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Us("onBeforeInput",["compositionend","keypress","textInput","paste"]);Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vB=new Set("cancel close invalid load scroll toggle".split(" ").concat($c));function w_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pL(r,e,void 0,t),t.currentTarget=null}function sA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&o.isPropagationStopped())break e;w_(o,s,l),i=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==i&&o.isPropagationStopped())break e;w_(o,s,l),i=u}}}if(Zp)throw t=u1,Zp=!1,u1=null,t}function _t(t,e){var n=e[y1];n===void 0&&(n=e[y1]=new Set);var r=t+"__bubble";n.has(r)||(uA(e,t,2,!1),n.add(r))}function Ay(t,e,n){var r=0;e&&(r|=4),uA(n,t,r,e)}var If="_reactListening"+Math.random().toString(36).slice(2);function kd(t){if(!t[If]){t[If]=!0,mR.forEach(function(n){n!=="selectionchange"&&(vB.has(n)||Ay(n,!1,t),Ay(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[If]||(e[If]=!0,Ay("selectionchange",!1,e))}}function uA(t,e,n,r){switch(HR(e)){case 1:var o=AL;break;case 4:o=NL;break;default:o=Tw}n=o.bind(null,e,n,t),o=void 0,!s1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Ny(t,e,n,r,o){var i=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;s!==null;){if(a=es(s),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}s=s.parentNode}}r=r.return}NR(function(){var l=i,c=_w(n),d=[];e:{var h=aA.get(t);if(h!==void 0){var f=Aw,p=t;switch(t){case"keypress":if(gp(n)===0)break e;case"keydown":case"keyup":f=qL;break;case"focusin":p="focus",f=_y;break;case"focusout":p="blur",f=_y;break;case"beforeblur":case"afterblur":f=_y;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=u_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=OL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=XL;break;case nA:case rA:case oA:f=$L;break;case iA:f=QL;break;case"scroll":f=PL;break;case"wheel":f=ZL;break;case"copy":case"cut":case"paste":f=BL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=c_}var v=(e&4)!==0,y=!v&&t==="scroll",m=v?h!==null?h+"Capture":null:h;v=[];for(var g=l,x;g!==null;){x=g;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,m!==null&&(w=wd(g,m),w!=null&&v.push(Id(g,w,x)))),y)break;g=g.return}0<v.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:v}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==i1&&(p=n.relatedTarget||n.fromElement)&&(es(p)||p[Ri]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?es(p):null,p!==null&&(y=zs(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(v=u_,w="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=c_,w="onPointerLeave",m="onPointerEnter",g="pointer"),y=f==null?h:Su(f),x=p==null?h:Su(p),h=new v(w,g+"leave",f,n,c),h.target=y,h.relatedTarget=x,w=null,es(c)===l&&(v=new v(m,g+"enter",p,n,c),v.target=x,v.relatedTarget=y,w=v),y=w,f&&p)t:{for(v=f,m=p,g=0,x=v;x;x=Js(x))g++;for(x=0,w=m;w;w=Js(w))x++;for(;0<g-x;)v=Js(v),g--;for(;0<x-g;)m=Js(m),x--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=Js(v),m=Js(m)}v=null}else v=null;f!==null&&b_(d,h,f,v,!1),p!==null&&y!==null&&b_(d,y,p,v,!0)}}e:{if(h=l?Su(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var b=aB;else if(f_(h))if(QR)b=cB;else{b=uB;var C=sB}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=lB);if(b&&(b=b(t,l))){YR(d,b,n,c);break e}C&&C(t,h,l),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&e1(h,"number",h.value)}switch(C=l?Su(l):window,t){case"focusin":(f_(C)||C.contentEditable==="true")&&(Cu=C,h1=l,Jc=null);break;case"focusout":Jc=h1=Cu=null;break;case"mousedown":f1=!0;break;case"contextmenu":case"mouseup":case"dragend":f1=!1,y_(d,n,c);break;case"selectionchange":if(fB)break;case"keydown":case"keyup":y_(d,n,c)}var E;if(Pw)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Eu?KR(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(GR&&n.locale!=="ko"&&(Eu||S!=="onCompositionStart"?S==="onCompositionEnd"&&Eu&&(E=qR()):(oa=c,Rw="value"in oa?oa.value:oa.textContent,Eu=!0)),C=om(l,S),0<C.length&&(S=new l_(S,t,null,n,c),d.push({event:S,listeners:C}),E?S.data=E:(E=XR(n),E!==null&&(S.data=E)))),(E=tB?nB(t,n):rB(t,n))&&(l=om(l,"onBeforeInput"),0<l.length&&(c=new l_("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:l}),c.data=E))}sA(d,e)})}function Id(t,e,n){return{instance:t,listener:e,currentTarget:n}}function om(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=wd(t,n),i!=null&&r.unshift(Id(t,i,o)),i=wd(t,e),i!=null&&r.push(Id(t,i,o))),t=t.return}return r}function Js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b_(t,e,n,r,o){for(var i=e._reactName,a=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,o?(u=wd(n,i),u!=null&&a.unshift(Id(n,u,s))):o||(u=wd(n,i),u!=null&&a.push(Id(n,u,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var gB=/\r\n?/g,yB=/\u0000|\uFFFD/g;function E_(t){return(typeof t=="string"?t:""+t).replace(gB,`
`).replace(yB,"")}function Tf(t,e,n){if(e=E_(e),E_(t)!==e&&n)throw Error(te(425))}function im(){}var p1=null,m1=null;function v1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var g1=typeof setTimeout=="function"?setTimeout:void 0,xB=typeof clearTimeout=="function"?clearTimeout:void 0,C_=typeof Promise=="function"?Promise:void 0,wB=typeof queueMicrotask=="function"?queueMicrotask:typeof C_!="undefined"?function(t){return C_.resolve(null).then(t).catch(bB)}:g1;function bB(t){setTimeout(function(){throw t})}function Py(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Cd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Cd(e)}function vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function __(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ml=Math.random().toString(36).slice(2),Uo="__reactFiber$"+Ml,Td="__reactProps$"+Ml,Ri="__reactContainer$"+Ml,y1="__reactEvents$"+Ml,EB="__reactListeners$"+Ml,CB="__reactHandles$"+Ml;function es(t){var e=t[Uo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ri]||n[Uo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=__(t);t!==null;){if(n=t[Uo])return n;t=__(t)}return e}t=n,n=t.parentNode}return null}function xh(t){return t=t[Uo]||t[Ri],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Su(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Sv(t){return t[Td]||null}var x1=[],ku=-1;function Da(t){return{current:t}}function kt(t){0>ku||(t.current=x1[ku],x1[ku]=null,ku--)}function xt(t,e){ku++,x1[ku]=t.current,t.current=e}var Sa={},Yn=Da(Sa),xr=Da(!1),ys=Sa;function rl(t,e){var n=t.type.contextTypes;if(!n)return Sa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function wr(t){return t=t.childContextTypes,t!=null}function am(){kt(xr),kt(Yn)}function S_(t,e,n){if(Yn.current!==Sa)throw Error(te(168));xt(Yn,e),xt(xr,n)}function lA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(te(108,sL(t)||"Unknown",o));return zt({},n,r)}function sm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sa,ys=Yn.current,xt(Yn,t),xt(xr,xr.current),!0}function k_(t,e,n){var r=t.stateNode;if(!r)throw Error(te(169));n?(t=lA(t,e,ys),r.__reactInternalMemoizedMergedChildContext=t,kt(xr),kt(Yn),xt(Yn,t)):kt(xr),xt(xr,n)}var pi=null,kv=!1,Dy=!1;function cA(t){pi===null?pi=[t]:pi.push(t)}function _B(t){kv=!0,cA(t)}function Oa(){if(!Dy&&pi!==null){Dy=!0;var t=0,e=ft;try{var n=pi;for(ft=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pi=null,kv=!1}catch(o){throw pi!==null&&(pi=pi.slice(t+1)),MR(Sw,Oa),o}finally{ft=e,Dy=!1}}return null}var SB=Mi.ReactCurrentBatchConfig;function co(t,e){if(t&&t.defaultProps){e=zt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var um=Da(null),lm=null,Iu=null,Ow=null;function Mw(){Ow=Iu=lm=null}function Fw(t){var e=um.current;kt(um),t._currentValue=e}function w1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Lu(t,e){lm=t,Ow=Iu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(vr=!0),t.firstContext=null)}function to(t){var e=t._currentValue;if(Ow!==t)if(t={context:t,memoizedValue:e,next:null},Iu===null){if(lm===null)throw Error(te(308));Iu=t,lm.dependencies={lanes:0,firstContext:t}}else Iu=Iu.next=t;return e}var xo=null,Xi=!1;function $w(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pa(t,e){var n=t.updateQueue;n!==null&&(n=n.shared,eN(t)?(t=n.interleaved,t===null?(e.next=e,xo===null?xo=[n]:xo.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(t=n.pending,t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function yp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kw(t,n)}}function I_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cm(t,e,n,r){var o=t.updateQueue;Xi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?i=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(i!==null){var d=o.baseState;a=0,c=l=u=null,s=i;do{var h=s.lane,f=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,v=s;switch(h=e,f=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=zt({},d,h);break e;case 2:Xi=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=f,u=d):c=c.next=f,a|=h;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;h=s,s=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(1);if(c===null&&(u=d),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=c,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);bs|=a,t.lanes=a,t.memoizedState=d}}function T_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(te(191,o));o.call(r)}}}var hA=new pR.Component().refs;function b1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:zt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iv={isMounted:function(t){return(t=t._reactInternals)?zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rr(),o=va(t),i=Ci(r,o);i.payload=e,n!=null&&(i.callback=n),pa(t,i),e=Jr(t,o,r),e!==null&&yp(e,t,o)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rr(),o=va(t),i=Ci(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),pa(t,i),e=Jr(t,o,r),e!==null&&yp(e,t,o)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rr(),r=va(t),o=Ci(n,r);o.tag=2,e!=null&&(o.callback=e),pa(t,o),e=Jr(t,r,n),e!==null&&yp(e,t,r)}};function R_(t,e,n,r,o,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Sd(n,r)||!Sd(o,i):!0}function fA(t,e,n){var r=!1,o=Sa,i=e.contextType;return typeof i=="object"&&i!==null?i=to(i):(o=wr(e)?ys:Yn.current,r=e.contextTypes,i=(r=r!=null)?rl(t,o):Sa),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function A_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Iv.enqueueReplaceState(e,e.state,null)}function E1(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=hA,$w(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=to(i):(i=wr(e)?ys:Yn.current,o.context=rl(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(b1(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Iv.enqueueReplaceState(o,o.state,null),cm(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}var Tu=[],Ru=0,dm=null,hm=0,Hr=[],qr=0,xs=null,gi=1,yi="";function Ga(t,e){Tu[Ru++]=hm,Tu[Ru++]=dm,dm=t,hm=e}function pA(t,e,n){Hr[qr++]=gi,Hr[qr++]=yi,Hr[qr++]=xs,xs=t;var r=gi;t=yi;var o=32-Eo(r)-1;r&=~(1<<o),n+=1;var i=32-Eo(e)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,gi=1<<32-Eo(e)+o|n<<o|r,yi=i+t}else gi=1<<i|n<<o|r,yi=t}function Lw(t){t.return!==null&&(Ga(t,1),pA(t,1,0))}function Bw(t){for(;t===dm;)dm=Tu[--Ru],Tu[Ru]=null,hm=Tu[--Ru],Tu[Ru]=null;for(;t===xs;)xs=Hr[--qr],Hr[qr]=null,yi=Hr[--qr],Hr[qr]=null,gi=Hr[--qr],Hr[qr]=null}var Mr=null,fr=null,Nt=!1,po=null;function mA(t,e){var n=Yr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function N_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mr=t,fr=vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xs!==null?{id:gi,overflow:yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mr=t,fr=null,!0):!1;default:return!1}}function C1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _1(t){if(Nt){var e=fr;if(e){var n=e;if(!N_(t,e)){if(C1(t))throw Error(te(418));e=vi(n.nextSibling);var r=Mr;e&&N_(t,e)?mA(r,n):(t.flags=t.flags&-4097|2,Nt=!1,Mr=t)}}else{if(C1(t))throw Error(te(418));t.flags=t.flags&-4097|2,Nt=!1,Mr=t}}}function P_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mr=t}function mc(t){if(t!==Mr)return!1;if(!Nt)return P_(t),Nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!v1(t.type,t.memoizedProps)),e&&(e=fr)){if(C1(t)){for(t=fr;t;)t=vi(t.nextSibling);throw Error(te(418))}for(;e;)mA(t,e),e=vi(e.nextSibling)}if(P_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fr=vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=Mr?vi(t.stateNode.nextSibling):null;return!0}function ol(){fr=Mr=null,Nt=!1}function Uw(t){po===null?po=[t]:po.push(t)}function vc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var s=o.refs;s===hA&&(s=o.refs={}),a===null?delete s[i]:s[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,t))}return t}function Rf(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function D_(t){var e=t._init;return e(t._payload)}function vA(t){function e(m,g){if(t){var x=m.deletions;x===null?(m.deletions=[g],m.flags|=16):x.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function o(m,g){return m=ka(m,g),m.index=0,m.sibling=null,m}function i(m,g,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<g?(m.flags|=2,g):x):(m.flags|=2,g)):(m.flags|=1048576,g)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function s(m,g,x,w){return g===null||g.tag!==6?(g=By(x,m.mode,w),g.return=m,g):(g=o(g,x),g.return=m,g)}function u(m,g,x,w){var b=x.type;return b===bu?c(m,g,x.props.children,w,x.key):g!==null&&(g.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ki&&D_(b)===g.type)?(w=o(g,x.props),w.ref=vc(m,g,x),w.return=m,w):(w=Cp(x.type,x.key,x.props,null,m.mode,w),w.ref=vc(m,g,x),w.return=m,w)}function l(m,g,x,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=Uy(x,m.mode,w),g.return=m,g):(g=o(g,x.children||[]),g.return=m,g)}function c(m,g,x,w,b){return g===null||g.tag!==7?(g=ds(x,m.mode,w,b),g.return=m,g):(g=o(g,x),g.return=m,g)}function d(m,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=By(""+g,m.mode,x),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case xf:return x=Cp(g.type,g.key,g.props,null,m.mode,x),x.ref=vc(m,null,g),x.return=m,x;case wu:return g=Uy(g,m.mode,x),g.return=m,g;case Ki:var w=g._init;return d(m,w(g._payload),x)}if(Mc(g)||cc(g))return g=ds(g,m.mode,x,null),g.return=m,g;Rf(m,g)}return null}function h(m,g,x,w){var b=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:s(m,g,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xf:return x.key===b?u(m,g,x,w):null;case wu:return x.key===b?l(m,g,x,w):null;case Ki:return b=x._init,h(m,g,b(x._payload),w)}if(Mc(x)||cc(x))return b!==null?null:c(m,g,x,w,null);Rf(m,x)}return null}function f(m,g,x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(x)||null,s(g,m,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xf:return m=m.get(w.key===null?x:w.key)||null,u(g,m,w,b);case wu:return m=m.get(w.key===null?x:w.key)||null,l(g,m,w,b);case Ki:var C=w._init;return f(m,g,x,C(w._payload),b)}if(Mc(w)||cc(w))return m=m.get(x)||null,c(g,m,w,b,null);Rf(g,w)}return null}function p(m,g,x,w){for(var b=null,C=null,E=g,S=g=0,k=null;E!==null&&S<x.length;S++){E.index>S?(k=E,E=null):k=E.sibling;var _=h(m,E,x[S],w);if(_===null){E===null&&(E=k);break}t&&E&&_.alternate===null&&e(m,E),g=i(_,g,S),C===null?b=_:C.sibling=_,C=_,E=k}if(S===x.length)return n(m,E),Nt&&Ga(m,S),b;if(E===null){for(;S<x.length;S++)E=d(m,x[S],w),E!==null&&(g=i(E,g,S),C===null?b=E:C.sibling=E,C=E);return Nt&&Ga(m,S),b}for(E=r(m,E);S<x.length;S++)k=f(E,m,S,x[S],w),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?S:k.key),g=i(k,g,S),C===null?b=k:C.sibling=k,C=k);return t&&E.forEach(function(I){return e(m,I)}),Nt&&Ga(m,S),b}function v(m,g,x,w){var b=cc(x);if(typeof b!="function")throw Error(te(150));if(x=b.call(x),x==null)throw Error(te(151));for(var C=b=null,E=g,S=g=0,k=null,_=x.next();E!==null&&!_.done;S++,_=x.next()){E.index>S?(k=E,E=null):k=E.sibling;var I=h(m,E,_.value,w);if(I===null){E===null&&(E=k);break}t&&E&&I.alternate===null&&e(m,E),g=i(I,g,S),C===null?b=I:C.sibling=I,C=I,E=k}if(_.done)return n(m,E),Nt&&Ga(m,S),b;if(E===null){for(;!_.done;S++,_=x.next())_=d(m,_.value,w),_!==null&&(g=i(_,g,S),C===null?b=_:C.sibling=_,C=_);return Nt&&Ga(m,S),b}for(E=r(m,E);!_.done;S++,_=x.next())_=f(E,m,S,_.value,w),_!==null&&(t&&_.alternate!==null&&E.delete(_.key===null?S:_.key),g=i(_,g,S),C===null?b=_:C.sibling=_,C=_);return t&&E.forEach(function(N){return e(m,N)}),Nt&&Ga(m,S),b}function y(m,g,x,w){if(typeof x=="object"&&x!==null&&x.type===bu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case xf:e:{for(var b=x.key,C=g;C!==null;){if(C.key===b){if(b=x.type,b===bu){if(C.tag===7){n(m,C.sibling),g=o(C,x.props.children),g.return=m,m=g;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ki&&D_(b)===C.type){n(m,C.sibling),g=o(C,x.props),g.ref=vc(m,C,x),g.return=m,m=g;break e}n(m,C);break}else e(m,C);C=C.sibling}x.type===bu?(g=ds(x.props.children,m.mode,w,x.key),g.return=m,m=g):(w=Cp(x.type,x.key,x.props,null,m.mode,w),w.ref=vc(m,g,x),w.return=m,m=w)}return a(m);case wu:e:{for(C=x.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){n(m,g.sibling),g=o(g,x.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=Uy(x,m.mode,w),g.return=m,m=g}return a(m);case Ki:return C=x._init,y(m,g,C(x._payload),w)}if(Mc(x))return p(m,g,x,w);if(cc(x))return v(m,g,x,w);Rf(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(n(m,g.sibling),g=o(g,x),g.return=m,m=g):(n(m,g),g=By(x,m.mode,w),g.return=m,m=g),a(m)):n(m,g)}return y}var il=vA(!0),gA=vA(!1),wh={},qo=Da(wh),Rd=Da(wh),Ad=Da(wh);function ts(t){if(t===wh)throw Error(te(174));return t}function zw(t,e){switch(xt(Ad,e),xt(Rd,t),xt(qo,wh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:n1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=n1(e,t)}kt(qo),xt(qo,e)}function al(){kt(qo),kt(Rd),kt(Ad)}function yA(t){ts(Ad.current);var e=ts(qo.current),n=n1(e,t.type);e!==n&&(xt(Rd,t),xt(qo,n))}function Ww(t){Rd.current===t&&(kt(qo),kt(Rd))}var Ft=Da(0);function fm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oy=[];function Vw(){for(var t=0;t<Oy.length;t++)Oy[t]._workInProgressVersionPrimary=null;Oy.length=0}var xp=Mi.ReactCurrentDispatcher,My=Mi.ReactCurrentBatchConfig,ws=0,Bt=null,on=null,pn=null,pm=!1,Zc=!1,Nd=0,kB=0;function Bn(){throw Error(te(321))}function jw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!So(t[n],e[n]))return!1;return!0}function Hw(t,e,n,r,o,i){if(ws=i,Bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xp.current=t===null||t.memoizedState===null?AB:NB,t=n(r,o),Zc){i=0;do{if(Zc=!1,Nd=0,25<=i)throw Error(te(301));i+=1,pn=on=null,e.updateQueue=null,xp.current=PB,t=n(r,o)}while(Zc)}if(xp.current=mm,e=on!==null&&on.next!==null,ws=0,pn=on=Bt=null,pm=!1,e)throw Error(te(300));return t}function qw(){var t=Nd!==0;return Nd=0,t}function Fo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Bt.memoizedState=pn=t:pn=pn.next=t,pn}function no(){if(on===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=on.next;var e=pn===null?Bt.memoizedState:pn.next;if(e!==null)pn=e,on=t;else{if(t===null)throw Error(te(310));on=t,t={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},pn===null?Bt.memoizedState=pn=t:pn=pn.next=t}return pn}function Pd(t,e){return typeof e=="function"?e(t):e}function Fy(t){var e=no(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=on,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var s=a=null,u=null,l=i;do{var c=l.lane;if((ws&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=d,a=r):u=u.next=d,Bt.lanes|=c,bs|=c}l=l.next}while(l!==null&&l!==i);u===null?a=r:u.next=s,So(r,e.memoizedState)||(vr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,Bt.lanes|=i,bs|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $y(t){var e=no(),n=e.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do i=t(i,a.action),a=a.next;while(a!==o);So(i,e.memoizedState)||(vr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function xA(){}function wA(t,e){var n=Bt,r=no(),o=e(),i=!So(r.memoizedState,o);if(i&&(r.memoizedState=o,vr=!0),r=r.queue,Gw(CA.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,Dd(9,EA.bind(null,n,r,o,e),void 0,null),sn===null)throw Error(te(349));(ws&30)!==0||bA(n,e,o)}return o}function bA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EA(t,e,n,r){e.value=n,e.getSnapshot=r,_A(e)&&Jr(t,1,-1)}function CA(t,e,n){return n(function(){_A(e)&&Jr(t,1,-1)})}function _A(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!So(t,n)}catch{return!0}}function O_(t){var e=Fo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pd,lastRenderedState:t},e.queue=t,t=t.dispatch=RB.bind(null,Bt,t),[e.memoizedState,t]}function Dd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function SA(){return no().memoizedState}function wp(t,e,n,r){var o=Fo();Bt.flags|=t,o.memoizedState=Dd(1|e,n,void 0,r===void 0?null:r)}function Tv(t,e,n,r){var o=no();r=r===void 0?null:r;var i=void 0;if(on!==null){var a=on.memoizedState;if(i=a.destroy,r!==null&&jw(r,a.deps)){o.memoizedState=Dd(e,n,i,r);return}}Bt.flags|=t,o.memoizedState=Dd(1|e,n,i,r)}function M_(t,e){return wp(8390656,8,t,e)}function Gw(t,e){return Tv(2048,8,t,e)}function kA(t,e){return Tv(4,2,t,e)}function IA(t,e){return Tv(4,4,t,e)}function TA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function RA(t,e,n){return n=n!=null?n.concat([t]):null,Tv(4,4,TA.bind(null,e,t),n)}function Kw(){}function AA(t,e){var n=no();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function NA(t,e){var n=no();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function PA(t,e,n){return(ws&21)===0?(t.baseState&&(t.baseState=!1,vr=!0),t.memoizedState=n):(So(n,e)||(n=LR(),Bt.lanes|=n,bs|=n,t.baseState=!0),e)}function IB(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var r=My.transition;My.transition={};try{t(!1),e()}finally{ft=n,My.transition=r}}function DA(){return no().memoizedState}function TB(t,e,n){var r=va(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OA(t)?MA(e,n):(FA(t,e,n),n=rr(),t=Jr(t,r,n),t!==null&&$A(t,e,r))}function RB(t,e,n){var r=va(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OA(t))MA(e,o);else{FA(t,e,o);var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,So(s,a))return}catch{}finally{}n=rr(),t=Jr(t,r,n),t!==null&&$A(t,e,r)}}function OA(t){var e=t.alternate;return t===Bt||e!==null&&e===Bt}function MA(t,e){Zc=pm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FA(t,e,n){eN(t)?(t=e.interleaved,t===null?(n.next=n,xo===null?xo=[e]:xo.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(t=e.pending,t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function $A(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kw(t,n)}}var mm={readContext:to,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},AB={readContext:to,useCallback:function(t,e){return Fo().memoizedState=[t,e===void 0?null:e],t},useContext:to,useEffect:M_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wp(4194308,4,TA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wp(4194308,4,t,e)},useInsertionEffect:function(t,e){return wp(4,2,t,e)},useMemo:function(t,e){var n=Fo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=TB.bind(null,Bt,t),[r.memoizedState,t]},useRef:function(t){var e=Fo();return t={current:t},e.memoizedState=t},useState:O_,useDebugValue:Kw,useDeferredValue:function(t){return Fo().memoizedState=t},useTransition:function(){var t=O_(!1),e=t[0];return t=IB.bind(null,t[1]),Fo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bt,o=Fo();if(Nt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=e(),sn===null)throw Error(te(349));(ws&30)!==0||bA(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,M_(CA.bind(null,r,i,t),[t]),r.flags|=2048,Dd(9,EA.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Fo(),e=sn.identifierPrefix;if(Nt){var n=yi,r=gi;n=(r&~(1<<32-Eo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NB={readContext:to,useCallback:AA,useContext:to,useEffect:Gw,useImperativeHandle:RA,useInsertionEffect:kA,useLayoutEffect:IA,useMemo:NA,useReducer:Fy,useRef:SA,useState:function(){return Fy(Pd)},useDebugValue:Kw,useDeferredValue:function(t){var e=no();return PA(e,on.memoizedState,t)},useTransition:function(){var t=Fy(Pd)[0],e=no().memoizedState;return[t,e]},useMutableSource:xA,useSyncExternalStore:wA,useId:DA,unstable_isNewReconciler:!1},PB={readContext:to,useCallback:AA,useContext:to,useEffect:Gw,useImperativeHandle:RA,useInsertionEffect:kA,useLayoutEffect:IA,useMemo:NA,useReducer:$y,useRef:SA,useState:function(){return $y(Pd)},useDebugValue:Kw,useDeferredValue:function(t){var e=no();return on===null?e.memoizedState=t:PA(e,on.memoizedState,t)},useTransition:function(){var t=$y(Pd)[0],e=no().memoizedState;return[t,e]},useMutableSource:xA,useSyncExternalStore:wA,useId:DA,unstable_isNewReconciler:!1};function Xw(t,e){try{var n="",r=e;do n+=aL(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o}}function S1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DB=typeof WeakMap=="function"?WeakMap:Map;function LA(t,e,n){n=Ci(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gm||(gm=!0,O1=r),S1(t,e)},n}function BA(t,e,n){n=Ci(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){S1(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){S1(t,e),typeof r!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function F_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DB;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=qB.bind(null,t,e,n),e.then(t,t))}function $_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L_(t,e,n,r,o){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ci(-1,1),e.tag=2,pa(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=o,t)}var UA,k1,zA,WA;UA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};k1=function(){};zA=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,ts(qo.current);var i=null;switch(n){case"input":o=J0(t,o),r=J0(t,r),i=[];break;case"select":o=zt({},o,{value:void 0}),r=zt({},r,{value:void 0}),i=[];break;case"textarea":o=t1(t,o),r=t1(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=im)}r1(n,r);var a;n=null;for(l in o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&o[l]!=null)if(l==="style"){var s=o[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(yd.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var u=r[l];if(s=o!=null?o[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(i=i||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(yd.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&_t("scroll",t),i||s===u||(i=[])):(i=i||[]).push(l,u))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};WA=function(t,e,n,r){n!==r&&(e.flags|=4)};function gc(t,e){if(!Nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function OB(t,e,n){var r=e.pendingProps;switch(Bw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(e),null;case 1:return wr(e.type)&&am(),Un(e),null;case 3:return r=e.stateNode,al(),kt(xr),kt(Yn),Vw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(mc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,po!==null&&($1(po),po=null))),k1(t,e),Un(e),null;case 5:Ww(e);var o=ts(Ad.current);if(n=e.type,t!==null&&e.stateNode!=null)zA(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return Un(e),null}if(t=ts(qo.current),mc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Uo]=e,r[Td]=i,t=(e.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(o=0;o<$c.length;o++)_t($c[o],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":JC(r,i),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_t("invalid",r);break;case"textarea":e_(r,i),_t("invalid",r)}r1(n,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&Tf(r.textContent,s,t),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Tf(r.textContent,s,t),o=["children",""+s]):yd.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&_t("scroll",r)}switch(n){case"input":wf(r),ZC(r,i,!0);break;case"textarea":wf(r),t_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=im)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Uo]=e,t[Td]=r,UA(t,e,!1,!1),e.stateNode=t;e:{switch(a=o1(n,r),n){case"dialog":_t("cancel",t),_t("close",t),o=r;break;case"iframe":case"object":case"embed":_t("load",t),o=r;break;case"video":case"audio":for(o=0;o<$c.length;o++)_t($c[o],t);o=r;break;case"source":_t("error",t),o=r;break;case"img":case"image":case"link":_t("error",t),_t("load",t),o=r;break;case"details":_t("toggle",t),o=r;break;case"input":JC(t,r),o=J0(t,r),_t("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=zt({},r,{value:void 0}),_t("invalid",t);break;case"textarea":e_(t,r),o=t1(t,r),_t("invalid",t);break;default:o=r}r1(n,o),s=o;for(i in s)if(s.hasOwnProperty(i)){var u=s[i];i==="style"?kR(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&_R(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&xd(t,u):typeof u=="number"&&xd(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yd.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_t("scroll",t):u!=null&&ww(t,i,u,a))}switch(n){case"input":wf(t),ZC(t,r,!1);break;case"textarea":wf(t),t_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_a(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ou(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ou(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=im)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Un(e),null;case 6:if(t&&e.stateNode!=null)WA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(n=ts(Ad.current),ts(qo.current),mc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Uo]=e,(i=r.nodeValue!==n)&&(t=Mr,t!==null))switch(t.tag){case 3:Tf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tf(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Uo]=e,e.stateNode=r}return Un(e),null;case 13:if(kt(Ft),r=e.memoizedState,Nt&&fr!==null&&(e.mode&1)!==0&&(e.flags&128)===0){for(r=fr;r;)r=vi(r.nextSibling);return ol(),e.flags|=98560,e}if(r!==null&&r.dehydrated!==null){if(r=mc(e),t===null){if(!r)throw Error(te(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(te(317));r[Uo]=e}else ol(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;return Un(e),null}return po!==null&&($1(po),po=null),(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,n=!1,t===null?mc(e):n=t.memoizedState!==null,r!==n&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Ft.current&1)!==0?an===0&&(an=3):tb())),e.updateQueue!==null&&(e.flags|=4),Un(e),null);case 4:return al(),k1(t,e),t===null&&kd(e.stateNode.containerInfo),Un(e),null;case 10:return Fw(e.type._context),Un(e),null;case 17:return wr(e.type)&&am(),Un(e),null;case 19:if(kt(Ft),i=e.memoizedState,i===null)return Un(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)gc(i,!1);else{if(an!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(a=fm(t),a!==null){for(e.flags|=128,gc(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xt(Ft,Ft.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ht()>sl&&(e.flags|=128,r=!0,gc(i,!1),e.lanes=4194304)}else{if(!r)if(t=fm(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Nt)return Un(e),null}else 2*Ht()-i.renderingStartTime>sl&&n!==1073741824&&(e.flags|=128,r=!0,gc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ht(),e.sibling=null,n=Ft.current,xt(Ft,r?n&1|2:n&1),e):(Un(e),null);case 22:case 23:return eb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(Rr&1073741824)!==0&&(Un(e),e.subtreeFlags&6&&(e.flags|=8192)):Un(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}var MB=Mi.ReactCurrentOwner,vr=!1;function Jn(t,e,n,r){e.child=t===null?gA(e,null,n,r):il(e,t.child,n,r)}function B_(t,e,n,r,o){n=n.render;var i=e.ref;return Lu(e,o),r=Hw(t,e,n,r,i,o),n=qw(),t!==null&&!vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ai(t,e,o)):(Nt&&n&&Lw(e),e.flags|=1,Jn(t,e,r,o),e.child)}function U_(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!nb(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,VA(t,e,i,r,o)):(t=Cp(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,(t.lanes&o)===0){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Sd,n(a,r)&&t.ref===e.ref)return Ai(t,e,o)}return e.flags|=1,t=ka(i,r),t.ref=e.ref,t.return=e,e.child=t}function VA(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(Sd(i,r)&&t.ref===e.ref)if(vr=!1,e.pendingProps=r=i,(t.lanes&o)!==0)(t.flags&131072)!==0&&(vr=!0);else return e.lanes=t.lanes,Ai(t,e,o)}return I1(t,e,n,r,o)}function jA(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(Nu,Rr),Rr|=n;else if((n&1073741824)!==0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,xt(Nu,Rr),Rr|=r;else return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xt(Nu,Rr),Rr|=t,null;else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,xt(Nu,Rr),Rr|=r;return Jn(t,e,o,n),e.child}function HA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function I1(t,e,n,r,o){var i=wr(n)?ys:Yn.current;return i=rl(e,i),Lu(e,o),n=Hw(t,e,n,r,i,o),r=qw(),t!==null&&!vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ai(t,e,o)):(Nt&&r&&Lw(e),e.flags|=1,Jn(t,e,n,o),e.child)}function z_(t,e,n,r,o){if(wr(n)){var i=!0;sm(e)}else i=!1;if(Lu(e,o),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),fA(e,n,r),E1(e,n,r,o),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=to(l):(l=wr(n)?ys:Yn.current,l=rl(e,l));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&A_(e,a,r,l),Xi=!1;var h=e.memoizedState;a.state=h,cm(e,r,a,o),u=e.memoizedState,s!==r||h!==u||xr.current||Xi?(typeof c=="function"&&(b1(e,n,c,r),u=e.memoizedState),(s=Xi||R_(e,n,s,r,h,u,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,dA(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:co(e.type,s),a.props=l,d=e.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=to(u):(u=wr(n)?ys:Yn.current,u=rl(e,u));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==u)&&A_(e,a,r,u),Xi=!1,h=e.memoizedState,a.state=h,cm(e,r,a,o);var p=e.memoizedState;s!==d||h!==p||xr.current||Xi?(typeof f=="function"&&(b1(e,n,f,r),p=e.memoizedState),(l=Xi||R_(e,n,l,r,h,p,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return T1(t,e,n,r,i,o)}function T1(t,e,n,r,o,i){HA(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return o&&k_(e,n,!1),Ai(t,e,i);r=e.stateNode,MB.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=il(e,t.child,null,i),e.child=il(e,null,s,i)):Jn(t,e,s,i),e.memoizedState=r.state,o&&k_(e,n,!0),e.child}function qA(t){var e=t.stateNode;e.pendingContext?S_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&S_(t,e.context,!1),zw(t,e.containerInfo)}function W_(t,e,n,r,o){return ol(),Uw(o),e.flags|=256,Jn(t,e,n,r),e.child}var Af={dehydrated:null,treeContext:null,retryLane:0};function Nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function V_(t,e){return{baseLanes:t.baseLanes|e,cachePool:null,transitions:t.transitions}}function GA(t,e,n){var r=e.pendingProps,o=Ft.current,i=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(o&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),xt(Ft,o&1),t===null)return _1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wm(o,r,0,null),t=ds(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nf(n),e.memoizedState=Af,t):R1(e,o));if(o=t.memoizedState,o!==null){if(s=o.dehydrated,s!==null){if(a)return e.flags&256?(e.flags&=-257,Pf(t,e,n,Error(te(422)))):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=wm({mode:"visible",children:r.children},o,0,null),i=ds(i,o,n,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,(e.mode&1)!==0&&il(e,t.child,null,n),e.child.memoizedState=Nf(n),e.memoizedState=Af,i);if((e.mode&1)===0)e=Pf(t,e,n,null);else if(s.data==="$!")e=Pf(t,e,n,Error(te(419)));else if(r=(n&t.childLanes)!==0,vr||r){if(r=sn,r!==null){switch(n&-n){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}r=(i&(r.suspendedLanes|n))!==0?0:i,r!==0&&r!==o.retryLane&&(o.retryLane=r,Jr(t,r,-1))}tb(),e=Pf(t,e,n,Error(te(421)))}else s.data==="$?"?(e.flags|=128,e.child=t.child,e=GB.bind(null,t),s._reactRetry=e,e=null):(n=o.treeContext,fr=vi(s.nextSibling),Mr=e,Nt=!0,po=null,n!==null&&(Hr[qr++]=gi,Hr[qr++]=yi,Hr[qr++]=xs,gi=n.id,yi=n.overflow,xs=e),e=R1(e,e.pendingProps.children),e.flags|=4096);return e}return i?(r=H_(t,e,r.children,r.fallback,n),i=e.child,o=t.child.memoizedState,i.memoizedState=o===null?Nf(n):V_(o,n),i.childLanes=t.childLanes&~n,e.memoizedState=Af,r):(n=j_(t,e,r.children,n),e.memoizedState=null,n)}return i?(r=H_(t,e,r.children,r.fallback,n),i=e.child,o=t.child.memoizedState,i.memoizedState=o===null?Nf(n):V_(o,n),i.childLanes=t.childLanes&~n,e.memoizedState=Af,r):(n=j_(t,e,r.children,n),e.memoizedState=null,n)}function R1(t,e){return e=wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function j_(t,e,n,r){var o=t.child;return t=o.sibling,n=ka(o,{mode:"visible",children:n}),(e.mode&1)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n}function H_(t,e,n,r,o){var i=e.mode;t=t.child;var a=t.sibling,s={mode:"hidden",children:n};return(i&1)===0&&e.child!==t?(n=e.child,n.childLanes=0,n.pendingProps=s,e.deletions=null):(n=ka(t,s),n.subtreeFlags=t.subtreeFlags&14680064),a!==null?r=ka(a,r):(r=ds(r,i,o,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function Pf(t,e,n,r){return r!==null&&Uw(r),il(e,t.child,null,n),t=R1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function q_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),w1(t.return,e,n)}function Ly(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function KA(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(Jn(t,e,r.children,n),r=Ft.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&q_(t,n,e);else if(t.tag===19)q_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xt(Ft,r),(e.mode&1)===0)e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&fm(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Ly(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&fm(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Ly(e,!0,n,null,i);break;case"together":Ly(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bs|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,n=ka(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ka(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FB(t,e,n){switch(e.tag){case 3:qA(e),ol();break;case 5:yA(e);break;case 1:wr(e.type)&&sm(e);break;case 4:zw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;xt(um,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xt(Ft,Ft.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?GA(t,e,n):(xt(Ft,Ft.current&1),t=Ai(t,e,n),t!==null?t.sibling:null);xt(Ft,Ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return KA(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),xt(Ft,Ft.current),r)break;return null;case 22:case 23:return e.lanes=0,jA(t,e,n)}return Ai(t,e,n)}function $B(t,e){switch(Bw(e),e.tag){case 1:return wr(e.type)&&am(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return al(),kt(xr),kt(Yn),Vw(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Ww(e),null;case 13:if(kt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));ol()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(Ft),null;case 4:return al(),null;case 10:return Fw(e.type._context),null;case 22:case 23:return eb(),null;case 24:return null;default:return null}}var Df=!1,Wn=!1,LB=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Au(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(t,e,r)}else n.current=null}function A1(t,e,n){try{n()}catch(r){jt(t,e,r)}}var G_=!1;function BB(t,e){if(p1=nm,t=eA(),Dw(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,s=-1,u=-1,l=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||o!==0&&d.nodeType!==3||(s=a+o),d!==i||r!==0&&d.nodeType!==3||(u=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===o&&(s=a),h===i&&++c===r&&(u=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(m1={focusedElem:t,selectionRange:n},nm=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var p=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,y=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:co(e.type,v),y);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=e.stateNode.containerInfo;if(x.nodeType===1)x.textContent="";else if(x.nodeType===9){var w=x.body;w!=null&&(w.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(b){jt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return p=G_,G_=!1,p}function ed(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&A1(e,n,i)}o=o.next}while(o!==r)}}function Rv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function N1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function XA(t){var e=t.alternate;e!==null&&(t.alternate=null,XA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Uo],delete e[Td],delete e[y1],delete e[EB],delete e[CB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YA(t){return t.tag===5||t.tag===3||t.tag===4}function K_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function P1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=im));else if(r!==4&&(t=t.child,t!==null))for(P1(t,e,n),t=t.sibling;t!==null;)P1(t,e,n),t=t.sibling}function D1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(D1(t,e,n),t=t.sibling;t!==null;)D1(t,e,n),t=t.sibling}var En=null,ho=!1;function Vi(t,e,n){for(n=n.child;n!==null;)QA(t,e,n),n=n.sibling}function QA(t,e,n){if(Ho&&typeof Ho.onCommitFiberUnmount=="function")try{Ho.onCommitFiberUnmount(bv,n)}catch{}switch(n.tag){case 5:Wn||Au(n,e);case 6:var r=En,o=ho;En=null,Vi(t,e,n),En=r,ho=o,En!==null&&(ho?(t=En,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):En.removeChild(n.stateNode));break;case 18:En!==null&&(ho?(t=En,n=n.stateNode,t.nodeType===8?Py(t.parentNode,n):t.nodeType===1&&Py(t,n),Cd(t)):Py(En,n.stateNode));break;case 4:r=En,o=ho,En=n.stateNode.containerInfo,ho=!0,Vi(t,e,n),En=r,ho=o;break;case 0:case 11:case 14:case 15:if(!Wn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&((i&2)!==0||(i&4)!==0)&&A1(n,e,a),o=o.next}while(o!==r)}Vi(t,e,n);break;case 1:if(!Wn&&(Au(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){jt(n,e,s)}Vi(t,e,n);break;case 21:Vi(t,e,n);break;case 22:n.mode&1?(Wn=(r=Wn)||n.memoizedState!==null,Vi(t,e,n),Wn=r):Vi(t,e,n);break;default:Vi(t,e,n)}}function X_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LB),e.forEach(function(r){var o=KB.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function uo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:En=s.stateNode,ho=!1;break e;case 3:En=s.stateNode.containerInfo,ho=!0;break e;case 4:En=s.stateNode.containerInfo,ho=!0;break e}s=s.return}if(En===null)throw Error(te(160));QA(i,a,o),En=null,ho=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(l){jt(o,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JA(e,t),e=e.sibling}function JA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(uo(e,t),Oo(t),r&4){try{ed(3,t,t.return),Rv(3,t)}catch(p){jt(t,t.return,p)}try{ed(5,t,t.return)}catch(p){jt(t,t.return,p)}}break;case 1:uo(e,t),Oo(t),r&512&&n!==null&&Au(n,n.return);break;case 5:if(uo(e,t),Oo(t),r&512&&n!==null&&Au(n,n.return),t.flags&32){var o=t.stateNode;try{xd(o,"")}catch(p){jt(t,t.return,p)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&bR(o,i),o1(s,a);var l=o1(s,i);for(a=0;a<u.length;a+=2){var c=u[a],d=u[a+1];c==="style"?kR(o,d):c==="dangerouslySetInnerHTML"?_R(o,d):c==="children"?xd(o,d):ww(o,c,d,l)}switch(s){case"input":Z0(o,i);break;case"textarea":ER(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Ou(o,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Ou(o,!!i.multiple,i.defaultValue,!0):Ou(o,!!i.multiple,i.multiple?[]:"",!1))}o[Td]=i}catch(p){jt(t,t.return,p)}}break;case 6:if(uo(e,t),Oo(t),r&4){if(t.stateNode===null)throw Error(te(162));l=t.stateNode,c=t.memoizedProps;try{l.nodeValue=c}catch(p){jt(t,t.return,p)}}break;case 3:if(uo(e,t),Oo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cd(e.containerInfo)}catch(p){jt(t,t.return,p)}break;case 4:uo(e,t),Oo(t);break;case 13:uo(e,t),Oo(t),l=t.child,l.flags&8192&&l.memoizedState!==null&&(l.alternate===null||l.alternate.memoizedState===null)&&(Jw=Ht()),r&4&&X_(t);break;case 22:if(l=n!==null&&n.memoizedState!==null,t.mode&1?(Wn=(c=Wn)||l,uo(e,t),Wn=c):uo(e,t),Oo(t),r&8192){c=t.memoizedState!==null;e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{o=h.stateNode,c?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=h.stateNode,u=h.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=SR("display",a))}catch(p){jt(t,t.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(p){jt(t,t.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}if(c&&!l&&(t.mode&1)!==0)for(ge=t,t=t.child;t!==null;){for(l=ge=t;ge!==null;){switch(c=ge,d=c.child,c.tag){case 0:case 11:case 14:case 15:ed(4,c,c.return);break;case 1:if(Au(c,c.return),i=c.stateNode,typeof i.componentWillUnmount=="function"){h=c,f=c.return;try{o=h,i.props=o.memoizedProps,i.state=o.memoizedState,i.componentWillUnmount()}catch(p){jt(h,f,p)}}break;case 5:Au(c,c.return);break;case 22:if(c.memoizedState!==null){Q_(l);continue}}d!==null?(d.return=c,ge=d):Q_(l)}t=t.sibling}}break;case 19:uo(e,t),Oo(t),r&4&&X_(t);break;case 21:break;default:uo(e,t),Oo(t)}}function Oo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YA(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(xd(o,""),r.flags&=-33);var i=K_(t);D1(t,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=K_(t);P1(t,s,a);break;default:throw Error(te(161))}}catch(u){jt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UB(t,e,n){ge=t,ZA(t)}function ZA(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var o=ge,i=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||Df;if(!a){var s=o.alternate,u=s!==null&&s.memoizedState!==null||Wn;s=Df;var l=Wn;if(Df=a,(Wn=u)&&!l)for(ge=o;ge!==null;)a=ge,u=a.child,a.tag===22&&a.memoizedState!==null?J_(o):u!==null?(u.return=a,ge=u):J_(o);for(;i!==null;)ge=i,ZA(i),i=i.sibling;ge=o,Df=s,Wn=l}Y_(t)}else(o.subtreeFlags&8772)!==0&&i!==null?(i.return=o,ge=i):Y_(t)}}function Y_(t){for(;ge!==null;){var e=ge;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Wn||Rv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wn)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:co(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&T_(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}T_(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Cd(d)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(te(163))}Wn||e.flags&512&&N1(e)}catch(h){jt(e,e.return,h)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function Q_(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function J_(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rv(4,e)}catch(u){jt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(u){jt(e,o,u)}}var i=e.return;try{N1(e)}catch(u){jt(e,i,u)}break;case 5:var a=e.return;try{N1(e)}catch(u){jt(e,a,u)}}}catch(u){jt(e,e.return,u)}if(e===t){ge=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ge=s;break}ge=e.return}}var zB=Math.ceil,vm=Mi.ReactCurrentDispatcher,Yw=Mi.ReactCurrentOwner,Qr=Mi.ReactCurrentBatchConfig,rt=0,sn=null,Xt=null,Tn=0,Rr=0,Nu=Da(0),an=0,Od=null,bs=0,Av=0,Qw=0,td=null,dr=null,Jw=0,sl=1/0,fi=null,gm=!1,O1=null,ma=null,Of=!1,ia=null,ym=0,nd=0,M1=null,bp=-1,Ep=0;function rr(){return(rt&6)!==0?Ht():bp!==-1?bp:bp=Ht()}function va(t){return(t.mode&1)===0?1:(rt&2)!==0&&Tn!==0?Tn&-Tn:SB.transition!==null?(Ep===0&&(Ep=LR()),Ep):(t=ft,t!==0||(t=window.event,t=t===void 0?16:HR(t.type)),t)}function Jr(t,e,n){if(50<nd)throw nd=0,M1=null,Error(te(185));var r=Nv(t,e);return r===null?null:(gh(r,e,n),((rt&2)===0||r!==sn)&&(r===sn&&((rt&2)===0&&(Av|=e),an===4&&Ji(r,Tn)),br(r,n),e===1&&rt===0&&(t.mode&1)===0&&(sl=Ht()+500,kv&&Oa())),r)}function Nv(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function eN(t){return(sn!==null||xo!==null)&&(t.mode&1)!==0&&(rt&2)===0}function br(t,e){var n=t.callbackNode;SL(t,e);var r=tm(t,t===sn?Tn:0);if(r===0)n!==null&&o_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&o_(n),e===1)t.tag===0?_B(Z_.bind(null,t)):cA(Z_.bind(null,t)),wB(function(){rt===0&&Oa()}),n=null;else{switch(BR(r)){case 1:n=Sw;break;case 4:n=FR;break;case 16:n=em;break;case 536870912:n=$R;break;default:n=em}n=uN(n,tN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tN(t,e){if(bp=-1,Ep=0,(rt&6)!==0)throw Error(te(327));var n=t.callbackNode;if(Bu()&&t.callbackNode!==n)return null;var r=tm(t,t===sn?Tn:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=xm(t,r);else{e=r;var o=rt;rt|=2;var i=rN();(sn!==t||Tn!==e)&&(fi=null,sl=Ht()+500,cs(t,e));do try{jB();break}catch(s){nN(t,s)}while(1);Mw(),vm.current=i,rt=o,Xt!==null?e=0:(sn=null,Tn=0,e=an)}if(e!==0){if(e===2&&(o=l1(t),o!==0&&(r=o,e=F1(t,o))),e===1)throw n=Od,cs(t,0),Ji(t,r),br(t,Ht()),n;if(e===6)Ji(t,r);else{if(o=t.current.alternate,(r&30)===0&&!WB(o)&&(e=xm(t,r),e===2&&(i=l1(t),i!==0&&(r=i,e=F1(t,i))),e===1))throw n=Od,cs(t,0),Ji(t,r),br(t,Ht()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:Ka(t,dr,fi);break;case 3:if(Ji(t,r),(r&130023424)===r&&(e=Jw+500-Ht(),10<e)){if(tm(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){rr(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=g1(Ka.bind(null,t,dr,fi),e);break}Ka(t,dr,fi);break;case 4:if(Ji(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var a=31-Eo(r);i=1<<a,a=e[a],a>o&&(o=a),r&=~i}if(r=o,r=Ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zB(r/1960))-r,10<r){t.timeoutHandle=g1(Ka.bind(null,t,dr,fi),r);break}Ka(t,dr,fi);break;case 5:Ka(t,dr,fi);break;default:throw Error(te(329))}}}return br(t,Ht()),t.callbackNode===n?tN.bind(null,t):null}function F1(t,e){var n=td;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=xm(t,e),t!==2&&(e=dr,dr=n,e!==null&&$1(e)),t}function $1(t){dr===null?dr=t:dr.push.apply(dr,t)}function WB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!So(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ji(t,e){for(e&=~Qw,e&=~Av,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Eo(e),r=1<<n;t[n]=-1,e&=~r}}function Z_(t){if((rt&6)!==0)throw Error(te(327));Bu();var e=tm(t,0);if((e&1)===0)return br(t,Ht()),null;var n=xm(t,e);if(t.tag!==0&&n===2){var r=l1(t);r!==0&&(e=r,n=F1(t,r))}if(n===1)throw n=Od,cs(t,0),Ji(t,e),br(t,Ht()),n;if(n===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ka(t,dr,fi),br(t,Ht()),null}function Zw(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(sl=Ht()+500,kv&&Oa())}}function Es(t){ia!==null&&ia.tag===0&&(rt&6)===0&&Bu();var e=rt;rt|=1;var n=Qr.transition,r=ft;try{if(Qr.transition=null,ft=1,t)return t()}finally{ft=r,Qr.transition=n,rt=e,(rt&6)===0&&Oa()}}function eb(){Rr=Nu.current,kt(Nu)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xB(n)),Xt!==null)for(n=Xt.return;n!==null;){var r=n;switch(Bw(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&am();break;case 3:al(),kt(xr),kt(Yn),Vw();break;case 5:Ww(r);break;case 4:al();break;case 13:kt(Ft);break;case 19:kt(Ft);break;case 10:Fw(r.type._context);break;case 22:case 23:eb()}n=n.return}if(sn=t,Xt=t=ka(t.current,null),Tn=Rr=e,an=0,Od=null,Qw=Av=bs=0,dr=td=null,xo!==null){for(e=0;e<xo.length;e++)if(n=xo[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=o,r.next=a}n.pending=r}xo=null}return t}function nN(t,e){do{var n=Xt;try{if(Mw(),xp.current=mm,pm){for(var r=Bt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}pm=!1}if(ws=0,pn=on=Bt=null,Zc=!1,Nd=0,Yw.current=null,n===null||n.return===null){an=1,Od=e,Xt=null;break}e:{var i=t,a=n.return,s=n,u=e;if(e=Tn,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,d=c.tag;if((c.mode&1)===0&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=$_(a);if(f!==null){f.flags&=-257,L_(f,a,s,i,e),f.mode&1&&F_(i,l,e),e=f,u=l;var p=e.updateQueue;if(p===null){var v=new Set;v.add(u),e.updateQueue=v}else p.add(u);break e}else{if((e&1)===0){F_(i,l,e),tb();break e}u=Error(te(426))}}else if(Nt&&s.mode&1){var y=$_(a);if(y!==null){(y.flags&65536)===0&&(y.flags|=256),L_(y,a,s,i,e),Uw(u);break e}}i=u,an!==4&&(an=2),td===null?td=[i]:td.push(i),u=Xw(u,s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=LA(s,u,e);I_(s,m);break e;case 1:i=u;var g=s.type,x=s.stateNode;if((s.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ma===null||!ma.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=BA(s,i,e);I_(s,w);break e}}s=s.return}while(s!==null)}iN(n)}catch(b){e=b,Xt===n&&n!==null&&(Xt=n=n.return);continue}break}while(1)}function rN(){var t=vm.current;return vm.current=mm,t===null?mm:t}function tb(){(an===0||an===3||an===2)&&(an=4),sn===null||(bs&268435455)===0&&(Av&268435455)===0||Ji(sn,Tn)}function xm(t,e){var n=rt;rt|=2;var r=rN();(sn!==t||Tn!==e)&&(fi=null,cs(t,e));do try{VB();break}catch(o){nN(t,o)}while(1);if(Mw(),rt=n,vm.current=r,Xt!==null)throw Error(te(261));return sn=null,Tn=0,an}function VB(){for(;Xt!==null;)oN(Xt)}function jB(){for(;Xt!==null&&!vL();)oN(Xt)}function oN(t){var e=sN(t.alternate,t,Rr);t.memoizedProps=t.pendingProps,e===null?iN(t):Xt=e,Yw.current=null}function iN(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=OB(n,e,Rr),n!==null){Xt=n;return}}else{if(n=$B(n,e),n!==null){n.flags&=32767,Xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{an=6,Xt=null;return}}if(e=e.sibling,e!==null){Xt=e;return}Xt=e=t}while(e!==null);an===0&&(an=5)}function Ka(t,e,n){var r=ft,o=Qr.transition;try{Qr.transition=null,ft=1,HB(t,e,n,r)}finally{Qr.transition=o,ft=r}return null}function HB(t,e,n,r){do Bu();while(ia!==null);if((rt&6)!==0)throw Error(te(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(kL(t,i),t===sn&&(Xt=sn=null,Tn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Of||(Of=!0,uN(em,function(){return Bu(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=Qr.transition,Qr.transition=null;var a=ft;ft=1;var s=rt;rt|=4,Yw.current=null,BB(t,n),JA(n,t),hB(m1),nm=!!p1,m1=p1=null,t.current=n,UB(n),gL(),rt=s,ft=a,Qr.transition=i}else t.current=n;if(Of&&(Of=!1,ia=t,ym=o),i=t.pendingLanes,i===0&&(ma=null),wL(n.stateNode),br(t,Ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)r(e[n]);if(gm)throw gm=!1,t=O1,O1=null,t;return(ym&1)!==0&&t.tag!==0&&Bu(),i=t.pendingLanes,(i&1)!==0?t===M1?nd++:(nd=0,M1=t):nd=0,Oa(),null}function Bu(){if(ia!==null){var t=BR(ym),e=Qr.transition,n=ft;try{if(Qr.transition=null,ft=16>t?16:t,ia===null)var r=!1;else{if(t=ia,ia=null,ym=0,(rt&6)!==0)throw Error(te(331));var o=rt;for(rt|=4,ge=t.current;ge!==null;){var i=ge,a=i.child;if((ge.flags&16)!==0){var s=i.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(ge=l;ge!==null;){var c=ge;switch(c.tag){case 0:case 11:case 15:ed(8,c,i)}var d=c.child;if(d!==null)d.return=c,ge=d;else for(;ge!==null;){c=ge;var h=c.sibling,f=c.return;if(XA(c),c===l){ge=null;break}if(h!==null){h.return=f,ge=h;break}ge=f}}}var p=i.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ge=i}}if((i.subtreeFlags&2064)!==0&&a!==null)a.return=i,ge=a;else e:for(;ge!==null;){if(i=ge,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:ed(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,ge=m;break e}ge=i.return}}var g=t.current;for(ge=g;ge!==null;){a=ge;var x=a.child;if((a.subtreeFlags&2064)!==0&&x!==null)x.return=a,ge=x;else e:for(a=g;ge!==null;){if(s=ge,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:Rv(9,s)}}catch(b){jt(s,s.return,b)}if(s===a){ge=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,ge=w;break e}ge=s.return}}if(rt=o,Oa(),Ho&&typeof Ho.onPostCommitFiberRoot=="function")try{Ho.onPostCommitFiberRoot(bv,t)}catch{}r=!0}return r}finally{ft=n,Qr.transition=e}}return!1}function eS(t,e,n){e=Xw(n,e),e=LA(t,e,1),pa(t,e),e=rr(),t=Nv(t,1),t!==null&&(gh(t,1,e),br(t,e))}function jt(t,e,n){if(t.tag===3)eS(t,t,n);else for(;e!==null;){if(e.tag===3){eS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ma===null||!ma.has(r))){t=Xw(n,t),t=BA(e,t,1),pa(e,t),t=rr(),e=Nv(e,1),e!==null&&(gh(e,1,t),br(e,t));break}}e=e.return}}function qB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&n,sn===t&&(Tn&n)===n&&(an===4||an===3&&(Tn&130023424)===Tn&&500>Ht()-Jw?cs(t,0):Qw|=n),br(t,e)}function aN(t,e){e===0&&((t.mode&1)===0?e=1:(e=Cf,Cf<<=1,(Cf&130023424)===0&&(Cf=4194304)));var n=rr();t=Nv(t,e),t!==null&&(gh(t,e,n),br(t,n))}function GB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),aN(t,n)}function KB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),aN(t,n)}var sN;sN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xr.current)vr=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return vr=!1,FB(t,e,n);vr=(t.flags&131072)!==0}else vr=!1,Nt&&(e.flags&1048576)!==0&&pA(e,hm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var o=rl(e,Yn.current);Lu(e,n),o=Hw(null,e,r,t,o,n);var i=qw();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wr(r)?(i=!0,sm(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,$w(e),o.updater=Iv,e.stateNode=o,o._reactInternals=e,E1(e,r,t,n),e=T1(null,e,r,!0,i,n)):(e.tag=0,Nt&&i&&Lw(e),Jn(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=YB(r),t=co(r,t),o){case 0:e=I1(null,e,r,t,n);break e;case 1:e=z_(null,e,r,t,n);break e;case 11:e=B_(null,e,r,t,n);break e;case 14:e=U_(null,e,r,co(r.type,t),n);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:co(r,o),I1(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:co(r,o),z_(t,e,r,o,n);case 3:e:{if(qA(e),t===null)throw Error(te(387));r=e.pendingProps,i=e.memoizedState,o=i.element,dA(t,e),cm(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=Error(te(423)),e=W_(t,e,r,n,o);break e}else if(r!==o){o=Error(te(424)),e=W_(t,e,r,n,o);break e}else for(fr=vi(e.stateNode.containerInfo.firstChild),Mr=e,Nt=!0,po=null,n=gA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ol(),r===o){e=Ai(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return yA(e),t===null&&_1(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,a=o.children,v1(r,o)?a=null:i!==null&&v1(r,i)&&(e.flags|=32),HA(t,e),Jn(t,e,a,n),e.child;case 6:return t===null&&_1(e),null;case 13:return GA(t,e,n);case 4:return zw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=il(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:co(r,o),B_(t,e,r,o,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,a=o.value,xt(um,r._currentValue),r._currentValue=a,i!==null)if(So(i.value,a)){if(i.children===o.children&&!xr.current){e=Ai(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Ci(-1,n&-n),u.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),w1(i.return,n,e),s.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(te(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),w1(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Jn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Lu(e,n),o=to(o),r=r(o),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,o=co(r,e.pendingProps),o=co(r.type,o),U_(t,e,r,o,n);case 15:return VA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:co(r,o),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,wr(r)?(t=!0,sm(e)):t=!1,Lu(e,n),fA(e,r,o),E1(e,r,o,n),T1(null,e,r,!0,t,n);case 19:return KA(t,e,n);case 22:return jA(t,e,n)}throw Error(te(156,e.tag))};function uN(t,e){return MR(t,e)}function XB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(t,e,n,r){return new XB(t,e,n,r)}function nb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YB(t){if(typeof t=="function")return nb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ew)return 11;if(t===Cw)return 14}return 2}function ka(t,e){var n=t.alternate;return n===null?(n=Yr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cp(t,e,n,r,o,i){var a=2;if(r=t,typeof t=="function")nb(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case bu:return ds(n.children,o,i,e);case bw:a=8,o|=8;break;case K0:return t=Yr(12,n,e,o|2),t.elementType=K0,t.lanes=i,t;case X0:return t=Yr(13,n,e,o),t.elementType=X0,t.lanes=i,t;case Y0:return t=Yr(19,n,e,o),t.elementType=Y0,t.lanes=i,t;case yR:return wm(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vR:a=10;break e;case gR:a=9;break e;case Ew:a=11;break e;case Cw:a=14;break e;case Ki:a=16,r=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Yr(a,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function ds(t,e,n,r){return t=Yr(7,t,r,e),t.lanes=n,t}function wm(t,e,n,r){return t=Yr(22,t,r,e),t.elementType=yR,t.lanes=n,t.stateNode={},t}function By(t,e,n){return t=Yr(6,t,null,e),t.lanes=n,t}function Uy(t,e,n){return e=Yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QB(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=by(0),this.expirationTimes=by(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=by(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function rb(t,e,n,r,o,i,a,s,u){return t=new QB(t,e,n,s,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$w(i),t}function JB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lN(t){if(!t)return Sa;t=t._reactInternals;e:{if(zs(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var n=t.type;if(wr(n))return lA(t,n,e)}return e}function cN(t,e,n,r,o,i,a,s,u){return t=rb(n,r,!0,t,o,i,a,s,u),t.context=lN(null),n=t.current,r=rr(),o=va(n),i=Ci(r,o),i.callback=e!=null?e:null,pa(n,i),t.current.lanes=o,gh(t,o,r),br(t,r),t}function Pv(t,e,n,r){var o=e.current,i=rr(),a=va(o);return n=lN(n),e.context===null?e.context=n:e.pendingContext=n,e=Ci(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),pa(o,e),t=Jr(o,a,i),t!==null&&yp(t,o,a),a}function bm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ob(t,e){tS(t,e),(t=t.alternate)&&tS(t,e)}function ZB(){return null}var dN=typeof reportError=="function"?reportError:function(t){console.error(t)};function ib(t){this._internalRoot=t}Dv.prototype.render=ib.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Pv(t,e,null,null)};Dv.prototype.unmount=ib.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Es(function(){Pv(null,t,null,null)}),e[Ri]=null}};function Dv(t){this._internalRoot=t}Dv.prototype.unstable_scheduleHydration=function(t){if(t){var e=WR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qi.length&&e!==0&&e<Qi[n].priority;n++);Qi.splice(n,0,t),n===0&&jR(t)}};function ab(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ov(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nS(){}function eU(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var l=bm(a);i.call(l)}}var a=cN(e,r,t,0,null,!1,!1,"",nS);return t._reactRootContainer=a,t[Ri]=a.current,kd(t.nodeType===8?t.parentNode:t),Es(),a}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var l=bm(u);s.call(l)}}var u=rb(t,0,!1,null,null,!1,!1,"",nS);return t._reactRootContainer=u,t[Ri]=u.current,kd(t.nodeType===8?t.parentNode:t),Es(function(){Pv(e,u,n,r)}),u}function Mv(t,e,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var s=o;o=function(){var u=bm(a);s.call(u)}}Pv(e,a,t,o)}else a=eU(n,e,t,o,r);return bm(a)}UR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fc(e.pendingLanes);n!==0&&(kw(e,n|1),br(e,Ht()),(rt&6)===0&&(sl=Ht()+500,Oa()))}break;case 13:var r=rr();Es(function(){return Jr(t,1,r)}),ob(t,1)}};Iw=function(t){if(t.tag===13){var e=rr();Jr(t,134217728,e),ob(t,134217728)}};zR=function(t){if(t.tag===13){var e=rr(),n=va(t);Jr(t,n,e),ob(t,n)}};WR=function(){return ft};VR=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};a1=function(t,e,n){switch(e){case"input":if(Z0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=Sv(r);if(!o)throw Error(te(90));wR(r),Z0(r,o)}}}break;case"textarea":ER(t,n);break;case"select":e=n.value,e!=null&&Ou(t,!!n.multiple,e,!1)}};RR=Zw;AR=Es;var tU={usingClientEntryPoint:!1,Events:[xh,Su,Sv,IR,TR,Zw]},yc={findFiberByHostInstance:es,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nU={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DR(t),t===null?null:t.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||ZB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{bv=Mf.inject(nU),Ho=Mf}catch{}}zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tU;zr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ab(e))throw Error(te(200));return JB(t,e,null,n)};zr.createRoot=function(t,e){if(!ab(t))throw Error(te(299));var n=!1,r="",o=dN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=rb(t,1,!1,null,null,n,!1,r,o),t[Ri]=e.current,kd(t.nodeType===8?t.parentNode:t),new ib(e)};zr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=DR(e),t=t===null?null:t.stateNode,t};zr.flushSync=function(t){return Es(t)};zr.hydrate=function(t,e,n){if(!Ov(e))throw Error(te(200));return Mv(null,t,e,!0,n)};zr.hydrateRoot=function(t,e,n){if(!ab(t))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",a=dN;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=cN(e,null,t,1,n!=null?n:null,o,!1,i,a),t[Ri]=e.current,kd(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Dv(e)};zr.render=function(t,e,n){if(!Ov(e))throw Error(te(200));return Mv(null,t,e,!1,n)};zr.unmountComponentAtNode=function(t){if(!Ov(t))throw Error(te(40));return t._reactRootContainer?(Es(function(){Mv(null,null,t,!1,function(){t._reactRootContainer=null,t[Ri]=null})}),!0):!1};zr.unstable_batchedUpdates=Zw;zr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ov(n))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return Mv(t,e,n,!1,r)};zr.version="18.1.0-next-22edb9f77-20220426";function hN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hN)}catch(t){console.error(t)}}hN(),wv.exports=zr;var zy=wv.exports,rS=wv.exports;q0.createRoot=rS.createRoot,q0.hydrateRoot=rS.hydrateRoot;class xc extends yo.Component{render(){return document.title=this.props.title,this.props.component}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},rU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=t[n++];e[r++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){const i=t[n++],a=t[n++],s=t[n++],u=((o&7)<<18|(i&63)<<12|(a&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(i&63)<<6|a&63)}}return e.join("")},pN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const i=t[o],a=o+1<t.length,s=a?t[o+1]:0,u=o+2<t.length,l=u?t[o+2]:0,c=i>>2,d=(i&3)<<4|s>>4;let h=(s&15)<<2|l>>6,f=l&63;u||(f=64,a||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const i=n[t.charAt(o++)],s=o<t.length?n[t.charAt(o)]:0;++o;const l=o<t.length?n[t.charAt(o)]:64;++o;const d=o<t.length?n[t.charAt(o)]:64;if(++o,i==null||s==null||l==null||d==null)throw Error();const h=i<<2|s>>4;if(r.push(h),l!==64){const f=s<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},oU=function(t){const e=fN(t);return pN.encodeByteArray(e,!0)},mN=function(t){return oU(t).replace(/\./g,"")},iU=function(t){try{return pN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vN(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function gN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sU(){return vn().indexOf("Electron/")>=0}function xN(){const t=vn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uU(){return vn().indexOf("MSAppHost/")>=0}function lU(){return typeof indexedDB=="object"}function cU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var i;e(((i=o.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU="FirebaseError";class Ws extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=dU,Object.setPrototypeOf(this,Ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bh.prototype.create)}}class bh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,i=this.errors[e],a=i?hU(i,r):"Error",s=`${this.serviceName}: ${a} (${o}).`;return new Ws(o,s,r)}}function hU(t,e){return t.replace(fU,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const fU=/\{\$([^}]+)}/g;function pU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Em(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const i=t[o],a=e[o];if(oS(i)&&oS(a)){if(!Em(i,a))return!1}else if(i!==a)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function oS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,i]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(i)}}),e}function Bc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mU(t,e){const n=new vU(t,e);return n.subscribe.bind(n)}class vU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gU(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Wy),o.error===void 0&&(o.error=Wy),o.complete===void 0&&(o.complete=Wy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console!="undefined"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t){return t&&t._delegate?t._delegate:t}class Cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(o)return null;throw i}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wU(e))try{this.getOrInitializeService({instanceIdentifier:Xa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:o});r.resolve(i)}catch{}}}}clearInstance(e=Xa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xa){return this.instances.has(e)}getOptions(e=Xa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(i);r===s&&a.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(o,i);const a=this.instances.get(o);return a&&e(a,o),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xa){return this.component?this.component.multipleInstances?e:Xa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xU(t){return t===Xa?void 0:t}function wU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(at||(at={}));const EU={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},CU=at.INFO,_U={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},SU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=_U[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sb{constructor(e){this.name=e,this._logLevel=CU,this._logHandler=SU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const kU=(t,e)=>e.some(n=>t instanceof n);let iS,aS;function IU(){return iS||(iS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TU(){return aS||(aS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wN=new WeakMap,L1=new WeakMap,bN=new WeakMap,Vy=new WeakMap,ub=new WeakMap;function RU(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ga(t.result)),o()},a=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&wN.set(n,t)}).catch(()=>{}),ub.set(e,t),e}function AU(t){if(L1.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),o()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});L1.set(t,e)}let B1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return L1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ga(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NU(t){B1=t(B1)}function PU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jy(this),e,...n);return bN.set(r,e.sort?e.sort():[e]),ga(r)}:TU().includes(t)?function(...e){return t.apply(jy(this),e),ga(wN.get(this))}:function(...e){return ga(t.apply(jy(this),e))}}function DU(t){return typeof t=="function"?PU(t):(t instanceof IDBTransaction&&AU(t),kU(t,IU())?new Proxy(t,B1):t)}function ga(t){if(t instanceof IDBRequest)return RU(t);if(Vy.has(t))return Vy.get(t);const e=DU(t);return e!==t&&(Vy.set(t,e),ub.set(e,t)),e}const jy=t=>ub.get(t);function OU(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),s=ga(a);return r&&a.addEventListener("upgradeneeded",u=>{r(ga(a.result),u.oldVersion,u.newVersion,ga(a.transaction))}),n&&a.addEventListener("blocked",()=>n()),s.then(u=>{i&&u.addEventListener("close",()=>i()),o&&u.addEventListener("versionchange",()=>o())}).catch(()=>{}),s}const MU=["get","getKey","getAll","getAllKeys","count"],FU=["put","add","delete","clear"],Hy=new Map;function sS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hy.get(e))return Hy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=FU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||MU.includes(n)))return;const i=async function(a,...s){const u=this.transaction(a,o?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(s.shift())),(await Promise.all([l[n](...s),o&&u.done]))[0]};return Hy.set(e,i),i}NU(t=>HC(lc({},t),{get:(e,n,r)=>sS(e,n)||t.get(e,n,r),has:(e,n)=>!!sS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const U1="@firebase/app",uS="0.7.24";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=new sb("@firebase/app"),BU="@firebase/app-compat",UU="@firebase/analytics-compat",zU="@firebase/analytics",WU="@firebase/app-check-compat",VU="@firebase/app-check",jU="@firebase/auth",HU="@firebase/auth-compat",qU="@firebase/database",GU="@firebase/database-compat",KU="@firebase/functions",XU="@firebase/functions-compat",YU="@firebase/installations",QU="@firebase/installations-compat",JU="@firebase/messaging",ZU="@firebase/messaging-compat",ez="@firebase/performance",tz="@firebase/performance-compat",nz="@firebase/remote-config",rz="@firebase/remote-config-compat",oz="@firebase/storage",iz="@firebase/storage-compat",az="@firebase/firestore",sz="@firebase/firestore-compat",uz="firebase",lz="9.8.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="[DEFAULT]",cz={[U1]:"fire-core",[BU]:"fire-core-compat",[zU]:"fire-analytics",[UU]:"fire-analytics-compat",[VU]:"fire-app-check",[WU]:"fire-app-check-compat",[jU]:"fire-auth",[HU]:"fire-auth-compat",[qU]:"fire-rtdb",[GU]:"fire-rtdb-compat",[KU]:"fire-fn",[XU]:"fire-fn-compat",[YU]:"fire-iid",[QU]:"fire-iid-compat",[JU]:"fire-fcm",[ZU]:"fire-fcm-compat",[ez]:"fire-perf",[tz]:"fire-perf-compat",[nz]:"fire-rc",[rz]:"fire-rc-compat",[oz]:"fire-gcs",[iz]:"fire-gcs-compat",[az]:"fire-fst",[sz]:"fire-fst-compat","fire-js":"fire-js",[uz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=new Map,z1=new Map;function dz(t,e){try{t.container.addComponent(e)}catch(n){lb.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ul(t){const e=t.name;if(z1.has(e))return lb.debug(`There were multiple attempts to register component ${e}.`),!1;z1.set(e,t);for(const n of Cm.values())dz(n,t);return!0}function cb(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},_s=new bh("app","Firebase",hz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=lz;function pz(t,e={}){typeof e!="object"&&(e={name:e});const n=Object.assign({name:EN,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw _s.create("bad-app-name",{appName:String(r)});const o=Cm.get(r);if(o){if(Em(t,o.options)&&Em(n,o.config))return o;throw _s.create("duplicate-app",{appName:r})}const i=new bU(r);for(const s of z1.values())i.addComponent(s);const a=new fz(t,n,i);return Cm.set(r,a),a}function CN(t=EN){const e=Cm.get(t);if(!e)throw _s.create("no-app",{appName:t});return e}function ya(t,e,n){var r;let o=(r=cz[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const i=o.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${o}" with version "${e}":`];i&&s.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lb.warn(s.join(" "));return}ul(new Cs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mz="firebase-heartbeat-database",vz=1,Md="firebase-heartbeat-store";let qy=null;function _N(){return qy||(qy=OU(mz,vz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Md)}}}).catch(t=>{throw _s.create("storage-open",{originalErrorMessage:t.message})})),qy}async function gz(t){try{return(await _N()).transaction(Md).objectStore(Md).get(SN(t))}catch(e){throw _s.create("storage-get",{originalErrorMessage:e.message})}}async function lS(t,e){try{const r=(await _N()).transaction(Md,"readwrite");return await r.objectStore(Md).put(e,SN(t)),r.done}catch(n){throw _s.create("storage-set",{originalErrorMessage:n.message})}}function SN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz=1024,xz=30*24*60*60*1e3;class wz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ez(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cS();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const i=new Date(o.date).valueOf();return Date.now()-i<=xz}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cS(),{heartbeatsToSend:n,unsentEntries:r}=bz(this._heartbeatsCache.heartbeats),o=mN(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function cS(){return new Date().toISOString().substring(0,10)}function bz(t,e=yz){const n=[];let r=t.slice();for(const o of t){const i=n.find(a=>a.agent===o.agent);if(i){if(i.dates.push(o.date),dS(n)>e){i.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),dS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ez{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lU()?cU().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await gz(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return lS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return lS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function dS(t){return mN(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(t){ul(new Cs("platform-logger",e=>new $U(e),"PRIVATE")),ul(new Cs("heartbeat",e=>new wz(e),"PRIVATE")),ya(U1,uS,t),ya(U1,uS,"esm2017"),ya("fire-js","")}Cz("");var _z="firebase",Sz="9.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ya(_z,Sz,"app");function db(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function kN(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kz=kN,IN=new bh("auth","Firebase",kN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new sb("@firebase/auth");function _p(t,...e){hS.logLevel<=at.ERROR&&hS.error(`Auth (${Ch}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t,...e){throw hb(t,...e)}function Go(t,...e){return hb(t,...e)}function TN(t,e,n){const r=Object.assign(Object.assign({},kz()),{[e]:n});return new bh("auth","Firebase",r).create(e,{appName:t.name})}function Iz(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ro(t,"argument-error"),TN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hb(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return IN.create(t,...e)}function Me(t,e,...n){if(!t)throw hb(e,...n)}function xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _p(e),new Error(e)}function Ni(t,e){t||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=new Map;function wi(t){Ni(t instanceof Function,"Expected a class definition");let e=fS.get(t);return e?(Ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fS.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tz(t,e){const n=cb(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),i=n.getOptions();if(Em(i,e!=null?e:{}))return o;ro(o,"already-initialized")}return n.initialize({options:e})}function Rz(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Az(){return pS()==="http:"||pS()==="https:"}function pS(){var t;return typeof self!="undefined"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(){return typeof navigator!="undefined"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Az()||gN()||"connection"in navigator)?navigator.onLine:!0}function Pz(){if(typeof navigator=="undefined")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ni(n>e,"Short delay should be less than long delay!"),this.isMobile=vN()||yN()}get(){return Nz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t,e){Ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self!="undefined"&&"fetch"in self)return self.fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self!="undefined"&&"Headers"in self)return self.Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self!="undefined"&&"Response"in self)return self.Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=new _h(3e4,6e4);function Fl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vs(t,e,n,r,o={}){return AN(t,o,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const s=Eh(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),RN.fetch()(NN(t,t.config.apiHost,n,s),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function AN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Dz),e);try{const o=new Mz(t),i=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Gy(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const s=i.ok?a.errorMessage:a.error.message,[u,l]=s.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gy(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Gy(t,"email-already-in-use",a);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TN(t,c,l);ro(t,c)}}catch(o){if(o instanceof Ws)throw o;ro(t,"network-request-failed")}}async function Sh(t,e,n,r,o={}){const i=await Vs(t,e,n,r,o);return"mfaPendingCredential"in i&&ro(t,"multi-factor-auth-required",{_serverResponse:i}),i}function NN(t,e,n,r){const o=`${e}${n}?${r}`;return t.config.emulator?fb(t.config,o):`${t.config.apiScheme}://${o}`}class Mz{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Go(this.auth,"network-request-failed")),Oz.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gy(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Go(t,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fz(t,e){return Vs(t,"POST","/v1/accounts:delete",e)}async function $z(t,e){return Vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Lz(t,e=!1){const n=Br(t),r=await n.getIdToken(e),o=pb(r);Me(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i=typeof o.firebase=="object"?o.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:o,token:r,authTime:rd(Ky(o.auth_time)),issuedAtTime:rd(Ky(o.iat)),expirationTime:rd(Ky(o.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ky(t){return Number(t)*1e3}function pb(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _p("JWT malformed, contained fewer than 3 sections"),null;try{const o=iU(n);return o?JSON.parse(o):(_p("Failed to decode base64 JWT payload"),null)}catch(o){return _p("Caught error parsing JWT payload as JSON",o),null}}function Bz(t){const e=pb(t);return Me(e,"internal-error"),Me(typeof e.exp!="undefined","internal-error"),Me(typeof e.iat!="undefined","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ws&&Uz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Uz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rd(this.lastLoginAt),this.creationTime=rd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _m(t){var e;const n=t.auth,r=await t.getIdToken(),o=await ll(t,$z(n,{idToken:r}));Me(o==null?void 0:o.users.length,n,"internal-error");const i=o.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?jz(i.providerUserInfo):[],s=Vz(t.providerData,a),u=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),c=u?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new PN(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function Wz(t){const e=Br(t);await _m(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Vz(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function jz(t){return t.map(e=>{var{providerId:n}=e,r=db(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hz(t,e){const n=await AN(t,{},async()=>{const r=Eh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:i}=t.config,a=NN(t,o,"/v1/token",`key=${i}`),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",RN.fetch()(a,{method:"POST",headers:s,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken!="undefined","internal-error"),Me(typeof e.refreshToken!="undefined","internal-error");const n="expiresIn"in e&&typeof e.expiresIn!="undefined"?Number(e.expiresIn):Bz(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Me(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:i}=await Hz(e,n);this.updateTokensAndExpiration(r,o,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:i}=n,a=new Fd;return r&&(Me(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),o&&(Me(typeof o=="string","internal-error",{appName:e}),a.accessToken=o),i&&(Me(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fd,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t,e){Me(typeof t=="string"||typeof t=="undefined","internal-error",{appName:e})}class hs{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,i=db(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new PN(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ll(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Lz(this,e)}reload(){return Wz(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new hs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _m(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ll(this,Fz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,i,a,s,u,l,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(o=n.email)!==null&&o!==void 0?o:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,p=(a=n.photoURL)!==null&&a!==void 0?a:void 0,v=(s=n.tenantId)!==null&&s!==void 0?s:void 0,y=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,m=(l=n.createdAt)!==null&&l!==void 0?l:void 0,g=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:w,isAnonymous:b,providerData:C,stsTokenManager:E}=n;Me(x&&E,e,"internal-error");const S=Fd.fromJSON(this.name,E);Me(typeof x=="string",e,"internal-error"),ji(d,e.name),ji(h,e.name),Me(typeof w=="boolean",e,"internal-error"),Me(typeof b=="boolean",e,"internal-error"),ji(f,e.name),ji(p,e.name),ji(v,e.name),ji(y,e.name),ji(m,e.name),ji(g,e.name);const k=new hs({uid:x,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:b,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return C&&Array.isArray(C)&&(k.providerData=C.map(_=>Object.assign({},_))),y&&(k._redirectEventId=y),k}static async _fromIdTokenResponse(e,n,r=!1){const o=new Fd;o.updateFromServerResponse(n);const i=new hs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await _m(i),i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DN.type="NONE";const mS=DN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t,e,n){return`firebase:${t}:${e}:${n}`}class Uu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:i}=this.auth;this.fullUserKey=Sp(this.userKey,o.apiKey,i),this.fullPersistenceKey=Sp("persistence",o.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?hs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Uu(wi(mS),e,r);const o=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let i=o[0]||wi(mS);const a=Sp(r,e.config.apiKey,e.name);let s=null;for(const l of n)try{const c=await l._get(a);if(c){const d=hs._fromJSON(e,c);l!==i&&(s=d),i=l;break}}catch{}const u=o.filter(l=>l._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Uu(i,e,r):(i=u[0],s&&await i._set(a,s.toJSON()),await Promise.all(n.map(async l=>{if(l!==i)try{await l._remove(a)}catch{}})),new Uu(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ON(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LN(e))return"Blackberry";if(BN(e))return"Webos";if(mb(e))return"Safari";if((e.includes("chrome/")||MN(e))&&!e.includes("edge/"))return"Chrome";if($N(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ON(t=vn()){return/firefox\//i.test(t)}function mb(t=vn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MN(t=vn()){return/crios\//i.test(t)}function FN(t=vn()){return/iemobile/i.test(t)}function $N(t=vn()){return/android/i.test(t)}function LN(t=vn()){return/blackberry/i.test(t)}function BN(t=vn()){return/webos/i.test(t)}function Fv(t=vn()){return/iphone|ipad|ipod/i.test(t)}function qz(t=vn()){var e;return Fv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Gz(){return xN()&&document.documentMode===10}function UN(t=vn()){return Fv(t)||$N(t)||BN(t)||LN(t)||/windows phone/i.test(t)||FN(t)}function Kz(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e=[]){let n;switch(t){case"Browser":n=vS(vn());break;case"Worker":n=`${vS(vn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ch}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,s)=>{try{const u=e(i);a(u)}catch(u){s(u)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gS(this),this.idTokenSubscription=new gS(this),this.beforeStateQueue=new Xz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IN,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wi(n)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await Uu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let o=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,s=o==null?void 0:o._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===s)&&(u==null?void 0:u.user)&&(o=u.user,i=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(o)}catch(a){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _m(e)}catch(n){if(n.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Pz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Br(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wi(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Uu.create(this,[wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(a,this,"internal-error"),a.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,o):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function kh(t){return Br(t)}class gS{constructor(e){this.auth=e,this.observer=null,this.addObserver=mU(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}async function Qz(t,e){return Vs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(t,e){return Sh(t,"POST","/v1/accounts:signInWithPassword",Fl(t,e))}async function Zz(t,e){return Vs(t,"POST","/v1/accounts:sendOobCode",Fl(t,e))}async function e5(t,e){return Zz(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(t,e){return Sh(t,"POST","/v1/accounts:signInWithEmailLink",Fl(t,e))}async function n5(t,e){return Sh(t,"POST","/v1/accounts:signInWithEmailLink",Fl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends vb{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new $d(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $d(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Jz(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return t5(e,{email:this._email,oobCode:this._password});default:ro(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return Qz(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return n5(e,{idToken:n,email:this._email,oobCode:this._password});default:ro(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t,e){return Sh(t,"POST","/v1/accounts:signInWithIdp",Fl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="http://localhost";class Ss extends vb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ro("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,i=db(n,["providerId","signInMethod"]);if(!r||!o)return null;const a=new Ss(r,o);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return zu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zu(e,n)}buildRequest(){const e={requestUri:r5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Eh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i5(t){const e=Lc(Bc(t)).link,n=e?Lc(Bc(e)).deep_link_id:null,r=Lc(Bc(t)).deep_link_id;return(r?Lc(Bc(r)).link:null)||r||n||e||t}class gb{constructor(e){var n,r,o,i,a,s;const u=Lc(Bc(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,c=(r=u.oobCode)!==null&&r!==void 0?r:null,d=o5((o=u.mode)!==null&&o!==void 0?o:null);Me(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(s=u.tenantId)!==null&&s!==void 0?s:null}static parseLink(e){const n=i5(e);try{return new gb(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,n){return $d._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gb.parseLink(n);return Me(r,"argument-error"),$d._fromEmailAndCode(e,r.code,r.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends yb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Ih{constructor(){super("facebook.com")}static credential(e){return Ss._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ss._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zo.credential(n,r)}catch{return null}}}zo.GOOGLE_SIGN_IN_METHOD="google.com";zo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Ih{constructor(){super("github.com")}static credential(e){return Ss._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ea.credential(e.oauthAccessToken)}catch{return null}}}ea.GITHUB_SIGN_IN_METHOD="github.com";ea.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends Ih{constructor(){super("twitter.com")}static credential(e,n){return Ss._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ta.credential(n,r)}catch{return null}}}ta.TWITTER_SIGN_IN_METHOD="twitter.com";ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,e){return Sh(t,"POST","/v1/accounts:signUp",Fl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const i=await hs._fromIdTokenResponse(e,r,o),a=yS(r);return new ks({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=yS(r);return new ks({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function yS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends Ws{constructor(e,n,r,o){var i;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Sm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Sm(e,n,r,o)}}function WN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Sm._fromErrorAndOperation(t,i,e,r):i})}async function s5(t,e,n=!1){const r=await ll(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ks._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(t,e,n=!1){const{auth:r}=t,o="reauthenticate";try{const i=await ll(t,WN(r,o,e,t),n);Me(i.idToken,r,"internal-error");const a=pb(i.idToken);Me(a,r,"internal-error");const{sub:s}=a;return Me(t.uid===s,r,"user-mismatch"),ks._forOperation(t,o,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ro(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e,n=!1){const r="signIn",o=await WN(t,r,e),i=await ks._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(i.user),i}async function l5(t,e){return VN(kh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(t,e,n){var r;Me(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Me(typeof n.dynamicLinkDomain=="undefined"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Me(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Me(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e,n){const r=Br(t),o={requestType:"PASSWORD_RESET",email:e};n&&c5(r,o,n),await e5(r,o)}async function h5(t,e,n){const r=kh(t),o=await a5(r,{returnSecureToken:!0,email:e,password:n}),i=await ks._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(i.user),i}function f5(t,e,n){return l5(Br(t),$l.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p5(t,e){return Vs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Br(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await ll(r,p5(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const s=r.providerData.find(({providerId:u})=>u==="password");s&&(s.displayName=r.displayName,s.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}const km="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(km,"1"),this.storage.removeItem(km),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(){const t=vn();return mb(t)||Fv(t)}const v5=1e3,g5=10;class HN extends jN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=m5()&&Kz(),this.fallbackToPolling=UN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,s,u)=>{this.notifyListeners(a,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const o=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);Gz()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,g5):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},v5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}HN.type="LOCAL";const y5=HN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN extends jN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qN.type="SESSION";const GN=qN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){return Promise.all(t.map(async e=>{try{const n=await e;return{fulfilled:!0,value:n}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new $v(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:i}=n.data,a=this.handlersMap[o];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const s=Array.from(a).map(async l=>l(n.origin,i)),u=await x5(s);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$v.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel!="undefined"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let i,a;return new Promise((s,u)=>{const l=xb("",20);o.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(d){const h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(h.data.response);break;default:clearTimeout(c),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),o.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[o.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){return window}function b5(t){Ko().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(){return typeof Ko().WorkerGlobalScope!="undefined"&&typeof Ko().importScripts=="function"}async function E5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function C5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _5(){return KN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="firebaseLocalStorageDb",S5=1,Im="firebaseLocalStorage",YN="fbase_key";class Th{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lv(t,e){return t.transaction([Im],e?"readwrite":"readonly").objectStore(Im)}function k5(){const t=indexedDB.deleteDatabase(XN);return new Th(t).toPromise()}function V1(){const t=indexedDB.open(XN,S5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Im,{keyPath:YN})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Im)?e(r):(r.close(),await k5(),e(await V1()))})})}async function wS(t,e,n){const r=Lv(t,!0).put({[YN]:e,value:n});return new Th(r).toPromise()}async function I5(t,e){const n=Lv(t,!1).get(e),r=await new Th(n).toPromise();return r===void 0?null:r.value}function bS(t,e){const n=Lv(t,!0).delete(e);return new Th(n).toPromise()}const T5=800,R5=3;class QN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await V1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$v._getInstance(_5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await E5(),!this.activeServiceWorker)return;this.sender=new w5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||C5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await V1();return await wS(e,km,"1"),await bS(e,km),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>wS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>I5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const i=Lv(o,!1).getAll();return new Th(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:o,value:i}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(i)&&(this.notifyListeners(o,i),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),T5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QN.type="LOCAL";const A5=QN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function P5(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const i=Go("internal-error");i.customData=o,n(i)},r.type="text/javascript",r.charset="UTF-8",N5().appendChild(r)})}function D5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new _h(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t,e){return e?wi(e):(Me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb extends vb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function O5(t){return VN(t.auth,new wb(t),t.bypassAuthState)}function M5(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),u5(n,new wb(t),t.bypassAuthState)}async function F5(t){const{auth:e,user:n}=t;return Me(n,e,"internal-error"),s5(n,new wb(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n,r,o,i=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:i,error:a,type:s}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O5;case"linkViaPopup":case"linkViaRedirect":return F5;case"reauthViaPopup":case"reauthViaRedirect":return M5;default:ro(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5=new _h(2e3,1e4);async function eP(t,e,n){const r=kh(t);Iz(t,e,yb);const o=JN(r,n);return new ns(r,"signInViaPopup",e,o).executeNotNull()}class ns extends ZN{constructor(e,n,r,o,i){super(e,n,o,i),this.provider=r,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=xb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Go(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Go(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Go(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,$5.get())};e()}}ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5="pendingRedirect",kp=new Map;class B5 extends ZN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kp.get(this.auth._key());if(!e){try{const r=await U5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kp.set(this.auth._key(),e)}return this.bypassAuthState||kp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U5(t,e){const n=V5(e),r=W5(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function z5(t,e){kp.set(t._key(),e)}function W5(t){return wi(t._redirectPersistence)}function V5(t){return Sp(L5,t.config.apiKey,t.name)}async function j5(t,e,n=!1){const r=kh(t),o=JN(r,e),a=await new B5(r,o,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=10*60*1e3;class q5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tP(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Go(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ES(e))}saveEventToCache(e){this.cachedEventUids.add(ES(e)),this.lastProcessedEventTime=Date.now()}}function ES(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function G5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(t,e={}){return Vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y5=/^https?/;async function Q5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await K5(t);for(const n of e)try{if(J5(n))return}catch{}ro(t,"unauthorized-domain")}function J5(t){const e=W1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!Y5.test(n))return!1;if(X5.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=new _h(3e4,6e4);function CS(){const t=Ko().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eW(t){return new Promise((e,n)=>{var r,o,i;function a(){CS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{CS(),n(Go(t,"network-request-failed"))},timeout:Z5.get()})}if(!((o=(r=Ko().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((i=Ko().gapi)===null||i===void 0)&&i.load)a();else{const s=D5("iframefcb");return Ko()[s]=()=>{gapi.load?a():n(Go(t,"network-request-failed"))},P5(`https://apis.google.com/js/api.js?onload=${s}`).catch(u=>n(u))}}).catch(e=>{throw Ip=null,e})}let Ip=null;function tW(t){return Ip=Ip||eW(t),Ip}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=new _h(5e3,15e3),rW="__/auth/iframe",oW="emulator/auth/iframe",iW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sW(t){const e=t.config;Me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fb(e,oW):`https://${t.config.authDomain}/${rW}`,r={apiKey:e.apiKey,appName:t.name,v:Ch},o=aW.get(t.config.apiHost);o&&(r.eid=o);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Eh(r).slice(1)}`}async function uW(t){const e=await tW(t),n=Ko().gapi;return Me(n,t,"internal-error"),e.open({where:document.body,url:sW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iW,dontclear:!0},r=>new Promise(async(o,i)=>{await r.restyle({setHideOnLeave:!1});const a=Go(t,"network-request-failed"),s=Ko().setTimeout(()=>{i(a)},nW.get());function u(){Ko().clearTimeout(s),o(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cW=500,dW=600,hW="_blank",fW="http://localhost";class _S{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pW(t,e,n,r=cW,o=dW){const i=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const u=Object.assign(Object.assign({},lW),{width:r.toString(),height:o.toString(),top:i,left:a}),l=vn().toLowerCase();n&&(s=MN(l)?hW:n),ON(l)&&(e=e||fW,u.scrollbars="yes");const c=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(qz(l)&&s!=="_self")return mW(e||"",s),new _S(null);const d=window.open(e||"",s,c);Me(d,t,"popup-blocked");try{d.focus()}catch{}return new _S(d)}function mW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW="__/auth/handler",gW="emulator/auth/handler";function SS(t,e,n,r,o,i){Me(t.config.authDomain,t,"auth-domain-config-required"),Me(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ch,eventId:o};if(e instanceof yb){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",pU(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,l]of Object.entries(i||{}))a[u]=l}if(e instanceof Ih){const u=e.getScopes().filter(l=>l!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const s=a;for(const u of Object.keys(s))s[u]===void 0&&delete s[u];return`${yW(t)}?${Eh(s).slice(1)}`}function yW({config:t}){return t.emulator?fb(t,gW):`https://${t.authDomain}/${vW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="webStorageSupport";class xW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GN,this._completeRedirectFn=j5,this._overrideRedirectResult=z5}async _openPopup(e,n,r,o){var i;Ni((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=SS(e,n,r,W1(),o);return pW(e,a,xb())}async _openRedirect(e,n,r,o){return await this._originValidation(e),b5(SS(e,n,r,W1(),o)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:i}=this.eventManagers[n];return o?Promise.resolve(o):(Ni(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uW(e),r=new q5(e);return n.register("authEvent",o=>(Me(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xy,{type:Xy},o=>{var i;const a=(i=o==null?void 0:o[0])===null||i===void 0?void 0:i[Xy];a!==void 0&&n(!!a),ro(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return UN()||mb()||Fv()}}const wW=xW;var kS="@firebase/auth",IS="0.20.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{var o;e(((o=r)===null||o===void 0?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function CW(t){ul(new Cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),{apiKey:i,authDomain:a}=r.options;return((s,u)=>{Me(i&&!i.includes(":"),"invalid-api-key",{appName:s.name}),Me(!(a!=null&&a.includes(":")),"argument-error",{appName:s.name});const l={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zN(t)},c=new Yz(s,u,l);return Rz(c,n),c})(r,o)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ul(new Cs("auth-internal",e=>{const n=kh(e.getProvider("auth").getImmediate());return(r=>new bW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ya(kS,IS,EW(t)),ya(kS,IS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t=CN()){const e=cb(t,"auth");return e.isInitialized()?e.getImmediate():Tz(t,{popupRedirectResolver:wW,persistence:[A5,y5,GN]})}CW("Browser");var _W=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},xe,bb=bb||{},$e=_W||self;function Tm(){}function j1(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Rh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function SW(t){return Object.prototype.hasOwnProperty.call(t,Yy)&&t[Yy]||(t[Yy]=++kW)}var Yy="closure_uid_"+(1e9*Math.random()>>>0),kW=0;function IW(t,e,n){return t.call.apply(t.bind,arguments)}function TW(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),t.apply(e,o)}}return function(){return t.apply(e,arguments)}}function Rn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Rn=IW:Rn=TW,Rn.apply(null,arguments)}function Ff(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Mn(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,o,i){for(var a=Array(arguments.length-2),s=2;s<arguments.length;s++)a[s-2]=arguments[s];return e.prototype[o].apply(r,a)}}function Ma(){this.s=this.s,this.o=this.o}var RW=0,AW={};Ma.prototype.s=!1;Ma.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),RW!=0)){var t=SW(this);delete AW[t]}};Ma.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nP=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},rP=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,o=typeof t=="string"?t.split(""):t;for(let i=0;i<r;i++)i in o&&e.call(n,o[i],i,t)};function NW(t){e:{var e=EV;const n=t.length,r=typeof t=="string"?t.split(""):t;for(let o=0;o<n;o++)if(o in r&&e.call(void 0,r[o],o,t)){e=o;break e}e=-1}return 0>e?null:typeof t=="string"?t.charAt(e):t[e]}function TS(t){return Array.prototype.concat.apply([],arguments)}function Eb(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Rm(t){return/^[\s\xa0]*$/.test(t)}var RS=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Zn(t,e){return t.indexOf(e)!=-1}function Qy(t,e){return t<e?-1:t>e?1:0}var er;e:{var AS=$e.navigator;if(AS){var NS=AS.userAgent;if(NS){er=NS;break e}}er=""}function Cb(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function oP(t){const e={};for(const n in t)e[n]=t[n];return e}var PS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function iP(t,e){let n,r;for(let o=1;o<arguments.length;o++){r=arguments[o];for(n in r)t[n]=r[n];for(let i=0;i<PS.length;i++)n=PS[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _b(t){return _b[" "](t),t}_b[" "]=Tm;function PW(t){var e=MW;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var DW=Zn(er,"Opera"),cl=Zn(er,"Trident")||Zn(er,"MSIE"),aP=Zn(er,"Edge"),H1=aP||cl,sP=Zn(er,"Gecko")&&!(Zn(er.toLowerCase(),"webkit")&&!Zn(er,"Edge"))&&!(Zn(er,"Trident")||Zn(er,"MSIE"))&&!Zn(er,"Edge"),OW=Zn(er.toLowerCase(),"webkit")&&!Zn(er,"Edge");function uP(){var t=$e.document;return t?t.documentMode:void 0}var Am;e:{var Jy="",Zy=function(){var t=er;if(sP)return/rv:([^\);]+)(\)|;)/.exec(t);if(aP)return/Edge\/([\d\.]+)/.exec(t);if(cl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(OW)return/WebKit\/(\S+)/.exec(t);if(DW)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Zy&&(Jy=Zy?Zy[1]:""),cl){var e0=uP();if(e0!=null&&e0>parseFloat(Jy)){Am=String(e0);break e}}Am=Jy}var MW={};function FW(){return PW(function(){let t=0;const e=RS(String(Am)).split("."),n=RS("9").split("."),r=Math.max(e.length,n.length);for(let a=0;t==0&&a<r;a++){var o=e[a]||"",i=n[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o[0].length==0&&i[0].length==0)break;t=Qy(o[1].length==0?0:parseInt(o[1],10),i[1].length==0?0:parseInt(i[1],10))||Qy(o[2].length==0,i[2].length==0)||Qy(o[2],i[2]),o=o[3],i=i[3]}while(t==0)}return 0<=t})}var q1;if($e.document&&cl){var DS=uP();q1=DS||parseInt(Am,10)||void 0}else q1=void 0;var $W=q1,LW=function(){if(!$e.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{$e.addEventListener("test",Tm,e),$e.removeEventListener("test",Tm,e)}catch{}return t}();function Kn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Kn.prototype.h=function(){this.defaultPrevented=!0};function Ld(t,e){if(Kn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(sP){e:{try{_b(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:BW[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ld.Z.h.call(this)}}Mn(Ld,Kn);var BW={2:"touch",3:"pen",4:"mouse"};Ld.prototype.h=function(){Ld.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ah="closure_listenable_"+(1e6*Math.random()|0),UW=0;function zW(t,e,n,r,o){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=o,this.key=++UW,this.ca=this.fa=!1}function Bv(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Uv(t){this.src=t,this.g={},this.h=0}Uv.prototype.add=function(t,e,n,r,o){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var a=K1(t,e,r,o);return-1<a?(e=t[a],n||(e.fa=!1)):(e=new zW(e,this.src,i,!!r,o),e.fa=n,t.push(e)),e};function G1(t,e){var n=e.type;if(n in t.g){var r=t.g[n],o=nP(r,e),i;(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(Bv(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function K1(t,e,n,r){for(var o=0;o<t.length;++o){var i=t[o];if(!i.ca&&i.listener==e&&i.capture==!!n&&i.ia==r)return o}return-1}var Sb="closure_lm_"+(1e6*Math.random()|0),t0={};function lP(t,e,n,r,o){if(r&&r.once)return dP(t,e,n,r,o);if(Array.isArray(e)){for(var i=0;i<e.length;i++)lP(t,e[i],n,r,o);return null}return n=Tb(n),t&&t[Ah]?t.N(e,n,Rh(r)?!!r.capture:!!r,o):cP(t,e,n,!1,r,o)}function cP(t,e,n,r,o,i){if(!e)throw Error("Invalid event type");var a=Rh(o)?!!o.capture:!!o,s=Ib(t);if(s||(t[Sb]=s=new Uv(t)),n=s.add(e,n,r,a,i),n.proxy)return n;if(r=WW(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)LW||(o=a),o===void 0&&(o=!1),t.addEventListener(e.toString(),r,o);else if(t.attachEvent)t.attachEvent(fP(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function WW(){function t(n){return e.call(t.src,t.listener,n)}var e=VW;return t}function dP(t,e,n,r,o){if(Array.isArray(e)){for(var i=0;i<e.length;i++)dP(t,e[i],n,r,o);return null}return n=Tb(n),t&&t[Ah]?t.O(e,n,Rh(r)?!!r.capture:!!r,o):cP(t,e,n,!0,r,o)}function hP(t,e,n,r,o){if(Array.isArray(e))for(var i=0;i<e.length;i++)hP(t,e[i],n,r,o);else r=Rh(r)?!!r.capture:!!r,n=Tb(n),t&&t[Ah]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=K1(i,n,r,o),-1<n&&(Bv(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Ib(t))&&(e=t.g[e.toString()],t=-1,e&&(t=K1(e,n,r,o)),(n=-1<t?e[t]:null)&&kb(n))}function kb(t){if(typeof t!="number"&&t&&!t.ca){var e=t.src;if(e&&e[Ah])G1(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fP(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ib(e))?(G1(n,t),n.h==0&&(n.src=null,e[Sb]=null)):Bv(t)}}}function fP(t){return t in t0?t0[t]:t0[t]="on"+t}function VW(t,e){if(t.ca)t=!0;else{e=new Ld(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&kb(t),t=n.call(r,e)}return t}function Ib(t){return t=t[Sb],t instanceof Uv?t:null}var n0="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tb(t){return typeof t=="function"?t:(t[n0]||(t[n0]=function(e){return t.handleEvent(e)}),t[n0])}function gn(){Ma.call(this),this.i=new Uv(this),this.P=this,this.I=null}Mn(gn,Ma);gn.prototype[Ah]=!0;gn.prototype.removeEventListener=function(t,e,n,r){hP(this,t,e,n,r)};function An(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Kn(e,t);else if(e instanceof Kn)e.target=e.target||t;else{var o=e;e=new Kn(r,t),iP(e,o)}if(o=!0,n)for(var i=n.length-1;0<=i;i--){var a=e.g=n[i];o=$f(a,r,!0,e)&&o}if(a=e.g=t,o=$f(a,r,!0,e)&&o,o=$f(a,r,!1,e)&&o,n)for(i=0;i<n.length;i++)a=e.g=n[i],o=$f(a,r,!1,e)&&o}gn.prototype.M=function(){if(gn.Z.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bv(n[r]);delete t.g[e],t.h--}}this.I=null};gn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};gn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function $f(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var o=!0,i=0;i<e.length;++i){var a=e[i];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&G1(t.i,a),o=s.call(u,r)!==!1&&o}}return o&&!r.defaultPrevented}var Rb=$e.JSON.stringify;function jW(){var t=mP;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class HW{constructor(){this.h=this.g=null}add(e,n){const r=pP.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var pP=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new qW,t=>t.reset());class qW{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function GW(t){$e.setTimeout(()=>{throw t},0)}function Ab(t,e){X1||KW(),Y1||(X1(),Y1=!0),mP.add(t,e)}var X1;function KW(){var t=$e.Promise.resolve(void 0);X1=function(){t.then(XW)}}var Y1=!1,mP=new HW;function XW(){for(var t;t=jW();){try{t.h.call(t.g)}catch(n){GW(n)}var e=pP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Y1=!1}function zv(t,e){gn.call(this),this.h=t||1,this.g=e||$e,this.j=Rn(this.kb,this),this.l=Date.now()}Mn(zv,gn);xe=zv.prototype;xe.da=!1;xe.S=null;xe.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),An(this,"tick"),this.da&&(Nb(this),this.start()))}};xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Nb(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}xe.M=function(){zv.Z.M.call(this),Nb(this),delete this.g};function Pb(t,e,n){if(typeof t=="function")n&&(t=Rn(t,n));else if(t&&typeof t.handleEvent=="function")t=Rn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:$e.setTimeout(t,e||0)}function vP(t){t.g=Pb(()=>{t.g=null,t.i&&(t.i=!1,vP(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class YW extends Ma{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vP(this)}M(){super.M(),this.g&&($e.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bd(t){Ma.call(this),this.h=t,this.g={}}Mn(Bd,Ma);var OS=[];function gP(t,e,n,r){Array.isArray(n)||(n&&(OS[0]=n.toString()),n=OS);for(var o=0;o<n.length;o++){var i=lP(e,n[o],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function yP(t){Cb(t.g,function(e,n){this.g.hasOwnProperty(n)&&kb(e)},t),t.g={}}Bd.prototype.M=function(){Bd.Z.M.call(this),yP(this)};Bd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Wv(){this.g=!0}Wv.prototype.Aa=function(){this.g=!1};function QW(t,e,n,r,o,i){t.info(function(){if(t.g)if(i)for(var a="",s=i.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var d=c.split("_");a=2<=d.length&&d[1]=="type"?a+(c+"="+l+"&"):a+(c+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+`
`+n+`
`+a})}function JW(t,e,n,r,o,i,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+`
`+n+`
`+i+" "+a})}function Pu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+eV(t,n)+(r?" "+r:"")})}function ZW(t,e){t.info(function(){return"TIMEOUT: "+e})}Wv.prototype.info=function(){};function eV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var i=o[0];if(i!="noop"&&i!="stop"&&i!="close")for(var a=1;a<o.length;a++)o[a]=""}}}}return Rb(n)}catch{return e}}var js={},MS=null;function Vv(){return MS=MS||new gn}js.Ma="serverreachability";function xP(t){Kn.call(this,js.Ma,t)}Mn(xP,Kn);function Ud(t){const e=Vv();An(e,new xP(e,t))}js.STAT_EVENT="statevent";function wP(t,e){Kn.call(this,js.STAT_EVENT,t),this.stat=e}Mn(wP,Kn);function nr(t){const e=Vv();An(e,new wP(e,t))}js.Na="timingevent";function bP(t,e){Kn.call(this,js.Na,t),this.size=e}Mn(bP,Kn);function Nh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return $e.setTimeout(function(){t()},e)}var jv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},EP={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Db(){}Db.prototype.h=null;function FS(t){return t.h||(t.h=t.i())}function CP(){}var Ph={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ob(){Kn.call(this,"d")}Mn(Ob,Kn);function Mb(){Kn.call(this,"c")}Mn(Mb,Kn);var Q1;function Hv(){}Mn(Hv,Db);Hv.prototype.g=function(){return new XMLHttpRequest};Hv.prototype.i=function(){return{}};Q1=new Hv;function Dh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Bd(this),this.P=tV,t=H1?125:void 0,this.W=new zv(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _P}function _P(){this.i=null,this.g="",this.h=!1}var tV=45e3,J1={},Nm={};xe=Dh.prototype;xe.setTimeout=function(t){this.P=t};function Z1(t,e,n){t.K=1,t.v=Gv(Pi(e)),t.s=n,t.U=!0,SP(t,null)}function SP(t,e){t.F=Date.now(),Oh(t),t.A=Pi(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),PP(n.h,"t",r),t.C=0,n=t.l.H,t.h=new _P,t.g=JP(t.l,n?e:null,!t.s),0<t.O&&(t.L=new YW(Rn(t.Ia,t,t.g),t.O)),gP(t.V,t.g,"readystatechange",t.gb),e=t.H?oP(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ud(1),QW(t.j,t.u,t.A,t.m,t.X,t.s)}xe.gb=function(t){t=t.target;const e=this.L;e&&bi(t)==3?e.l():this.Ia(t)};xe.Ia=function(t){try{if(t==this.g)e:{const c=bi(this.g);var e=this.g.Da();const d=this.g.ba();if(!(3>c)&&(c!=3||H1||this.g&&(this.h.h||this.g.ga()||US(this.g)))){this.I||c!=4||e==7||(e==8||0>=d?Ud(3):Ud(2)),qv(this);var n=this.g.ba();this.N=n;t:if(kP(this)){var r=US(this.g);t="";var o=r.length,i=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){rs(this),od(this);var a="";break t}this.h.i=new $e.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==o-1});r.splice(0,o),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=n==200,JW(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var s,u=this.g;if((s=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rm(s)){var l=s;break t}}l=null}if(n=l)Pu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ex(this,n);else{this.i=!1,this.o=3,nr(12),rs(this),od(this);break e}}this.U?(IP(this,c,a),H1&&this.i&&c==3&&(gP(this.V,this.W,"tick",this.fb),this.W.start())):(Pu(this.j,this.m,a,null),ex(this,a)),c==4&&rs(this),this.i&&!this.I&&(c==4?KP(this.l,this):(this.i=!1,Oh(this)))}else n==400&&0<a.indexOf("Unknown SID")?(this.o=3,nr(12)):(this.o=0,nr(13)),rs(this),od(this)}}}catch{}finally{}};function kP(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Ba:!1}function IP(t,e,n){let r=!0,o;for(;!t.I&&t.C<n.length;)if(o=nV(t,n),o==Nm){e==4&&(t.o=4,nr(14),r=!1),Pu(t.j,t.m,null,"[Incomplete Response]");break}else if(o==J1){t.o=4,nr(15),Pu(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Pu(t.j,t.m,o,null),ex(t,o);kP(t)&&o!=Nm&&o!=J1&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,nr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,e=t.l,e.g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),jb(e),e.L=!0,nr(11))):(Pu(t.j,t.m,n,"[Invalid Chunked Response]"),rs(t),od(t))}xe.fb=function(){if(this.g){var t=bi(this.g),e=this.g.ga();this.C<e.length&&(qv(this),IP(this,t,e),this.i&&t!=4&&Oh(this))}};function nV(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Nm:(n=Number(e.substring(n,r)),isNaN(n)?J1:(r+=1,r+n>e.length?Nm:(e=e.substr(r,n),t.C=r+n,e)))}xe.cancel=function(){this.I=!0,rs(this)};function Oh(t){t.Y=Date.now()+t.P,TP(t,t.P)}function TP(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Nh(Rn(t.eb,t),e)}function qv(t){t.B&&($e.clearTimeout(t.B),t.B=null)}xe.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(ZW(this.j,this.A),this.K!=2&&(Ud(3),nr(17)),rs(this),this.o=2,od(this)):TP(this,this.Y-t)};function od(t){t.l.G==0||t.I||KP(t.l,t)}function rs(t){qv(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Nb(t.W),yP(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function ex(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||tx(n.i,t))){if(n.I=t.N,!t.J&&tx(n.i,t)&&n.G==3){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var o=r;if(o[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Mm(n),Yv(n);else break e;Vb(n),nr(18)}}else n.ta=o[1],0<n.ta-n.U&&37500>o[2]&&n.N&&n.A==0&&!n.v&&(n.v=Nh(Rn(n.ab,n),6e3));if(1>=MP(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else os(n,11)}else if((t.J||n.g==t)&&Mm(n),!Rm(e))for(o=n.Ca.g.parse(e),e=0;e<o.length;e++){let l=o[e];if(n.U=l[0],l=l[1],n.G==2)if(l[0]=="c"){n.J=l[1],n.la=l[2];const c=l[3];c!=null&&(n.ma=c,n.h.info("VER="+n.ma));const d=l[4];d!=null&&(n.za=d,n.h.info("SVER="+n.za));const h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var i=r.i;!i.g&&(Zn(p,"spdy")||Zn(p,"quic")||Zn(p,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(Lb(i,i.h),i.h=null))}if(r.D){const v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.sa=v,Pt(r.F,r.D,v))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var a=t;if(r.oa=QP(r,r.H?r.la:null,r.W),a.J){FP(r.i,a);var s=a,u=r.K;u&&s.setTimeout(u),s.B&&(qv(s),Oh(s)),r.g=a}else qP(r);0<n.l.length&&Qv(n)}else l[0]!="stop"&&l[0]!="close"||os(n,7);else n.G==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?os(n,7):Wb(n):l[0]!="noop"&&n.j&&n.j.wa(l),n.A=0)}}Ud(4)}catch{}}function rV(t){if(t.R&&typeof t.R=="function")return t.R();if(typeof t=="string")return t.split("");if(j1(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Fb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(j1(t)||typeof t=="string")rP(t,e,void 0);else{if(t.T&&typeof t.T=="function")var n=t.T();else if(t.R&&typeof t.R=="function")n=void 0;else if(j1(t)||typeof t=="string"){n=[];for(var r=t.length,o=0;o<r;o++)n.push(o)}else for(o in n=[],r=0,t)n[r++]=o;r=rV(t),o=r.length;for(var i=0;i<o;i++)e.call(void 0,r[i],n&&n[i],t)}}function Ll(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ll)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}xe=Ll.prototype;xe.R=function(){$b(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t};xe.T=function(){return $b(this),this.g.concat()};function $b(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Is(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var o={};for(n=e=0;e<t.g.length;)r=t.g[e],Is(o,r)||(t.g[n++]=r,o[r]=1),e++;t.g.length=n}}xe.get=function(t,e){return Is(this.h,t)?this.h[t]:e};xe.set=function(t,e){Is(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e};xe.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var o=n[r],i=this.get(o);t.call(e,i,o,this)}};function Is(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var RP=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function oV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),o=null;if(0<=r){var i=t[n].substring(0,r);o=t[n].substring(r+1)}else i=t[n];e(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}function Ts(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Ts){this.g=e!==void 0?e:t.g,Pm(this,t.j),this.s=t.s,Dm(this,t.i),Om(this,t.m),this.l=t.l,e=t.h;var n=new zd;n.i=e.i,e.g&&(n.g=new Ll(e.g),n.h=e.h),$S(this,n),this.o=t.o}else t&&(n=String(t).match(RP))?(this.g=!!e,Pm(this,n[1]||"",!0),this.s=id(n[2]||""),Dm(this,n[3]||"",!0),Om(this,n[4]),this.l=id(n[5]||"",!0),$S(this,n[6]||"",!0),this.o=id(n[7]||"")):(this.g=!!e,this.h=new zd(null,this.g))}Ts.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Uc(e,LS,!0),":");var n=this.i;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Uc(e,LS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&t.push("/"),t.push(Uc(n,n.charAt(0)=="/"?lV:uV,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Uc(n,dV)),t.join("")};function Pi(t){return new Ts(t)}function Pm(t,e,n){t.j=n?id(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Dm(t,e,n){t.i=n?id(e,!0):e}function Om(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function $S(t,e,n){e instanceof zd?(t.h=e,hV(t.h,t.g)):(n||(e=Uc(e,cV)),t.h=new zd(e,t.g))}function Pt(t,e,n){t.h.set(e,n)}function Gv(t){return Pt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function iV(t){return t instanceof Ts?Pi(t):new Ts(t,void 0)}function aV(t,e,n,r){var o=new Ts(null,void 0);return t&&Pm(o,t),e&&Dm(o,e),n&&Om(o,n),r&&(o.l=r),o}function id(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Uc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,sV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var LS=/[#\/\?@]/g,uV=/[#\?:]/g,lV=/[#\?]/g,cV=/[#\?@]/g,dV=/#/g;function zd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Fa(t){t.g||(t.g=new Ll,t.h=0,t.i&&oV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}xe=zd.prototype;xe.add=function(t,e){Fa(this),this.i=null,t=Bl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function AP(t,e){Fa(t),e=Bl(t,e),Is(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,t=t.g,Is(t.h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&$b(t)))}function NP(t,e){return Fa(t),e=Bl(t,e),Is(t.g.h,e)}xe.forEach=function(t,e){Fa(this),this.g.forEach(function(n,r){rP(n,function(o){t.call(e,o,r,this)},this)},this)};xe.T=function(){Fa(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var o=t[r],i=0;i<o.length;i++)n.push(e[r]);return n};xe.R=function(t){Fa(this);var e=[];if(typeof t=="string")NP(this,t)&&(e=TS(e,this.g.get(Bl(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=TS(e,t[n])}return e};xe.set=function(t,e){return Fa(this),this.i=null,t=Bl(this,t),NP(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};xe.get=function(t,e){return t?(t=this.R(t),0<t.length?String(t[0]):e):e};function PP(t,e,n){AP(t,e),0<n.length&&(t.i=null,t.g.set(Bl(t,e),Eb(n)),t.h+=n.length)}xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],o=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var a=o;r[i]!==""&&(a+="="+encodeURIComponent(String(r[i]))),t.push(a)}}return this.i=t.join("&")};function Bl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function hV(t,e){e&&!t.j&&(Fa(t),t.i=null,t.g.forEach(function(n,r){var o=r.toLowerCase();r!=o&&(AP(this,r),PP(this,o,n))},t)),t.j=e}var fV=class{constructor(t,e){this.h=t,this.g=e}};function DP(t){this.l=t||pV,$e.PerformanceNavigationTiming?(t=$e.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!($e.g&&$e.g.Ea&&$e.g.Ea()&&$e.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pV=10;function OP(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function MP(t){return t.h?1:t.g?t.g.size:0}function tx(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Lb(t,e){t.g?t.g.add(e):t.h=e}function FP(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}DP.prototype.cancel=function(){if(this.i=$P(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function $P(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Eb(t.i)}function Bb(){}Bb.prototype.stringify=function(t){return $e.JSON.stringify(t,void 0)};Bb.prototype.parse=function(t){return $e.JSON.parse(t,void 0)};function mV(){this.g=new Bb}function vV(t,e,n){const r=n||"";try{Fb(t,function(o,i){let a=o;Rh(o)&&(a=Rb(o)),e.push(r+i+"="+encodeURIComponent(a))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function gV(t,e){const n=new Wv;if($e.Image){const r=new Image;r.onload=Ff(Lf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ff(Lf,n,r,"TestLoadImage: error",!1,e),r.onabort=Ff(Lf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ff(Lf,n,r,"TestLoadImage: timeout",!1,e),$e.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Lf(t,e,n,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Mh(t){this.l=t.$b||null,this.j=t.ib||!1}Mn(Mh,Db);Mh.prototype.g=function(){return new Kv(this.l,this.j)};Mh.prototype.i=function(t){return function(){return t}}({});function Kv(t,e){gn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ub,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mn(Kv,gn);var Ub=0;xe=Kv.prototype;xe.open=function(t,e){if(this.readyState!=Ub)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wd(this)};xe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||$e).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))};xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fh(this)),this.readyState=Ub};xe.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wd(this)),this.g&&(this.readyState=3,Wd(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof $e.ReadableStream!="undefined"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;LP(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))};function LP(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}xe.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Fh(this):Wd(this),this.readyState==3&&LP(this)}};xe.Ua=function(t){this.g&&(this.response=this.responseText=t,Fh(this))};xe.Ta=function(t){this.g&&(this.response=t,Fh(this))};xe.ha=function(){this.g&&Fh(this)};function Fh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wd(t)}xe.setRequestHeader=function(t,e){this.v.append(t,e)};xe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};xe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Wd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Kv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var yV=$e.JSON.parse;function Zt(t){gn.call(this),this.headers=new Ll,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=BP,this.K=this.L=!1}Mn(Zt,gn);var BP="",xV=/^https?$/i,wV=["POST","PUT"];xe=Zt.prototype;xe.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Q1.g(),this.C=this.u?FS(this.u):FS(Q1),this.g.onreadystatechange=Rn(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){BS(this,i);return}t=n||"";const o=new Ll(this.headers);r&&Fb(r,function(i,a){o.set(a,i)}),r=NW(o.T()),n=$e.FormData&&t instanceof $e.FormData,!(0<=nP(wV,e))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(i,a){this.g.setRequestHeader(a,i)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{WP(this),0<this.B&&((this.K=bV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rn(this.pa,this)):this.A=Pb(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){BS(this,i)}};function bV(t){return cl&&FW()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}function EV(t){return t.toLowerCase()=="content-type"}xe.pa=function(){typeof bb!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,An(this,"timeout"),this.abort(8))};function BS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,UP(t),Xv(t)}function UP(t){t.D||(t.D=!0,An(t,"complete"),An(t,"error"))}xe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,An(this,"complete"),An(this,"abort"),Xv(this))};xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xv(this,!0)),Zt.Z.M.call(this)};xe.Fa=function(){this.s||(this.F||this.v||this.l?zP(this):this.cb())};xe.cb=function(){zP(this)};function zP(t){if(t.h&&typeof bb!="undefined"&&(!t.C[1]||bi(t)!=4||t.ba()!=2)){if(t.v&&bi(t)==4)Pb(t.Fa,0,t);else if(An(t,"readystatechange"),bi(t)==4){t.h=!1;try{const s=t.ba();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var o=String(t.H).match(RP)[1]||null;if(!o&&$e.self&&$e.self.location){var i=$e.self.location.protocol;o=i.substr(0,i.length-1)}r=!xV.test(o?o.toLowerCase():"")}n=r}if(n)An(t,"complete"),An(t,"success");else{t.m=6;try{var a=2<bi(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.ba()+"]",UP(t)}}finally{Xv(t)}}}}function Xv(t,e){if(t.g){WP(t);const n=t.g,r=t.C[0]?Tm:null;t.g=null,t.C=null,e||An(t,"ready");try{n.onreadystatechange=r}catch{}}}function WP(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&($e.clearTimeout(t.A),t.A=null)}function bi(t){return t.g?t.g.readyState:0}xe.ba=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}};xe.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};xe.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),yV(e)}};function US(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case BP:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}xe.Da=function(){return this.m};xe.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function CV(t){let e="";return Cb(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function zb(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=CV(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Pt(t,e,n))}function bc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function VP(t){this.za=0,this.l=[],this.h=new Wv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bc("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bc("baseRetryDelayMs",5e3,t),this.$a=bc("retryDelaySeedMs",1e4,t),this.Ya=bc("forwardChannelMaxRetries",2,t),this.ra=bc("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new DP(t&&t.concurrentRequestLimit),this.Ca=new mV,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||t.Xb!==!1}xe=VP.prototype;xe.ma=8;xe.G=1;function Wb(t){if(jP(t),t.G==3){var e=t.V++,n=Pi(t.F);Pt(n,"SID",t.J),Pt(n,"RID",e),Pt(n,"TYPE","terminate"),$h(t,n),e=new Dh(t,t.h,e,void 0),e.K=2,e.v=Gv(Pi(n)),n=!1,$e.navigator&&$e.navigator.sendBeacon&&(n=$e.navigator.sendBeacon(e.v.toString(),"")),!n&&$e.Image&&(new Image().src=e.v,n=!0),n||(e.g=JP(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Oh(e)}YP(t)}xe.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}};function Yv(t){t.g&&(jb(t),t.g.cancel(),t.g=null)}function jP(t){Yv(t),t.u&&($e.clearTimeout(t.u),t.u=null),Mm(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&$e.clearTimeout(t.m),t.m=null)}function r0(t,e){t.l.push(new fV(t.Za++,e)),t.G==3&&Qv(t)}function Qv(t){OP(t.i)||t.m||(t.m=!0,Ab(t.Ha,t),t.C=0)}function _V(t,e){return MP(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.l=e.D.concat(t.l),!0):t.G==1||t.G==2||t.C>=(t.Xa?0:t.Ya)?!1:(t.m=Nh(Rn(t.Ha,t,e),XP(t,t.C)),t.C++,!0)}xe.Ha=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const o=new Dh(this,this.h,t,void 0);let i=this.s;if(this.P&&(i?(i=oP(i),iP(i,this.P)):i=this.P),this.o===null&&(o.H=i),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){t:{var r=this.l[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=HP(this,o,e),n=Pi(this.F),Pt(n,"RID",t),Pt(n,"CVER",22),this.D&&Pt(n,"X-HTTP-Session-Id",this.D),$h(this,n),this.o&&i&&zb(n,this.o,i),Lb(this.i,o),this.Ra&&Pt(n,"TYPE","init"),this.ja?(Pt(n,"$req",e),Pt(n,"SID","null"),o.$=!0,Z1(o,n,null)):Z1(o,n,e),this.G=2}}else this.G==3&&(t?zS(this,t):this.l.length==0||OP(this.i)||zS(this))};function zS(t,e){var n;e?n=e.m:n=t.V++;const r=Pi(t.F);Pt(r,"SID",t.J),Pt(r,"RID",n),Pt(r,"AID",t.U),$h(t,r),t.o&&t.s&&zb(r,t.o,t.s),n=new Dh(t,t.h,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=HP(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Lb(t.i,n),Z1(n,r,e)}function $h(t,e){t.j&&Fb({},function(n,r){Pt(e,r,n)})}function HP(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Rn(t.j.Oa,t.j,t):null;e:{var o=t.l;let i=-1;for(;;){const a=["count="+n];i==-1?0<n?(i=o[0].h,a.push("ofs="+i)):i=0:a.push("ofs="+i);let s=!0;for(let u=0;u<n;u++){let l=o[u].h;const c=o[u].g;if(l-=i,0>l)i=Math.max(0,o[u].h-100),s=!1;else try{vV(c,a,"req"+l+"_")}catch{r&&r(c)}}if(s){r=a.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function qP(t){t.g||t.u||(t.Y=1,Ab(t.Ga,t),t.A=0)}function Vb(t){return t.g||t.u||3<=t.A?!1:(t.Y++,t.u=Nh(Rn(t.Ga,t),XP(t,t.A)),t.A++,!0)}xe.Ga=function(){if(this.u=null,GP(this),this.$&&!(this.L||this.g==null||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Nh(Rn(this.bb,this),t)}};xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,nr(10),Yv(this),GP(this))};function jb(t){t.B!=null&&($e.clearTimeout(t.B),t.B=null)}function GP(t){t.g=new Dh(t,t.h,"rpc",t.Y),t.o===null&&(t.g.H=t.s),t.g.O=0;var e=Pi(t.oa);Pt(e,"RID","rpc"),Pt(e,"SID",t.J),Pt(e,"CI",t.N?"0":"1"),Pt(e,"AID",t.U),$h(t,e),Pt(e,"TYPE","xmlhttp"),t.o&&t.s&&zb(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Gv(Pi(e)),n.s=null,n.U=!0,SP(n,t)}xe.ab=function(){this.v!=null&&(this.v=null,Yv(this),Vb(this),nr(19))};function Mm(t){t.v!=null&&($e.clearTimeout(t.v),t.v=null)}function KP(t,e){var n=null;if(t.g==e){Mm(t),jb(t),t.g=null;var r=2}else if(tx(t.i,e))n=e.D,FP(t.i,e),r=1;else return;if(t.I=e.N,t.G!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var o=t.C;r=Vv(),An(r,new bP(r,n,e,o)),Qv(t)}else qP(t);else if(o=e.o,o==3||o==0&&0<t.I||!(r==1&&_V(t,e)||r==2&&Vb(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),o){case 1:os(t,5);break;case 4:os(t,10);break;case 3:os(t,6);break;default:os(t,2)}}}function XP(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function os(t,e){if(t.h.info("Error code "+e),e==2){var n=null;t.j&&(n=null);var r=Rn(t.jb,t);n||(n=new Ts("//www.google.com/images/cleardot.gif"),$e.location&&$e.location.protocol=="http"||Pm(n,"https"),Gv(n)),gV(n.toString(),r)}else nr(2);t.G=0,t.j&&t.j.va(e),YP(t),jP(t)}xe.jb=function(t){t?(this.h.info("Successfully pinged google.com"),nr(2)):(this.h.info("Failed to ping google.com"),nr(1))};function YP(t){t.G=0,t.I=-1,t.j&&(($P(t.i).length!=0||t.l.length!=0)&&(t.i.i.length=0,Eb(t.l),t.l.length=0),t.j.ua())}function QP(t,e,n){let r=iV(n);if(r.i!="")e&&Dm(r,e+"."+r.i),Om(r,r.m);else{const o=$e.location;r=aV(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,n)}return t.aa&&Cb(t.aa,function(o,i){Pt(r,i,o)}),e=t.D,n=t.sa,e&&n&&Pt(r,e,n),Pt(r,"VER",t.ma),$h(t,r),r}function JP(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ba&&!t.qa?new Zt(new Mh({ib:!0})):new Zt(t.qa),e.L=t.H,e}function ZP(){}xe=ZP.prototype;xe.xa=function(){};xe.wa=function(){};xe.va=function(){};xe.ua=function(){};xe.Oa=function(){};function Fm(){if(cl&&!(10<=Number($W)))throw Error("Environmental error: no available transport.")}Fm.prototype.g=function(t,e){return new Ur(t,e)};function Ur(t,e){gn.call(this),this.g=new VP(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Rm(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rm(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ul(this)}Mn(Ur,gn);Ur.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ab(Rn(t.hb,t,e))),nr(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=QP(t,null,t.W),Qv(t)};Ur.prototype.close=function(){Wb(this.g)};Ur.prototype.u=function(t){if(typeof t=="string"){var e={};e.__data__=t,r0(this.g,e)}else this.v?(e={},e.__data__=Rb(t),r0(this.g,e)):r0(this.g,t)};Ur.prototype.M=function(){this.g.j=null,delete this.j,Wb(this.g),delete this.g,Ur.Z.M.call(this)};function eD(t){Ob.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Mn(eD,Ob);function tD(){Mb.call(this),this.status=1}Mn(tD,Mb);function Ul(t){this.g=t}Mn(Ul,ZP);Ul.prototype.xa=function(){An(this.g,"a")};Ul.prototype.wa=function(t){An(this.g,new eD(t))};Ul.prototype.va=function(t){An(this.g,new tD(t))};Ul.prototype.ua=function(){An(this.g,"b")};Fm.prototype.createWebChannel=Fm.prototype.g;Ur.prototype.send=Ur.prototype.u;Ur.prototype.open=Ur.prototype.m;Ur.prototype.close=Ur.prototype.close;jv.NO_ERROR=0;jv.TIMEOUT=8;jv.HTTP_ERROR=6;EP.COMPLETE="complete";CP.EventType=Ph;Ph.OPEN="a";Ph.CLOSE="b";Ph.ERROR="c";Ph.MESSAGE="d";gn.prototype.listen=gn.prototype.N;Zt.prototype.listenOnce=Zt.prototype.O;Zt.prototype.getLastError=Zt.prototype.La;Zt.prototype.getLastErrorCode=Zt.prototype.Da;Zt.prototype.getStatus=Zt.prototype.ba;Zt.prototype.getResponseJson=Zt.prototype.Qa;Zt.prototype.getResponseText=Zt.prototype.ga;Zt.prototype.send=Zt.prototype.ea;var SV=function(){return new Fm},kV=function(){return Vv()},o0=jv,IV=EP,TV=js,WS={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},RV=Mh,Bf=CP,AV=Zt;const VS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ur.UNAUTHENTICATED=new ur(null),ur.GOOGLE_CREDENTIALS=new ur("google-credentials-uid"),ur.FIRST_PARTY=new ur("first-party-uid"),ur.MOCK_USER=new ur("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="9.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new sb("@firebase/firestore");function jS(){return Rs.logLevel}function Re(t,...e){if(Rs.logLevel<=at.DEBUG){const n=e.map(Hb);Rs.debug(`Firestore (${zl}): ${t}`,...n)}}function Ia(t,...e){if(Rs.logLevel<=at.ERROR){const n=e.map(Hb);Rs.error(`Firestore (${zl}): ${t}`,...n)}}function HS(t,...e){if(Rs.logLevel<=at.WARN){const n=e.map(Hb);Rs.warn(`Firestore (${zl}): ${t}`,...n)}}function Hb(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t="Unexpected state"){const e=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: `+t;throw Ia(e),new Error(e)}function wt(t,e){t||Ue()}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Ws{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ur.UNAUTHENTICATED))}shutdown(){}}class DV{constructor(e){this.t=e,this.currentUser=ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const o=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _i,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await o(this.currentUser)})},s=u=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>s(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?s(u):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _i)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string"),new NV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string"),new ur(e)}}class OV{constructor(e,n,r){this.type="FirstParty",this.user=ur.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class MV{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new OV(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $V{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=i=>{i.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.p;return this.p=i.token,Re("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const o=i=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>o(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?o(i):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wt(typeof n.token=="string"),this.p=n.token,new FV(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.I(r),this.T=r=>n.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){const e=typeof self!="undefined"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qb.A=-1;class nD{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=LV(40);for(let i=0;i<o.length;++i)r.length<20&&o[i]<n&&(r+=e.charAt(o[i]%e.length))}return r}}function dt(t,e){return t<e?-1:t>e?1:0}function dl(t,e,n){return t.length===e.length&&t.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Pe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Pe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.timestamp=e}static fromTimestamp(e){return new je(e)}static min(){return new je(new Xn(0,0))}static max(){return new je(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ue(),r===void 0?r=e.length-n:r>e.length-n&&Ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const i=e.get(o),a=n.get(o);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Dt extends Vd{construct(e,n,r){return new Dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Dt(n)}static emptyPath(){return new Dt([])}}const BV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends Vd{construct(e,n,r){return new pr(e,n,r)}static isValidIdentifier(e){return BV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pr(["__name__"])}static fromServerFormat(e){const n=[];let r="",o=0;const i=()=>{if(r.length===0)throw new Pe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;o<e.length;){const s=e[o];if(s==="\\"){if(o+1===e.length)throw new Pe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[o+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Pe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,o+=2}else s==="`"?(a=!a,o++):s!=="."||a?(r+=s,o++):(i(),o++)}if(i(),a)throw new Pe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(n)}static emptyPath(){return new pr([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.fields=e,e.sort(pr.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new On(n)}static fromUint8Array(e){const n=function(r){let o="";for(let i=0;i<r.length;++i)o+=String.fromCharCode(r[i]);return o}(e);return new On(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const UV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ta(t){if(wt(!!t),typeof t=="string"){let e=0;const n=UV.exec(t);if(wt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gt(t.seconds),nanos:Gt(t.nanos)}}function Gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hl(t){return typeof t=="string"?On.fromBase64String(t):On.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iD(t){const e=t.mapValue.fields.__previous_value__;return oD(e)?iD(e):e}function jd(t){const e=Ta(t.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,n,r,o,i,a,s,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.useFetchStreams=u}}class fl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t){return t==null}function $m(t){return t===0&&1/t==-1/0}function WV(t){return typeof t=="number"&&Number.isInteger(t)&&!$m(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Dt.fromString(e))}static fromName(e){return new Ne(Dt.fromString(e).popFirst(5))}static empty(){return new Ne(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oD(t)?4:VV(t)?9007199254740991:10:Ue()}function Zo(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jd(t).isEqual(jd(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const i=Ta(r.timestampValue),a=Ta(o.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return hl(r.bytesValue).isEqual(hl(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Gt(r.geoPointValue.latitude)===Gt(o.geoPointValue.latitude)&&Gt(r.geoPointValue.longitude)===Gt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Gt(r.integerValue)===Gt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const i=Gt(r.doubleValue),a=Gt(o.doubleValue);return i===a?$m(i)===$m(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],Zo);case 10:return function(r,o){const i=r.mapValue.fields||{},a=o.mapValue.fields||{};if(qS(i)!==qS(a))return!1;for(const s in i)if(i.hasOwnProperty(s)&&(a[s]===void 0||!Zo(i[s],a[s])))return!1;return!0}(t,e);default:return Ue()}}function Hd(t,e){return(t.values||[]).find(n=>Zo(n,e))!==void 0}function pl(t,e){if(t===e)return 0;const n=As(t),r=As(e);if(n!==r)return dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(t.booleanValue,e.booleanValue);case 2:return function(o,i){const a=Gt(o.integerValue||o.doubleValue),s=Gt(i.integerValue||i.doubleValue);return a<s?-1:a>s?1:a===s?0:isNaN(a)?isNaN(s)?0:-1:1}(t,e);case 3:return GS(t.timestampValue,e.timestampValue);case 4:return GS(jd(t),jd(e));case 5:return dt(t.stringValue,e.stringValue);case 6:return function(o,i){const a=hl(o),s=hl(i);return a.compareTo(s)}(t.bytesValue,e.bytesValue);case 7:return function(o,i){const a=o.split("/"),s=i.split("/");for(let u=0;u<a.length&&u<s.length;u++){const l=dt(a[u],s[u]);if(l!==0)return l}return dt(a.length,s.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,i){const a=dt(Gt(o.latitude),Gt(i.latitude));return a!==0?a:dt(Gt(o.longitude),Gt(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,i){const a=o.values||[],s=i.values||[];for(let u=0;u<a.length&&u<s.length;++u){const l=pl(a[u],s[u]);if(l)return l}return dt(a.length,s.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,i){if(o===Uf.mapValue&&i===Uf.mapValue)return 0;if(o===Uf.mapValue)return 1;if(i===Uf.mapValue)return-1;const a=o.fields||{},s=Object.keys(a),u=i.fields||{},l=Object.keys(u);s.sort(),l.sort();for(let c=0;c<s.length&&c<l.length;++c){const d=dt(s[c],l[c]);if(d!==0)return d;const h=pl(a[s[c]],u[l[c]]);if(h!==0)return h}return dt(s.length,l.length)}(t.mapValue,e.mapValue);default:throw Ue()}}function GS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return dt(t,e);const n=Ta(t),r=Ta(e),o=dt(n.seconds,r.seconds);return o!==0?o:dt(n.nanos,r.nanos)}function Wu(t){return rx(t)}function rx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const o=Ta(r);return`time(${o.seconds},${o.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?hl(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ne.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let o="[",i=!0;for(const a of r.values||[])i?i=!1:o+=",",o+=rx(a);return o+"]"}(t.arrayValue):"mapValue"in t?function(r){const o=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of o)a?a=!1:i+=",",i+=`${s}:${rx(r.fields[s])}`;return i+"}"}(t.mapValue):Ue();var e,n}function ox(t){return!!t&&"integerValue"in t}function Gb(t){return!!t&&"arrayValue"in t}function KS(t){return!!t&&"nullValue"in t}function XS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tp(t){return!!t&&"mapValue"in t}function ad(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ad(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ad(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.value=e}static empty(){return new go({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ad(n)}setAll(e){let n=pr.emptyPath(),r={},o=[];e.forEach((a,s)=>{if(!n.isImmediateParentOf(s)){const u=this.getFieldsMap(n);this.applyChanges(u,r,o),r={},o=[],n=s.popLast()}a?r[s.lastSegment()]=ad(a):o.push(s.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,o)}delete(e){const n=this.field(e.popLast());Tp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Tp(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Wl(n,(o,i)=>e[o]=i);for(const o of r)delete e[o]}clone(){return new go(ad(this.value))}}function aD(t){const e=[];return Wl(t.fields,(n,r)=>{const o=new pr([n]);if(Tp(r)){const i=aD(r.mapValue).fields;if(i.length===0)e.push(o);else for(const a of i)e.push(o.child(a))}else e.push(o)}),new nx(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n,r,o,i,a){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Vn(e,0,je.min(),je.min(),go.empty(),0)}static newFoundDocument(e,n,r){return new Vn(e,1,n,je.min(),r,0)}static newNoDocument(e,n){return new Vn(e,2,n,je.min(),go.empty(),0)}static newUnknownDocument(e,n){return new Vn(e,3,n,je.min(),go.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=go.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=go.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function jV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=je.fromTimestamp(r===1e9?new Xn(n+1,0):new Xn(n,r));return new Ns(o,Ne.empty(),e)}function HV(t){return new Ns(t.readTime,t.key,-1)}class Ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ns(je.min(),Ne.empty(),-1)}static max(){return new Ns(je.max(),Ne.empty(),-1)}}function qV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:dt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zf(this.root,e,this.comparator,!0)}}class zf{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&o&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,n,r,o,i){this.key=e,this.value=n,this.color=r!=null?r:_n.RED,this.left=o!=null?o:_n.EMPTY,this.right=i!=null?i:_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,i){return new _n(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,o!=null?o:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const i=r(e,o.key);return o=i<0?o.copy(null,null,null,o.left.insert(e,n,r),null):i===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return _n.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(t,e,n,r,o){return this}insert(t,e,n){return new _n(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.comparator=e,this.data=new yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YS(this.data.getIterator())}getIteratorFrom(e){return new YS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,i=r.getNext().key;if(this.comparator(o,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nn(this.comparator);return n.data=e,n}}class YS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n=null,r=[],o=[],i=null,a=null,s=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=i,this.startAt=a,this.endAt=s,this.P=null}}function QS(t,e=null,n=[],r=[],o=null,i=null,a=null){return new GV(t,e,n,r,o,i,a)}function Kb(t){const e=ze(t);if(e.P===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Wu(o.value);var o}).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Jv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wu(r)).join(",")),e.P=n}return e.P}function KV(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Wu(r.value)}`;var r}).join(", ")}]`),Jv(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Wu(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Wu(n)).join(",")),`Target(${e})`}function Xb(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<t.orderBy.length;o++)if(!n6(t.orderBy[o],e.orderBy[o]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let o=0;o<t.filters.length;o++)if(n=t.filters[o],r=e.filters[o],n.op!==r.op||!n.field.isEqual(r.field)||!Zo(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ZS(t.startAt,e.startAt)&&ZS(t.endAt,e.endAt)}function ix(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class gr extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.V(e,n,r):new XV(e,n,r):n==="array-contains"?new JV(e,r):n==="in"?new ZV(e,r):n==="not-in"?new e6(e,r):n==="array-contains-any"?new t6(e,r):new gr(e,n,r)}static V(e,n,r){return n==="in"?new YV(e,r):new QV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.v(pl(n,this.value)):n!==null&&As(this.value)===As(n)&&this.v(pl(n,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class XV extends gr{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.v(n)}}class YV extends gr{constructor(e,n){super(e,"in",n),this.keys=sD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QV extends gr{constructor(e,n){super(e,"not-in",n),this.keys=sD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class JV extends gr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gb(n)&&Hd(n.arrayValue,this.value)}}class ZV extends gr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hd(this.value.arrayValue,n)}}class e6 extends gr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hd(this.value.arrayValue,n)}}class t6 extends gr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hd(this.value.arrayValue,r))}}class Lm{constructor(e,n){this.position=e,this.inclusive=n}}class sd{constructor(e,n="asc"){this.field=e,this.dir=n}}function n6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function JS(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const i=e[o],a=t.position[o];if(i.field.isKeyField()?r=Ne.comparator(Ne.fromName(a.referenceValue),n.key):r=pl(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Zo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n=null,r=[],o=[],i=null,a="F",s=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=i,this.limitType=a,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}}function r6(t,e,n,r,o,i,a,s){return new Zv(t,e,n,r,o,i,a,s)}function eg(t){return new Zv(t)}function o6(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i6(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function a6(t){for(const e of t.filters)if(e.S())return e.field;return null}function s6(t){return t.collectionGroup!==null}function qd(t){const e=ze(t);if(e.D===null){e.D=[];const n=a6(e),r=i6(e);if(n!==null&&r===null)n.isKeyField()||e.D.push(new sd(n)),e.D.push(new sd(pr.keyField(),"asc"));else{let o=!1;for(const i of e.explicitOrderBy)e.D.push(i),i.field.isKeyField()&&(o=!0);if(!o){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new sd(pr.keyField(),i))}}}return e.D}function Ps(t){const e=ze(t);if(!e.C)if(e.limitType==="F")e.C=QS(e.path,e.collectionGroup,qd(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of qd(e)){const a=i.dir==="desc"?"asc":"desc";n.push(new sd(i.field,a))}const r=e.endAt?new Lm(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Lm(e.startAt.position,e.startAt.inclusive):null;e.C=QS(e.path,e.collectionGroup,n,e.filters,e.limit,r,o)}return e.C}function u6(t,e,n){return new Zv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tg(t,e){return Xb(Ps(t),Ps(e))&&t.limitType===e.limitType}function uD(t){return`${Kb(Ps(t))}|lt:${t.limitType}`}function ax(t){return`Query(target=${KV(Ps(t))}; limitType=${t.limitType})`}function Yb(t,e){return e.isFoundDocument()&&function(n,r){const o=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):Ne.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,r){for(const o of n.explicitOrderBy)if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const o of n.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(o,i,a){const s=JS(o,i,a);return o.inclusive?s<=0:s<0}(n.startAt,qd(n),r)||n.endAt&&!function(o,i,a){const s=JS(o,i,a);return o.inclusive?s>=0:s>0}(n.endAt,qd(n),r))}(t,e)}function l6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lD(t){return(e,n)=>{let r=!1;for(const o of qd(t)){const i=c6(o,e,n);if(i!==0)return i;r=r||o.field.isKeyField()}return 0}}function c6(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(o,i,a){const s=i.data.field(o),u=a.data.field(o);return s!==null&&u!==null?pl(s,u):Ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t,e){if(t.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$m(e)?"-0":e}}function dD(t){return{integerValue:""+t}}function d6(t,e){return WV(e)?dD(e):cD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this._=void 0}}function h6(t,e,n){return t instanceof Bm?function(r,o){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(i.fields.__previous_value__=o),{mapValue:i}}(n,e):t instanceof Gd?fD(t,e):t instanceof Kd?pD(t,e):function(r,o){const i=hD(r,o),a=ek(i)+ek(r.k);return ox(i)&&ox(r.k)?dD(a):cD(r.M,a)}(t,e)}function f6(t,e,n){return t instanceof Gd?fD(t,e):t instanceof Kd?pD(t,e):n}function hD(t,e){return t instanceof Um?ox(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Bm extends ng{}class Gd extends ng{constructor(e){super(),this.elements=e}}function fD(t,e){const n=mD(e);for(const r of t.elements)n.some(o=>Zo(o,r))||n.push(r);return{arrayValue:{values:n}}}class Kd extends ng{constructor(e){super(),this.elements=e}}function pD(t,e){let n=mD(e);for(const r of t.elements)n=n.filter(o=>!Zo(o,r));return{arrayValue:{values:n}}}class Um extends ng{constructor(e,n){super(),this.M=e,this.k=n}}function ek(t){return Gt(t.integerValue||t.doubleValue)}function mD(t){return Gb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function p6(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof Gd&&r instanceof Gd||n instanceof Kd&&r instanceof Kd?dl(n.elements,r.elements,Zo):n instanceof Um&&r instanceof Um?Zo(n.k,r.k):n instanceof Bm&&r instanceof Bm}(t.transform,e.transform)}class m6{constructor(e,n){this.version=e,this.transformResults=n}}class Vu{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vu}static exists(e){return new Vu(void 0,e)}static updateTime(e){return new Vu(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rg{}function v6(t,e,n){t instanceof og?function(r,o,i){const a=r.value.clone(),s=rk(r.fieldTransforms,o,i.transformResults);a.setAll(s),o.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Lh?function(r,o,i){if(!Rp(r.precondition,o))return void o.convertToUnknownDocument(i.version);const a=rk(r.fieldTransforms,o,i.transformResults),s=o.data;s.setAll(vD(r)),s.setAll(a),o.convertToFoundDocument(i.version,s).setHasCommittedMutations()}(t,e,n):function(r,o,i){o.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function sx(t,e,n){t instanceof og?function(r,o,i){if(!Rp(r.precondition,o))return;const a=r.value.clone(),s=ok(r.fieldTransforms,i,o);a.setAll(s),o.convertToFoundDocument(nk(o),a).setHasLocalMutations()}(t,e,n):t instanceof Lh?function(r,o,i){if(!Rp(r.precondition,o))return;const a=ok(r.fieldTransforms,i,o),s=o.data;s.setAll(vD(r)),s.setAll(a),o.convertToFoundDocument(nk(o),s).setHasLocalMutations()}(t,e,n):function(r,o){Rp(r.precondition,o)&&o.convertToNoDocument(je.min())}(t,e)}function g6(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),i=hD(r.transform,o||null);i!=null&&(n==null&&(n=go.empty()),n.set(r.field,i))}return n||null}function tk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&dl(n,r,(o,i)=>p6(o,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function nk(t){return t.isFoundDocument()?t.version:je.min()}class og extends rg{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Lh extends rg{constructor(e,n,r,o,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=i,this.type=1}}function vD(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rk(t,e,n){const r=new Map;wt(t.length===n.length);for(let o=0;o<n.length;o++){const i=t[o],a=i.transform,s=e.data.field(i.field);r.set(i.field,f6(a,s,n[o]))}return r}function ok(t,e,n){const r=new Map;for(const o of t){const i=o.transform,a=n.data.field(o.field);r.set(o.field,h6(i,a,e))}return r}class y6 extends rg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class x6 extends rg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Ze;function b6(t){switch(t){default:return Ue();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function gD(t){if(t===void 0)return Ia("GRPC error has no .code"),ne.UNKNOWN;switch(t){case qt.OK:return ne.OK;case qt.CANCELLED:return ne.CANCELLED;case qt.UNKNOWN:return ne.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ne.INTERNAL;case qt.UNAVAILABLE:return ne.UNAVAILABLE;case qt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case qt.NOT_FOUND:return ne.NOT_FOUND;case qt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case qt.ABORTED:return ne.ABORTED;case qt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case qt.DATA_LOSS:return ne.DATA_LOSS;default:return Ue()}}(Ze=qt||(qt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,i]of r)if(this.equalsFn(o,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<o.length;i++)if(this.equalsFn(o[i][0],e))return void(o[i]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,(n,r)=>{for(const[o,i]of r)e(o,i)})}isEmpty(){return rD(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=new yn(Ne.comparator);function Ds(){return E6}const C6=new yn(Ne.comparator);function ux(...t){let e=C6;for(const n of t)e=e.insert(n.key,n);return e}function i0(){return new Vl(t=>t.toString(),(t,e)=>t.isEqual(e))}const _6=new yn(Ne.comparator),S6=new Nn(Ne.comparator);function It(...t){let e=S6;for(const n of t)e=e.add(n);return e}const k6=new Nn(dt);function yD(){return k6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,o,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Bh.createSynthesizedTargetChangeForCurrentChange(e,n)),new ig(je.min(),r,yD(),Ds(),It())}}class Bh{constructor(e,n,r,o,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Bh(On.EMPTY_BYTE_STRING,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,r,o){this.O=e,this.removedTargetIds=n,this.key=r,this.F=o}}class xD{constructor(e,n){this.targetId=e,this.$=n}}class wD{constructor(e,n,r=On.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class ik{constructor(){this.B=0,this.L=sk(),this.U=On.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return this.B!==0}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=It(),n=It(),r=It();return this.L.forEach((o,i)=>{switch(i){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ue()}}),new Bh(this.U,this.q,e,n,r)}J(){this.K=!1,this.L=sk()}Y(e,n){this.K=!0,this.L=this.L.insert(e,n)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class I6{constructor(e){this.nt=e,this.st=new Map,this.it=Ds(),this.rt=ak(),this.ot=new Nn(dt)}ut(e){for(const n of e.O)e.F&&e.F.isFoundDocument()?this.at(n,e.F):this.ct(n,e.key,e.F);for(const n of e.removedTargetIds)this.ct(n,e.key,e.F)}ht(e){this.forEachTarget(e,n=>{const r=this.lt(n);switch(e.state){case 0:this.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(n);break;case 3:this.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(n)&&(this.dt(n),r.W(e.resumeToken));break;default:Ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.st.forEach((r,o)=>{this.ft(o)&&n(o)})}_t(e){const n=e.targetId,r=e.$.count,o=this.wt(n);if(o){const i=o.target;if(ix(i))if(r===0){const a=new Ne(i.path);this.ct(n,a,Vn.newNoDocument(a,je.min()))}else wt(r===1);else this.gt(n)!==r&&(this.dt(n),this.ot=this.ot.add(n))}}yt(e){const n=new Map;this.st.forEach((i,a)=>{const s=this.wt(a);if(s){if(i.current&&ix(s.target)){const u=new Ne(s.target.path);this.it.get(u)!==null||this.It(a,u)||this.ct(a,u,Vn.newNoDocument(u,e))}i.j&&(n.set(a,i.H()),i.J())}});let r=It();this.rt.forEach((i,a)=>{let s=!0;a.forEachWhile(u=>{const l=this.wt(u);return!l||l.purpose===2||(s=!1,!1)}),s&&(r=r.add(i))}),this.it.forEach((i,a)=>a.setReadTime(e));const o=new ig(e,n,this.ot,this.it,r);return this.it=Ds(),this.rt=ak(),this.ot=new Nn(dt),o}at(e,n){if(!this.ft(e))return;const r=this.It(e,n.key)?2:0;this.lt(e).Y(n.key,r),this.it=this.it.insert(n.key,n),this.rt=this.rt.insert(n.key,this.Tt(n.key).add(e))}ct(e,n,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,n)?o.Y(n,1):o.X(n),this.rt=this.rt.insert(n,this.Tt(n).delete(e)),r&&(this.it=this.it.insert(n,r))}removeTarget(e){this.st.delete(e)}gt(e){const n=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let n=this.st.get(e);return n||(n=new ik,this.st.set(e,n)),n}Tt(e){let n=this.rt.get(e);return n||(n=new Nn(dt),this.rt=this.rt.insert(e,n)),n}ft(e){const n=this.wt(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}wt(e){const n=this.st.get(e);return n&&n.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new ik),this.nt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}It(e,n){return this.nt.getRemoteKeysForTarget(e).has(n)}}function ak(){return new yn(Ne.comparator)}function sk(){return new yn(Ne.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),R6=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class A6{constructor(e,n){this.databaseId=e,this.N=n}}function zm(t,e){return t.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bD(t,e){return t.N?e.toBase64():e.toUint8Array()}function N6(t,e){return zm(t,e.toTimestamp())}function Si(t){return wt(!!t),je.fromTimestamp(function(e){const n=Ta(e);return new Xn(n.seconds,n.nanos)}(t))}function Qb(t,e){return function(n){return new Dt(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function ED(t){const e=Dt.fromString(t);return wt(SD(e)),e}function lx(t,e){return Qb(t.databaseId,e.path)}function a0(t,e){const n=ED(e);if(n.get(1)!==t.databaseId.projectId)throw new Pe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Pe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(CD(n))}function cx(t,e){return Qb(t.databaseId,e)}function P6(t){const e=ED(t);return e.length===4?Dt.emptyPath():CD(e)}function dx(t){return new Dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CD(t){return wt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function uk(t,e,n){return{name:lx(t,e),fields:n.value.mapValue.fields}}function D6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],i=function(u,l){return u.N?(wt(l===void 0||typeof l=="string"),On.fromBase64String(l||"")):(wt(l===void 0||l instanceof Uint8Array),On.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(u){const l=u.code===void 0?ne.UNKNOWN:gD(u.code);return new Pe(l,u.message||"")}(a);n=new wD(r,o,i,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=a0(t,r.document.name),i=Si(r.document.updateTime),a=new go({mapValue:{fields:r.document.fields}}),s=Vn.newFoundDocument(o,i,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Ap(u,l,s.key,s)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=a0(t,r.document),i=r.readTime?Si(r.readTime):je.min(),a=Vn.newNoDocument(o,i),s=r.removedTargetIds||[];n=new Ap([],s,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=a0(t,r.document),i=r.removedTargetIds||[];n=new Ap([],i,o,null)}else{if(!("filter"in e))return Ue();{e.filter;const r=e.filter;r.targetId;const o=r.count||0,i=new w6(o),a=r.targetId;n=new xD(a,i)}}return n}function O6(t,e){let n;if(e instanceof og)n={update:uk(t,e.key,e.value)};else if(e instanceof y6)n={delete:lx(t,e.key)};else if(e instanceof Lh)n={update:uk(t,e.key,e.data),updateMask:j6(e.fieldMask)};else{if(!(e instanceof x6))return Ue();n={verify:lx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,i){const a=i.transform;if(a instanceof Bm)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gd)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Kd)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Um)return{fieldPath:i.field.canonicalString(),increment:a.k};throw Ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:N6(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ue()}(t,e.precondition)),n}function M6(t,e){return t&&t.length>0?(wt(e!==void 0),t.map(n=>function(r,o){let i=r.updateTime?Si(r.updateTime):Si(o);return i.isEqual(je.min())&&(i=Si(o)),new m6(i,r.transformResults||[])}(n,e))):[]}function F6(t,e){return{documents:[cx(t,e.path)]}}function $6(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=cx(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=cx(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(u){if(u.length===0)return;const l=u.map(c=>function(d){if(d.op==="=="){if(XS(d.value))return{unaryFilter:{field:Zs(d.field),op:"IS_NAN"}};if(KS(d.value))return{unaryFilter:{field:Zs(d.field),op:"IS_NULL"}}}else if(d.op==="!="){if(XS(d.value))return{unaryFilter:{field:Zs(d.field),op:"IS_NOT_NAN"}};if(KS(d.value))return{unaryFilter:{field:Zs(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(d.field),op:z6(d.op),value:d.value}}}(c));return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}(e.filters);o&&(n.structuredQuery.where=o);const i=function(u){if(u.length!==0)return u.map(l=>function(c){return{field:Zs(c.field),direction:U6(c.dir)}}(l))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const a=function(u,l){return u.N||Jv(l)?l:{value:l}}(t,e.limit);var s;return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(s=e.startAt).inclusive,values:s.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function L6(t){let e=P6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){wt(r===1);const c=n.from[0];c.allDescendants?o=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=_D(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(c=>function(d){return new sd(Du(d.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(c)));let s=null;n.limit&&(s=function(c){let d;return d=typeof c=="object"?c.value:c,Jv(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(c){const d=!!c.before,h=c.values||[];return new Lm(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(c){const d=!c.before,h=c.values||[];return new Lm(h,d)}(n.endAt)),r6(e,o,a,i,s,"F",u,l)}function B6(t,e){const n=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ue()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function _D(t){return t?t.unaryFilter!==void 0?[V6(t)]:t.fieldFilter!==void 0?[W6(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>_D(e)).reduce((e,n)=>e.concat(n)):Ue():[]}function U6(t){return T6[t]}function z6(t){return R6[t]}function Zs(t){return{fieldPath:t.canonicalString()}}function Du(t){return pr.fromServerFormat(t.fieldPath)}function W6(t){return gr.create(Du(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(t.fieldFilter.op),t.fieldFilter.value)}function V6(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Du(t.unaryFilter.field);return gr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Du(t.unaryFilter.field);return gr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Du(t.unaryFilter.field);return gr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Du(t.unaryFilter.field);return gr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}function j6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((r,o)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,o)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,r)=>{n(e)})}static reject(e){return new ae((n,r)=>{r(e)})}static waitFor(e){return new ae((n,r)=>{let o=0,i=0,a=!1;e.forEach(s=>{++o,s.next(()=>{++i,a&&i===o&&n()},u=>r(u))}),a=!0,i===o&&n()})}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next(o=>o?ae.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,i)=>{r.push(n.call(this,o,i))}),this.waitFor(r)}}function Uh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const i=this.mutations[o];i.key.isEqual(e.key)&&v6(i,e,r[o])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&sx(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&sx(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const r=e.get(n.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(je.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),It())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>tk(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>tk(n,r))}}class Jb{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){wt(e.mutations.length===r.length);let o=_6;const i=e.mutations;for(let a=0;a<i.length;a++)o=o.insert(i[a].key,r[a].version);return new Jb(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r,o,i=je.min(),a=je.min(),s=On.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.Jt=e}}function Y6(t){const e=L6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?u6(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.qe=new J6}addToCollectionParentIndex(e,n){return this.qe.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.qe.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Ns.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class J6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Nn(Dt.comparator),i=!o.has(r);return this.index[n]=o.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Nn(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ml(0)}static yn(){return new ml(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==H6)throw t;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.changes=new Vl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n,r){this.ds=e,this.Bs=n,this.indexManager=r}Ls(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,n).next(r=>this.Us(e,n,r))}Us(e,n,r){return this.ds.getEntry(e,n).next(o=>{for(const i of r)i.applyToLocalView(o);return o})}qs(e,n){e.forEach((r,o)=>{for(const i of n)i.applyToLocalView(o)})}Ks(e,n){return this.ds.getEntries(e,n).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>this.qs(n,r))}Qs(e,n,r){return function(o){return Ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.js(e,n.path):s6(n)?this.Ws(e,n,r):this.zs(e,n,r)}js(e,n){return this.Ls(e,new Ne(n)).next(r=>{let o=ux();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,n,r){const o=n.collectionGroup;let i=ux();return this.indexManager.getCollectionParents(e,o).next(a=>ae.forEach(a,s=>{const u=function(l,c){return new Zv(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,s.child(o));return this.zs(e,u,r).next(l=>{l.forEach((c,d)=>{i=i.insert(c,d)})})}).next(()=>i))}zs(e,n,r){let o;return this.ds.getAllFromCollection(e,n.path,r).next(i=>(o=i,this.Bs.getAllMutationBatchesAffectingQuery(e,n))).next(i=>{for(const a of i)for(const s of a.mutations){const u=s.key;let l=o.get(u);l==null&&(l=Vn.newInvalidDocument(u),o=o.insert(u,l)),sx(s,l,a.localWriteTime),l.isFoundDocument()||(o=o.remove(u))}}).next(()=>(o.forEach((i,a)=>{Yb(n,a)||(o=o.remove(i))}),o))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Hs=r,this.Js=o}static Ys(e,n){let r=It(),o=It();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:o=o.add(i.doc.key)}return new Zb(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.Xs=!1}initialize(e,n){this.Zs=e,this.indexManager=n,this.Xs=!0}Qs(e,n,r,o){return this.ti(e,n).next(i=>i||this.ei(e,n,o,r)).next(i=>i||this.ni(e,n))}ti(e,n){return ae.resolve(null)}ei(e,n,r,o){return o6(n)||o.isEqual(je.min())?this.ni(e,n):this.Zs.Ks(e,r).next(i=>{const a=this.si(n,i);return this.ii(n,a,r,o)?this.ni(e,n):(jS()<=at.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ax(n)),this.ri(e,a,n,jV(o,-1)))})}si(e,n){let r=new Nn(lD(e));return n.forEach((o,i)=>{Yb(e,i)&&(r=r.add(i))}),r}ii(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(o)>0)}ni(e,n){return jS()<=at.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",ax(n)),this.Zs.Qs(e,n,Ns.min())}ri(e,n,r,o){return this.Zs.Qs(e,r,o).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r,o){this.persistence=e,this.oi=n,this.M=o,this.ui=new yn(dt),this.ai=new Vl(i=>Kb(i),Xb),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new ej(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ui))}}function rj(t,e,n,r){return new nj(t,e,n,r)}async function kD(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.Bs.getAllMutationBatches(r).next(i=>(o=i,n.li(e),n.Bs.getAllMutationBatches(r))).next(i=>{const a=[],s=[];let u=It();for(const l of o){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of i){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.fi.Ks(r,u).next(l=>({di:l,removedBatchIds:a,addedBatchIds:s}))})})}function oj(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(a,s,u,l){const c=u.batch,d=c.keys();let h=ae.resolve();return d.forEach(f=>{h=h.next(()=>l.getEntry(s,f)).next(p=>{const v=u.docVersions.get(f);wt(v!==null),p.version.compareTo(v)<0&&(c.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),l.addEntry(p)))})}),h.next(()=>a.Bs.removeMutationBatch(s,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.Bs.performConsistencyCheck(r)).next(()=>n.fi.Ks(r,o))})}function ID(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.fs.getLastRemoteSnapshotVersion(n))}function ij(t,e){const n=ze(t),r=e.snapshotVersion;let o=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.hi.newChangeBuffer({trackRemovals:!0});o=n.ui;const s=[];e.targetChanges.forEach((l,c)=>{const d=o.get(c);if(!d)return;s.push(n.fs.removeMatchingKeys(i,l.removedDocuments,c).next(()=>n.fs.addMatchingKeys(i,l.addedDocuments,c)));let h=d.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(c)?h=h.withResumeToken(On.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):l.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(l.resumeToken,r)),o=o.insert(c,h),function(f,p,v){return f.resumeToken.approximateByteSize()===0||p.snapshotVersion.toMicroseconds()-f.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,h,l)&&s.push(n.fs.updateTargetData(i,h))});let u=Ds();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(i,l))}),s.push(aj(i,a,e.documentUpdates).next(l=>{u=l})),!r.isEqual(je.min())){const l=n.fs.getLastRemoteSnapshotVersion(i).next(c=>n.fs.setTargetsMetadata(i,i.currentSequenceNumber,r));s.push(l)}return ae.waitFor(s).next(()=>a.apply(i)).next(()=>n.fi.Gs(i,u)).next(()=>u)}).then(i=>(n.ui=o,i))}function aj(t,e,n){let r=It();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let i=Ds();return n.forEach((a,s)=>{const u=o.get(a);s.isNoDocument()&&s.version.isEqual(je.min())?(e.removeEntry(a,s.readTime),i=i.insert(a,s)):!u.isValidDocument()||s.version.compareTo(u.version)>0||s.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(s),i=i.insert(a,s)):Re("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",s.version)}),i})}function sj(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.Bs.getNextMutationBatchAfterBatchId(r,e)))}function uj(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.fs.getTargetData(r,e).next(i=>i?(o=i,ae.resolve(o)):n.fs.allocateTargetId(r).next(a=>(o=new fs(e,a,0,r.currentSequenceNumber),n.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.ui.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.ui=n.ui.insert(r.targetId,r),n.ai.set(e,r.targetId)),r})}async function hx(t,e,n){const r=ze(t),o=r.ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,o))}catch(a){if(!Uh(a))throw a;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}function lk(t,e,n){const r=ze(t);let o=je.min(),i=It();return r.persistence.runTransaction("Execute query","readonly",a=>function(s,u,l){const c=ze(s),d=c.ai.get(l);return d!==void 0?ae.resolve(c.ui.get(d)):c.fs.getTargetData(u,l)}(r,a,Ps(e)).next(s=>{if(s)return o=s.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(a,s.targetId).next(u=>{i=u})}).next(()=>r.oi.Qs(a,e,n?o:je.min(),n?i:It())).next(s=>(lj(r,l6(e),s),{documents:s,_i:i})))}function lj(t,e,n){let r=je.min();n.forEach((o,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ci.set(e,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,n){return ae.resolve(this.yi.get(n))}saveBundleMetadata(e,n){var r;return this.yi.set(n.id,{id:(r=n).id,version:r.version,createTime:Si(r.createTime)}),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.pi.get(n))}saveNamedQuery(e,n){return this.pi.set(n.name,function(r){return{name:r.name,query:Y6(r.bundledQuery),readTime:Si(r.readTime)}}(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(){this.overlays=new yn(Ne.comparator),this.Ii=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}saveOverlays(e,n,r){return r.forEach((o,i)=>{this.Xt(e,n,i)}),ae.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Ii.get(r);return o!==void 0&&(o.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ii.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const o=i0(),i=n.length+1,a=new Ne(n.child("")),s=this.overlays.getIteratorFrom(a);for(;s.hasNext();){const u=s.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===i&&u.largestBatchId>r&&o.set(u.getKey(),u)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let i=new yn((l,c)=>l-c);const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=i.get(l.largestBatchId);c===null&&(c=i0(),i=i.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const s=i0(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>s.set(l,c)),!(s.size()>=o)););return ae.resolve(s)}Xt(e,n,r){if(r===null)return;const o=this.overlays.get(r.key);if(o!==null){const a=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new K6(n,r));let i=this.Ii.get(n);i===void 0&&(i=It(),this.Ii.set(n,i)),this.Ii.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.Ti=new Nn(fn.Ei),this.Ai=new Nn(fn.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,n){const r=new fn(e,n);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Pi(new fn(e,n))}Vi(e,n){e.forEach(r=>this.removeReference(r,n))}vi(e){const n=new Ne(new Dt([])),r=new fn(n,e),o=new fn(n,e+1),i=[];return this.Ai.forEachInRange([r,o],a=>{this.Pi(a),i.push(a.key)}),i}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const n=new Ne(new Dt([])),r=new fn(n,e),o=new fn(n,e+1);let i=It();return this.Ai.forEachInRange([r,o],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new fn(e,0),r=this.Ti.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class fn{constructor(e,n){this.key=e,this.Ci=n}static Ei(e,n){return Ne.comparator(e.key,n.key)||dt(e.Ci,n.Ci)}static Ri(e,n){return dt(e.Ci,n.Ci)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Nn(fn.Ei)}checkEmpty(e){return ae.resolve(this.Bs.length===0)}addMutationBatch(e,n,r,o){const i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];const a=new G6(i,n,r,o);this.Bs.push(a);for(const s of o)this.Ni=this.Ni.add(new fn(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return ae.resolve(a)}lookupMutationBatch(e,n){return ae.resolve(this.ki(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Mi(r),i=o<0?0:o;return ae.resolve(this.Bs.length>i?this.Bs[i]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.Bs.length===0?-1:this.xi-1)}getAllMutationBatches(e){return ae.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fn(n,0),o=new fn(n,Number.POSITIVE_INFINITY),i=[];return this.Ni.forEachInRange([r,o],a=>{const s=this.ki(a.Ci);i.push(s)}),ae.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nn(dt);return n.forEach(o=>{const i=new fn(o,0),a=new fn(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([i,a],s=>{r=r.add(s.Ci)})}),ae.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let i=r;Ne.isDocumentKey(i)||(i=i.child(""));const a=new fn(new Ne(i),0);let s=new Nn(dt);return this.Ni.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===o&&(s=s.add(u.Ci)),!0)},a),ae.resolve(this.Oi(s))}Oi(e){const n=[];return e.forEach(r=>{const o=this.ki(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){wt(this.Fi(n.batchId,"removed")===0),this.Bs.shift();let r=this.Ni;return ae.forEach(n.mutations,o=>{const i=new fn(o.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,n){const r=new fn(n,0),o=this.Ni.firstAfterOrEqual(r);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.Bs.length,ae.resolve()}Fi(e,n){return this.Mi(e)}Mi(e){return this.Bs.length===0?0:e-this.Bs[0].batchId}ki(e){const n=this.Mi(e);return n<0||n>=this.Bs.length?null:this.Bs[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.$i=e,this.docs=new yn(Ne.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),i=o?o.size:0,a=this.$i(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():Vn.newInvalidDocument(n))}getEntries(e,n){let r=Ds();return n.forEach(o=>{const i=this.docs.get(o);r=r.insert(o,i?i.document.mutableCopy():Vn.newInvalidDocument(o))}),ae.resolve(r)}getAllFromCollection(e,n,r){let o=Ds();const i=new Ne(n.child("")),a=this.docs.getIteratorFrom(i);for(;a.hasNext();){const{key:s,value:{document:u}}=a.getNext();if(!n.isPrefixOf(s.path))break;s.path.length>n.length+1||qV(HV(u),r)<=0||(o=o.insert(u.key,u.mutableCopy()))}return ae.resolve(o)}getAllFromCollectionGroup(e,n,r,o){Ue()}Bi(e,n){return ae.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pj(this)}getSize(e){return ae.resolve(this.size)}}class pj extends Z6{constructor(e){super(),this.Kn=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),ae.waitFor(n)}getFromCache(e,n){return this.Kn.getEntry(e,n)}getAllFromCache(e,n){return this.Kn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.persistence=e,this.Li=new Vl(n=>Kb(n),Xb),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Ui=0,this.qi=new eE,this.targetCount=0,this.Ki=ml.gn()}forEachTarget(e,n){return this.Li.forEach((r,o)=>n(o)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ui&&(this.Ui=n),ae.resolve()}Tn(e){this.Li.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ki=new ml(n),this.highestTargetId=n),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,n){return this.Tn(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Tn(n),ae.resolve()}removeTargetData(e,n){return this.Li.delete(n.target),this.qi.vi(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let o=0;const i=[];return this.Li.forEach((a,s)=>{s.sequenceNumber<=n&&r.get(s.targetId)===null&&(this.Li.delete(a),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),o++)}),ae.waitFor(i).next(()=>o)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.Li.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this.qi.bi(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this.qi.Vi(n,r);const o=this.persistence.referenceDelegate,i=[];return o&&n.forEach(a=>{i.push(o.markPotentiallyOrphaned(e,a))}),ae.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.qi.vi(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qi.Di(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this.qi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this.Gi={},this.overlays={},this.es=new qb(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new mj(this),this.indexManager=new Q6,this.ds=function(r){return new fj(r)}(r=>this.referenceDelegate.Qi(r)),this.M=new X6(n),this._s=new cj(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Gi[e.toKey()];return r||(r=new hj(n,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,n,r){Re("MemoryPersistence","Starting transaction:",e);const o=new gj(this.es.next());return this.referenceDelegate.ji(),r(o).next(i=>this.referenceDelegate.Wi(o).next(()=>i)).toPromise().then(i=>(o.raiseOnCommittedEvent(),i))}zi(e,n){return ae.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,n)))}}class gj extends q6{constructor(e){super(),this.currentSequenceNumber=e}}class tE{constructor(e){this.persistence=e,this.Hi=new eE,this.Ji=null}static Yi(e){return new tE(e)}get Xi(){if(this.Ji)return this.Ji;throw Ue()}addReference(e,n,r){return this.Hi.addReference(r,n),this.Xi.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Hi.removeReference(r,n),this.Xi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.Xi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Hi.vi(n.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(i=>this.Xi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}ji(){this.Ji=new Set}Wi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Xi,r=>{const o=Ne.fromPath(r);return this.Zi(e,o).next(i=>{i||n.removeEntry(o,je.min())})}).next(()=>(this.Ji=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zi(e,n).next(r=>{r?this.Xi.delete(n.toString()):this.Xi.add(n.toString())})}Qi(e){return 0}Zi(e,n){return ae.or([()=>ae.resolve(this.Hi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zi(e,n)])}}class ck{constructor(){this.activeTargetIds=yD()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yj{constructor(){this.Ur=new ck,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ck,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{Kr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.uo=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,r,o,i){const a=this.ho(e,n);Re("RestConnection","Sending: ",a,r);const s={};return this.lo(s,o,i),this.fo(e,a,s,r).then(u=>(Re("RestConnection","Received: ",u),u),u=>{throw HS("RestConnection",`${e} failed with error: `,u,"url: ",a,"request:",r),u})}_o(e,n,r,o,i){return this.co(e,n,r,o,i)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+zl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,i)=>e[i]=o),r&&r.headers.forEach((o,i)=>e[i]=o)}ho(e,n){const r=wj[e];return`${this.uo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,o){return new Promise((i,a)=>{const s=new AV;s.listenOnce(IV.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case o0.NO_ERROR:const l=s.getResponseJson();Re("Connection","XHR received:",JSON.stringify(l)),i(l);break;case o0.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),a(new Pe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case o0.HTTP_ERROR:const c=s.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',c,"response text:",s.getResponseText()),c>0){const d=s.getResponseJson().error;if(d&&d.status&&d.message){const h=function(f){const p=f.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(p)>=0?p:ne.UNKNOWN}(d.status);a(new Pe(h,d.message))}else a(new Pe(ne.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Pe(ne.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(o);s.send(n,"POST",u,r,15)})}wo(e,n,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=SV(),a=kV(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new RV({})),this.lo(s.initMessageHeaders,n,r),vN()||yN()||sU()||xN()||uU()||gN()||(s.httpHeadersOverwriteParam="$httpHeaders");const u=o.join("");Re("Connection","Creating WebChannel: "+u,s);const l=i.createWebChannel(u,s);let c=!1,d=!1;const h=new bj({Jr:p=>{d?Re("Connection","Not sending because WebChannel is closed:",p):(c||(Re("Connection","Opening WebChannel transport."),l.open(),c=!0),Re("Connection","WebChannel sending:",p),l.send(p))},Yr:()=>l.close()}),f=(p,v,y)=>{p.listen(v,m=>{try{y(m)}catch(g){setTimeout(()=>{throw g},0)}})};return f(l,Bf.EventType.OPEN,()=>{d||Re("Connection","WebChannel transport opened.")}),f(l,Bf.EventType.CLOSE,()=>{d||(d=!0,Re("Connection","WebChannel transport closed"),h.ro())}),f(l,Bf.EventType.ERROR,p=>{d||(d=!0,HS("Connection","WebChannel transport errored:",p),h.ro(new Pe(ne.UNAVAILABLE,"The operation could not be completed")))}),f(l,Bf.EventType.MESSAGE,p=>{var v;if(!d){const y=p.data[0];wt(!!y);const m=y,g=m.error||((v=m[0])===null||v===void 0?void 0:v.error);if(g){Re("Connection","WebChannel received error:",g);const x=g.status;let w=function(C){const E=qt[C];if(E!==void 0)return gD(E)}(x),b=g.message;w===void 0&&(w=ne.INTERNAL,b="Unknown error status: "+x+" with message "+g.message),d=!0,h.ro(new Pe(w,b)),l.close()}else Re("Connection","WebChannel received:",y),h.oo(y)}}),f(a,TV.STAT_EVENT,p=>{p.stat===WS.PROXY?Re("Connection","Detected buffering proxy"):p.stat===WS.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.io()},0),h}}function s0(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){return new A6(t,!0)}class TD{constructor(e,n,r=1e3,o=1.5,i=6e4){this.Yn=e,this.timerId=n,this.mo=r,this.yo=o,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,n-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n,r,o,i,a,s,u){this.Yn=e,this.Vo=r,this.vo=o,this.So=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new TD(e,n)}ko(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.ko()&&await this.close(0)}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&this.Co===null&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}async Bo(){if(this.Mo())return this.close(0)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}async close(e,n){this.Uo(),this.qo(),this.No.cancel(),this.Do++,e!==4?this.No.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Ia(n.toString()),Ia("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Ko(),this.stream.close(),this.stream=null),this.state=e,await this.listener.eo(n)}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===n&&this.Qo(r,o)},r=>{e(()=>{const o=new Pe(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,n){const r=this.Go(this.Do);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){this.state=5,this.No.Ro(async()=>{this.state=0,this.start()})}jo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return n=>{this.Yn.enqueueAndForget(()=>this.Do===e?n():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cj extends RD{constructor(e,n,r,o,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,a),this.M=i}Wo(e,n){return this.So.wo("Listen",e,n)}onMessage(e){this.No.reset();const n=D6(this.M,e),r=function(o){if(!("targetChange"in o))return je.min();const i=o.targetChange;return i.targetIds&&i.targetIds.length?je.min():i.readTime?Si(i.readTime):je.min()}(e);return this.listener.zo(n,r)}Ho(e){const n={};n.database=dx(this.M),n.addTarget=function(o,i){let a;const s=i.target;return a=ix(s)?{documents:F6(o,s)}:{query:$6(o,s)},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?a.resumeToken=bD(o,i.resumeToken):i.snapshotVersion.compareTo(je.min())>0&&(a.readTime=zm(o,i.snapshotVersion.toTimestamp())),a}(this.M,e);const r=B6(this.M,e);r&&(n.labels=r),this.Lo(n)}Jo(e){const n={};n.database=dx(this.M),n.removeTarget=e,this.Lo(n)}}class _j extends RD{constructor(e,n,r,o,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,a),this.M=i,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,n){return this.So.wo("Write",e,n)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const n=M6(e.writeResults,e.commitTime),r=Si(e.commitTime);return this.listener.tu(r,n)}return wt(!e.writeResults||e.writeResults.length===0),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=dx(this.M),this.Lo(e)}Zo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>O6(this.M,r))};this.Lo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj extends class{}{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Pe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.So.co(e,n,r,o,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ne.UNKNOWN,o.toString())})}_o(e,n,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.So._o(e,n,r,o,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ne.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class kj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){this.ru===0&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){this.state==="Online"?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,e==="Online"&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Ia(n),this.uu=!1):Re("OnlineStateTracker",n)}fu(){this.ou!==null&&(this.ou.cancel(),this.ou=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n,r,o,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=i,this.gu.Kr(a=>{r.enqueueAndForget(async()=>{Hs(this)&&(Re("RemoteStore","Restarting streams for network reachability change."),await async function(s){const u=ze(s);u.wu.add(4),await Wh(u),u.yu.set("Unknown"),u.wu.delete(4),await sg(u)}(this))})}),this.yu=new kj(r,o)}}async function sg(t){if(Hs(t))for(const e of t.mu)await e(!0)}async function Wh(t){for(const e of t.mu)await e(!1)}function AD(t,e){const n=ze(t);n._u.has(e.targetId)||(n._u.set(e.targetId,e),oE(n)?rE(n):jl(n).Mo()&&nE(n,e))}function ND(t,e){const n=ze(t),r=jl(n);n._u.delete(e),r.Mo()&&PD(n,e),n._u.size===0&&(r.Mo()?r.$o():Hs(n)&&n.yu.set("Unknown"))}function nE(t,e){t.pu.Z(e.targetId),jl(t).Ho(e)}function PD(t,e){t.pu.Z(e),jl(t).Jo(e)}function rE(t){t.pu=new I6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t._u.get(e)||null}),jl(t).start(),t.yu.au()}function oE(t){return Hs(t)&&!jl(t).ko()&&t._u.size>0}function Hs(t){return ze(t).wu.size===0}function DD(t){t.pu=void 0}async function Tj(t){t._u.forEach((e,n)=>{nE(t,e)})}async function Rj(t,e){DD(t),oE(t)?(t.yu.lu(e),rE(t)):t.yu.set("Unknown")}async function Aj(t,e,n){if(t.yu.set("Online"),e instanceof wD&&e.state===2&&e.cause)try{await async function(r,o){const i=o.cause;for(const a of o.targetIds)r._u.has(a)&&(await r.remoteSyncer.rejectListen(a,i),r._u.delete(a),r.pu.removeTarget(a))}(t,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wm(t,r)}else if(e instanceof Ap?t.pu.ut(e):e instanceof xD?t.pu._t(e):t.pu.ht(e),!n.isEqual(je.min()))try{const r=await ID(t.localStore);n.compareTo(r)>=0&&await function(o,i){const a=o.pu.yt(i);return a.targetChanges.forEach((s,u)=>{if(s.resumeToken.approximateByteSize()>0){const l=o._u.get(u);l&&o._u.set(u,l.withResumeToken(s.resumeToken,i))}}),a.targetMismatches.forEach(s=>{const u=o._u.get(s);if(!u)return;o._u.set(s,u.withResumeToken(On.EMPTY_BYTE_STRING,u.snapshotVersion)),PD(o,s);const l=new fs(u.target,s,1,u.sequenceNumber);nE(o,l)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),await Wm(t,r)}}async function Wm(t,e,n){if(!Uh(e))throw e;t.wu.add(1),await Wh(t),t.yu.set("Offline"),n||(n=()=>ID(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Re("RemoteStore","Retrying IndexedDB access"),await n(),t.wu.delete(1),await sg(t)})}function OD(t,e){return e().catch(n=>Wm(t,n,e))}async function ug(t){const e=ze(t),n=Ra(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Nj(e);)try{const o=await sj(e.localStore,r);if(o===null){e.du.length===0&&n.$o();break}r=o.batchId,Pj(e,o)}catch(o){await Wm(e,o)}MD(e)&&FD(e)}function Nj(t){return Hs(t)&&t.du.length<10}function Pj(t,e){t.du.push(e);const n=Ra(t);n.Mo()&&n.Xo&&n.Zo(e.mutations)}function MD(t){return Hs(t)&&!Ra(t).ko()&&t.du.length>0}function FD(t){Ra(t).start()}async function Dj(t){Ra(t).nu()}async function Oj(t){const e=Ra(t);for(const n of t.du)e.Zo(n.mutations)}async function Mj(t,e,n){const r=t.du.shift(),o=Jb.from(r,e,n);await OD(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await ug(t)}async function Fj(t,e){e&&Ra(t).Xo&&await async function(n,r){if(o=r.code,b6(o)&&o!==ne.ABORTED){const i=n.du.shift();Ra(n).Fo(),await OD(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await ug(n)}var o}(t,e),MD(t)&&FD(t)}async function hk(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=Hs(n);n.wu.add(3),await Wh(n),r&&n.yu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.wu.delete(3),await sg(n)}async function $j(t,e){const n=ze(t);e?(n.wu.delete(2),await sg(n)):e||(n.wu.add(2),await Wh(n),n.yu.set("Unknown"))}function jl(t){return t.Iu||(t.Iu=function(e,n,r){const o=ze(e);return o.iu(),new Cj(n,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(t.datastore,t.asyncQueue,{Xr:Tj.bind(null,t),eo:Rj.bind(null,t),zo:Aj.bind(null,t)}),t.mu.push(async e=>{e?(t.Iu.Fo(),oE(t)?rE(t):t.yu.set("Unknown")):(await t.Iu.stop(),DD(t))})),t.Iu}function Ra(t){return t.Tu||(t.Tu=function(e,n,r){const o=ze(e);return o.iu(),new _j(n,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(t.datastore,t.asyncQueue,{Xr:Dj.bind(null,t),eo:Fj.bind(null,t),eu:Oj.bind(null,t),tu:Mj.bind(null,t)}),t.mu.push(async e=>{e?(t.Tu.Fo(),await ug(t)):(await t.Tu.stop(),t.du.length>0&&(Re("RemoteStore",`Stopping write stream with ${t.du.length} pending writes`),t.du=[]))})),t.Tu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,r,o,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=i,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,r,o,i){const a=Date.now()+r,s=new iE(e,n,a,o,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aE(t,e){if(Ia("AsyncQueue",`${e}: ${t}`),Uh(t))return new Pe(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=ux(),this.sortedSet=new yn(this.comparator)}static emptySet(e){return new ju(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ju)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,i=r.getNext().key;if(!o.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ju;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.Eu=new yn(Ne.comparator)}track(e){const n=e.doc.key,r=this.Eu.get(n);r?e.type!==0&&r.type===3?this.Eu=this.Eu.insert(n,e):e.type===3&&r.type!==1?this.Eu=this.Eu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Eu=this.Eu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Eu=this.Eu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Eu=this.Eu.remove(n):e.type===1&&r.type===2?this.Eu=this.Eu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Eu=this.Eu.insert(n,{type:2,doc:e.doc}):Ue():this.Eu=this.Eu.insert(n,e)}Au(){const e=[];return this.Eu.inorderTraversal((n,r)=>{e.push(r)}),e}}class vl{constructor(e,n,r,o,i,a,s,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=u}static fromInitialDocuments(e,n,r,o){const i=[];return n.forEach(a=>{i.push({type:0,doc:a})}),new vl(e,n,ju.emptySet(n),i,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.Ru=void 0,this.listeners=[]}}class Bj{constructor(){this.queries=new Vl(e=>uD(e),tg),this.onlineState="Unknown",this.bu=new Set}}async function sE(t,e){const n=ze(t),r=e.query;let o=!1,i=n.queries.get(r);if(i||(o=!0,i=new Lj),o)try{i.Ru=await n.onListen(r)}catch(a){const s=aE(a,`Initialization of query '${ax(e.query)}' failed`);return void e.onError(s)}n.queries.set(r,i),i.listeners.push(e),e.Pu(n.onlineState),i.Ru&&e.Vu(i.Ru)&&lE(n)}async function uE(t,e){const n=ze(t),r=e.query;let o=!1;const i=n.queries.get(r);if(i){const a=i.listeners.indexOf(e);a>=0&&(i.listeners.splice(a,1),o=i.listeners.length===0)}if(o)return n.queries.delete(r),n.onUnlisten(r)}function Uj(t,e){const n=ze(t);let r=!1;for(const o of e){const i=o.query,a=n.queries.get(i);if(a){for(const s of a.listeners)s.Vu(o)&&(r=!0);a.Ru=o}}r&&lE(n)}function zj(t,e,n){const r=ze(t),o=r.queries.get(e);if(o)for(const i of o.listeners)i.onError(n);r.queries.delete(e)}function lE(t){t.bu.forEach(e=>{e.next()})}class cE{constructor(e,n,r){this.query=e,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),n=!0):this.xu(e,this.onlineState)&&(this.Nu(e),n=!0),this.Du=e,n}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),n=!0),n}xu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.ku||!r)&&(!e.docs.isEmpty()||n==="Offline")}Cu(e){if(e.docChanges.length>0)return!0;const n=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Nu(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.key=e}}class LD{constructor(e){this.key=e}}class Wj{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.current=!1,this.Ku=It(),this.mutatedKeys=It(),this.Gu=lD(e),this.Qu=new ju(this.Gu)}get ju(){return this.Uu}Wu(e,n){const r=n?n.zu:new fk,o=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,a=o,s=!1;const u=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,l=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((c,d)=>{const h=o.get(c),f=Yb(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?p!==v&&(r.track({type:3,doc:f}),y=!0):this.Hu(h,f)||(r.track({type:2,doc:f}),y=!0,(u&&this.Gu(f,u)>0||l&&this.Gu(f,l)<0)&&(s=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(u||l)&&(s=!0)),y&&(f?(a=a.add(f),i=v?i.add(c):i.delete(c)):(a=a.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{Qu:a,zu:r,ii:s,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Au();i.sort((l,c)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return f(d)-f(h)}(l.type,c.type)||this.Gu(l.doc,c.doc)),this.Ju(r);const a=n?this.Yu():[],s=this.Ku.size===0&&this.current?1:0,u=s!==this.qu;return this.qu=s,i.length!==0||u?{snapshot:new vl(this.query,e.Qu,o,i,e.mutatedKeys,s===0,u,!1),Xu:a}:{Xu:a}}Pu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new fk,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=It(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new LD(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new $D(r))}),n}ta(e){this.Uu=e._i,this.Ku=It();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ea(){return vl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0)}}class Vj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jj{constructor(e){this.key=e,this.na=!1}}class Hj{constructor(e,n,r,o,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.sa={},this.ia=new Vl(s=>uD(s),tg),this.ra=new Map,this.oa=new Set,this.ua=new yn(Ne.comparator),this.aa=new Map,this.ca=new eE,this.ha={},this.la=new Map,this.fa=ml.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return this.da===!0}}async function qj(t,e){const n=nH(t);let r,o;const i=n.ia.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),o=i.view.ea();else{const a=await uj(n.localStore,Ps(e));n.isPrimaryClient&&AD(n.remoteStore,a);const s=n.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,o=await Gj(n,e,r,s==="current")}return o}async function Gj(t,e,n,r){t._a=(c,d,h)=>async function(f,p,v,y){let m=p.view.Wu(v);m.ii&&(m=await lk(f.localStore,p.query,!1).then(({documents:w})=>p.view.Wu(w,m)));const g=y&&y.targetChanges.get(p.targetId),x=p.view.applyChanges(m,f.isPrimaryClient,g);return mk(f,p.targetId,x.Xu),x.snapshot}(t,c,d,h);const o=await lk(t.localStore,e,!0),i=new Wj(e,o._i),a=i.Wu(o.documents),s=Bh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline"),u=i.applyChanges(a,t.isPrimaryClient,s);mk(t,n,u.Xu);const l=new Vj(e,n,i);return t.ia.set(e,l),t.ra.has(n)?t.ra.get(n).push(e):t.ra.set(n,[e]),u.snapshot}async function Kj(t,e){const n=ze(t),r=n.ia.get(e),o=n.ra.get(r.targetId);if(o.length>1)return n.ra.set(r.targetId,o.filter(i=>!tg(i,e))),void n.ia.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await hx(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ND(n.remoteStore,r.targetId),fx(n,r.targetId)}).catch(zh)):(fx(n,r.targetId),await hx(n.localStore,r.targetId,!0))}async function Xj(t,e,n){const r=rH(t);try{const o=await function(i,a){const s=ze(i),u=Xn.now(),l=a.reduce((d,h)=>d.add(h.key),It());let c;return s.persistence.runTransaction("Locally write mutations","readwrite",d=>s.fi.Ks(d,l).next(h=>{c=h;const f=[];for(const p of a){const v=g6(p,c.get(p.key));v!=null&&f.push(new Lh(p.key,v,aD(v.value.mapValue),Vu.exists(!0)))}return s.Bs.addMutationBatch(d,u,f,a)})).then(d=>(d.applyToLocalDocumentSet(c),{batchId:d.batchId,changes:c}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(i,a,s){let u=i.ha[i.currentUser.toKey()];u||(u=new yn(dt)),u=u.insert(a,s),i.ha[i.currentUser.toKey()]=u}(r,o.batchId,n),await Vh(r,o.changes),await ug(r.remoteStore)}catch(o){const i=aE(o,"Failed to persist write");n.reject(i)}}async function BD(t,e){const n=ze(t);try{const r=await ij(n.localStore,e);e.targetChanges.forEach((o,i)=>{const a=n.aa.get(i);a&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?a.na=!0:o.modifiedDocuments.size>0?wt(a.na):o.removedDocuments.size>0&&(wt(a.na),a.na=!1))}),await Vh(n,r,e)}catch(r){await zh(r)}}function pk(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.ia.forEach((i,a)=>{const s=a.view.Pu(e);s.snapshot&&o.push(s.snapshot)}),function(i,a){const s=ze(i);s.onlineState=a;let u=!1;s.queries.forEach((l,c)=>{for(const d of c.listeners)d.Pu(a)&&(u=!0)}),u&&lE(s)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yj(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.aa.get(e),i=o&&o.key;if(i){let a=new yn(Ne.comparator);a=a.insert(i,Vn.newNoDocument(i,je.min()));const s=It().add(i),u=new ig(je.min(),new Map,new Nn(dt),a,s);await BD(r,u),r.ua=r.ua.remove(i),r.aa.delete(e),dE(r)}else await hx(r.localStore,e,!1).then(()=>fx(r,e,n)).catch(zh)}async function Qj(t,e){const n=ze(t),r=e.batch.batchId;try{const o=await oj(n.localStore,e);zD(n,r,null),UD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vh(n,o)}catch(o){await zh(o)}}async function Jj(t,e,n){const r=ze(t);try{const o=await function(i,a){const s=ze(i);return s.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return s.Bs.lookupMutationBatch(u,a).next(c=>(wt(c!==null),l=c.keys(),s.Bs.removeMutationBatch(u,c))).next(()=>s.Bs.performConsistencyCheck(u)).next(()=>s.fi.Ks(u,l))})}(r.localStore,e);zD(r,e,n),UD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vh(r,o)}catch(o){await zh(o)}}function UD(t,e){(t.la.get(e)||[]).forEach(n=>{n.resolve()}),t.la.delete(e)}function zD(t,e,n){const r=ze(t);let o=r.ha[r.currentUser.toKey()];if(o){const i=o.get(e);i&&(n?i.reject(n):i.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function fx(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ra.get(e))t.ia.delete(r),n&&t.sa.wa(r,n);t.ra.delete(e),t.isPrimaryClient&&t.ca.vi(e).forEach(r=>{t.ca.containsKey(r)||WD(t,r)})}function WD(t,e){t.oa.delete(e.path.canonicalString());const n=t.ua.get(e);n!==null&&(ND(t.remoteStore,n),t.ua=t.ua.remove(e),t.aa.delete(n),dE(t))}function mk(t,e,n){for(const r of n)r instanceof $D?(t.ca.addReference(r.key,e),Zj(t,r)):r instanceof LD?(Re("SyncEngine","Document no longer in limbo: "+r.key),t.ca.removeReference(r.key,e),t.ca.containsKey(r.key)||WD(t,r.key)):Ue()}function Zj(t,e){const n=e.key,r=n.path.canonicalString();t.ua.get(n)||t.oa.has(r)||(Re("SyncEngine","New document in limbo: "+n),t.oa.add(r),dE(t))}function dE(t){for(;t.oa.size>0&&t.ua.size<t.maxConcurrentLimboResolutions;){const e=t.oa.values().next().value;t.oa.delete(e);const n=new Ne(Dt.fromString(e)),r=t.fa.next();t.aa.set(r,new jj(n)),t.ua=t.ua.insert(n,r),AD(t.remoteStore,new fs(Ps(eg(n.path)),r,2,qb.A))}}async function Vh(t,e,n){const r=ze(t),o=[],i=[],a=[];r.ia.isEmpty()||(r.ia.forEach((s,u)=>{a.push(r._a(u,e,n).then(l=>{if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l.fromCache?"not-current":"current"),o.push(l);const c=Zb.Ys(u.targetId,l);i.push(c)}}))}),await Promise.all(a),r.sa.zo(o),await async function(s,u){const l=ze(s);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>ae.forEach(u,d=>ae.forEach(d.Hs,h=>l.persistence.referenceDelegate.addReference(c,d.targetId,h)).next(()=>ae.forEach(d.Js,h=>l.persistence.referenceDelegate.removeReference(c,d.targetId,h)))))}catch(c){if(!Uh(c))throw c;Re("LocalStore","Failed to update sequence numbers: "+c)}for(const c of u){const d=c.targetId;if(!c.fromCache){const h=l.ui.get(d),f=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(f);l.ui=l.ui.insert(d,p)}}}(r.localStore,i))}async function eH(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=await kD(n.localStore,e);n.currentUser=e,function(o,i){o.la.forEach(a=>{a.forEach(s=>{s.reject(new Pe(ne.CANCELLED,i))})}),o.la.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vh(n,r.di)}}function tH(t,e){const n=ze(t),r=n.aa.get(e);if(r&&r.na)return It().add(r.key);{let o=It();const i=n.ra.get(e);if(!i)return o;for(const a of i){const s=n.ia.get(a);o=o.unionWith(s.view.ju)}return o}}function nH(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yj.bind(null,e),e.sa.zo=Uj.bind(null,e.eventManager),e.sa.wa=zj.bind(null,e.eventManager),e}function rH(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jj.bind(null,e),e}class oH{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=ag(e.databaseInfo.databaseId),this.sharedClientState=this.ga(e),this.persistence=this.ya(e),await this.persistence.start(),this.gcScheduler=this.pa(e),this.localStore=this.Ia(e)}pa(e){return null}Ia(e){return rj(this.persistence,new tj,e.initialUser,this.M)}ya(e){return new vj(tE.Yi,this.M)}ga(e){return new yj}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class iH{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eH.bind(null,this.syncEngine),await $j(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Bj}createDatastore(e){const n=ag(e.databaseInfo.databaseId),r=(o=e.databaseInfo,new Ej(o));var o;return function(i,a,s,u){return new Sj(i,a,s,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,o=e.asyncQueue,i=s=>pk(this.syncEngine,s,0),a=dk.vt()?new dk:new xj,new Ij(n,r,o,i,a);var n,r,o,i,a}createSyncEngine(e,n){return function(r,o,i,a,s,u,l){const c=new Hj(r,o,i,a,s,u);return l&&(c.da=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=ze(e);Re("RemoteStore","RemoteStore shutting down."),n.wu.add(5),await Wh(n),n.gu.shutdown(),n.yu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,n,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=ur.UNAUTHENTICATED,this.clientId=nD.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Re("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Re("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=aE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sH(t,e){t.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async o=>{r.isEqual(o)||(await kD(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function uH(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lH(t);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(o=>hk(e.remoteStore,o)),t.setAppCheckTokenChangeListener((o,i)=>hk(e.remoteStore,i)),t.onlineComponents=e}async function lH(t){return t.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),await sH(t,new oH)),t.offlineComponents}async function VD(t){return t.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),await uH(t,new iH)),t.onlineComponents}function cH(t){return VD(t).then(e=>e.syncEngine)}async function Vm(t){const e=await VD(t),n=e.eventManager;return n.onListen=qj.bind(null,e.syncEngine),n.onUnlisten=Kj.bind(null,e.syncEngine),n}function dH(t,e,n={}){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(o,i,a,s,u){const l=new hE({next:d=>{i.enqueueAndForget(()=>uE(o,c));const h=d.docs.has(a);!h&&d.fromCache?u.reject(new Pe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&s&&s.source==="server"?u.reject(new Pe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),c=new cE(eg(a.path),l,{includeMetadataChanges:!0,ku:!0});return sE(o,c)}(await Vm(t),t.asyncQueue,e,n,r)),r.promise}function hH(t,e,n={}){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(o,i,a,s,u){const l=new hE({next:d=>{i.enqueueAndForget(()=>uE(o,c)),d.fromCache&&s.source==="server"?u.reject(new Pe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),c=new cE(a,l,{includeMetadataChanges:!0,ku:!0});return sE(o,c)}(await Vm(t),t.asyncQueue,e,n,r)),r.promise}const vk=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e,n){if(!n)throw new Pe(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fH(t,e,n,r){if(e===!0&&r===!0)throw new Pe(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gk(t){if(!Ne.isDocumentKey(t))throw new Pe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yk(t){if(Ne.isDocumentKey(t))throw new Pe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fE(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ue()}function ki(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Pe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fE(t);throw new Pe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Pe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xk({}),this._settingsFrozen=!1,e instanceof fl?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Pe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xk(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new PV;switch(n.type){case"gapi":const r=n.client;return wt(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new MV(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new Pe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=vk.get(e);n&&(Re("ComponentProvider","Removing Datastore"),vk.delete(e),n.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Er(this.firestore,e,this._key)}}class jh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jh(this.firestore,e,this._query)}}class xa extends jh{constructor(e,n,r){super(e,n,eg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new Ne(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function Np(t,e,...n){if(t=Br(t),jD("collection","path",e),t instanceof pE){const r=Dt.fromString(e,...n);return yk(r),new xa(t,null,r)}{if(!(t instanceof Er||t instanceof xa))throw new Pe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return yk(r),new xa(t.firestore,null,r)}}function Pp(t,e,...n){if(t=Br(t),arguments.length===1&&(e=nD.R()),jD("doc","path",e),t instanceof pE){const r=Dt.fromString(e,...n);return gk(r),new Er(t,null,new Ne(r))}{if(!(t instanceof Er||t instanceof xa))throw new Pe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Dt.fromString(e,...n));return gk(r),new Er(t.firestore,t instanceof xa?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new TD(this,"async_queue_retry"),this.Qa=()=>{const n=s0();n&&Re("AsyncQueue","Visibility state changed to "+n.visibilityState),this.No.Po()};const e=s0();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const n=s0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const n=new _i;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}async za(){if(this.$a.length!==0){try{await this.$a[0](),this.$a.shift(),this.No.reset()}catch(e){if(!Uh(e))throw e;Re("AsyncQueue","Operation failed with retryable error: "+e)}this.$a.length>0&&this.No.Ro(()=>this.za())}}Wa(e){const n=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{this.Ua=r,this.qa=!1;const o=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(r);throw Ia("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.qa=!1,r))));return this.Fa=n,n}enqueueAfterDelay(e,n,r){this.ja(),this.Ga.indexOf(e)>-1&&(n=0);const o=iE.createAndSchedule(this,e,n,r,i=>this.Ha(i));return this.La.push(o),o}ja(){this.Ua&&Ue()}verifyOperationInProgress(){}async Ja(){let e;do e=this.Fa,await e;while(e!==this.Fa)}Ya(e){for(const n of this.La)if(n.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.La)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const n=this.La.indexOf(e);this.La.splice(n,1)}}function wk(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of n)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class gl extends pE{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new pH,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||HD(this),this._firestoreClient.terminate()}}function mH(t=CN()){return cb(t,"firestore").getImmediate()}function lg(t){return t._firestoreClient||HD(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function HD(t){var e;const n=t._freezeSettings(),r=function(o,i,a,s){return new zV(o,i,a,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new aH(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Pe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yl(On.fromBase64String(e))}catch(n){throw new Pe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yl(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Pe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Pe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vH=/^__.*__$/;class gH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lh(e,this.data,this.fieldMask,n,this.fieldTransforms):new og(e,this.data,n,this.fieldTransforms)}}function GD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class gE{constructor(e,n,r,o,i,a){this.settings=e,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=o,i===void 0&&this.tc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new gE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return jm(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(e.length===0)throw this.ac("Document fields must not be empty");if(GD(this.ec)&&vH.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class yH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.M=r||ag(e)}lc(e,n,r,o=!1){return new gE({ec:e,methodName:n,hc:r,path:pr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function xH(t){const e=t._freezeSettings(),n=ag(t._databaseId);return new yH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wH(t,e,n,r,o,i={}){const a=t.lc(i.merge||i.mergeFields?2:0,e,n,o);QD("Data must be an object, but it was:",a,r);const s=XD(r,a);let u,l;if(i.merge)u=new nx(a.fieldMask),l=a.fieldTransforms;else if(i.mergeFields){const c=[];for(const d of i.mergeFields){const h=bH(e,d,n);if(!a.contains(h))throw new Pe(ne.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);CH(c,h)||c.push(h)}u=new nx(c),l=a.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=a.fieldTransforms;return new gH(new go(s),u,l)}function KD(t,e){if(YD(t=Br(t)))return QD("Unsupported field value:",e,t),XD(t,e);if(t instanceof qD)return function(n,r){if(!GD(r.ec))throw r.ac(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ic&&e.ec!==4)throw e.ac("Nested arrays are not supported");return function(n,r){const o=[];let i=0;for(const a of n){let s=KD(a,r.uc(i));s==null&&(s={nullValue:"NULL_VALUE"}),o.push(s),i++}return{arrayValue:{values:o}}}(t,e)}return function(n,r){if((n=Br(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return d6(r.M,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Xn.fromDate(n);return{timestampValue:zm(r.M,o)}}if(n instanceof Xn){const o=new Xn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zm(r.M,o)}}if(n instanceof vE)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof yl)return{bytesValue:bD(r.M,n._byteString)};if(n instanceof Er){const o=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(o))throw r.ac(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Qb(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ac(`Unsupported field value: ${fE(n)}`)}(t,e)}function XD(t,e){const n={};return rD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(t,(r,o)=>{const i=KD(o,e.sc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function YD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xn||t instanceof vE||t instanceof yl||t instanceof Er||t instanceof qD)}function QD(t,e,n){if(!YD(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=fE(n);throw r==="an object"?e.ac(t+" a custom object"):e.ac(t+" "+r)}}function bH(t,e,n){if((e=Br(e))instanceof mE)return e._internalPath;if(typeof e=="string")return JD(t,e);throw jm("Field path arguments must be of type string or ",t,!1,void 0,n)}const EH=new RegExp("[~\\*/\\[\\]]");function JD(t,e,n){if(e.search(EH)>=0)throw jm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mE(...e.split("."))._internalPath}catch{throw jm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jm(t,e,n,r,o){const i=r&&!r.isEmpty(),a=o!==void 0;let s=`Function ${e}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${o}`),u+=")"),new Pe(ne.INVALID_ARGUMENT,s+t+u)}function CH(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n,r,o,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _H(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(eO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _H extends ZD{data(){return super.data()}}function eO(t,e){return typeof e=="string"?JD(t,e):e instanceof mE?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tO extends ZD{constructor(e,n,r,o,i,a){super(e,n,r,o,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(eO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dp extends tO{data(e={}){return super.data(e)}}class nO{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new zc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dp(this._firestore,this._userDataWriter,r.key,r,new zc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new Dp(r._firestore,r._userDataWriter,a.doc.key,a.doc,new zc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:i++}))}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const s=new Dp(r._firestore,r._userDataWriter,a.doc.key,a.doc,new zc(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,l=-1;return a.type!==0&&(u=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),l=i.indexOf(a.doc.key)),{type:SH(a.type),doc:s,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function SH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Pe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ue()}}convertObject(e,n){const r={};return Wl(e.fields,(o,i)=>{r[o]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new vE(Gt(e.latitude),Gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=iD(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jd(e));default:return null}}convertTimestamp(e){const n=Ta(e);return new Xn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Dt.fromString(e);wt(SD(r));const o=new fl(r.get(1),r.get(3)),i=new Ne(r.popFirst(5));return o.isEqual(n)||Ia(`Document ${i} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){t=ki(t,Er);const e=ki(t.firestore,gl);return dH(lg(e),t._key).then(n=>oO(e,t,n))}class yE extends kH{constructor(e){super(),this.firestore=e}convertBytes(e){return new yl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,n)}}function TH(t){t=ki(t,jh);const e=ki(t.firestore,gl),n=lg(e),r=new yE(e);return rO(t._query),hH(n,t._query).then(o=>new nO(e,r,t,o))}function px(t,e,n){t=ki(t,Er);const r=ki(t.firestore,gl),o=IH(t.converter,e,n);return RH(r,[wH(xH(r),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Vu.none())])}function mx(t,...e){var n,r,o;t=Br(t);let i={includeMetadataChanges:!1},a=0;typeof e[a]!="object"||wk(e[a])||(i=e[a],a++);const s={includeMetadataChanges:i.includeMetadataChanges};if(wk(e[a])){const d=e[a];e[a]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[a+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[a+2]=(o=d.complete)===null||o===void 0?void 0:o.bind(d)}let u,l,c;if(t instanceof Er)l=ki(t.firestore,gl),c=eg(t._key.path),u={next:d=>{e[a]&&e[a](oO(l,t,d))},error:e[a+1],complete:e[a+2]};else{const d=ki(t,jh);l=ki(d.firestore,gl),c=d._query;const h=new yE(l);u={next:f=>{e[a]&&e[a](new nO(l,h,d,f))},error:e[a+1],complete:e[a+2]},rO(t._query)}return function(d,h,f,p){const v=new hE(p),y=new cE(h,v,f);return d.asyncQueue.enqueueAndForget(async()=>sE(await Vm(d),y)),()=>{v.Aa(),d.asyncQueue.enqueueAndForget(async()=>uE(await Vm(d),y))}}(lg(l),c,s,u)}function RH(t,e){return function(n,r){const o=new _i;return n.asyncQueue.enqueueAndForget(async()=>Xj(await cH(n),r,o)),o.promise}(lg(t),e)}function oO(t,e,n){const r=n.docs.get(e._key),o=new yE(t);return new tO(t,o,e._key,r,new zc(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){zl=n})(Ch),ul(new Cs("firestore",(n,{options:r})=>{const o=n.getProvider("app").getImmediate(),i=new gl(o,new DV(n.getProvider("auth-internal")),new $V(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),i._setSettings(r),i},"PUBLIC")),ya(VS,"3.4.9",t),ya(VS,"3.4.9","esm2017")})();const ei=Object.create(null);ei.open="0";ei.close="1";ei.ping="2";ei.pong="3";ei.message="4";ei.upgrade="5";ei.noop="6";const Op=Object.create(null);Object.keys(ei).forEach(t=>{Op[ei[t]]=t});const AH={type:"error",data:"parser error"},NH=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",PH=typeof ArrayBuffer=="function",DH=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,iO=({type:t,data:e},n,r)=>NH&&e instanceof Blob?n?r(e):Ek(e,r):PH&&(e instanceof ArrayBuffer||DH(e))?n?r(e):Ek(new Blob([e]),r):r(ei[t]+(e||"")),Ek=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+r)},n.readAsDataURL(t)},Ck="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wc=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let t=0;t<Ck.length;t++)Wc[Ck.charCodeAt(t)]=t;const OH=t=>{let e=t.length*.75,n=t.length,r,o=0,i,a,s,u;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const l=new ArrayBuffer(e),c=new Uint8Array(l);for(r=0;r<n;r+=4)i=Wc[t.charCodeAt(r)],a=Wc[t.charCodeAt(r+1)],s=Wc[t.charCodeAt(r+2)],u=Wc[t.charCodeAt(r+3)],c[o++]=i<<2|a>>4,c[o++]=(a&15)<<4|s>>2,c[o++]=(s&3)<<6|u&63;return l},MH=typeof ArrayBuffer=="function",aO=(t,e)=>{if(typeof t!="string")return{type:"message",data:sO(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:FH(t.substring(1),e)}:Op[n]?t.length>1?{type:Op[n],data:t.substring(1)}:{type:Op[n]}:AH},FH=(t,e)=>{if(MH){const n=OH(t);return sO(n,e)}else return{base64:!0,data:t}},sO=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},uO=String.fromCharCode(30),$H=(t,e)=>{const n=t.length,r=new Array(n);let o=0;t.forEach((i,a)=>{iO(i,!1,s=>{r[a]=s,++o===n&&e(r.join(uO))})})},LH=(t,e)=>{const n=t.split(uO),r=[];for(let o=0;o<n.length;o++){const i=aO(n[o],e);if(r.push(i),i.type==="error")break}return r},lO=4;function Qt(t){if(t)return BH(t)}function BH(t){for(var e in Qt.prototype)t[e]=Qt.prototype[e];return t}Qt.prototype.on=Qt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Qt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Qt.prototype.off=Qt.prototype.removeListener=Qt.prototype.removeAllListeners=Qt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Qt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this};Qt.prototype.emitReserved=Qt.prototype.emit;Qt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Qt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const aa=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function cO(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const UH=setTimeout,zH=clearTimeout;function cg(t,e){e.useNativeTimers?(t.setTimeoutFn=UH.bind(aa),t.clearTimeoutFn=zH.bind(aa)):(t.setTimeoutFn=setTimeout.bind(aa),t.clearTimeoutFn=clearTimeout.bind(aa))}const WH=1.33;function VH(t){return typeof t=="string"?jH(t):Math.ceil((t.byteLength||t.size)*WH)}function jH(t){let e=0,n=0;for(let r=0,o=t.length;r<o;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}class HH extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class dO extends Qt{constructor(e){super(),this.writable=!1,cg(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new HH(e,n,r)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=aO(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const hO="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),vx=64,qH={};let _k=0,Wf=0,Sk;function kk(t){let e="";do e=hO[t%vx]+e,t=Math.floor(t/vx);while(t>0);return e}function fO(){const t=kk(+new Date);return t!==Sk?(_k=0,Sk=t):t+"."+kk(_k++)}for(;Wf<vx;Wf++)qH[hO[Wf]]=Wf;function pO(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function GH(t){let e={},n=t.split("&");for(let r=0,o=n.length;r<o;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}let mO=!1;try{mO=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const KH=mO;function vO(t){const e=t.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||KH))return new XMLHttpRequest}catch{}if(!e)try{return new aa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function XH(){}const YH=function(){return new vO({xdomain:!1}).responseType!=null}();class QH extends dO{constructor(e){if(super(e),this.polling=!1,typeof location!="undefined"){const r=location.protocol==="https:";let o=location.port;o||(o=r?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||o!==e.port,this.xs=e.secure!==r}const n=e&&e.forceBase64;this.supportsBinary=YH&&!n}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};LH(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,$H(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const n=this.opts.secure?"https":"http";let r="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=fO()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(n==="https"&&Number(this.opts.port)!==443||n==="http"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port);const o=pO(e),i=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(o.length?"?"+o:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Xo(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}class Xo extends Qt{constructor(e,n){super(),cg(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.async=n.async!==!1,this.data=n.data!==void 0?n.data:null,this.create()}create(){const e=cO(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const n=this.xhr=new vO(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&n.setRequestHeader(r,this.opts.extraHeaders[r])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(r){this.setTimeoutFn(()=>{this.onError(r)},0);return}typeof document!="undefined"&&(this.index=Xo.requestsCount++,Xo.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=XH,e)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete Xo.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Xo.requestsCount=0;Xo.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Ik);else if(typeof addEventListener=="function"){const t="onpagehide"in aa?"pagehide":"unload";addEventListener(t,Ik,!1)}}function Ik(){for(let t in Xo.requests)Xo.requests.hasOwnProperty(t)&&Xo.requests[t].abort()}const JH=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),Vf=aa.WebSocket||aa.MozWebSocket,Tk=!0,ZH="arraybuffer",Rk=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class e8 extends dO{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=Rk?{}:cO(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Tk&&!Rk?n?new Vf(e,n):new Vf(e):new Vf(e,n,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType||ZH,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;iO(r,this.supportsBinary,i=>{const a={};try{Tk&&this.ws.send(i)}catch{}o&&JH(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const n=this.opts.secure?"wss":"ws";let r="";this.opts.port&&(n==="wss"&&Number(this.opts.port)!==443||n==="ws"&&Number(this.opts.port)!==80)&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=fO()),this.supportsBinary||(e.b64=1);const o=pO(e),i=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(o.length?"?"+o:"")}check(){return!!Vf}}const t8={websocket:e8,polling:QH},n8=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r8=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function gx(t){const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let o=n8.exec(t||""),i={},a=14;for(;a--;)i[r8[a]]=o[a]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=o8(i,i.path),i.queryKey=i8(i,i.query),i}function o8(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.substr(0,1)=="/"||e.length===0)&&r.splice(0,1),e.substr(e.length-1,1)=="/"&&r.splice(r.length-1,1),r}function i8(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,i){o&&(n[o]=i)}),n}class na extends Qt{constructor(e,n={}){super(),e&&typeof e=="object"&&(n=e,e=null),e?(e=gx(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=gx(n.host).host),cg(this,n),this.secure=n.secure!=null?n.secure:typeof location!="undefined"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=n.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=GH(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=lO,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new t8[e](r)}open(){let e;if(this.opts.rememberUpgrade&&na.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;na.priorWebsocketSuccess=!1;const o=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;na.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(c(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function i(){r||(r=!0,c(),n.close(),n=null)}const a=d=>{const h=new Error("probe error: "+d);h.transport=n.name,i(),this.emitReserved("upgradeError",h)};function s(){a("transport closed")}function u(){a("socket closed")}function l(d){n&&d.name!==n.name&&i()}const c=()=>{n.removeListener("open",o),n.removeListener("error",a),n.removeListener("close",s),this.off("close",u),this.off("upgrading",l)};n.once("open",o),n.once("error",a),n.once("close",s),this.once("close",u),this.once("upgrading",l),n.open()}onOpen(){if(this.readyState="open",na.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const o=this.writeBuffer[r].data;if(o&&(n+=VH(o)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,o){if(typeof n=="function"&&(o=n,n=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){na.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const o=e.length;for(;r<o;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}na.protocol=lO;function a8(t,e="",n){let r=t;n=n||typeof location!="undefined"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n!="undefined"?t=n.protocol+"//"+t:t="https://"+t),r=gx(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const s8=typeof ArrayBuffer=="function",u8=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,gO=Object.prototype.toString,l8=typeof Blob=="function"||typeof Blob!="undefined"&&gO.call(Blob)==="[object BlobConstructor]",c8=typeof File=="function"||typeof File!="undefined"&&gO.call(File)==="[object FileConstructor]";function xE(t){return s8&&(t instanceof ArrayBuffer||u8(t))||l8&&t instanceof Blob||c8&&t instanceof File}function Mp(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Mp(t[n]))return!0;return!1}if(xE(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Mp(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Mp(t[n]))return!0;return!1}function d8(t){const e=[],n=t.data,r=t;return r.data=yx(n,e),r.attachments=e.length,{packet:r,buffers:e}}function yx(t,e){if(!t)return t;if(xE(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=yx(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=yx(t[r],e));return n}return t}function h8(t,e){return t.data=xx(t.data,e),t.attachments=void 0,t}function xx(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=xx(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=xx(t[n],e));return t}const f8=5;var et;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(et||(et={}));class p8{constructor(e){this.replacer=e}encode(e){return(e.type===et.EVENT||e.type===et.ACK)&&Mp(e)?(e.type=e.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===et.BINARY_EVENT||e.type===et.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=d8(e),r=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(r),o}}class wE extends Qt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string")n=this.decodeString(e),n.type===et.BINARY_EVENT||n.type===et.BINARY_ACK?(this.reconstructor=new m8(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n);else if(xE(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(et[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===et.BINARY_EVENT||r.type===et.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(i,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const i=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(wE.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case et.CONNECT:return typeof n=="object";case et.DISCONNECT:return n===void 0;case et.CONNECT_ERROR:return typeof n=="string"||typeof n=="object";case et.EVENT:case et.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case et.ACK:case et.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class m8{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=h8(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var v8=Object.freeze(Object.defineProperty({__proto__:null,protocol:f8,get PacketType(){return et},Encoder:p8,Decoder:wE},Symbol.toStringTag,{value:"Module"}));function fo(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const g8=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class yO extends Qt{constructor(e,n,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[fo(e,"open",this.onopen.bind(this)),fo(e,"packet",this.onpacket.bind(this)),fo(e,"error",this.onerror.bind(this)),fo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(g8.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');n.unshift(e);const r={type:et.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const a=this.ids++,s=n.pop();this._registerAckCallback(a,s),r.id=a}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){const r=this.flags.timeout;if(r===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===e&&this.sendBuffer.splice(i,1);n.call(this,new Error("operation has timed out"))},r);this.acks[e]=(...i)=>{this.io.clearTimeoutFn(o),n.apply(this,[null,...i])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:et.CONNECT,data:e})}):this.packet({type:et.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case et.CONNECT:if(e.data&&e.data.sid){const o=e.data.sid;this.onconnect(o)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(e);break;case et.ACK:case et.BINARY_ACK:this.onack(e);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e)}ack(e){const n=this;let r=!1;return function(...o){r||(r=!0,n.packet({type:et.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Hl(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Hl.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Hl.prototype.reset=function(){this.attempts=0};Hl.prototype.setMin=function(t){this.ms=t};Hl.prototype.setMax=function(t){this.max=t};Hl.prototype.setJitter=function(t){this.jitter=t};class wx extends Qt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,cg(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Hl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||v8;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new na(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=fo(n,"open",function(){r.onopen(),e&&e()}),i=fo(n,"error",a=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",a),e?e(a):r.maybeReconnectOnOpen()});if(this._timeout!==!1){const a=this._timeout;a===0&&o();const s=this.setTimeoutFn(()=>{o(),n.close(),n.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}return this.subs.push(o),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(fo(e,"ping",this.onping.bind(this)),fo(e,"data",this.ondata.bind(this)),fo(e,"error",this.onerror.bind(this)),fo(e,"close",this.onclose.bind(this)),fo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r||(r=new yO(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){clearTimeout(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ec={};function Fp(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=a8(t,e.path||"/socket.io"),r=n.source,o=n.id,i=n.path,a=Ec[o]&&i in Ec[o].nsps,s=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let u;return s?u=new wx(r,e):(Ec[o]||(Ec[o]=new wx(r,e)),u=Ec[o]),n.query&&!e.query&&(e.query=n.queryKey),u.socket(n.path,e)}Object.assign(Fp,{Manager:wx,Socket:yO,io:Fp,connect:Fp});function O(){return O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O.apply(this,arguments)}var is;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(is||(is={}));var Ak=function(t){return t},Nk="beforeunload",y8="popstate";function x8(t){t===void 0&&(t={});var e=t,n=e.window,r=n===void 0?document.defaultView:n,o=r.history;function i(){var E=r.location,S=E.pathname,k=E.search,_=E.hash,I=o.state||{};return[I.idx,Ak({pathname:S,search:k,hash:_,state:I.usr||null,key:I.key||"default"})]}var a=null;function s(){if(a)f.call(a),a=null;else{var E=is.Pop,S=i(),k=S[0],_=S[1];if(f.length){if(k!=null){var I=c-k;I&&(a={action:E,location:_,retry:function(){b(I*-1)}},b(I))}}else g(E)}}r.addEventListener(y8,s);var u=is.Pop,l=i(),c=l[0],d=l[1],h=Dk(),f=Dk();c==null&&(c=0,o.replaceState(O({},o.state,{idx:c}),""));function p(E){return typeof E=="string"?E:bx(E)}function v(E,S){return S===void 0&&(S=null),Ak(O({pathname:d.pathname,hash:"",search:""},typeof E=="string"?qs(E):E,{state:S,key:w8()}))}function y(E,S){return[{usr:E.state,key:E.key,idx:S},p(E)]}function m(E,S,k){return!f.length||(f.call({action:E,location:S,retry:k}),!1)}function g(E){u=E;var S=i();c=S[0],d=S[1],h.call({action:u,location:d})}function x(E,S){var k=is.Push,_=v(E,S);function I(){x(E,S)}if(m(k,_,I)){var N=y(_,c+1),$=N[0],M=N[1];try{o.pushState($,"",M)}catch{r.location.assign(M)}g(k)}}function w(E,S){var k=is.Replace,_=v(E,S);function I(){w(E,S)}if(m(k,_,I)){var N=y(_,c),$=N[0],M=N[1];o.replaceState($,"",M),g(k)}}function b(E){o.go(E)}var C={get action(){return u},get location(){return d},createHref:p,push:x,replace:w,go:b,back:function(){b(-1)},forward:function(){b(1)},listen:function(S){return h.push(S)},block:function(S){var k=f.push(S);return f.length===1&&r.addEventListener(Nk,Pk),function(){k(),f.length||r.removeEventListener(Nk,Pk)}}};return C}function Pk(t){t.preventDefault(),t.returnValue=""}function Dk(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter(function(r){return r!==n})}},call:function(n){t.forEach(function(r){return r&&r(n)})}}}function w8(){return Math.random().toString(36).substr(2,8)}function bx(t){var e=t.pathname,n=e===void 0?"/":e,r=t.search,o=r===void 0?"":r,i=t.hash,a=i===void 0?"":i;return o&&o!=="?"&&(n+=o.charAt(0)==="?"?o:"?"+o),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function qs(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const bE=T.exports.createContext(null),EE=T.exports.createContext(null),dg=T.exports.createContext({outlet:null,matches:[]});function ti(t,e){if(!t)throw new Error(e)}function b8(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?qs(e):e,o=bO(r.pathname||"/",n);if(o==null)return null;let i=xO(t);E8(i);let a=null;for(let s=0;a==null&&s<i.length;++s)a=N8(i[s],o);return a}function xO(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((o,i)=>{let a={relativePath:o.path||"",caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||ti(!1),a.relativePath=a.relativePath.slice(r.length));let s=wa([r,a.relativePath]),u=n.concat(a);o.children&&o.children.length>0&&(o.index===!0&&ti(!1),xO(o.children,e,u,s)),!(o.path==null&&!o.index)&&e.push({path:s,score:R8(s,o.index),routesMeta:u})}),e}function E8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:A8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const C8=/^:\w+$/,_8=3,S8=2,k8=1,I8=10,T8=-2,Ok=t=>t==="*";function R8(t,e){let n=t.split("/"),r=n.length;return n.some(Ok)&&(r+=T8),e&&(r+=S8),n.filter(o=>!Ok(o)).reduce((o,i)=>o+(C8.test(i)?_8:i===""?k8:I8),r)}function A8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function N8(t,e){let{routesMeta:n}=t,r={},o="/",i=[];for(let a=0;a<n.length;++a){let s=n[a],u=a===n.length-1,l=o==="/"?e:e.slice(o.length)||"/",c=P8({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let d=s.route;i.push({params:r,pathname:wa([o,c.pathname]),pathnameBase:EO(wa([o,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(o=wa([o,c.pathnameBase]))}return i}function P8(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=D8(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((l,c,d)=>{if(c==="*"){let h=s[d]||"";a=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}return l[c]=O8(s[d]||""),l},{}),pathname:i,pathnameBase:a,pattern:t}}function D8(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(a,s)=>(r.push(s),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(o,e?void 0:"i"),r]}function O8(t,e){try{return decodeURIComponent(t)}catch{return t}}function M8(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?qs(t):t;return{pathname:n?n.startsWith("/")?n:F8(n,e):e,search:L8(r),hash:B8(o)}}function F8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function wO(t,e,n){let r=typeof t=="string"?qs(t):t,o=t===""||r.pathname===""?"/":r.pathname,i;if(o==null)i=n;else{let s=e.length-1;if(o.startsWith("..")){let u=o.split("/");for(;u[0]==="..";)u.shift(),s-=1;r.pathname=u.join("/")}i=s>=0?e[s]:"/"}let a=M8(r,i);return o&&o!=="/"&&o.endsWith("/")&&!a.pathname.endsWith("/")&&(a.pathname+="/"),a}function $8(t){return t===""||t.pathname===""?"/":typeof t=="string"?qs(t).pathname:t.pathname}function bO(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=t.charAt(e.length);return n&&n!=="/"?null:t.slice(e.length)||"/"}const wa=t=>t.join("/").replace(/\/\/+/g,"/"),EO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),L8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,B8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function U8(t){Hh()||ti(!1);let{basename:e,navigator:n}=T.exports.useContext(bE),{hash:r,pathname:o,search:i}=CO(t),a=o;if(e!=="/"){let s=$8(t),u=s!=null&&s.endsWith("/");a=o==="/"?e+(u?"/":""):wa([e,o])}return n.createHref({pathname:a,search:i,hash:r})}function Hh(){return T.exports.useContext(EE)!=null}function hg(){return Hh()||ti(!1),T.exports.useContext(EE).location}function CE(){Hh()||ti(!1);let{basename:t,navigator:e}=T.exports.useContext(bE),{matches:n}=T.exports.useContext(dg),{pathname:r}=hg(),o=JSON.stringify(n.map(s=>s.pathnameBase)),i=T.exports.useRef(!1);return T.exports.useEffect(()=>{i.current=!0}),T.exports.useCallback(function(s,u){if(u===void 0&&(u={}),!i.current)return;if(typeof s=="number"){e.go(s);return}let l=wO(s,JSON.parse(o),r);t!=="/"&&(l.pathname=wa([t,l.pathname])),(u.replace?e.replace:e.push)(l,u.state)},[t,e,o,r])}function CO(t){let{matches:e}=T.exports.useContext(dg),{pathname:n}=hg(),r=JSON.stringify(e.map(o=>o.pathnameBase));return T.exports.useMemo(()=>wO(t,JSON.parse(r),n),[t,r,n])}function z8(t,e){Hh()||ti(!1);let{matches:n}=T.exports.useContext(dg),r=n[n.length-1],o=r?r.params:{};r&&r.pathname;let i=r?r.pathnameBase:"/";r&&r.route;let a=hg(),s;if(e){var u;let h=typeof e=="string"?qs(e):e;i==="/"||((u=h.pathname)==null?void 0:u.startsWith(i))||ti(!1),s=h}else s=a;let l=s.pathname||"/",c=i==="/"?l:l.slice(i.length)||"/",d=b8(t,{pathname:c});return W8(d&&d.map(h=>Object.assign({},h,{params:Object.assign({},o,h.params),pathname:wa([i,h.pathname]),pathnameBase:h.pathnameBase==="/"?i:wa([i,h.pathnameBase])})),n)}function W8(t,e){return e===void 0&&(e=[]),t==null?null:t.reduceRight((n,r,o)=>T.exports.createElement(dg.Provider,{children:r.route.element!==void 0?r.route.element:n,value:{outlet:n,matches:e.concat(t.slice(0,o+1))}}),null)}function fu(t){ti(!1)}function V8(t){let{basename:e="/",children:n=null,location:r,navigationType:o=is.Pop,navigator:i,static:a=!1}=t;Hh()&&ti(!1);let s=EO(e),u=T.exports.useMemo(()=>({basename:s,navigator:i,static:a}),[s,i,a]);typeof r=="string"&&(r=qs(r));let{pathname:l="/",search:c="",hash:d="",state:h=null,key:f="default"}=r,p=T.exports.useMemo(()=>{let v=bO(l,s);return v==null?null:{pathname:v,search:c,hash:d,state:h,key:f}},[s,l,c,d,h,f]);return p==null?null:T.exports.createElement(bE.Provider,{value:u},T.exports.createElement(EE.Provider,{children:n,value:{location:p,navigationType:o}}))}function j8(t){let{children:e,location:n}=t;return z8(Ex(e),n)}function Ex(t){let e=[];return T.exports.Children.forEach(t,n=>{if(!T.exports.isValidElement(n))return;if(n.type===T.exports.Fragment){e.push.apply(e,Ex(n.props.children));return}n.type!==fu&&ti(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=Ex(n.props.children)),e.push(r)}),e}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cx(){return Cx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cx.apply(this,arguments)}function H8(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}const q8=["onClick","reloadDocument","replace","state","target","to"];function G8(t){let{basename:e,children:n,window:r}=t,o=T.exports.useRef();o.current==null&&(o.current=x8({window:r}));let i=o.current,[a,s]=T.exports.useState({action:i.action,location:i.location});return T.exports.useLayoutEffect(()=>i.listen(s),[i]),T.exports.createElement(V8,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:i})}function K8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const _x=T.exports.forwardRef(function(e,n){let{onClick:r,reloadDocument:o,replace:i=!1,state:a,target:s,to:u}=e,l=H8(e,q8),c=U8(u),d=X8(u,{replace:i,state:a,target:s});function h(f){r&&r(f),!f.defaultPrevented&&!o&&d(f)}return T.exports.createElement("a",Cx({},l,{href:c,onClick:h,ref:n,target:s}))});function X8(t,e){let{target:n,replace:r,state:o}=e===void 0?{}:e,i=CE(),a=hg(),s=CO(t);return T.exports.useCallback(u=>{if(u.button===0&&(!n||n==="_self")&&!K8(u)){u.preventDefault();let l=!!r||bx(a)===bx(s);i(t,{replace:l,state:o})}},[a,i,s,r,o,n,t])}const Y8={black:"#000",white:"#fff"};var Xd=Y8;const Q8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var eu=Q8;const J8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var tu=J8;const Z8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var nu=Z8;const eq={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var ru=eq;const tq={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var ou=tq;const nq={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var Cc=nq;const rq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var oq=rq;function ke(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function _O(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var iq=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,aq=_O(function(t){return iq.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function sq(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function uq(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var lq=function(){function t(n){var r=this;this._insertTag=function(o){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,i),r.tags.push(o)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(uq(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var i=sq(o);try{i.insertRule(r,i.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),zn="-ms-",Hm="-moz-",it="-webkit-",SO="comm",_E="rule",SE="decl",cq="@import",kO="@keyframes",dq=Math.abs,fg=String.fromCharCode,hq=Object.assign;function fq(t,e){return(((e<<2^lr(t,0))<<2^lr(t,1))<<2^lr(t,2))<<2^lr(t,3)}function IO(t){return t.trim()}function pq(t,e){return(t=e.exec(t))?t[0]:t}function ct(t,e,n){return t.replace(e,n)}function Sx(t,e){return t.indexOf(e)}function lr(t,e){return t.charCodeAt(e)|0}function Yd(t,e,n){return t.slice(e,n)}function Lo(t){return t.length}function kE(t){return t.length}function jf(t,e){return e.push(t),t}function mq(t,e){return t.map(e).join("")}var pg=1,xl=1,TO=0,kr=0,Kt=0,ql="";function mg(t,e,n,r,o,i,a){return{value:t,root:e,parent:n,type:r,props:o,children:i,line:pg,column:xl,length:a,return:""}}function _c(t,e){return hq(mg("",null,null,"",null,null,0),t,{length:-t.length},e)}function vq(){return Kt}function gq(){return Kt=kr>0?lr(ql,--kr):0,xl--,Kt===10&&(xl=1,pg--),Kt}function Fr(){return Kt=kr<TO?lr(ql,kr++):0,xl++,Kt===10&&(xl=1,pg++),Kt}function Yo(){return lr(ql,kr)}function $p(){return kr}function qh(t,e){return Yd(ql,t,e)}function Qd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function RO(t){return pg=xl=1,TO=Lo(ql=t),kr=0,[]}function AO(t){return ql="",t}function Lp(t){return IO(qh(kr-1,kx(t===91?t+2:t===40?t+1:t)))}function yq(t){for(;(Kt=Yo())&&Kt<33;)Fr();return Qd(t)>2||Qd(Kt)>3?"":" "}function xq(t,e){for(;--e&&Fr()&&!(Kt<48||Kt>102||Kt>57&&Kt<65||Kt>70&&Kt<97););return qh(t,$p()+(e<6&&Yo()==32&&Fr()==32))}function kx(t){for(;Fr();)switch(Kt){case t:return kr;case 34:case 39:t!==34&&t!==39&&kx(Kt);break;case 40:t===41&&kx(t);break;case 92:Fr();break}return kr}function wq(t,e){for(;Fr()&&t+Kt!==47+10;)if(t+Kt===42+42&&Yo()===47)break;return"/*"+qh(e,kr-1)+"*"+fg(t===47?t:Fr())}function bq(t){for(;!Qd(Yo());)Fr();return qh(t,kr)}function Eq(t){return AO(Bp("",null,null,null,[""],t=RO(t),0,[0],t))}function Bp(t,e,n,r,o,i,a,s,u){for(var l=0,c=0,d=a,h=0,f=0,p=0,v=1,y=1,m=1,g=0,x="",w=o,b=i,C=r,E=x;y;)switch(p=g,g=Fr()){case 40:if(p!=108&&E.charCodeAt(d-1)==58){Sx(E+=ct(Lp(g),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:E+=Lp(g);break;case 9:case 10:case 13:case 32:E+=yq(p);break;case 92:E+=xq($p()-1,7);continue;case 47:switch(Yo()){case 42:case 47:jf(Cq(wq(Fr(),$p()),e,n),u);break;default:E+="/"}break;case 123*v:s[l++]=Lo(E)*m;case 125*v:case 59:case 0:switch(g){case 0:case 125:y=0;case 59+c:f>0&&Lo(E)-d&&jf(f>32?Fk(E+";",r,n,d-1):Fk(ct(E," ","")+";",r,n,d-2),u);break;case 59:E+=";";default:if(jf(C=Mk(E,e,n,l,c,o,s,x,w=[],b=[],d),i),g===123)if(c===0)Bp(E,e,C,C,w,i,d,s,b);else switch(h){case 100:case 109:case 115:Bp(t,C,C,r&&jf(Mk(t,C,C,0,0,o,s,x,o,w=[],d),b),o,b,d,s,r?w:b);break;default:Bp(E,C,C,C,[""],b,0,s,b)}}l=c=f=0,v=m=1,x=E="",d=a;break;case 58:d=1+Lo(E),f=p;default:if(v<1){if(g==123)--v;else if(g==125&&v++==0&&gq()==125)continue}switch(E+=fg(g),g*v){case 38:m=c>0?1:(E+="\f",-1);break;case 44:s[l++]=(Lo(E)-1)*m,m=1;break;case 64:Yo()===45&&(E+=Lp(Fr())),h=Yo(),c=d=Lo(x=E+=bq($p())),g++;break;case 45:p===45&&Lo(E)==2&&(v=0)}}return i}function Mk(t,e,n,r,o,i,a,s,u,l,c){for(var d=o-1,h=o===0?i:[""],f=kE(h),p=0,v=0,y=0;p<r;++p)for(var m=0,g=Yd(t,d+1,d=dq(v=a[p])),x=t;m<f;++m)(x=IO(v>0?h[m]+" "+g:ct(g,/&\f/g,h[m])))&&(u[y++]=x);return mg(t,e,n,o===0?_E:s,u,l,c)}function Cq(t,e,n){return mg(t,e,n,SO,fg(vq()),Yd(t,2,-2),0)}function Fk(t,e,n,r){return mg(t,e,n,SE,Yd(t,0,r),Yd(t,r+1,-1),r)}function NO(t,e){switch(fq(t,e)){case 5103:return it+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return it+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return it+t+Hm+t+zn+t+t;case 6828:case 4268:return it+t+zn+t+t;case 6165:return it+t+zn+"flex-"+t+t;case 5187:return it+t+ct(t,/(\w+).+(:[^]+)/,it+"box-$1$2"+zn+"flex-$1$2")+t;case 5443:return it+t+zn+"flex-item-"+ct(t,/flex-|-self/,"")+t;case 4675:return it+t+zn+"flex-line-pack"+ct(t,/align-content|flex-|-self/,"")+t;case 5548:return it+t+zn+ct(t,"shrink","negative")+t;case 5292:return it+t+zn+ct(t,"basis","preferred-size")+t;case 6060:return it+"box-"+ct(t,"-grow","")+it+t+zn+ct(t,"grow","positive")+t;case 4554:return it+ct(t,/([^-])(transform)/g,"$1"+it+"$2")+t;case 6187:return ct(ct(ct(t,/(zoom-|grab)/,it+"$1"),/(image-set)/,it+"$1"),t,"")+t;case 5495:case 3959:return ct(t,/(image-set\([^]*)/,it+"$1$`$1");case 4968:return ct(ct(t,/(.+:)(flex-)?(.*)/,it+"box-pack:$3"+zn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+it+t+t;case 4095:case 3583:case 4068:case 2532:return ct(t,/(.+)-inline(.+)/,it+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Lo(t)-1-e>6)switch(lr(t,e+1)){case 109:if(lr(t,e+4)!==45)break;case 102:return ct(t,/(.+:)(.+)-([^]+)/,"$1"+it+"$2-$3$1"+Hm+(lr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Sx(t,"stretch")?NO(ct(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(lr(t,e+1)!==115)break;case 6444:switch(lr(t,Lo(t)-3-(~Sx(t,"!important")&&10))){case 107:return ct(t,":",":"+it)+t;case 101:return ct(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+it+(lr(t,14)===45?"inline-":"")+"box$3$1"+it+"$2$3$1"+zn+"$2box$3")+t}break;case 5936:switch(lr(t,e+11)){case 114:return it+t+zn+ct(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return it+t+zn+ct(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return it+t+zn+ct(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return it+t+zn+t+t}return t}function Hu(t,e){for(var n="",r=kE(t),o=0;o<r;o++)n+=e(t[o],o,t,e)||"";return n}function _q(t,e,n,r){switch(t.type){case cq:case SE:return t.return=t.return||t.value;case SO:return"";case kO:return t.return=t.value+"{"+Hu(t.children,r)+"}";case _E:t.value=t.props.join(",")}return Lo(n=Hu(t.children,r))?t.return=t.value+"{"+n+"}":""}function Sq(t){var e=kE(t);return function(n,r,o,i){for(var a="",s=0;s<e;s++)a+=t[s](n,r,o,i)||"";return a}}function kq(t){return function(e){e.root||(e=e.return)&&t(e)}}function Iq(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case SE:t.return=NO(t.value,t.length);break;case kO:return Hu([_c(t,{value:ct(t.value,"@","@"+it)})],r);case _E:if(t.length)return mq(t.props,function(o){switch(pq(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hu([_c(t,{props:[ct(o,/:(read-\w+)/,":"+Hm+"$1")]})],r);case"::placeholder":return Hu([_c(t,{props:[ct(o,/:(plac\w+)/,":"+it+"input-$1")]}),_c(t,{props:[ct(o,/:(plac\w+)/,":"+Hm+"$1")]}),_c(t,{props:[ct(o,/:(plac\w+)/,zn+"input-$1")]})],r)}return""})}}var Tq=function(e,n,r){for(var o=0,i=0;o=i,i=Yo(),o===38&&i===12&&(n[r]=1),!Qd(i);)Fr();return qh(e,kr)},Rq=function(e,n){var r=-1,o=44;do switch(Qd(o)){case 0:o===38&&Yo()===12&&(n[r]=1),e[r]+=Tq(kr-1,n,r);break;case 2:e[r]+=Lp(o);break;case 4:if(o===44){e[++r]=Yo()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=fg(o)}while(o=Fr());return e},Aq=function(e,n){return AO(Rq(RO(e),n))},$k=new WeakMap,Nq=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,o=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!$k.get(r))&&!o){$k.set(e,!0);for(var i=[],a=Aq(n,i),s=r.props,u=0,l=0;u<a.length;u++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[u]?a[u].replace(/&\f/g,s[c]):s[c]+" "+a[u]}}},Pq=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}},Dq=[Iq],Oq=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var o=e.stylisPlugins||Dq,i={},a,s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),m=1;m<y.length;m++)i[y[m]]=!0;s.push(v)});var u,l=[Nq,Pq];{var c,d=[_q,kq(function(v){c.insert(v)})],h=Sq(l.concat(o,d)),f=function(y){return Hu(Eq(y),h)};u=function(y,m,g,x){c=g,f(y?y+"{"+m.styles+"}":m.styles),x&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new lq({key:n,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:u};return p.sheet.hydrate(s),p},PO={exports:{}},mt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wn=typeof Symbol=="function"&&Symbol.for,IE=wn?Symbol.for("react.element"):60103,TE=wn?Symbol.for("react.portal"):60106,vg=wn?Symbol.for("react.fragment"):60107,gg=wn?Symbol.for("react.strict_mode"):60108,yg=wn?Symbol.for("react.profiler"):60114,xg=wn?Symbol.for("react.provider"):60109,wg=wn?Symbol.for("react.context"):60110,RE=wn?Symbol.for("react.async_mode"):60111,bg=wn?Symbol.for("react.concurrent_mode"):60111,Eg=wn?Symbol.for("react.forward_ref"):60112,Cg=wn?Symbol.for("react.suspense"):60113,Mq=wn?Symbol.for("react.suspense_list"):60120,_g=wn?Symbol.for("react.memo"):60115,Sg=wn?Symbol.for("react.lazy"):60116,Fq=wn?Symbol.for("react.block"):60121,$q=wn?Symbol.for("react.fundamental"):60117,Lq=wn?Symbol.for("react.responder"):60118,Bq=wn?Symbol.for("react.scope"):60119;function Vr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case IE:switch(t=t.type,t){case RE:case bg:case vg:case yg:case gg:case Cg:return t;default:switch(t=t&&t.$$typeof,t){case wg:case Eg:case Sg:case _g:case xg:return t;default:return e}}case TE:return e}}}function DO(t){return Vr(t)===bg}mt.AsyncMode=RE;mt.ConcurrentMode=bg;mt.ContextConsumer=wg;mt.ContextProvider=xg;mt.Element=IE;mt.ForwardRef=Eg;mt.Fragment=vg;mt.Lazy=Sg;mt.Memo=_g;mt.Portal=TE;mt.Profiler=yg;mt.StrictMode=gg;mt.Suspense=Cg;mt.isAsyncMode=function(t){return DO(t)||Vr(t)===RE};mt.isConcurrentMode=DO;mt.isContextConsumer=function(t){return Vr(t)===wg};mt.isContextProvider=function(t){return Vr(t)===xg};mt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===IE};mt.isForwardRef=function(t){return Vr(t)===Eg};mt.isFragment=function(t){return Vr(t)===vg};mt.isLazy=function(t){return Vr(t)===Sg};mt.isMemo=function(t){return Vr(t)===_g};mt.isPortal=function(t){return Vr(t)===TE};mt.isProfiler=function(t){return Vr(t)===yg};mt.isStrictMode=function(t){return Vr(t)===gg};mt.isSuspense=function(t){return Vr(t)===Cg};mt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===vg||t===bg||t===yg||t===gg||t===Cg||t===Mq||typeof t=="object"&&t!==null&&(t.$$typeof===Sg||t.$$typeof===_g||t.$$typeof===xg||t.$$typeof===wg||t.$$typeof===Eg||t.$$typeof===$q||t.$$typeof===Lq||t.$$typeof===Bq||t.$$typeof===Fq)};mt.typeOf=Vr;PO.exports=mt;var OO=PO.exports,Uq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},MO={};MO[OO.ForwardRef]=Uq;MO[OO.Memo]=zq;var Wq=!0;function Vq(t,e,n){var r="";return n.split(" ").forEach(function(o){t[o]!==void 0?e.push(t[o]+";"):r+=o+" "}),r}var FO=function(e,n,r){var o=e.key+"-"+n.name;(r===!1||Wq===!1)&&e.registered[o]===void 0&&(e.registered[o]=n.styles)},$O=function(e,n,r){FO(e,n,r);var o=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var i=n;do e.insert(n===i?"."+o:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function jq(t){for(var e=0,n,r=0,o=t.length;o>=4;++r,o-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(o){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Hq={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qq=/[A-Z]|^ms/g,Gq=/_EMO_([^_]+?)_([^]*?)_EMO_/g,LO=function(e){return e.charCodeAt(1)===45},Lk=function(e){return e!=null&&typeof e!="boolean"},u0=_O(function(t){return LO(t)?t:t.replace(qq,"-$&").toLowerCase()}),Bk=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Gq,function(r,o,i){return Bo={name:o,styles:i,next:Bo},o})}return Hq[e]!==1&&!LO(e)&&typeof n=="number"&&n!==0?n+"px":n};function Jd(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Bo={name:n.name,styles:n.styles,next:Bo},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Bo={name:r.name,styles:r.styles,next:Bo},r=r.next;var o=n.styles+";";return o}return Kq(t,e,n)}case"function":{if(t!==void 0){var i=Bo,a=n(t);return Bo=i,Jd(t,e,a)}break}}if(e==null)return n;var s=e[n];return s!==void 0?s:n}function Kq(t,e,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Jd(t,e,n[o])+";";else for(var i in n){var a=n[i];if(typeof a!="object")e!=null&&e[a]!==void 0?r+=i+"{"+e[a]+"}":Lk(a)&&(r+=u0(i)+":"+Bk(i,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var s=0;s<a.length;s++)Lk(a[s])&&(r+=u0(i)+":"+Bk(i,a[s])+";");else{var u=Jd(t,e,a);switch(i){case"animation":case"animationName":{r+=u0(i)+":"+u+";";break}default:r+=i+"{"+u+"}"}}}return r}var Uk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Bo,AE=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,i="";Bo=void 0;var a=e[0];a==null||a.raw===void 0?(o=!1,i+=Jd(r,n,a)):i+=a[0];for(var s=1;s<e.length;s++)i+=Jd(r,n,e[s]),o&&(i+=a[s]);Uk.lastIndex=0;for(var u="",l;(l=Uk.exec(i))!==null;)u+="-"+l[1];var c=jq(i)+u;return{name:c,styles:i,next:Bo}},BO=T.exports.createContext(typeof HTMLElement!="undefined"?Oq({key:"css"}):null);BO.Provider;var UO=function(e){return T.exports.forwardRef(function(n,r){var o=T.exports.useContext(BO);return e(n,o,r)})},zO=T.exports.createContext({});gs["useInsertionEffect"]&&gs["useInsertionEffect"];var zk=gs["useInsertionEffect"]?gs["useInsertionEffect"]:T.exports.useLayoutEffect,Xq=UO(function(t,e){var n=t.styles,r=AE([n],void 0,T.exports.useContext(zO)),o=T.exports.useRef();return zk(function(){var i=e.key+"-global",a=new e.sheet.constructor({key:i,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),s=!1,u=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return e.sheet.tags.length&&(a.before=e.sheet.tags[0]),u!==null&&(s=!0,u.setAttribute("data-emotion",i),a.hydrate([u])),o.current=[a,s],function(){a.flush()}},[e]),zk(function(){var i=o.current,a=i[0],s=i[1];if(s){i[1]=!1;return}if(r.next!==void 0&&$O(e,r.next,!0),a.tags.length){var u=a.tags[a.tags.length-1].nextElementSibling;a.before=u,a.flush()}e.insert("",r,a,!1)},[e,r.name]),null});function kg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return AE(e)}var Gl=function(){var e=kg.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Yq=aq,Qq=function(e){return e!=="theme"},Wk=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Yq:Qq},Vk=function(e,n,r){var o;if(n){var i=n.shouldForwardProp;o=e.__emotion_forwardProp&&i?function(a){return e.__emotion_forwardProp(a)&&i(a)}:i}return typeof o!="function"&&r&&(o=e.__emotion_forwardProp),o},Jq=gs["useInsertionEffect"]?gs["useInsertionEffect"]:function(e){e()};function Zq(t){Jq(t)}var eG=function(e){var n=e.cache,r=e.serialized,o=e.isStringTag;return FO(n,r,o),Zq(function(){return $O(n,r,o)}),null},tG=function t(e,n){var r=e.__emotion_real===e,o=r&&e.__emotion_base||e,i,a;n!==void 0&&(i=n.label,a=n.target);var s=Vk(e,n,r),u=s||Wk(o),l=!u("as");return function(){var c=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(i!==void 0&&d.push("label:"+i+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var h=c.length,f=1;f<h;f++)d.push(c[f],c[0][f])}var p=UO(function(v,y,m){var g=l&&v.as||o,x="",w=[],b=v;if(v.theme==null){b={};for(var C in v)b[C]=v[C];b.theme=T.exports.useContext(zO)}typeof v.className=="string"?x=Vq(y.registered,w,v.className):v.className!=null&&(x=v.className+" ");var E=AE(d.concat(w),y.registered,b);x+=y.key+"-"+E.name,a!==void 0&&(x+=" "+a);var S=l&&s===void 0?Wk(g):u,k={};for(var _ in v)l&&_==="as"||S(_)&&(k[_]=v[_]);return k.className=x,k.ref=m,T.exports.createElement(T.exports.Fragment,null,T.exports.createElement(eG,{cache:y,serialized:E,isStringTag:typeof g=="string"}),T.exports.createElement(g,k))});return p.displayName=i!==void 0?i:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=o,p.__emotion_styles=d,p.__emotion_forwardProp=s,Object.defineProperty(p,"toString",{value:function(){return"."+a}}),p.withComponent=function(v,y){return t(v,O({},n,y,{shouldForwardProp:Vk(p,y,!0)})).apply(void 0,d)},p}},nG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Ix=tG.bind();nG.forEach(function(t){Ix[t]=Ix(t)});var rG=Ix,Ig={exports:{}},Tg={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oG=T.exports,iG=Symbol.for("react.element"),aG=Symbol.for("react.fragment"),sG=Object.prototype.hasOwnProperty,uG=oG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lG={key:!0,ref:!0,__self:!0,__source:!0};function WO(t,e,n){var r,o={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)sG.call(e,r)&&!lG.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:iG,type:t,key:i,ref:a,props:o,_owner:uG.current}}Tg.Fragment=aG;Tg.jsx=WO;Tg.jsxs=WO;Ig.exports=Tg;const F=Ig.exports.jsx,ie=Ig.exports.jsxs,sa=Ig.exports.Fragment;var cG=Object.freeze(Object.defineProperty({__proto__:null,jsx:F,jsxs:ie,Fragment:sa},Symbol.toStringTag,{value:"Module"}));function dG(t){return t==null||Object.keys(t).length===0}function hG(t){const{styles:e,defaultTheme:n={}}=t;return F(Xq,{styles:typeof e=="function"?o=>e(dG(o)?n:o):e})}/** @license MUI v5.6.1
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function fG(t,e){return rG(t,e)}function Vc(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Zr(t,e,n={clone:!0}){const r=n.clone?O({},t):t;return Vc(t)&&Vc(e)&&Object.keys(e).forEach(o=>{o!=="__proto__"&&(Vc(e[o])&&o in t&&Vc(t[o])?r[o]=Zr(t[o],e[o],n):r[o]=e[o])}),r}function Os(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}var Et={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg=60103,Ag=60106,Gh=60107,Kh=60108,Xh=60114,Yh=60109,Qh=60110,Jh=60112,Zh=60113,NE=60120,ef=60115,tf=60116,VO=60121,jO=60122,HO=60117,qO=60129,GO=60131;if(typeof Symbol=="function"&&Symbol.for){var bn=Symbol.for;Rg=bn("react.element"),Ag=bn("react.portal"),Gh=bn("react.fragment"),Kh=bn("react.strict_mode"),Xh=bn("react.profiler"),Yh=bn("react.provider"),Qh=bn("react.context"),Jh=bn("react.forward_ref"),Zh=bn("react.suspense"),NE=bn("react.suspense_list"),ef=bn("react.memo"),tf=bn("react.lazy"),VO=bn("react.block"),jO=bn("react.server.block"),HO=bn("react.fundamental"),qO=bn("react.debug_trace_mode"),GO=bn("react.legacy_hidden")}function ko(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Rg:switch(t=t.type,t){case Gh:case Xh:case Kh:case Zh:case NE:return t;default:switch(t=t&&t.$$typeof,t){case Qh:case Jh:case tf:case ef:case Yh:return t;default:return e}}case Ag:return e}}}var pG=Yh,mG=Rg,vG=Jh,gG=Gh,yG=tf,xG=ef,wG=Ag,bG=Xh,EG=Kh,CG=Zh;Et.ContextConsumer=Qh;Et.ContextProvider=pG;Et.Element=mG;Et.ForwardRef=vG;Et.Fragment=gG;Et.Lazy=yG;Et.Memo=xG;Et.Portal=wG;Et.Profiler=bG;Et.StrictMode=EG;Et.Suspense=CG;Et.isAsyncMode=function(){return!1};Et.isConcurrentMode=function(){return!1};Et.isContextConsumer=function(t){return ko(t)===Qh};Et.isContextProvider=function(t){return ko(t)===Yh};Et.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rg};Et.isForwardRef=function(t){return ko(t)===Jh};Et.isFragment=function(t){return ko(t)===Gh};Et.isLazy=function(t){return ko(t)===tf};Et.isMemo=function(t){return ko(t)===ef};Et.isPortal=function(t){return ko(t)===Ag};Et.isProfiler=function(t){return ko(t)===Xh};Et.isStrictMode=function(t){return ko(t)===Kh};Et.isSuspense=function(t){return ko(t)===Zh};Et.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Gh||t===Xh||t===qO||t===Kh||t===Zh||t===NE||t===GO||typeof t=="object"&&t!==null&&(t.$$typeof===tf||t.$$typeof===ef||t.$$typeof===Yh||t.$$typeof===Qh||t.$$typeof===Jh||t.$$typeof===HO||t.$$typeof===VO||t[0]===jO)};Et.typeOf=ko;function re(t){if(typeof t!="string")throw new Error(Os(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Tx(...t){return t.reduce((e,n)=>n==null?e:function(...o){e.apply(this,o),n.apply(this,o)},()=>{})}function Ng(t,e=166){let n;function r(...o){const i=()=>{t.apply(this,o)};clearTimeout(n),n=setTimeout(i,e)}return r.clear=()=>{clearTimeout(n)},r}function _G(t,e){return()=>null}function Up(t,e){return T.exports.isValidElement(t)&&e.indexOf(t.type.muiName)!==-1}function Pn(t){return t&&t.ownerDocument||document}function ni(t){return Pn(t).defaultView||window}function SG(t,e){return()=>null}function Zd(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const kG=typeof window!="undefined"?T.exports.useLayoutEffect:T.exports.useEffect;var ri=kG;let jk=0;function IG(t){const[e,n]=T.exports.useState(t),r=t||e;return T.exports.useEffect(()=>{e==null&&(jk+=1,n(`mui-${jk}`))},[e]),r}const Hk=gs["useId"];function Pg(t){if(Hk!==void 0){const e=Hk();return t!=null?t:e}return IG(t)}function TG(t,e,n,r,o){return null}function qm({controlled:t,default:e,name:n,state:r="value"}){const{current:o}=T.exports.useRef(t!==void 0),[i,a]=T.exports.useState(e),s=o?t:i,u=T.exports.useCallback(l=>{o||a(l)},[]);return[s,u]}function wo(t){const e=T.exports.useRef(t);return ri(()=>{e.current=t}),T.exports.useCallback((...n)=>(0,e.current)(...n),[])}function pt(t,e){return T.exports.useMemo(()=>t==null&&e==null?null:n=>{Zd(t,n),Zd(e,n)},[t,e])}let Dg=!0,Rx=!1,qk;const RG={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function AG(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&RG[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function NG(t){t.metaKey||t.altKey||t.ctrlKey||(Dg=!0)}function l0(){Dg=!1}function PG(){this.visibilityState==="hidden"&&Rx&&(Dg=!0)}function DG(t){t.addEventListener("keydown",NG,!0),t.addEventListener("mousedown",l0,!0),t.addEventListener("pointerdown",l0,!0),t.addEventListener("touchstart",l0,!0),t.addEventListener("visibilitychange",PG,!0)}function OG(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Dg||AG(e)}function PE(){const t=T.exports.useCallback(o=>{o!=null&&DG(o.ownerDocument)},[]),e=T.exports.useRef(!1);function n(){return e.current?(Rx=!0,window.clearTimeout(qk),qk=window.setTimeout(()=>{Rx=!1},100),e.current=!1,!0):!1}function r(o){return OG(o)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function KO(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function XO(t,e){const n=O({},e);return Object.keys(t).forEach(r=>{n[r]===void 0&&(n[r]=t[r])}),n}function ud(t,e){return e?Zr(t,e,{clone:!1}):t}const DE={xs:0,sm:600,md:900,lg:1200,xl:1536},Gk={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${DE[t]}px)`};function $a(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const i=r.breakpoints||Gk;return e.reduce((a,s,u)=>(a[i.up(i.keys[u])]=n(e[u]),a),{})}if(typeof e=="object"){const i=r.breakpoints||Gk;return Object.keys(e).reduce((a,s)=>{if(Object.keys(i.values||DE).indexOf(s)!==-1){const u=i.up(s);a[u]=n(e[s],s)}else{const u=s;a[u]=e[u]}return a},{})}return n(e)}function MG(t={}){var e;return(t==null||(e=t.keys)==null?void 0:e.reduce((r,o)=>{const i=t.up(o);return r[i]={},r},{}))||{}}function FG(t,e){return t.reduce((n,r)=>{const o=n[r];return(!o||Object.keys(o).length===0)&&delete n[r],n},e)}function OE(t,e){if(!e||typeof e!="string")return null;if(t&&t.vars){const n=`vars.${e}`.split(".").reduce((r,o)=>r&&r[o]?r[o]:null,t);if(n!=null)return n}return e.split(".").reduce((n,r)=>n&&n[r]!=null?n[r]:null,t)}function Kk(t,e,n,r=n){let o;return typeof t=="function"?o=t(n):Array.isArray(t)?o=t[n]||r:o=OE(t,n)||r,e&&(o=e(o)),o}function we(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:o}=t,i=a=>{if(a[e]==null)return null;const s=a[e],u=a.theme,l=OE(u,r)||{};return $a(a,s,d=>{let h=Kk(l,o,d);return d===h&&typeof d=="string"&&(h=Kk(l,o,`${e}${d==="default"?"":re(d)}`,d)),n===!1?h:{[n]:h}})};return i.propTypes={},i.filterProps=[e],i}function La(...t){const e=t.reduce((r,o)=>(o.filterProps.forEach(i=>{r[i]=o}),r),{}),n=r=>Object.keys(r).reduce((o,i)=>e[i]?ud(o,e[i](r)):o,{});return n.propTypes={},n.filterProps=t.reduce((r,o)=>r.concat(o.filterProps),[]),n}function $G(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const LG={m:"margin",p:"padding"},BG={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Xk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},UG=$G(t=>{if(t.length>2)if(Xk[t])t=Xk[t];else return[t];const[e,n]=t.split(""),r=LG[e],o=BG[n]||"";return Array.isArray(o)?o.map(i=>r+i):[r+o]}),zG=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],WG=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],YO=[...zG,...WG];function nf(t,e,n,r){var o;const i=(o=OE(t,e))!=null?o:n;return typeof i=="number"?a=>typeof a=="string"?a:i*a:Array.isArray(i)?a=>typeof a=="string"?a:i[a]:typeof i=="function"?i:()=>{}}function QO(t){return nf(t,"spacing",8)}function rf(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function VG(t,e){return n=>t.reduce((r,o)=>(r[o]=rf(e,n),r),{})}function jG(t,e,n,r){if(e.indexOf(n)===-1)return null;const o=UG(n),i=VG(o,r),a=t[n];return $a(t,a,i)}function HG(t,e){const n=QO(t.theme);return Object.keys(t).map(r=>jG(t,e,r,n)).reduce(ud,{})}function Og(t){return HG(t,YO)}Og.propTypes={};Og.filterProps=YO;function of(t){return typeof t!="number"?t:`${t}px solid`}const qG=we({prop:"border",themeKey:"borders",transform:of}),GG=we({prop:"borderTop",themeKey:"borders",transform:of}),KG=we({prop:"borderRight",themeKey:"borders",transform:of}),XG=we({prop:"borderBottom",themeKey:"borders",transform:of}),YG=we({prop:"borderLeft",themeKey:"borders",transform:of}),QG=we({prop:"borderColor",themeKey:"palette"}),JG=we({prop:"borderTopColor",themeKey:"palette"}),ZG=we({prop:"borderRightColor",themeKey:"palette"}),eK=we({prop:"borderBottomColor",themeKey:"palette"}),tK=we({prop:"borderLeftColor",themeKey:"palette"}),ME=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=nf(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:rf(e,r)});return $a(t,t.borderRadius,n)}return null};ME.propTypes={};ME.filterProps=["borderRadius"];const nK=La(qG,GG,KG,XG,YG,QG,JG,ZG,eK,tK,ME);var JO=nK;const rK=we({prop:"displayPrint",cssProperty:!1,transform:t=>({"@media print":{display:t}})}),oK=we({prop:"display"}),iK=we({prop:"overflow"}),aK=we({prop:"textOverflow"}),sK=we({prop:"visibility"}),uK=we({prop:"whiteSpace"});var ZO=La(rK,oK,iK,aK,sK,uK);const lK=we({prop:"flexBasis"}),cK=we({prop:"flexDirection"}),dK=we({prop:"flexWrap"}),hK=we({prop:"justifyContent"}),fK=we({prop:"alignItems"}),pK=we({prop:"alignContent"}),mK=we({prop:"order"}),vK=we({prop:"flex"}),gK=we({prop:"flexGrow"}),yK=we({prop:"flexShrink"}),xK=we({prop:"alignSelf"}),wK=we({prop:"justifyItems"}),bK=we({prop:"justifySelf"}),EK=La(lK,cK,dK,hK,fK,pK,mK,vK,gK,yK,xK,wK,bK);var eM=EK;const FE=t=>{if(t.gap!==void 0&&t.gap!==null){const e=nf(t.theme,"spacing",8),n=r=>({gap:rf(e,r)});return $a(t,t.gap,n)}return null};FE.propTypes={};FE.filterProps=["gap"];const $E=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=nf(t.theme,"spacing",8),n=r=>({columnGap:rf(e,r)});return $a(t,t.columnGap,n)}return null};$E.propTypes={};$E.filterProps=["columnGap"];const LE=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=nf(t.theme,"spacing",8),n=r=>({rowGap:rf(e,r)});return $a(t,t.rowGap,n)}return null};LE.propTypes={};LE.filterProps=["rowGap"];const CK=we({prop:"gridColumn"}),_K=we({prop:"gridRow"}),SK=we({prop:"gridAutoFlow"}),kK=we({prop:"gridAutoColumns"}),IK=we({prop:"gridAutoRows"}),TK=we({prop:"gridTemplateColumns"}),RK=we({prop:"gridTemplateRows"}),AK=we({prop:"gridTemplateAreas"}),NK=we({prop:"gridArea"}),PK=La(FE,$E,LE,CK,_K,SK,kK,IK,TK,RK,AK,NK);var tM=PK;const DK=we({prop:"color",themeKey:"palette"}),OK=we({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),MK=we({prop:"backgroundColor",themeKey:"palette"}),FK=La(DK,OK,MK);var nM=FK;const $K=we({prop:"position"}),LK=we({prop:"zIndex",themeKey:"zIndex"}),BK=we({prop:"top"}),UK=we({prop:"right"}),zK=we({prop:"bottom"}),WK=we({prop:"left"});var rM=La($K,LK,BK,UK,zK,WK);const VK=we({prop:"boxShadow",themeKey:"shadows"});var oM=VK;function Ba(t){return t<=1&&t!==0?`${t*100}%`:t}const jK=we({prop:"width",transform:Ba}),iM=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,o,i;return{maxWidth:((r=t.theme)==null||(o=r.breakpoints)==null||(i=o.values)==null?void 0:i[n])||DE[n]||Ba(n)}};return $a(t,t.maxWidth,e)}return null};iM.filterProps=["maxWidth"];const HK=we({prop:"minWidth",transform:Ba}),qK=we({prop:"height",transform:Ba}),GK=we({prop:"maxHeight",transform:Ba}),KK=we({prop:"minHeight",transform:Ba});we({prop:"size",cssProperty:"width",transform:Ba});we({prop:"size",cssProperty:"height",transform:Ba});const XK=we({prop:"boxSizing"}),YK=La(jK,iM,HK,qK,GK,KK,XK);var aM=YK;const QK=we({prop:"fontFamily",themeKey:"typography"}),JK=we({prop:"fontSize",themeKey:"typography"}),ZK=we({prop:"fontStyle",themeKey:"typography"}),e7=we({prop:"fontWeight",themeKey:"typography"}),t7=we({prop:"letterSpacing"}),n7=we({prop:"textTransform"}),r7=we({prop:"lineHeight"}),o7=we({prop:"textAlign"}),i7=we({prop:"typography",cssProperty:!1,themeKey:"typography"}),a7=La(i7,QK,JK,ZK,e7,t7,r7,o7,n7);var sM=a7;const Yk={borders:JO.filterProps,display:ZO.filterProps,flexbox:eM.filterProps,grid:tM.filterProps,positions:rM.filterProps,palette:nM.filterProps,shadows:oM.filterProps,sizing:aM.filterProps,spacing:Og.filterProps,typography:sM.filterProps},uM={borders:JO,display:ZO,flexbox:eM,grid:tM,positions:rM,palette:nM,shadows:oM,sizing:aM,spacing:Og,typography:sM},s7=Object.keys(Yk).reduce((t,e)=>(Yk[e].forEach(n=>{t[n]=uM[e]}),t),{});function u7(...t){const e=t.reduce((r,o)=>r.concat(Object.keys(o)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function l7(t,e){return typeof t=="function"?t(e):t}function c7(t=uM){const e=Object.keys(t).reduce((o,i)=>(t[i].filterProps.forEach(a=>{o[a]=t[i]}),o),{});function n(o,i,a){const s={[o]:i,theme:a},u=e[o];return u?u(s):{[o]:i}}function r(o){const{sx:i,theme:a={}}=o||{};if(!i)return null;function s(u){let l=u;if(typeof u=="function")l=u(a);else if(typeof u!="object")return u;if(!l)return null;const c=MG(a.breakpoints),d=Object.keys(c);let h=c;return Object.keys(l).forEach(f=>{const p=l7(l[f],a);if(p!=null)if(typeof p=="object")if(e[f])h=ud(h,n(f,p,a));else{const v=$a({theme:a},p,y=>({[f]:y}));u7(v,p)?h[f]=r({sx:p,theme:a}):h=ud(h,v)}else h=ud(h,n(f,p,a))}),FG(d,h)}return Array.isArray(i)?i.map(s):s(i)}return r}const lM=c7();lM.filterProps=["sx"];var d7=lM;const h7=["sx"],f7=t=>{const e={systemProps:{},otherProps:{}};return Object.keys(t).forEach(n=>{s7[n]?e.systemProps[n]=t[n]:e.otherProps[n]=t[n]}),e};function p7(t){const{sx:e}=t,n=ke(t,h7),{systemProps:r,otherProps:o}=f7(n);let i;return Array.isArray(e)?i=[r,...e]:typeof e=="function"?i=(...a)=>{const s=e(...a);return Vc(s)?O({},r,s):r}:i=O({},r,e),O({},o,{sx:i})}function cM(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=cM(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Ae(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=cM(e))&&(r&&(r+=" "),r+=n);return r}const m7=["values","unit","step"],v7=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>O({},n,{[r.key]:r.val}),{})};function g7(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,o=ke(t,m7),i=v7(e),a=Object.keys(i);function s(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function u(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function l(h,f){const p=a.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[a[p]]=="number"?e[a[p]]:f)-r/100}${n})`}function c(h){return a.indexOf(h)+1<a.length?l(h,a[a.indexOf(h)+1]):s(h)}function d(h){const f=a.indexOf(h);return f===0?s(a[1]):f===a.length-1?u(a[f]):l(h,a[a.indexOf(h)+1]).replace("@media","@media not all and")}return O({keys:a,values:i,up:s,down:u,between:l,only:c,not:d,unit:n},o)}const y7={borderRadius:4};var x7=y7;function w7(t=8){if(t.mui)return t;const e=QO({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(i=>{const a=e(i);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}const b7=["breakpoints","palette","spacing","shape"];function BE(t={},...e){const{breakpoints:n={},palette:r={},spacing:o,shape:i={}}=t,a=ke(t,b7),s=g7(n),u=w7(o);let l=Zr({breakpoints:s,direction:"ltr",components:{},palette:O({mode:"light"},r),spacing:u,shape:O({},x7,i)},a);return l=e.reduce((c,d)=>Zr(c,d),l),l}const E7=T.exports.createContext(null);var C7=E7;function _7(){return T.exports.useContext(C7)}function S7(t){return Object.keys(t).length===0}function dM(t=null){const e=_7();return!e||S7(e)?t:e}const k7=BE();function hM(t=k7){return dM(t)}const I7=["variant"];function Qk(t){return t.length===0}function fM(t){const{variant:e}=t,n=ke(t,I7);let r=e||"";return Object.keys(n).sort().forEach(o=>{o==="color"?r+=Qk(r)?t[o]:re(t[o]):r+=`${Qk(r)?o:re(o)}${re(t[o].toString())}`}),r}const T7=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],R7=["theme"],A7=["theme"];function Sc(t){return Object.keys(t).length===0}const N7=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,P7=(t,e)=>{let n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);const r={};return n.forEach(o=>{const i=fM(o.props);r[i]=o.style}),r},D7=(t,e,n,r)=>{var o,i;const{ownerState:a={}}=t,s=[],u=n==null||(o=n.components)==null||(i=o[r])==null?void 0:i.variants;return u&&u.forEach(l=>{let c=!0;Object.keys(l.props).forEach(d=>{a[d]!==l.props[d]&&t[d]!==l.props[d]&&(c=!1)}),c&&s.push(e[fM(l.props)])}),s};function ld(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const O7=BE();function M7(t={}){const{defaultTheme:e=O7,rootShouldForwardProp:n=ld,slotShouldForwardProp:r=ld,styleFunctionSx:o=d7}=t;return(i,a={})=>{const{name:s,slot:u,skipVariantsResolver:l,skipSx:c,overridesResolver:d}=a,h=ke(a,T7),f=l!==void 0?l:u&&u!=="Root"||!1,p=c||!1;let v,y=ld;u==="Root"?y=n:u&&(y=r);const m=fG(i,O({shouldForwardProp:y,label:v},h)),g=(x,...w)=>{const b=w?w.map(k=>typeof k=="function"&&k.__emotion_real!==k?_=>{let{theme:I}=_,N=ke(_,R7);return k(O({theme:Sc(I)?e:I},N))}:k):[];let C=x;s&&d&&b.push(k=>{const _=Sc(k.theme)?e:k.theme,I=N7(s,_);if(I){const N={};return Object.entries(I).forEach(([$,M])=>{N[$]=typeof M=="function"?M(O({},k,{theme:_})):M}),d(k,N)}return null}),s&&!f&&b.push(k=>{const _=Sc(k.theme)?e:k.theme;return D7(k,P7(s,_),_,s)}),p||b.push(k=>{const _=Sc(k.theme)?e:k.theme;return o(O({},k,{theme:_}))});const E=b.length-w.length;if(Array.isArray(x)&&E>0){const k=new Array(E).fill("");C=[...x,...k],C.raw=[...x.raw,...k]}else typeof x=="function"&&x.__emotion_real!==x&&(C=k=>{let{theme:_}=k,I=ke(k,A7);return x(O({theme:Sc(_)?e:_},I))});return m(C,...b)};return m.withConfig&&(g.withConfig=m.withConfig),g}}function F7(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:XO(e.components[n].defaultProps,r)}function $7({props:t,name:e,defaultTheme:n}){const r=hM(n);return F7({theme:r,name:e,props:t})}function UE(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function L7(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,o)=>o<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Ms(t){if(t.type)return t;if(t.charAt(0)==="#")return Ms(L7(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Os(9,t));let r=t.substring(e+1,t.length-1),o;if(n==="color"){if(r=r.split(" "),o=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(o)===-1)throw new Error(Os(10,o))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:n,values:r,colorSpace:o}}function Mg(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((o,i)=>i<3?parseInt(o,10):o):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function B7(t){t=Ms(t);const{values:e}=t,n=e[0],r=e[1]/100,o=e[2]/100,i=r*Math.min(o,1-o),a=(l,c=(l+n/30)%12)=>o-i*Math.max(Math.min(c-3,9-c,1),-1);let s="rgb";const u=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(s+="a",u.push(e[3])),Mg({type:s,values:u})}function Ax(t){t=Ms(t);let e=t.type==="hsl"?Ms(B7(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function U7(t,e){const n=Ax(t),r=Ax(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function At(t,e){return t=Ms(t),e=UE(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Mg(t)}function zE(t,e){if(t=Ms(t),e=UE(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Mg(t)}function WE(t,e){if(t=Ms(t),e=UE(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Mg(t)}function z7(t,e=.15){return Ax(t)>.5?zE(t,e):WE(t,e)}function eh(t){return typeof t=="string"}function Hf(t,e={},n){return eh(t)?e:O({},e,{ownerState:O({},e.ownerState,n)})}function nt(t,e,n){const r={};return Object.keys(t).forEach(o=>{r[o]=t[o].reduce((i,a)=>(a&&(n&&n[a]&&i.push(n[a]),i.push(e(a))),i),[]).join(" ")}),r}const Jk=t=>t,W7=()=>{let t=Jk;return{configure(e){t=e},generate(e){return t(e)},reset(){t=Jk}}},V7=W7();var pM=V7;const j7={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function Qe(t,e){return j7[e]||`${pM.generate(t)}-${e}`}function Ge(t,e){const n={};return e.forEach(r=>{n[r]=Qe(t,r)}),n}function Zk(t){return t.substring(2).toLowerCase()}function H7(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function q7(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:o,touchEvent:i="onTouchEnd"}=t,a=T.exports.useRef(!1),s=T.exports.useRef(null),u=T.exports.useRef(!1),l=T.exports.useRef(!1);T.exports.useEffect(()=>(setTimeout(()=>{u.current=!0},0),()=>{u.current=!1}),[]);const c=pt(e.ref,s),d=wo(p=>{const v=l.current;l.current=!1;const y=Pn(s.current);if(!u.current||!s.current||"clientX"in p&&H7(p,y))return;if(a.current){a.current=!1;return}let m;p.composedPath?m=p.composedPath().indexOf(s.current)>-1:m=!y.documentElement.contains(p.target)||s.current.contains(p.target),!m&&(n||!v)&&o(p)}),h=p=>v=>{l.current=!0;const y=e.props[p];y&&y(v)},f={ref:c};return i!==!1&&(f[i]=h(i)),T.exports.useEffect(()=>{if(i!==!1){const p=Zk(i),v=Pn(s.current),y=()=>{a.current=!0};return v.addEventListener(p,d),v.addEventListener("touchmove",y),()=>{v.removeEventListener(p,d),v.removeEventListener("touchmove",y)}}},[d,i]),r!==!1&&(f[r]=h(r)),T.exports.useEffect(()=>{if(r!==!1){const p=Zk(r),v=Pn(s.current);return v.addEventListener(p,d),()=>{v.removeEventListener(p,d)}}},[d,r]),F(T.exports.Fragment,{children:T.exports.cloneElement(e,f)})}var Cr="top",oo="bottom",io="right",_r="left",VE="auto",af=[Cr,oo,io,_r],wl="start",th="end",G7="clippingParents",mM="viewport",kc="popper",K7="reference",eI=af.reduce(function(t,e){return t.concat([e+"-"+wl,e+"-"+th])},[]),vM=[].concat(af,[VE]).reduce(function(t,e){return t.concat([e,e+"-"+wl,e+"-"+th])},[]),X7="beforeRead",Y7="read",Q7="afterRead",J7="beforeMain",Z7="main",e9="afterMain",t9="beforeWrite",n9="write",r9="afterWrite",o9=[X7,Y7,Q7,J7,Z7,e9,t9,n9,r9];function oi(t){return t?(t.nodeName||"").toLowerCase():null}function Io(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function bl(t){var e=Io(t).Element;return t instanceof e||t instanceof Element}function eo(t){var e=Io(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function jE(t){if(typeof ShadowRoot=="undefined")return!1;var e=Io(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function i9(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},o=e.attributes[n]||{},i=e.elements[n];!eo(i)||!oi(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(a){var s=o[a];s===!1?i.removeAttribute(a):i.setAttribute(a,s===!0?"":s)}))})}function a9(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],i=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(u,l){return u[l]="",u},{});!eo(o)||!oi(o)||(Object.assign(o.style,s),Object.keys(i).forEach(function(u){o.removeAttribute(u)}))})}}var s9={name:"applyStyles",enabled:!0,phase:"write",fn:i9,effect:a9,requires:["computeStyles"]};function Qo(t){return t.split("-")[0]}var ps=Math.max,Gm=Math.min,El=Math.round;function Cl(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),r=1,o=1;if(eo(t)&&e){var i=t.offsetHeight,a=t.offsetWidth;a>0&&(r=El(n.width)/a||1),i>0&&(o=El(n.height)/i||1)}return{width:n.width/r,height:n.height/o,top:n.top/o,right:n.right/r,bottom:n.bottom/o,left:n.left/r,x:n.left/r,y:n.top/o}}function HE(t){var e=Cl(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function gM(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&jE(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Di(t){return Io(t).getComputedStyle(t)}function u9(t){return["table","td","th"].indexOf(oi(t))>=0}function Ua(t){return((bl(t)?t.ownerDocument:t.document)||window.document).documentElement}function Fg(t){return oi(t)==="html"?t:t.assignedSlot||t.parentNode||(jE(t)?t.host:null)||Ua(t)}function tI(t){return!eo(t)||Di(t).position==="fixed"?null:t.offsetParent}function l9(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&eo(t)){var r=Di(t);if(r.position==="fixed")return null}var o=Fg(t);for(jE(o)&&(o=o.host);eo(o)&&["html","body"].indexOf(oi(o))<0;){var i=Di(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function sf(t){for(var e=Io(t),n=tI(t);n&&u9(n)&&Di(n).position==="static";)n=tI(n);return n&&(oi(n)==="html"||oi(n)==="body"&&Di(n).position==="static")?e:n||l9(t)||e}function qE(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function cd(t,e,n){return ps(t,Gm(e,n))}function c9(t,e,n){var r=cd(t,e,n);return r>n?n:r}function yM(){return{top:0,right:0,bottom:0,left:0}}function xM(t){return Object.assign({},yM(),t)}function wM(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var d9=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,xM(typeof e!="number"?e:wM(e,af))};function h9(t){var e,n=t.state,r=t.name,o=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Qo(n.placement),u=qE(s),l=[_r,io].indexOf(s)>=0,c=l?"height":"width";if(!(!i||!a)){var d=d9(o.padding,n),h=HE(i),f=u==="y"?Cr:_r,p=u==="y"?oo:io,v=n.rects.reference[c]+n.rects.reference[u]-a[u]-n.rects.popper[c],y=a[u]-n.rects.reference[u],m=sf(i),g=m?u==="y"?m.clientHeight||0:m.clientWidth||0:0,x=v/2-y/2,w=d[f],b=g-h[c]-d[p],C=g/2-h[c]/2+x,E=cd(w,C,b),S=u;n.modifiersData[r]=(e={},e[S]=E,e.centerOffset=E-C,e)}}function f9(t){var e=t.state,n=t.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||!gM(e.elements.popper,o)||(e.elements.arrow=o))}var p9={name:"arrow",enabled:!0,phase:"main",fn:h9,effect:f9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function _l(t){return t.split("-")[1]}var m9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function v9(t){var e=t.x,n=t.y,r=window,o=r.devicePixelRatio||1;return{x:El(e*o)/o||0,y:El(n*o)/o||0}}function nI(t){var e,n=t.popper,r=t.popperRect,o=t.placement,i=t.variation,a=t.offsets,s=t.position,u=t.gpuAcceleration,l=t.adaptive,c=t.roundOffsets,d=t.isFixed,h=a.x,f=h===void 0?0:h,p=a.y,v=p===void 0?0:p,y=typeof c=="function"?c({x:f,y:v}):{x:f,y:v};f=y.x,v=y.y;var m=a.hasOwnProperty("x"),g=a.hasOwnProperty("y"),x=_r,w=Cr,b=window;if(l){var C=sf(n),E="clientHeight",S="clientWidth";if(C===Io(n)&&(C=Ua(n),Di(C).position!=="static"&&s==="absolute"&&(E="scrollHeight",S="scrollWidth")),C=C,o===Cr||(o===_r||o===io)&&i===th){w=oo;var k=d&&C===b&&b.visualViewport?b.visualViewport.height:C[E];v-=k-r.height,v*=u?1:-1}if(o===_r||(o===Cr||o===oo)&&i===th){x=io;var _=d&&C===b&&b.visualViewport?b.visualViewport.width:C[S];f-=_-r.width,f*=u?1:-1}}var I=Object.assign({position:s},l&&m9),N=c===!0?v9({x:f,y:v}):{x:f,y:v};if(f=N.x,v=N.y,u){var $;return Object.assign({},I,($={},$[w]=g?"0":"",$[x]=m?"0":"",$.transform=(b.devicePixelRatio||1)<=1?"translate("+f+"px, "+v+"px)":"translate3d("+f+"px, "+v+"px, 0)",$))}return Object.assign({},I,(e={},e[w]=g?v+"px":"",e[x]=m?f+"px":"",e.transform="",e))}function g9(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,a=i===void 0?!0:i,s=n.roundOffsets,u=s===void 0?!0:s,l={placement:Qo(e.placement),variation:_l(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,nI(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,nI(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var y9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:g9,data:{}},qf={passive:!0};function x9(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,i=o===void 0?!0:o,a=r.resize,s=a===void 0?!0:a,u=Io(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&l.forEach(function(c){c.addEventListener("scroll",n.update,qf)}),s&&u.addEventListener("resize",n.update,qf),function(){i&&l.forEach(function(c){c.removeEventListener("scroll",n.update,qf)}),s&&u.removeEventListener("resize",n.update,qf)}}var w9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:x9,data:{}},b9={left:"right",right:"left",bottom:"top",top:"bottom"};function zp(t){return t.replace(/left|right|bottom|top/g,function(e){return b9[e]})}var E9={start:"end",end:"start"};function rI(t){return t.replace(/start|end/g,function(e){return E9[e]})}function GE(t){var e=Io(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function KE(t){return Cl(Ua(t)).left+GE(t).scrollLeft}function C9(t){var e=Io(t),n=Ua(t),r=e.visualViewport,o=n.clientWidth,i=n.clientHeight,a=0,s=0;return r&&(o=r.width,i=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:o,height:i,x:a+KE(t),y:s}}function _9(t){var e,n=Ua(t),r=GE(t),o=(e=t.ownerDocument)==null?void 0:e.body,i=ps(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=ps(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+KE(t),u=-r.scrollTop;return Di(o||n).direction==="rtl"&&(s+=ps(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:u}}function XE(t){var e=Di(t),n=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function bM(t){return["html","body","#document"].indexOf(oi(t))>=0?t.ownerDocument.body:eo(t)&&XE(t)?t:bM(Fg(t))}function dd(t,e){var n;e===void 0&&(e=[]);var r=bM(t),o=r===((n=t.ownerDocument)==null?void 0:n.body),i=Io(r),a=o?[i].concat(i.visualViewport||[],XE(r)?r:[]):r,s=e.concat(a);return o?s:s.concat(dd(Fg(a)))}function Nx(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function S9(t){var e=Cl(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function oI(t,e){return e===mM?Nx(C9(t)):bl(e)?S9(e):Nx(_9(Ua(t)))}function k9(t){var e=dd(Fg(t)),n=["absolute","fixed"].indexOf(Di(t).position)>=0,r=n&&eo(t)?sf(t):t;return bl(r)?e.filter(function(o){return bl(o)&&gM(o,r)&&oi(o)!=="body"}):[]}function I9(t,e,n){var r=e==="clippingParents"?k9(t):[].concat(e),o=[].concat(r,[n]),i=o[0],a=o.reduce(function(s,u){var l=oI(t,u);return s.top=ps(l.top,s.top),s.right=Gm(l.right,s.right),s.bottom=Gm(l.bottom,s.bottom),s.left=ps(l.left,s.left),s},oI(t,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function EM(t){var e=t.reference,n=t.element,r=t.placement,o=r?Qo(r):null,i=r?_l(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,u;switch(o){case Cr:u={x:a,y:e.y-n.height};break;case oo:u={x:a,y:e.y+e.height};break;case io:u={x:e.x+e.width,y:s};break;case _r:u={x:e.x-n.width,y:s};break;default:u={x:e.x,y:e.y}}var l=o?qE(o):null;if(l!=null){var c=l==="y"?"height":"width";switch(i){case wl:u[l]=u[l]-(e[c]/2-n[c]/2);break;case th:u[l]=u[l]+(e[c]/2-n[c]/2);break}}return u}function nh(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=r===void 0?t.placement:r,i=n.boundary,a=i===void 0?G7:i,s=n.rootBoundary,u=s===void 0?mM:s,l=n.elementContext,c=l===void 0?kc:l,d=n.altBoundary,h=d===void 0?!1:d,f=n.padding,p=f===void 0?0:f,v=xM(typeof p!="number"?p:wM(p,af)),y=c===kc?K7:kc,m=t.rects.popper,g=t.elements[h?y:c],x=I9(bl(g)?g:g.contextElement||Ua(t.elements.popper),a,u),w=Cl(t.elements.reference),b=EM({reference:w,element:m,strategy:"absolute",placement:o}),C=Nx(Object.assign({},m,b)),E=c===kc?C:w,S={top:x.top-E.top+v.top,bottom:E.bottom-x.bottom+v.bottom,left:x.left-E.left+v.left,right:E.right-x.right+v.right},k=t.modifiersData.offset;if(c===kc&&k){var _=k[o];Object.keys(S).forEach(function(I){var N=[io,oo].indexOf(I)>=0?1:-1,$=[Cr,oo].indexOf(I)>=0?"y":"x";S[I]+=_[$]*N})}return S}function T9(t,e){e===void 0&&(e={});var n=e,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,l=u===void 0?vM:u,c=_l(r),d=c?s?eI:eI.filter(function(p){return _l(p)===c}):af,h=d.filter(function(p){return l.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,v){return p[v]=nh(t,{placement:v,boundary:o,rootBoundary:i,padding:a})[Qo(v)],p},{});return Object.keys(f).sort(function(p,v){return f[p]-f[v]})}function R9(t){if(Qo(t)===VE)return[];var e=zp(t);return[rI(t),e,rI(e)]}function A9(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,a=n.altAxis,s=a===void 0?!0:a,u=n.fallbackPlacements,l=n.padding,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,v=n.allowedAutoPlacements,y=e.options.placement,m=Qo(y),g=m===y,x=u||(g||!p?[zp(y)]:R9(y)),w=[y].concat(x).reduce(function(Z,oe){return Z.concat(Qo(oe)===VE?T9(e,{placement:oe,boundary:c,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:v}):oe)},[]),b=e.rects.reference,C=e.rects.popper,E=new Map,S=!0,k=w[0],_=0;_<w.length;_++){var I=w[_],N=Qo(I),$=_l(I)===wl,M=[Cr,oo].indexOf(N)>=0,B=M?"width":"height",D=nh(e,{placement:I,boundary:c,rootBoundary:d,altBoundary:h,padding:l}),U=M?$?io:_r:$?oo:Cr;b[B]>C[B]&&(U=zp(U));var A=zp(U),L=[];if(i&&L.push(D[N]<=0),s&&L.push(D[U]<=0,D[A]<=0),L.every(function(Z){return Z})){k=I,S=!1;break}E.set(I,L)}if(S)for(var z=p?3:1,j=function(oe){var se=w.find(function(de){var ue=E.get(de);if(ue)return ue.slice(0,oe).every(function(Q){return Q})});if(se)return k=se,"break"},q=z;q>0;q--){var Y=j(q);if(Y==="break")break}e.placement!==k&&(e.modifiersData[r]._skip=!0,e.placement=k,e.reset=!0)}}var N9={name:"flip",enabled:!0,phase:"main",fn:A9,requiresIfExists:["offset"],data:{_skip:!1}};function iI(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function aI(t){return[Cr,io,oo,_r].some(function(e){return t[e]>=0})}function P9(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,i=e.modifiersData.preventOverflow,a=nh(e,{elementContext:"reference"}),s=nh(e,{altBoundary:!0}),u=iI(a,r),l=iI(s,o,i),c=aI(u),d=aI(l);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var D9={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:P9};function O9(t,e,n){var r=Qo(t),o=[_r,Cr].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[_r,io].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function M9(t){var e=t.state,n=t.options,r=t.name,o=n.offset,i=o===void 0?[0,0]:o,a=vM.reduce(function(c,d){return c[d]=O9(d,e.rects,i),c},{}),s=a[e.placement],u=s.x,l=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=l),e.modifiersData[r]=a}var F9={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:M9};function $9(t){var e=t.state,n=t.name;e.modifiersData[n]=EM({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var L9={name:"popperOffsets",enabled:!0,phase:"read",fn:$9,data:{}};function B9(t){return t==="x"?"y":"x"}function U9(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,i=o===void 0?!0:o,a=n.altAxis,s=a===void 0?!1:a,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,v=p===void 0?0:p,y=nh(e,{boundary:u,rootBoundary:l,padding:d,altBoundary:c}),m=Qo(e.placement),g=_l(e.placement),x=!g,w=qE(m),b=B9(w),C=e.modifiersData.popperOffsets,E=e.rects.reference,S=e.rects.popper,k=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,_=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(!!C){if(i){var $,M=w==="y"?Cr:_r,B=w==="y"?oo:io,D=w==="y"?"height":"width",U=C[w],A=U+y[M],L=U-y[B],z=f?-S[D]/2:0,j=g===wl?E[D]:S[D],q=g===wl?-S[D]:-E[D],Y=e.elements.arrow,Z=f&&Y?HE(Y):{width:0,height:0},oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:yM(),se=oe[M],de=oe[B],ue=cd(0,E[D],Z[D]),Q=x?E[D]/2-z-ue-se-_.mainAxis:j-ue-se-_.mainAxis,X=x?-E[D]/2+z+ue+de+_.mainAxis:q+ue+de+_.mainAxis,ee=e.elements.arrow&&sf(e.elements.arrow),he=ee?w==="y"?ee.clientTop||0:ee.clientLeft||0:0,fe=($=I==null?void 0:I[w])!=null?$:0,ve=U+Q-fe-he,Se=U+X-fe,De=cd(f?Gm(A,ve):A,U,f?ps(L,Se):L);C[w]=De,N[w]=De-U}if(s){var Oe,yt=w==="x"?Cr:_r,ht=w==="x"?oo:io,Ke=C[b],vt=b==="y"?"height":"width",Mt=Ke+y[yt],Wt=Ke-y[ht],Tt=[Cr,_r].indexOf(m)!==-1,gt=(Oe=I==null?void 0:I[b])!=null?Oe:0,nn=Tt?Mt:Ke-E[vt]-S[vt]-gt+_.altAxis,Ve=Tt?Ke+E[vt]+S[vt]-gt-_.altAxis:Wt,ce=f&&Tt?c9(nn,Ke,Ve):cd(f?nn:Mt,Ke,f?Ve:Wt);C[b]=ce,N[b]=ce-Ke}e.modifiersData[r]=N}}var z9={name:"preventOverflow",enabled:!0,phase:"main",fn:U9,requiresIfExists:["offset"]};function W9(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function V9(t){return t===Io(t)||!eo(t)?GE(t):W9(t)}function j9(t){var e=t.getBoundingClientRect(),n=El(e.width)/t.offsetWidth||1,r=El(e.height)/t.offsetHeight||1;return n!==1||r!==1}function H9(t,e,n){n===void 0&&(n=!1);var r=eo(e),o=eo(e)&&j9(e),i=Ua(e),a=Cl(t,o),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((oi(e)!=="body"||XE(i))&&(s=V9(e)),eo(e)?(u=Cl(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):i&&(u.x=KE(i))),{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}function q9(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function o(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var u=e.get(s);u&&o(u)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||o(i)}),r}function G9(t){var e=q9(t);return o9.reduce(function(n,r){return n.concat(e.filter(function(o){return o.phase===r}))},[])}function K9(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function X9(t){var e=t.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var sI={placement:"bottom",modifiers:[],strategy:"absolute"};function uI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Y9(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,o=e.defaultOptions,i=o===void 0?sI:o;return function(s,u,l){l===void 0&&(l=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},sI,i),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},d=[],h=!1,f={state:c,setOptions:function(m){var g=typeof m=="function"?m(c.options):m;v(),c.options=Object.assign({},i,c.options,g),c.scrollParents={reference:bl(s)?dd(s):s.contextElement?dd(s.contextElement):[],popper:dd(u)};var x=G9(X9([].concat(r,c.options.modifiers)));return c.orderedModifiers=x.filter(function(w){return w.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var m=c.elements,g=m.reference,x=m.popper;if(!!uI(g,x)){c.rects={reference:H9(g,sf(x),c.options.strategy==="fixed"),popper:HE(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(_){return c.modifiersData[_.name]=Object.assign({},_.data)});for(var w=0;w<c.orderedModifiers.length;w++){if(c.reset===!0){c.reset=!1,w=-1;continue}var b=c.orderedModifiers[w],C=b.fn,E=b.options,S=E===void 0?{}:E,k=b.name;typeof C=="function"&&(c=C({state:c,options:S,name:k,instance:f})||c)}}}},update:K9(function(){return new Promise(function(y){f.forceUpdate(),y(c)})}),destroy:function(){v(),h=!0}};if(!uI(s,u))return f;f.setOptions(l).then(function(y){!h&&l.onFirstUpdate&&l.onFirstUpdate(y)});function p(){c.orderedModifiers.forEach(function(y){var m=y.name,g=y.options,x=g===void 0?{}:g,w=y.effect;if(typeof w=="function"){var b=w({state:c,name:m,instance:f,options:x}),C=function(){};d.push(b||C)}})}function v(){d.forEach(function(y){return y()}),d=[]}return f}}var Q9=[w9,L9,y9,s9,F9,N9,z9,p9,D9],J9=Y9({defaultModifiers:Q9});function Z9(t){return typeof t=="function"?t():t}const eX=T.exports.forwardRef(function(e,n){const{children:r,container:o,disablePortal:i=!1}=e,[a,s]=T.exports.useState(null),u=pt(T.exports.isValidElement(r)?r.ref:null,n);return ri(()=>{i||s(Z9(o)||document.body)},[o,i]),ri(()=>{if(a&&!i)return Zd(n,a),()=>{Zd(n,null)}},[n,a,i]),i?T.exports.isValidElement(r)?T.exports.cloneElement(r,{ref:u}):r:a&&wv.exports.createPortal(r,a)});var CM=eX;const tX=["anchorEl","children","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","TransitionProps"],nX=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function rX(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function Px(t){return typeof t=="function"?t():t}const oX={},iX=T.exports.forwardRef(function(e,n){const{anchorEl:r,children:o,direction:i,disablePortal:a,modifiers:s,open:u,placement:l,popperOptions:c,popperRef:d,TransitionProps:h}=e,f=ke(e,tX),p=T.exports.useRef(null),v=pt(p,n),y=T.exports.useRef(null),m=pt(y,d),g=T.exports.useRef(m);ri(()=>{g.current=m},[m]),T.exports.useImperativeHandle(d,()=>y.current,[]);const x=rX(l,i),[w,b]=T.exports.useState(x);T.exports.useEffect(()=>{y.current&&y.current.forceUpdate()}),ri(()=>{if(!r||!u)return;const E=_=>{b(_.placement)};Px(r);let S=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:_})=>{E(_)}}];s!=null&&(S=S.concat(s)),c&&c.modifiers!=null&&(S=S.concat(c.modifiers));const k=J9(Px(r),p.current,O({placement:x},c,{modifiers:S}));return g.current(k),()=>{k.destroy(),g.current(null)}},[r,a,s,u,c,x]);const C={placement:w};return h!==null&&(C.TransitionProps=h),F("div",O({ref:v,role:"tooltip"},f,{children:typeof o=="function"?o(C):o}))}),aX=T.exports.forwardRef(function(e,n){const{anchorEl:r,children:o,container:i,direction:a="ltr",disablePortal:s=!1,keepMounted:u=!1,modifiers:l,open:c,placement:d="bottom",popperOptions:h=oX,popperRef:f,style:p,transition:v=!1}=e,y=ke(e,nX),[m,g]=T.exports.useState(!0),x=()=>{g(!1)},w=()=>{g(!0)};if(!u&&!c&&(!v||m))return null;const b=i||(r?Pn(Px(r)).body:void 0);return F(CM,{disablePortal:s,container:b,children:F(iX,O({anchorEl:r,direction:a,disablePortal:s,modifiers:l,ref:n,open:v?!m:c,placement:d,popperOptions:h,popperRef:f},y,{style:O({position:"fixed",top:0,left:0,display:!c&&u&&(!v||m)?"none":null},p),TransitionProps:v?{in:c,onEnter:x,onExited:w}:null,children:o}))})});var sX=aX;function uX(t){const e=Pn(t);return e.body===t?ni(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function hd(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function lI(t){return parseInt(ni(t).getComputedStyle(t).paddingRight,10)||0}function cI(t,e,n,r=[],o){const i=[e,n,...r],a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(t.children,s=>{i.indexOf(s)===-1&&a.indexOf(s.tagName)===-1&&hd(s,o)})}function c0(t,e){let n=-1;return t.some((r,o)=>e(r)?(n=o,!0):!1),n}function lX(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(uX(r)){const u=KO(Pn(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${lI(r)+u}px`;const l=Pn(r).querySelectorAll(".mui-fixed");[].forEach.call(l,c=>{n.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${lI(c)+u}px`})}const i=r.parentElement,a=ni(r),s=(i==null?void 0:i.nodeName)==="HTML"&&a.getComputedStyle(i).overflowY==="scroll"?i:r;n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:i,el:a,property:s})=>{i?a.style.setProperty(s,i):a.style.removeProperty(s)})}}function cX(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class dX{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&hd(e.modalRef,!1);const o=cX(n);cI(n,e.mount,e.modalRef,o,!0);const i=c0(this.containers,a=>a.container===n);return i!==-1?(this.containers[i].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:o}),r)}mount(e,n){const r=c0(this.containers,i=>i.modals.indexOf(e)!==-1),o=this.containers[r];o.restore||(o.restore=lX(o,n))}remove(e){const n=this.modals.indexOf(e);if(n===-1)return n;const r=c0(this.containers,i=>i.modals.indexOf(e)!==-1),o=this.containers[r];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&hd(e.modalRef,!0),cI(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(r,1);else{const i=o.modals[o.modals.length-1];i.modalRef&&hd(i.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const hX=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function fX(t){const e=parseInt(t.getAttribute("tabindex"),10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function pX(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function mX(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||pX(t))}function vX(t){const e=[],n=[];return Array.from(t.querySelectorAll(hX)).forEach((r,o)=>{const i=fX(r);i===-1||!mX(r)||(i===0?e.push(r):n.push({documentOrder:o,tabIndex:i,node:r}))}),n.sort((r,o)=>r.tabIndex===o.tabIndex?r.documentOrder-o.documentOrder:r.tabIndex-o.tabIndex).map(r=>r.node).concat(e)}function gX(){return!0}function yX(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:o=!1,getTabbable:i=vX,isEnabled:a=gX,open:s}=t,u=T.exports.useRef(),l=T.exports.useRef(null),c=T.exports.useRef(null),d=T.exports.useRef(null),h=T.exports.useRef(null),f=T.exports.useRef(!1),p=T.exports.useRef(null),v=pt(e.ref,p),y=T.exports.useRef(null);T.exports.useEffect(()=>{!s||!p.current||(f.current=!n)},[n,s]),T.exports.useEffect(()=>{if(!s||!p.current)return;const x=Pn(p.current);return p.current.contains(x.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex",-1),f.current&&p.current.focus()),()=>{o||(d.current&&d.current.focus&&(u.current=!0,d.current.focus()),d.current=null)}},[s]),T.exports.useEffect(()=>{if(!s||!p.current)return;const x=Pn(p.current),w=E=>{const{current:S}=p;if(S!==null){if(!x.hasFocus()||r||!a()||u.current){u.current=!1;return}if(!S.contains(x.activeElement)){if(E&&h.current!==E.target||x.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let I=[];if((x.activeElement===l.current||x.activeElement===c.current)&&(I=i(p.current)),I.length>0){var k,_;const N=Boolean(((k=y.current)==null?void 0:k.shiftKey)&&((_=y.current)==null?void 0:_.key)==="Tab"),$=I[0],M=I[I.length-1];N?M.focus():$.focus()}else S.focus()}}},b=E=>{y.current=E,!(r||!a()||E.key!=="Tab")&&x.activeElement===p.current&&E.shiftKey&&(u.current=!0,c.current.focus())};x.addEventListener("focusin",w),x.addEventListener("keydown",b,!0);const C=setInterval(()=>{x.activeElement.tagName==="BODY"&&w()},50);return()=>{clearInterval(C),x.removeEventListener("focusin",w),x.removeEventListener("keydown",b,!0)}},[n,r,o,a,s,i]);const m=x=>{d.current===null&&(d.current=x.relatedTarget),f.current=!0,h.current=x.target;const w=e.props.onFocus;w&&w(x)},g=x=>{d.current===null&&(d.current=x.relatedTarget),f.current=!0};return ie(T.exports.Fragment,{children:[F("div",{tabIndex:0,onFocus:g,ref:l,"data-test":"sentinelStart"}),T.exports.cloneElement(e,{ref:v,onFocus:m}),F("div",{tabIndex:0,onFocus:g,ref:c,"data-test":"sentinelEnd"})]})}function xX(t){return Qe("MuiModal",t)}Ge("MuiModal",["root","hidden"]);const wX=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"],bX=t=>{const{open:e,exited:n,classes:r}=t;return nt({root:["root",!e&&n&&"hidden"]},xX,r)};function EX(t){return typeof t=="function"?t():t}function CX(t){return t.children?t.children.props.hasOwnProperty("in"):!1}const _X=new dX,SX=T.exports.forwardRef(function(e,n){const{BackdropComponent:r,BackdropProps:o,children:i,classes:a,className:s,closeAfterTransition:u=!1,component:l="div",components:c={},componentsProps:d={},container:h,disableAutoFocus:f=!1,disableEnforceFocus:p=!1,disableEscapeKeyDown:v=!1,disablePortal:y=!1,disableRestoreFocus:m=!1,disableScrollLock:g=!1,hideBackdrop:x=!1,keepMounted:w=!1,manager:b=_X,onBackdropClick:C,onClose:E,onKeyDown:S,open:k,theme:_,onTransitionEnter:I,onTransitionExited:N}=e,$=ke(e,wX),[M,B]=T.exports.useState(!0),D=T.exports.useRef({}),U=T.exports.useRef(null),A=T.exports.useRef(null),L=pt(A,n),z=CX(e),j=()=>Pn(U.current),q=()=>(D.current.modalRef=A.current,D.current.mountNode=U.current,D.current),Y=()=>{b.mount(q(),{disableScrollLock:g}),A.current.scrollTop=0},Z=wo(()=>{const Oe=EX(h)||j().body;b.add(q(),Oe),A.current&&Y()}),oe=T.exports.useCallback(()=>b.isTopModal(q()),[b]),se=wo(Oe=>{U.current=Oe,Oe&&(k&&oe()?Y():hd(A.current,!0))}),de=T.exports.useCallback(()=>{b.remove(q())},[b]);T.exports.useEffect(()=>()=>{de()},[de]),T.exports.useEffect(()=>{k?Z():(!z||!u)&&de()},[k,de,z,u,Z]);const ue=O({},e,{classes:a,closeAfterTransition:u,disableAutoFocus:f,disableEnforceFocus:p,disableEscapeKeyDown:v,disablePortal:y,disableRestoreFocus:m,disableScrollLock:g,exited:M,hideBackdrop:x,keepMounted:w}),Q=bX(ue);if(!w&&!k&&(!z||M))return null;const X=()=>{B(!1),I&&I()},ee=()=>{B(!0),N&&N(),u&&de()},he=Oe=>{Oe.target===Oe.currentTarget&&(C&&C(Oe),E&&E(Oe,"backdropClick"))},fe=Oe=>{S&&S(Oe),!(Oe.key!=="Escape"||!oe())&&(v||(Oe.stopPropagation(),E&&E(Oe,"escapeKeyDown")))},ve={};i.props.tabIndex===void 0&&(ve.tabIndex="-1"),z&&(ve.onEnter=Tx(X,i.props.onEnter),ve.onExited=Tx(ee,i.props.onExited));const Se=c.Root||l,De=d.root||{};return F(CM,{ref:se,container:h,disablePortal:y,children:ie(Se,O({role:"presentation"},De,!eh(Se)&&{as:l,ownerState:O({},ue,De.ownerState),theme:_},$,{ref:L,onKeyDown:fe,className:Ae(Q.root,De.className,s),children:[!x&&r?F(r,O({"aria-hidden":!0,open:k,onClick:he},o)):null,F(yX,{disableEnforceFocus:p,disableAutoFocus:f,disableRestoreFocus:m,isEnabled:oe,open:k,children:T.exports.cloneElement(i,ve)})]}))})});var kX=SX;const IX=["onChange","maxRows","minRows","style","value"];function Gf(t,e){return parseInt(t[e],10)||0}const TX={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}},RX=T.exports.forwardRef(function(e,n){const{onChange:r,maxRows:o,minRows:i=1,style:a,value:s}=e,u=ke(e,IX),{current:l}=T.exports.useRef(s!=null),c=T.exports.useRef(null),d=pt(n,c),h=T.exports.useRef(null),f=T.exports.useRef(0),[p,v]=T.exports.useState({}),y=T.exports.useCallback(()=>{const g=c.current,w=ni(g).getComputedStyle(g);if(w.width==="0px")return;const b=h.current;b.style.width=w.width,b.value=g.value||e.placeholder||"x",b.value.slice(-1)===`
`&&(b.value+=" ");const C=w["box-sizing"],E=Gf(w,"padding-bottom")+Gf(w,"padding-top"),S=Gf(w,"border-bottom-width")+Gf(w,"border-top-width"),k=b.scrollHeight;b.value="x";const _=b.scrollHeight;let I=k;i&&(I=Math.max(Number(i)*_,I)),o&&(I=Math.min(Number(o)*_,I)),I=Math.max(I,_);const N=I+(C==="border-box"?E+S:0),$=Math.abs(I-k)<=1;v(M=>f.current<20&&(N>0&&Math.abs((M.outerHeightStyle||0)-N)>1||M.overflow!==$)?(f.current+=1,{overflow:$,outerHeightStyle:N}):M)},[o,i,e.placeholder]);T.exports.useEffect(()=>{const g=Ng(()=>{f.current=0,y()}),x=ni(c.current);x.addEventListener("resize",g);let w;return typeof ResizeObserver!="undefined"&&(w=new ResizeObserver(g),w.observe(c.current)),()=>{g.clear(),x.removeEventListener("resize",g),w&&w.disconnect()}},[y]),ri(()=>{y()}),T.exports.useEffect(()=>{f.current=0},[s]);const m=g=>{f.current=0,l||y(),r&&r(g)};return ie(T.exports.Fragment,{children:[F("textarea",O({value:s,onChange:m,ref:d,rows:i,style:O({height:p.outerHeightStyle,overflow:p.overflow?"hidden":null},a)},u)),F("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:O({},TX.shadow,a,{padding:0})})]})});var AX=RX;function NX(t,e,n){return O({toolbar:{minHeight:56,[`${t.up("xs")} and (orientation: landscape)`]:{minHeight:48},[t.up("sm")]:{minHeight:64}}},n)}const PX=["mode","contrastThreshold","tonalOffset"],dI={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Xd.white,default:Xd.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},d0={text:{primary:Xd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Xd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function hI(t,e,n,r){const o=r.light||r,i=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=WE(t.main,o):e==="dark"&&(t.dark=zE(t.main,i)))}function DX(t="light"){return t==="dark"?{main:nu[200],light:nu[50],dark:nu[400]}:{main:nu[700],light:nu[400],dark:nu[800]}}function OX(t="light"){return t==="dark"?{main:tu[200],light:tu[50],dark:tu[400]}:{main:tu[500],light:tu[300],dark:tu[700]}}function MX(t="light"){return t==="dark"?{main:eu[500],light:eu[300],dark:eu[700]}:{main:eu[700],light:eu[400],dark:eu[800]}}function FX(t="light"){return t==="dark"?{main:ru[400],light:ru[300],dark:ru[700]}:{main:ru[700],light:ru[500],dark:ru[900]}}function $X(t="light"){return t==="dark"?{main:ou[400],light:ou[300],dark:ou[700]}:{main:ou[800],light:ou[500],dark:ou[900]}}function LX(t="light"){return t==="dark"?{main:Cc[400],light:Cc[300],dark:Cc[700]}:{main:"#ed6c02",light:Cc[500],dark:Cc[900]}}function BX(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,o=ke(t,PX),i=t.primary||DX(e),a=t.secondary||OX(e),s=t.error||MX(e),u=t.info||FX(e),l=t.success||$X(e),c=t.warning||LX(e);function d(v){return U7(v,d0.text.primary)>=n?d0.text.primary:dI.text.primary}const h=({color:v,name:y,mainShade:m=500,lightShade:g=300,darkShade:x=700})=>{if(v=O({},v),!v.main&&v[m]&&(v.main=v[m]),!v.hasOwnProperty("main"))throw new Error(Os(11,y?` (${y})`:"",m));if(typeof v.main!="string")throw new Error(Os(12,y?` (${y})`:"",JSON.stringify(v.main)));return hI(v,"light",g,r),hI(v,"dark",x,r),v.contrastText||(v.contrastText=d(v.main)),v},f={dark:d0,light:dI};return Zr(O({common:Xd,mode:e,primary:h({color:i,name:"primary"}),secondary:h({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:s,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:u,name:"info"}),success:h({color:l,name:"success"}),grey:oq,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},f[e]),o)}const UX=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function zX(t){return Math.round(t*1e5)/1e5}const fI={textTransform:"uppercase"},pI='"Roboto", "Helvetica", "Arial", sans-serif';function WX(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=pI,fontSize:o=14,fontWeightLight:i=300,fontWeightRegular:a=400,fontWeightMedium:s=500,fontWeightBold:u=700,htmlFontSize:l=16,allVariants:c,pxToRem:d}=n,h=ke(n,UX),f=o/14,p=d||(m=>`${m/l*f}rem`),v=(m,g,x,w,b)=>O({fontFamily:r,fontWeight:m,fontSize:p(g),lineHeight:x},r===pI?{letterSpacing:`${zX(w/g)}em`}:{},b,c),y={h1:v(i,96,1.167,-1.5),h2:v(i,60,1.2,-.5),h3:v(a,48,1.167,0),h4:v(a,34,1.235,.25),h5:v(a,24,1.334,0),h6:v(s,20,1.6,.15),subtitle1:v(a,16,1.75,.15),subtitle2:v(s,14,1.57,.1),body1:v(a,16,1.5,.15),body2:v(a,14,1.43,.15),button:v(s,14,1.75,.4,fI),caption:v(a,12,1.66,.4),overline:v(a,12,2.66,1,fI)};return Zr(O({htmlFontSize:l,pxToRem:p,fontFamily:r,fontSize:o,fontWeightLight:i,fontWeightRegular:a,fontWeightMedium:s,fontWeightBold:u},y),h,{clone:!1})}const VX=.2,jX=.14,HX=.12;function Rt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${VX})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${jX})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${HX})`].join(",")}const qX=["none",Rt(0,2,1,-1,0,1,1,0,0,1,3,0),Rt(0,3,1,-2,0,2,2,0,0,1,5,0),Rt(0,3,3,-2,0,3,4,0,0,1,8,0),Rt(0,2,4,-1,0,4,5,0,0,1,10,0),Rt(0,3,5,-1,0,5,8,0,0,1,14,0),Rt(0,3,5,-1,0,6,10,0,0,1,18,0),Rt(0,4,5,-2,0,7,10,1,0,2,16,1),Rt(0,5,5,-3,0,8,10,1,0,3,14,2),Rt(0,5,6,-3,0,9,12,1,0,3,16,2),Rt(0,6,6,-3,0,10,14,1,0,4,18,3),Rt(0,6,7,-4,0,11,15,1,0,4,20,3),Rt(0,7,8,-4,0,12,17,2,0,5,22,4),Rt(0,7,8,-4,0,13,19,2,0,5,24,4),Rt(0,7,9,-4,0,14,21,2,0,5,26,4),Rt(0,8,9,-5,0,15,22,2,0,6,28,5),Rt(0,8,10,-5,0,16,24,2,0,6,30,5),Rt(0,8,11,-5,0,17,26,2,0,6,32,5),Rt(0,9,11,-5,0,18,28,2,0,7,34,6),Rt(0,9,12,-6,0,19,29,2,0,7,36,6),Rt(0,10,13,-6,0,20,31,3,0,8,38,7),Rt(0,10,13,-6,0,21,33,3,0,8,40,7),Rt(0,10,14,-6,0,22,35,3,0,8,42,7),Rt(0,11,14,-7,0,23,36,3,0,9,44,8),Rt(0,11,15,-7,0,24,38,3,0,9,46,8)];var GX=qX;const KX=["duration","easing","delay"],XX={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},YX={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function mI(t){return`${Math.round(t)}ms`}function QX(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function JX(t){const e=O({},XX,t.easing),n=O({},YX,t.duration);return O({getAutoHeightDuration:QX,create:(o=["all"],i={})=>{const{duration:a=n.standard,easing:s=e.easeInOut,delay:u=0}=i;return ke(i,KX),(Array.isArray(o)?o:[o]).map(l=>`${l} ${typeof a=="string"?a:mI(a)} ${s} ${typeof u=="string"?u:mI(u)}`).join(",")}},t,{easing:e,duration:n})}const ZX={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var eY=ZX;const tY=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function nY(t={},...e){const{mixins:n={},palette:r={},transitions:o={},typography:i={}}=t,a=ke(t,tY),s=BX(r),u=BE(t);let l=Zr(u,{mixins:NX(u.breakpoints,u.spacing,n),palette:s,shadows:GX.slice(),typography:WX(s,i),transitions:JX(o),zIndex:O({},eY)});return l=Zr(l,a),l=e.reduce((c,d)=>Zr(c,d),l),l}const rY=nY();var $g=rY;function za(){return hM($g)}function Je({props:t,name:e}){return $7({props:t,name:e,defaultTheme:$g})}const To=t=>ld(t)&&t!=="classes",oY=ld,iY=M7({defaultTheme:$g,rootShouldForwardProp:To});var me=iY;function aY(t){return Qe("MuiSvgIcon",t)}Ge("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const sY=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],uY=t=>{const{color:e,fontSize:n,classes:r}=t,o={root:["root",e!=="inherit"&&`color${re(e)}`,`fontSize${re(n)}`]};return nt(o,aY,r)},lY=me("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${re(n.color)}`],e[`fontSize${re(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,o,i,a,s,u,l,c,d,h,f,p,v,y,m,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(o=t.transitions)==null||(i=o.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((a=t.typography)==null||(s=a.pxToRem)==null?void 0:s.call(a,20))||"1.25rem",medium:((u=t.typography)==null||(l=u.pxToRem)==null?void 0:l.call(u,24))||"1.5rem",large:((c=t.typography)==null||(d=c.pxToRem)==null?void 0:d.call(c,35))||"2.1875"}[e.fontSize],color:(h=(f=t.palette)==null||(p=f[e.color])==null?void 0:p.main)!=null?h:{action:(v=t.palette)==null||(y=v.action)==null?void 0:y.active,disabled:(m=t.palette)==null||(g=m.action)==null?void 0:g.disabled,inherit:void 0}[e.color]}}),_M=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiSvgIcon"}),{children:o,className:i,color:a="inherit",component:s="svg",fontSize:u="medium",htmlColor:l,inheritViewBox:c=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,f=ke(r,sY),p=O({},r,{color:a,component:s,fontSize:u,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:h}),v={};c||(v.viewBox=h);const y=uY(p);return ie(lY,O({as:s,className:Ae(y.root,i),ownerState:p,focusable:"false",color:l,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},v,f,{children:[o,d?F("title",{children:d}):null]}))});_M.muiName="SvgIcon";var vI=_M;function YE(t,e){const n=(r,o)=>F(vI,O({"data-testid":`${e}Icon`,ref:o},r,{children:t}));return n.muiName=vI.muiName,T.exports.memo(T.exports.forwardRef(n))}const cY={configure:t=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join(`
`)),pM.configure(t)}};var dY=Object.freeze(Object.defineProperty({__proto__:null,unstable_ClassNameGenerator:cY,capitalize:re,createChainedFunction:Tx,createSvgIcon:YE,debounce:Ng,deprecatedPropType:_G,isMuiElement:Up,ownerDocument:Pn,ownerWindow:ni,requirePropFactory:SG,setRef:Zd,unstable_useEnhancedEffect:ri,unstable_useId:Pg,unsupportedProp:TG,useControlled:qm,useEventCallback:wo,useForkRef:pt,useIsFocusVisible:PE},Symbol.toStringTag,{value:"Module"}));function Dx(t,e){return Dx=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},Dx(t,e)}function SM(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Dx(t,e)}var gI={disabled:!1},Km=yo.createContext(null),jc="unmounted",Ya="exited",Qa="entering",pu="entered",Ox="exiting",Fi=function(t){SM(e,t);function e(r,o){var i;i=t.call(this,r,o)||this;var a=o,s=a&&!a.isMounting?r.enter:r.appear,u;return i.appearStatus=null,r.in?s?(u=Ya,i.appearStatus=Qa):u=pu:r.unmountOnExit||r.mountOnEnter?u=jc:u=Ya,i.state={status:u},i.nextCallback=null,i}e.getDerivedStateFromProps=function(o,i){var a=o.in;return a&&i.status===jc?{status:Ya}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var i=null;if(o!==this.props){var a=this.state.status;this.props.in?a!==Qa&&a!==pu&&(i=Qa):(a===Qa||a===pu)&&(i=Ox)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,i,a,s;return i=a=s=o,o!=null&&typeof o!="number"&&(i=o.exit,a=o.enter,s=o.appear!==void 0?o.appear:a),{exit:i,enter:a,appear:s}},n.updateStatus=function(o,i){o===void 0&&(o=!1),i!==null?(this.cancelNextCallback(),i===Qa?this.performEnter(o):this.performExit()):this.props.unmountOnExit&&this.state.status===Ya&&this.setState({status:jc})},n.performEnter=function(o){var i=this,a=this.props.enter,s=this.context?this.context.isMounting:o,u=this.props.nodeRef?[s]:[zy.findDOMNode(this),s],l=u[0],c=u[1],d=this.getTimeouts(),h=s?d.appear:d.enter;if(!o&&!a||gI.disabled){this.safeSetState({status:pu},function(){i.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Qa},function(){i.props.onEntering(l,c),i.onTransitionEnd(h,function(){i.safeSetState({status:pu},function(){i.props.onEntered(l,c)})})})},n.performExit=function(){var o=this,i=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:zy.findDOMNode(this);if(!i||gI.disabled){this.safeSetState({status:Ya},function(){o.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:Ox},function(){o.props.onExiting(s),o.onTransitionEnd(a.exit,function(){o.safeSetState({status:Ya},function(){o.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},n.setNextCallback=function(o){var i=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,i.nextCallback=null,o(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(o,i){this.setNextCallback(i);var a=this.props.nodeRef?this.props.nodeRef.current:zy.findDOMNode(this),s=o==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===jc)return null;var i=this.props,a=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var s=ke(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return yo.createElement(Km.Provider,{value:null},typeof a=="function"?a(o,s):yo.cloneElement(yo.Children.only(a),s))},e}(yo.Component);Fi.contextType=Km;Fi.propTypes={};function iu(){}Fi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:iu,onEntering:iu,onEntered:iu,onExit:iu,onExiting:iu,onExited:iu};Fi.UNMOUNTED=jc;Fi.EXITED=Ya;Fi.ENTERING=Qa;Fi.ENTERED=pu;Fi.EXITING=Ox;var QE=Fi;function hY(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JE(t,e){var n=function(i){return e&&T.exports.isValidElement(i)?e(i):i},r=Object.create(null);return t&&T.exports.Children.map(t,function(o){return o}).forEach(function(o){r[o.key]=n(o)}),r}function fY(t,e){t=t||{},e=e||{};function n(c){return c in e?e[c]:t[c]}var r=Object.create(null),o=[];for(var i in t)i in e?o.length&&(r[i]=o,o=[]):o.push(i);var a,s={};for(var u in e){if(r[u])for(a=0;a<r[u].length;a++){var l=r[u][a];s[r[u][a]]=n(l)}s[u]=n(u)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s}function as(t,e,n){return n[e]!=null?n[e]:t.props[e]}function pY(t,e){return JE(t.children,function(n){return T.exports.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:as(n,"appear",t),enter:as(n,"enter",t),exit:as(n,"exit",t)})})}function mY(t,e,n){var r=JE(t.children),o=fY(e,r);return Object.keys(o).forEach(function(i){var a=o[i];if(!!T.exports.isValidElement(a)){var s=i in e,u=i in r,l=e[i],c=T.exports.isValidElement(l)&&!l.props.in;u&&(!s||c)?o[i]=T.exports.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:as(a,"exit",t),enter:as(a,"enter",t)}):!u&&s&&!c?o[i]=T.exports.cloneElement(a,{in:!1}):u&&s&&T.exports.isValidElement(l)&&(o[i]=T.exports.cloneElement(a,{onExited:n.bind(null,a),in:l.props.in,exit:as(a,"exit",t),enter:as(a,"enter",t)}))}}),o}var vY=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},gY={component:"div",childFactory:function(e){return e}},ZE=function(t){SM(e,t);function e(r,o){var i;i=t.call(this,r,o)||this;var a=i.handleExited.bind(hY(i));return i.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},i}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(o,i){var a=i.children,s=i.handleExited,u=i.firstRender;return{children:u?pY(o,s):mY(o,a,s),firstRender:!1}},n.handleExited=function(o,i){var a=JE(this.props.children);o.key in a||(o.props.onExited&&o.props.onExited(i),this.mounted&&this.setState(function(s){var u=O({},s.children);return delete u[o.key],{children:u}}))},n.render=function(){var o=this.props,i=o.component,a=o.childFactory,s=ke(o,["component","childFactory"]),u=this.state.contextValue,l=vY(this.state.children).map(a);return delete s.appear,delete s.enter,delete s.exit,i===null?yo.createElement(Km.Provider,{value:u},l):yo.createElement(Km.Provider,{value:u},yo.createElement(i,s,l))},e}(yo.Component);ZE.propTypes={};ZE.defaultProps=gY;var yY=ZE;const e2=t=>t.scrollTop;function Sl(t,e){var n,r;const{timeout:o,easing:i,style:a={}}=t;return{duration:(n=a.transitionDuration)!=null?n:typeof o=="number"?o:o[e.mode]||0,easing:(r=a.transitionTimingFunction)!=null?r:typeof i=="object"?i[e.mode]:i,delay:a.transitionDelay}}function xY(t){return Qe("MuiPaper",t)}Ge("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const wY=["className","component","elevation","square","variant"],yI=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},bY=t=>{const{square:e,elevation:n,variant:r,classes:o}=t,i={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return nt(i,xY,o)},EY=me("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>O({backgroundColor:t.palette.background.paper,color:t.palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${t.palette.divider}`},e.variant==="elevation"&&O({boxShadow:t.shadows[e.elevation]},t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${At("#fff",yI(e.elevation))}, ${At("#fff",yI(e.elevation))})`}))),CY=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiPaper"}),{className:o,component:i="div",elevation:a=1,square:s=!1,variant:u="elevation"}=r,l=ke(r,wY),c=O({},r,{component:i,elevation:a,square:s,variant:u}),d=bY(c);return F(EY,O({as:i,ownerState:c,className:Ae(d.root,o),ref:n},l))});var Kl=CY;function _Y(t){const{className:e,classes:n,pulsate:r=!1,rippleX:o,rippleY:i,rippleSize:a,in:s,onExited:u,timeout:l}=t,[c,d]=T.exports.useState(!1),h=Ae(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:a,height:a,top:-(a/2)+i,left:-(a/2)+o},p=Ae(n.child,c&&n.childLeaving,r&&n.childPulsate);return!s&&!c&&d(!0),T.exports.useEffect(()=>{if(!s&&u!=null){const v=setTimeout(u,l);return()=>{clearTimeout(v)}}},[u,s,l]),F("span",{className:h,style:f,children:F("span",{className:p})})}const SY=Ge("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var jr=SY;const kY=["center","classes","className"];let Lg=t=>t,xI,wI,bI,EI;const Mx=550,IY=80,TY=Gl(xI||(xI=Lg`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),RY=Gl(wI||(wI=Lg`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),AY=Gl(bI||(bI=Lg`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),NY=me("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),PY=me(_Y,{name:"MuiTouchRipple",slot:"Ripple"})(EI||(EI=Lg`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),jr.rippleVisible,TY,Mx,({theme:t})=>t.transitions.easing.easeInOut,jr.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,jr.child,jr.childLeaving,RY,Mx,({theme:t})=>t.transitions.easing.easeInOut,jr.childPulsate,AY,({theme:t})=>t.transitions.easing.easeInOut),DY=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiTouchRipple"}),{center:o=!1,classes:i={},className:a}=r,s=ke(r,kY),[u,l]=T.exports.useState([]),c=T.exports.useRef(0),d=T.exports.useRef(null);T.exports.useEffect(()=>{d.current&&(d.current(),d.current=null)},[u]);const h=T.exports.useRef(!1),f=T.exports.useRef(null),p=T.exports.useRef(null),v=T.exports.useRef(null);T.exports.useEffect(()=>()=>{clearTimeout(f.current)},[]);const y=T.exports.useCallback(w=>{const{pulsate:b,rippleX:C,rippleY:E,rippleSize:S,cb:k}=w;l(_=>[..._,F(PY,{classes:{ripple:Ae(i.ripple,jr.ripple),rippleVisible:Ae(i.rippleVisible,jr.rippleVisible),ripplePulsate:Ae(i.ripplePulsate,jr.ripplePulsate),child:Ae(i.child,jr.child),childLeaving:Ae(i.childLeaving,jr.childLeaving),childPulsate:Ae(i.childPulsate,jr.childPulsate)},timeout:Mx,pulsate:b,rippleX:C,rippleY:E,rippleSize:S},c.current)]),c.current+=1,d.current=k},[i]),m=T.exports.useCallback((w={},b={},C)=>{const{pulsate:E=!1,center:S=o||b.pulsate,fakeElement:k=!1}=b;if(w.type==="mousedown"&&h.current){h.current=!1;return}w.type==="touchstart"&&(h.current=!0);const _=k?null:v.current,I=_?_.getBoundingClientRect():{width:0,height:0,left:0,top:0};let N,$,M;if(S||w.clientX===0&&w.clientY===0||!w.clientX&&!w.touches)N=Math.round(I.width/2),$=Math.round(I.height/2);else{const{clientX:B,clientY:D}=w.touches?w.touches[0]:w;N=Math.round(B-I.left),$=Math.round(D-I.top)}if(S)M=Math.sqrt((2*I.width**2+I.height**2)/3),M%2===0&&(M+=1);else{const B=Math.max(Math.abs((_?_.clientWidth:0)-N),N)*2+2,D=Math.max(Math.abs((_?_.clientHeight:0)-$),$)*2+2;M=Math.sqrt(B**2+D**2)}w.touches?p.current===null&&(p.current=()=>{y({pulsate:E,rippleX:N,rippleY:$,rippleSize:M,cb:C})},f.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},IY)):y({pulsate:E,rippleX:N,rippleY:$,rippleSize:M,cb:C})},[o,y]),g=T.exports.useCallback(()=>{m({},{pulsate:!0})},[m]),x=T.exports.useCallback((w,b)=>{if(clearTimeout(f.current),w.type==="touchend"&&p.current){p.current(),p.current=null,f.current=setTimeout(()=>{x(w,b)});return}p.current=null,l(C=>C.length>0?C.slice(1):C),d.current=b},[]);return T.exports.useImperativeHandle(n,()=>({pulsate:g,start:m,stop:x}),[g,m,x]),F(NY,O({className:Ae(i.root,jr.root,a),ref:v},s,{children:F(yY,{component:null,exit:!0,children:u})}))});var OY=DY;function MY(t){return Qe("MuiButtonBase",t)}const FY=Ge("MuiButtonBase",["root","disabled","focusVisible"]);var $Y=FY;const LY=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],BY=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:o}=t,a=nt({root:["root",e&&"disabled",n&&"focusVisible"]},MY,o);return n&&r&&(a.root+=` ${r}`),a},UY=me("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${$Y.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),zY=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiButtonBase"}),{action:o,centerRipple:i=!1,children:a,className:s,component:u="button",disabled:l=!1,disableRipple:c=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:v,onContextMenu:y,onDragLeave:m,onFocus:g,onFocusVisible:x,onKeyDown:w,onKeyUp:b,onMouseDown:C,onMouseLeave:E,onMouseUp:S,onTouchEnd:k,onTouchMove:_,onTouchStart:I,tabIndex:N=0,TouchRippleProps:$,touchRippleRef:M,type:B}=r,D=ke(r,LY),U=T.exports.useRef(null),A=T.exports.useRef(null),L=pt(A,M),{isFocusVisibleRef:z,onFocus:j,onBlur:q,ref:Y}=PE(),[Z,oe]=T.exports.useState(!1);l&&Z&&oe(!1),T.exports.useImperativeHandle(o,()=>({focusVisible:()=>{oe(!0),U.current.focus()}}),[]);const[se,de]=T.exports.useState(!1);T.exports.useEffect(()=>{de(!0)},[]);const ue=se&&!c&&!l;T.exports.useEffect(()=>{Z&&h&&!c&&se&&A.current.pulsate()},[c,h,Z,se]);function Q(Ce,Ct,Do=d){return wo($n=>(Ct&&Ct($n),!Do&&A.current&&A.current[Ce]($n),!0))}const X=Q("start",C),ee=Q("stop",y),he=Q("stop",m),fe=Q("stop",S),ve=Q("stop",Ce=>{Z&&Ce.preventDefault(),E&&E(Ce)}),Se=Q("start",I),De=Q("stop",k),Oe=Q("stop",_),yt=Q("stop",Ce=>{q(Ce),z.current===!1&&oe(!1),p&&p(Ce)},!1),ht=wo(Ce=>{U.current||(U.current=Ce.currentTarget),j(Ce),z.current===!0&&(oe(!0),x&&x(Ce)),g&&g(Ce)}),Ke=()=>{const Ce=U.current;return u&&u!=="button"&&!(Ce.tagName==="A"&&Ce.href)},vt=T.exports.useRef(!1),Mt=wo(Ce=>{h&&!vt.current&&Z&&A.current&&Ce.key===" "&&(vt.current=!0,A.current.stop(Ce,()=>{A.current.start(Ce)})),Ce.target===Ce.currentTarget&&Ke()&&Ce.key===" "&&Ce.preventDefault(),w&&w(Ce),Ce.target===Ce.currentTarget&&Ke()&&Ce.key==="Enter"&&!l&&(Ce.preventDefault(),v&&v(Ce))}),Wt=wo(Ce=>{h&&Ce.key===" "&&A.current&&Z&&!Ce.defaultPrevented&&(vt.current=!1,A.current.stop(Ce,()=>{A.current.pulsate(Ce)})),b&&b(Ce),v&&Ce.target===Ce.currentTarget&&Ke()&&Ce.key===" "&&!Ce.defaultPrevented&&v(Ce)});let Tt=u;Tt==="button"&&(D.href||D.to)&&(Tt=f);const gt={};Tt==="button"?(gt.type=B===void 0?"button":B,gt.disabled=l):(!D.href&&!D.to&&(gt.role="button"),l&&(gt["aria-disabled"]=l));const nn=pt(Y,U),Ve=pt(n,nn),ce=O({},r,{centerRipple:i,component:u,disabled:l,disableRipple:c,disableTouchRipple:d,focusRipple:h,tabIndex:N,focusVisible:Z}),lt=BY(ce);return ie(UY,O({as:Tt,className:Ae(lt.root,s),ownerState:ce,onBlur:yt,onClick:v,onContextMenu:ee,onFocus:ht,onKeyDown:Mt,onKeyUp:Wt,onMouseDown:X,onMouseLeave:ve,onMouseUp:fe,onDragLeave:he,onTouchEnd:De,onTouchMove:Oe,onTouchStart:Se,ref:Ve,tabIndex:l?-1:N,type:B},gt,D,{children:[a,ue?F(OY,O({ref:L,center:i},$)):null]}))});var rh=zY;function WY(t){return Qe("MuiIconButton",t)}const VY=Ge("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var jY=VY;const HY=["edge","children","className","color","disabled","disableFocusRipple","size"],qY=t=>{const{classes:e,disabled:n,color:r,edge:o,size:i}=t,a={root:["root",n&&"disabled",r!=="default"&&`color${re(r)}`,o&&`edge${re(o)}`,`size${re(i)}`]};return nt(a,WY,e)},GY=me(rh,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${re(n.color)}`],n.edge&&e[`edge${re(n.edge)}`],e[`size${re(n.size)}`]]}})(({theme:t,ownerState:e})=>O({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:t.palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:At(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>O({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&O({color:t.palette[e.color].main},!e.disableRipple&&{"&:hover":{backgroundColor:At(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${jY.disabled}`]:{backgroundColor:"transparent",color:t.palette.action.disabled}})),KY=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiIconButton"}),{edge:o=!1,children:i,className:a,color:s="default",disabled:u=!1,disableFocusRipple:l=!1,size:c="medium"}=r,d=ke(r,HY),h=O({},r,{edge:o,color:s,disabled:u,disableFocusRipple:l,size:c}),f=qY(h);return F(GY,O({className:Ae(f.root,a),centerRipple:!0,focusRipple:!l,disabled:u,ref:n,ownerState:h},d,{children:i}))});var t2=KY;function XY(t){return Qe("MuiTypography",t)}Ge("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const YY=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],QY=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:o,variant:i,classes:a}=t,s={root:["root",i,t.align!=="inherit"&&`align${re(e)}`,n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return nt(s,XY,a)},JY=me("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${re(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>O({margin:0},e.variant&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),CI={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ZY={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},eQ=t=>ZY[t]||t,tQ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiTypography"}),o=eQ(r.color),i=p7(O({},r,{color:o})),{align:a="inherit",className:s,component:u,gutterBottom:l=!1,noWrap:c=!1,paragraph:d=!1,variant:h="body1",variantMapping:f=CI}=i,p=ke(i,YY),v=O({},i,{align:a,color:o,className:s,component:u,gutterBottom:l,noWrap:c,paragraph:d,variant:h,variantMapping:f}),y=u||(d?"p":f[h]||CI[h])||"span",m=QY(v);return F(JY,O({as:y,ref:n,ownerState:v,className:Ae(m.root,s)},p))});var Bg=tQ;function nQ(t){return Qe("MuiAppBar",t)}Ge("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const rQ=["className","color","enableColorOnDark","position"],oQ=t=>{const{color:e,position:n,classes:r}=t,o={root:["root",`color${re(e)}`,`position${re(n)}`]};return nt(o,nQ,r)},iQ=me(Kl,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${re(n.position)}`],e[`color${re(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return O({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:t.zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:t.zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:t.zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&O({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"}))}),aQ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiAppBar"}),{className:o,color:i="primary",enableColorOnDark:a=!1,position:s="fixed"}=r,u=ke(r,rQ),l=O({},r,{color:i,position:s,enableColorOnDark:a}),c=oQ(l);return F(iQ,O({square:!0,component:"header",ownerState:l,elevation:4,className:Ae(c.root,o,s==="fixed"&&"mui-fixed"),ref:n},u))});var n2=aQ;const sQ=me(sX,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),uQ=T.exports.forwardRef(function(e,n){const r=dM(),o=Je({props:e,name:"MuiPopper"});return F(sQ,O({direction:r==null?void 0:r.direction},o,{ref:n}))});var kM=uQ,lQ=YE(F("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function cQ(t){return Qe("MuiChip",t)}const dQ=Ge("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","focusVisible"]);var ot=dQ;const hQ=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],fQ=t=>{const{classes:e,disabled:n,size:r,color:o,onDelete:i,clickable:a,variant:s}=t,u={root:["root",s,n&&"disabled",`size${re(r)}`,`color${re(o)}`,a&&"clickable",a&&`clickableColor${re(o)}`,i&&"deletable",i&&`deletableColor${re(o)}`,`${s}${re(o)}`],label:["label",`label${re(r)}`],avatar:["avatar",`avatar${re(r)}`,`avatarColor${re(o)}`],icon:["icon",`icon${re(r)}`,`iconColor${re(o)}`],deleteIcon:["deleteIcon",`deleteIcon${re(r)}`,`deleteIconColor${re(o)}`,`deleteIconOutlinedColor${re(o)}`]};return nt(u,cQ,e)},pQ=me("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,clickable:o,onDelete:i,size:a,variant:s}=n;return[{[`& .${ot.avatar}`]:e.avatar},{[`& .${ot.avatar}`]:e[`avatar${re(a)}`]},{[`& .${ot.avatar}`]:e[`avatarColor${re(r)}`]},{[`& .${ot.icon}`]:e.icon},{[`& .${ot.icon}`]:e[`icon${re(a)}`]},{[`& .${ot.icon}`]:e[`iconColor${re(r)}`]},{[`& .${ot.deleteIcon}`]:e.deleteIcon},{[`& .${ot.deleteIcon}`]:e[`deleteIcon${re(a)}`]},{[`& .${ot.deleteIcon}`]:e[`deleteIconColor${re(r)}`]},{[`& .${ot.deleteIcon}`]:e[`deleteIconOutlinedColor${re(r)}`]},e.root,e[`size${re(a)}`],e[`color${re(r)}`],o&&e.clickable,o&&r!=="default"&&e[`clickableColor${re(r)})`],i&&e.deletable,i&&r!=="default"&&e[`deletableColor${re(r)}`],e[s],s==="outlined"&&e[`outlined${re(r)}`]]}})(({theme:t,ownerState:e})=>{const n=At(t.palette.text.primary,.26);return O({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:t.palette.text.primary,backgroundColor:t.palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${ot.disabled}`]:{opacity:t.palette.action.disabledOpacity,pointerEvents:"none"},[`& .${ot.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300],fontSize:t.typography.pxToRem(12)},[`& .${ot.avatarColorPrimary}`]:{color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.dark},[`& .${ot.avatarColorSecondary}`]:{color:t.palette.secondary.contrastText,backgroundColor:t.palette.secondary.dark},[`& .${ot.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${ot.icon}`]:O({color:t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300],marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.color!=="default"&&{color:"inherit"}),[`& .${ot.deleteIcon}`]:O({WebkitTapHighlightColor:"transparent",color:n,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:At(n,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:At(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:t.palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.onDelete&&{[`&.${ot.focusVisible}`]:{backgroundColor:At(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${ot.focusVisible}`]:{backgroundColor:t.palette[e.color].dark}})},({theme:t,ownerState:e})=>O({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:At(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${ot.focusVisible}`]:{backgroundColor:At(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:t.shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${ot.focusVisible}`]:{backgroundColor:t.palette[e.color].dark}}),({theme:t,ownerState:e})=>O({},e.variant==="outlined"&&{backgroundColor:"transparent",border:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${ot.clickable}:hover`]:{backgroundColor:t.palette.action.hover},[`&.${ot.focusVisible}`]:{backgroundColor:t.palette.action.focus},[`& .${ot.avatar}`]:{marginLeft:4},[`& .${ot.avatarSmall}`]:{marginLeft:2},[`& .${ot.icon}`]:{marginLeft:4},[`& .${ot.iconSmall}`]:{marginLeft:2},[`& .${ot.deleteIcon}`]:{marginRight:5},[`& .${ot.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:t.palette[e.color].main,border:`1px solid ${At(t.palette[e.color].main,.7)}`,[`&.${ot.clickable}:hover`]:{backgroundColor:At(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${ot.focusVisible}`]:{backgroundColor:At(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${ot.deleteIcon}`]:{color:At(t.palette[e.color].main,.7),"&:hover, &:active":{color:t.palette[e.color].main}}})),mQ=me("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${re(r)}`]]}})(({ownerState:t})=>O({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.size==="small"&&{paddingLeft:8,paddingRight:8}));function _I(t){return t.key==="Backspace"||t.key==="Delete"}const vQ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiChip"}),{avatar:o,className:i,clickable:a,color:s="default",component:u,deleteIcon:l,disabled:c=!1,icon:d,label:h,onClick:f,onDelete:p,onKeyDown:v,onKeyUp:y,size:m="medium",variant:g="filled"}=r,x=ke(r,hQ),w=T.exports.useRef(null),b=pt(w,n),C=A=>{A.stopPropagation(),p&&p(A)},E=A=>{A.currentTarget===A.target&&_I(A)&&A.preventDefault(),v&&v(A)},S=A=>{A.currentTarget===A.target&&(p&&_I(A)?p(A):A.key==="Escape"&&w.current&&w.current.blur()),y&&y(A)},k=a!==!1&&f?!0:a,_=m==="small",I=k||p?rh:u||"div",N=O({},r,{component:I,disabled:c,size:m,color:s,onDelete:!!p,clickable:k,variant:g}),$=fQ(N),M=I===rh?O({component:u||"div",focusVisibleClassName:$.focusVisible},p&&{disableRipple:!0}):{};let B=null;if(p){const A=Ae(s!=="default"&&(g==="outlined"?$[`deleteIconOutlinedColor${re(s)}`]:$[`deleteIconColor${re(s)}`]),_&&$.deleteIconSmall);B=l&&T.exports.isValidElement(l)?T.exports.cloneElement(l,{className:Ae(l.props.className,$.deleteIcon,A),onClick:C}):F(lQ,{className:Ae($.deleteIcon,A),onClick:C})}let D=null;o&&T.exports.isValidElement(o)&&(D=T.exports.cloneElement(o,{className:Ae($.avatar,o.props.className)}));let U=null;return d&&T.exports.isValidElement(d)&&(U=T.exports.cloneElement(d,{className:Ae($.icon,d.props.className)})),ie(pQ,O({as:I,className:Ae($.root,i),disabled:k&&c?!0:void 0,onClick:f,onKeyDown:E,onKeyUp:S,ref:b,ownerState:N},M,x,{children:[D||U,F(mQ,{className:Ae($.label),ownerState:N,children:h}),B]}))});var SI=vQ;function Xl({props:t,states:e,muiFormControl:n}){return e.reduce((r,o)=>(r[o]=t[o],n&&typeof t[o]=="undefined"&&(r[o]=n[o]),r),{})}const gQ=T.exports.createContext();var r2=gQ;function Yl(){return T.exports.useContext(r2)}function yQ(t){return F(hG,O({},t,{defaultTheme:$g}))}function kI(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function o2(t,e=!1){return t&&(kI(t.value)&&t.value!==""||e&&kI(t.defaultValue)&&t.defaultValue!=="")}function xQ(t){return t.startAdornment}function wQ(t){return Qe("MuiInputBase",t)}const bQ=Ge("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var kl=bQ;const EQ=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],Ug=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${re(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},zg=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},CQ=t=>{const{classes:e,color:n,disabled:r,error:o,endAdornment:i,focused:a,formControl:s,fullWidth:u,hiddenLabel:l,multiline:c,size:d,startAdornment:h,type:f}=t,p={root:["root",`color${re(n)}`,r&&"disabled",o&&"error",u&&"fullWidth",a&&"focused",s&&"formControl",d==="small"&&"sizeSmall",c&&"multiline",h&&"adornedStart",i&&"adornedEnd",l&&"hiddenLabel"],input:["input",r&&"disabled",f==="search"&&"inputTypeSearch",c&&"inputMultiline",d==="small"&&"inputSizeSmall",l&&"inputHiddenLabel",h&&"inputAdornedStart",i&&"inputAdornedEnd"]};return nt(p,wQ,e)},Wg=me("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Ug})(({theme:t,ownerState:e})=>O({},t.typography.body1,{color:t.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${kl.disabled}`]:{color:t.palette.text.disabled,cursor:"default"}},e.multiline&&O({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),Vg=me("input",{name:"MuiInputBase",slot:"Input",overridesResolver:zg})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r={color:"currentColor",opacity:n?.42:.5,transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},o={opacity:"0 !important"},i={opacity:n?.42:.5};return O({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${kl.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus:-ms-input-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${kl.disabled}`]:{opacity:1,WebkitTextFillColor:t.palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),_Q=F(yQ,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),SQ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:i,autoFocus:a,className:s,components:u={},componentsProps:l={},defaultValue:c,disabled:d,disableInjectingGlobalStyles:h,endAdornment:f,fullWidth:p=!1,id:v,inputComponent:y="input",inputProps:m={},inputRef:g,maxRows:x,minRows:w,multiline:b=!1,name:C,onBlur:E,onChange:S,onClick:k,onFocus:_,onKeyDown:I,onKeyUp:N,placeholder:$,readOnly:M,renderSuffix:B,rows:D,startAdornment:U,type:A="text",value:L}=r,z=ke(r,EQ),j=m.value!=null?m.value:L,{current:q}=T.exports.useRef(j!=null),Y=T.exports.useRef(),Z=T.exports.useCallback(Ve=>{},[]),oe=pt(m.ref,Z),se=pt(g,oe),de=pt(Y,se),[ue,Q]=T.exports.useState(!1),X=Yl(),ee=Xl({props:r,muiFormControl:X,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ee.focused=X?X.focused:ue,T.exports.useEffect(()=>{!X&&d&&ue&&(Q(!1),E&&E())},[X,d,ue,E]);const he=X&&X.onFilled,fe=X&&X.onEmpty,ve=T.exports.useCallback(Ve=>{o2(Ve)?he&&he():fe&&fe()},[he,fe]);ri(()=>{q&&ve({value:j})},[j,ve,q]);const Se=Ve=>{if(ee.disabled){Ve.stopPropagation();return}_&&_(Ve),m.onFocus&&m.onFocus(Ve),X&&X.onFocus?X.onFocus(Ve):Q(!0)},De=Ve=>{E&&E(Ve),m.onBlur&&m.onBlur(Ve),X&&X.onBlur?X.onBlur(Ve):Q(!1)},Oe=(Ve,...ce)=>{if(!q){const lt=Ve.target||Y.current;if(lt==null)throw new Error(Os(1));ve({value:lt.value})}m.onChange&&m.onChange(Ve,...ce),S&&S(Ve,...ce)};T.exports.useEffect(()=>{ve(Y.current)},[]);const yt=Ve=>{Y.current&&Ve.currentTarget===Ve.target&&Y.current.focus(),k&&k(Ve)};let ht=y,Ke=m;b&&ht==="input"&&(D?Ke=O({type:void 0,minRows:D,maxRows:D},Ke):Ke=O({type:void 0,maxRows:x,minRows:w},Ke),ht=AX);const vt=Ve=>{ve(Ve.animationName==="mui-auto-fill-cancel"?Y.current:{value:"x"})};T.exports.useEffect(()=>{X&&X.setAdornedStart(Boolean(U))},[X,U]);const Mt=O({},r,{color:ee.color||"primary",disabled:ee.disabled,endAdornment:f,error:ee.error,focused:ee.focused,formControl:X,fullWidth:p,hiddenLabel:ee.hiddenLabel,multiline:b,size:ee.size,startAdornment:U,type:A}),Wt=CQ(Mt),Tt=u.Root||Wg,gt=l.root||{},nn=u.Input||Vg;return Ke=O({},Ke,l.input),ie(T.exports.Fragment,{children:[!h&&_Q,ie(Tt,O({},gt,!eh(Tt)&&{ownerState:O({},Mt,gt.ownerState)},{ref:n,onClick:yt},z,{className:Ae(Wt.root,gt.className,s),children:[U,F(r2.Provider,{value:null,children:F(nn,O({ownerState:Mt,"aria-invalid":ee.error,"aria-describedby":o,autoComplete:i,autoFocus:a,defaultValue:c,disabled:ee.disabled,id:v,onAnimationStart:vt,name:C,placeholder:$,readOnly:M,required:ee.required,rows:D,value:j,onKeyDown:I,onKeyUp:N,type:A},Ke,!eh(nn)&&{as:ht,ownerState:O({},Mt,Ke.ownerState)},{ref:de,className:Ae(Wt.input,Ke.className),onBlur:De,onChange:Oe,onFocus:Se}))}),f,B?B(O({},ee,{startAdornment:U})):null]}))]})});var i2=SQ;function kQ(t){return Qe("MuiInput",t)}const IQ=O({},kl,Ge("MuiInput",["root","underline","input"]));var Kf=IQ;function TQ(t){return Qe("MuiOutlinedInput",t)}const RQ=O({},kl,Ge("MuiOutlinedInput",["root","notchedOutline","input"]));var Hi=RQ;function AQ(t){return Qe("MuiFilledInput",t)}const NQ=O({},kl,Ge("MuiFilledInput",["root","underline","input"]));var au=NQ,PQ=YE(F("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");const DQ=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],OQ={entering:{opacity:1},entered:{opacity:1}},MQ=T.exports.forwardRef(function(e,n){const r=za(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:i,appear:a=!0,children:s,easing:u,in:l,onEnter:c,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:v,style:y,timeout:m=o,TransitionComponent:g=QE}=e,x=ke(e,DQ),w=T.exports.useRef(null),b=pt(s.ref,n),C=pt(w,b),E=B=>D=>{if(B){const U=w.current;D===void 0?B(U):B(U,D)}},S=E(h),k=E((B,D)=>{e2(B);const U=Sl({style:y,timeout:m,easing:u},{mode:"enter"});B.style.webkitTransition=r.transitions.create("opacity",U),B.style.transition=r.transitions.create("opacity",U),c&&c(B,D)}),_=E(d),I=E(v),N=E(B=>{const D=Sl({style:y,timeout:m,easing:u},{mode:"exit"});B.style.webkitTransition=r.transitions.create("opacity",D),B.style.transition=r.transitions.create("opacity",D),f&&f(B)}),$=E(p);return F(g,O({appear:a,in:l,nodeRef:w,onEnter:k,onEntered:_,onEntering:S,onExit:N,onExited:$,onExiting:I,addEndListener:B=>{i&&i(w.current,B)},timeout:m},x,{children:(B,D)=>T.exports.cloneElement(s,O({style:O({opacity:0,visibility:B==="exited"&&!l?"hidden":void 0},OQ[B],y,s.props.style),ref:C},D))}))});var IM=MQ;function FQ(t){return Qe("MuiBackdrop",t)}Ge("MuiBackdrop",["root","invisible"]);const $Q=["children","component","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],LQ=t=>{const{classes:e,invisible:n}=t;return nt({root:["root",n&&"invisible"]},FQ,e)},BQ=me("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>O({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),UQ=T.exports.forwardRef(function(e,n){var r,o;const i=Je({props:e,name:"MuiBackdrop"}),{children:a,component:s="div",components:u={},componentsProps:l={},className:c,invisible:d=!1,open:h,transitionDuration:f,TransitionComponent:p=IM}=i,v=ke(i,$Q),y=O({},i,{component:s,invisible:d}),m=LQ(y);return F(p,O({in:h,timeout:f},v,{children:F(BQ,{"aria-hidden":!0,as:(r=u.Root)!=null?r:s,className:Ae(m.root,c),ownerState:O({},y,(o=l.root)==null?void 0:o.ownerState),classes:m,ref:n,children:a})}))});var TM=UQ;function zQ(t){return Qe("MuiButton",t)}const WQ=Ge("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var Xf=WQ;const VQ=T.exports.createContext({});var jQ=VQ;const HQ=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],qQ=t=>{const{color:e,disableElevation:n,fullWidth:r,size:o,variant:i,classes:a}=t,s={root:["root",i,`${i}${re(e)}`,`size${re(o)}`,`${i}Size${re(o)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${re(o)}`],endIcon:["endIcon",`iconSize${re(o)}`]},u=nt(s,zQ,a);return O({},a,u)},RM=t=>O({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),GQ=me(rh,{shouldForwardProp:t=>To(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${re(n.color)}`],e[`size${re(n.size)}`],e[`${n.variant}Size${re(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;return O({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":O({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:At(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:At(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:At(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:(t.vars||t).palette.grey.A100,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":O({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${Xf.focusVisible}`]:O({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${Xf.disabled}`]:O({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="outlined"&&e.color==="secondary"&&{border:`1px solid ${(t.vars||t).palette.action.disabled}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${At(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Xf.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Xf.disabled}`]:{boxShadow:"none"}}),KQ=me("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${re(n.size)}`]]}})(({ownerState:t})=>O({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},RM(t))),XQ=me("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${re(n.size)}`]]}})(({ownerState:t})=>O({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},RM(t))),YQ=T.exports.forwardRef(function(e,n){const r=T.exports.useContext(jQ),o=XO(r,e),i=Je({props:o,name:"MuiButton"}),{children:a,color:s="primary",component:u="button",className:l,disabled:c=!1,disableElevation:d=!1,disableFocusRipple:h=!1,endIcon:f,focusVisibleClassName:p,fullWidth:v=!1,size:y="medium",startIcon:m,type:g,variant:x="text"}=i,w=ke(i,HQ),b=O({},i,{color:s,component:u,disabled:c,disableElevation:d,disableFocusRipple:h,fullWidth:v,size:y,type:g,variant:x}),C=qQ(b),E=m&&F(KQ,{className:C.startIcon,ownerState:b,children:m}),S=f&&F(XQ,{className:C.endIcon,ownerState:b,children:f});return ie(GQ,O({ownerState:b,className:Ae(l,r.className),component:u,disabled:c,focusRipple:!h,focusVisibleClassName:Ae(C.focusVisible,p),ref:n,type:g},w,{classes:C,children:[E,a,S]}))});var tr=YQ;const QQ=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],JQ=t=>t.classes,ZQ=me("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>O({position:"fixed",zIndex:t.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),eJ=me(TM,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),tJ=T.exports.forwardRef(function(e,n){var r;const o=Je({name:"MuiModal",props:e}),{BackdropComponent:i=eJ,closeAfterTransition:a=!1,children:s,components:u={},componentsProps:l={},disableAutoFocus:c=!1,disableEnforceFocus:d=!1,disableEscapeKeyDown:h=!1,disablePortal:f=!1,disableRestoreFocus:p=!1,disableScrollLock:v=!1,hideBackdrop:y=!1,keepMounted:m=!1}=o,g=ke(o,QQ),[x,w]=T.exports.useState(!0),b={closeAfterTransition:a,disableAutoFocus:c,disableEnforceFocus:d,disableEscapeKeyDown:h,disablePortal:f,disableRestoreFocus:p,disableScrollLock:v,hideBackdrop:y,keepMounted:m},C=O({},o,b,{exited:x}),E=JQ(C);return F(kX,O({components:O({Root:ZQ},u),componentsProps:{root:O({},l.root,(!u.Root||!eh(u.Root))&&{ownerState:O({},(r=l.root)==null?void 0:r.ownerState)})},BackdropComponent:i,onTransitionEnter:()=>w(!1),onTransitionExited:()=>w(!0),ref:n},g,{classes:E},b,{children:s}))});var AM=tJ;function nJ(t){return Qe("MuiDialog",t)}const rJ=Ge("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var h0=rJ;const oJ=T.exports.createContext({});var NM=oJ;const iJ=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],aJ=me(TM,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),sJ=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:o,fullScreen:i}=t,a={root:["root"],container:["container",`scroll${re(n)}`],paper:["paper",`paperScroll${re(n)}`,`paperWidth${re(String(r))}`,o&&"paperFullWidth",i&&"paperFullScreen"]};return nt(a,nJ,e)},uJ=me(AM,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),lJ=me("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${re(n.scroll)}`]]}})(({ownerState:t})=>O({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),cJ=me(Kl,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${re(n.scroll)}`],e[`paperWidth${re(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>O({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`${t.breakpoints.values.xs}${t.breakpoints.unit}`,[`&.${h0.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${h0.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${h0.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),dJ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiDialog"}),o=za(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,BackdropComponent:u,BackdropProps:l,children:c,className:d,disableEscapeKeyDown:h=!1,fullScreen:f=!1,fullWidth:p=!1,maxWidth:v="sm",onBackdropClick:y,onClose:m,open:g,PaperComponent:x=Kl,PaperProps:w={},scroll:b="paper",TransitionComponent:C=IM,transitionDuration:E=i,TransitionProps:S}=r,k=ke(r,iJ),_=O({},r,{disableEscapeKeyDown:h,fullScreen:f,fullWidth:p,maxWidth:v,scroll:b}),I=sJ(_),N=T.exports.useRef(),$=U=>{N.current=U.target===U.currentTarget},M=U=>{!N.current||(N.current=null,y&&y(U),m&&m(U,"backdropClick"))},B=Pg(s),D=T.exports.useMemo(()=>({titleId:B}),[B]);return F(uJ,O({className:Ae(I.root,d),BackdropProps:O({transitionDuration:E,as:u},l),closeAfterTransition:!0,BackdropComponent:aJ,disableEscapeKeyDown:h,onClose:m,open:g,ref:n,onClick:M,ownerState:_},k,{children:F(C,O({appear:!0,in:g,timeout:E,role:"presentation"},S,{children:F(lJ,{className:Ae(I.container),onMouseDown:$,ownerState:_,children:F(cJ,O({as:x,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":B},w,{className:Ae(I.paper,w.className),ownerState:_,children:F(NM.Provider,{value:D,children:c})}))})}))}))});var ss=dJ;function hJ(t){return Qe("MuiDialogActions",t)}Ge("MuiDialogActions",["root","spacing"]);const fJ=["className","disableSpacing"],pJ=t=>{const{classes:e,disableSpacing:n}=t;return nt({root:["root",!n&&"spacing"]},hJ,e)},mJ=me("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>O({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),vJ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiDialogActions"}),{className:o,disableSpacing:i=!1}=r,a=ke(r,fJ),s=O({},r,{disableSpacing:i}),u=pJ(s);return F(mJ,O({className:Ae(u.root,o),ownerState:s,ref:n},a))});var qu=vJ;function gJ(t){return Qe("MuiDialogContent",t)}Ge("MuiDialogContent",["root","dividers"]);function yJ(t){return Qe("MuiDialogTitle",t)}const xJ=Ge("MuiDialogTitle",["root"]);var wJ=xJ;const bJ=["className","dividers"],EJ=t=>{const{classes:e,dividers:n}=t;return nt({root:["root",n&&"dividers"]},gJ,e)},CJ=me("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>O({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${t.palette.divider}`,borderBottom:`1px solid ${t.palette.divider}`}:{[`.${wJ.root} + &`]:{paddingTop:0}})),_J=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiDialogContent"}),{className:o,dividers:i=!1}=r,a=ke(r,bJ),s=O({},r,{dividers:i}),u=EJ(s);return F(CJ,O({className:Ae(u.root,o),ownerState:s,ref:n},a))});var Gu=_J;function SJ(t){return Qe("MuiDialogContentText",t)}Ge("MuiDialogContentText",["root"]);const kJ=["children"],IJ=t=>{const{classes:e}=t,r=nt({root:["root"]},SJ,e);return O({},e,r)},TJ=me(Bg,{shouldForwardProp:t=>To(t)||t==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,e)=>e.root})({}),RJ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiDialogContentText"}),o=ke(r,kJ),i=IJ(o);return F(TJ,O({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:o},r,{classes:i}))});var Fx=RJ;const AJ=["className","id"],NJ=t=>{const{classes:e}=t;return nt({root:["root"]},yJ,e)},PJ=me(Bg,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),DJ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiDialogTitle"}),{className:o,id:i}=r,a=ke(r,AJ),s=r,u=NJ(s),{titleId:l=i}=T.exports.useContext(NM);return F(PJ,O({component:"h2",className:Ae(u.root,o),ownerState:s,ref:n,variant:"h6",id:l},a))});var Ku=DJ;const OJ=Ge("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var II=OJ;const MJ=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function FJ(t,e,n){const r=e.getBoundingClientRect(),o=n&&n.getBoundingClientRect(),i=ni(e);let a;if(e.fakeTransform)a=e.fakeTransform;else{const l=i.getComputedStyle(e);a=l.getPropertyValue("-webkit-transform")||l.getPropertyValue("transform")}let s=0,u=0;if(a&&a!=="none"&&typeof a=="string"){const l=a.split("(")[1].split(")")[0].split(",");s=parseInt(l[4],10),u=parseInt(l[5],10)}return t==="left"?o?`translateX(${o.right+s-r.left}px)`:`translateX(${i.innerWidth+s-r.left}px)`:t==="right"?o?`translateX(-${r.right-o.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:t==="up"?o?`translateY(${o.bottom+u-r.top}px)`:`translateY(${i.innerHeight+u-r.top}px)`:o?`translateY(-${r.top-o.top+r.height-u}px)`:`translateY(-${r.top+r.height-u}px)`}function $J(t){return typeof t=="function"?t():t}function Yf(t,e,n){const r=$J(n),o=FJ(t,e,r);o&&(e.style.webkitTransform=o,e.style.transform=o)}const LJ=T.exports.forwardRef(function(e,n){const r=za(),o={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:u,container:l,direction:c="down",easing:d=o,in:h,onEnter:f,onEntered:p,onEntering:v,onExit:y,onExited:m,onExiting:g,style:x,timeout:w=i,TransitionComponent:b=QE}=e,C=ke(e,MJ),E=T.exports.useRef(null),S=pt(u.ref,E),k=pt(S,n),_=L=>z=>{L&&(z===void 0?L(E.current):L(E.current,z))},I=_((L,z)=>{Yf(c,L,l),e2(L),f&&f(L,z)}),N=_((L,z)=>{const j=Sl({timeout:w,style:x,easing:d},{mode:"enter"});L.style.webkitTransition=r.transitions.create("-webkit-transform",O({},j)),L.style.transition=r.transitions.create("transform",O({},j)),L.style.webkitTransform="none",L.style.transform="none",v&&v(L,z)}),$=_(p),M=_(g),B=_(L=>{const z=Sl({timeout:w,style:x,easing:d},{mode:"exit"});L.style.webkitTransition=r.transitions.create("-webkit-transform",z),L.style.transition=r.transitions.create("transform",z),Yf(c,L,l),y&&y(L)}),D=_(L=>{L.style.webkitTransition="",L.style.transition="",m&&m(L)}),U=L=>{a&&a(E.current,L)},A=T.exports.useCallback(()=>{E.current&&Yf(c,E.current,l)},[c,l]);return T.exports.useEffect(()=>{if(h||c==="down"||c==="right")return;const L=Ng(()=>{E.current&&Yf(c,E.current,l)}),z=ni(E.current);return z.addEventListener("resize",L),()=>{L.clear(),z.removeEventListener("resize",L)}},[c,h,l]),T.exports.useEffect(()=>{h||A()},[h,A]),F(b,O({nodeRef:E,onEnter:I,onEntered:$,onEntering:N,onExit:B,onExited:D,onExiting:M,addEndListener:U,appear:s,in:h,timeout:w},C,{children:(L,z)=>T.exports.cloneElement(u,O({ref:k,style:O({visibility:L==="exited"&&!h?"hidden":void 0},x,u.props.style)},z))}))});var PM=LJ;const BJ=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],UJ=t=>{const{classes:e,disableUnderline:n}=t,o=nt({root:["root",!n&&"underline"],input:["input"]},AQ,e);return O({},e,o)},zJ=me(Wg,{shouldForwardProp:t=>To(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Ug(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",o=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return O({position:"relative",backgroundColor:i,borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:i}},[`&.${au.focused}`]:{backgroundColor:i},[`&.${au.disabled}`]:{backgroundColor:r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=t.palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${au.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${au.error}:after`]:{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${o}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${au.disabled}):before`]:{borderBottom:`1px solid ${t.palette.text.primary}`},[`&.${au.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&O({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),WJ=me(Vg,{name:"MuiFilledInput",slot:"Input",overridesResolver:zg})(({theme:t,ownerState:e})=>O({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9})),DM=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiFilledInput"}),{components:o={},componentsProps:i,fullWidth:a=!1,inputComponent:s="input",multiline:u=!1,type:l="text"}=r,c=ke(r,BJ),d=O({},r,{fullWidth:a,inputComponent:s,multiline:u,type:l}),h=UJ(r),f={root:{ownerState:d},input:{ownerState:d}},p=i?Zr(i,f):f;return F(i2,O({components:O({Root:zJ,Input:WJ},o),componentsProps:p,fullWidth:a,inputComponent:s,multiline:u,ref:n,type:l},c,{classes:h}))});DM.muiName="Input";var OM=DM;function VJ(t){return Qe("MuiFormControl",t)}Ge("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const jJ=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],HJ=t=>{const{classes:e,margin:n,fullWidth:r}=t,o={root:["root",n!=="none"&&`margin${re(n)}`,r&&"fullWidth"]};return nt(o,VJ,e)},qJ=me("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>O({},e.root,e[`margin${re(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>O({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),GJ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiFormControl"}),{children:o,className:i,color:a="primary",component:s="div",disabled:u=!1,error:l=!1,focused:c,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:v="medium",variant:y="outlined"}=r,m=ke(r,jJ),g=O({},r,{color:a,component:s,disabled:u,error:l,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:v,variant:y}),x=HJ(g),[w,b]=T.exports.useState(()=>{let B=!1;return o&&T.exports.Children.forEach(o,D=>{if(!Up(D,["Input","Select"]))return;const U=Up(D,["Select"])?D.props.input:D;U&&xQ(U.props)&&(B=!0)}),B}),[C,E]=T.exports.useState(()=>{let B=!1;return o&&T.exports.Children.forEach(o,D=>{!Up(D,["Input","Select"])||o2(D.props,!0)&&(B=!0)}),B}),[S,k]=T.exports.useState(!1);u&&S&&k(!1);const _=c!==void 0&&!u?c:S;let I;const N=T.exports.useCallback(()=>{E(!0)},[]),$=T.exports.useCallback(()=>{E(!1)},[]),M={adornedStart:w,setAdornedStart:b,color:a,disabled:u,error:l,filled:C,focused:_,fullWidth:d,hiddenLabel:h,size:v,onBlur:()=>{k(!1)},onEmpty:$,onFilled:N,onFocus:()=>{k(!0)},registerEffect:I,required:p,variant:y};return F(r2.Provider,{value:M,children:F(qJ,O({as:s,ownerState:g,className:Ae(x.root,i),ref:n},m,{children:o}))})});var KJ=GJ;function XJ(t){return Qe("MuiFormHelperText",t)}const YJ=Ge("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var TI=YJ,RI;const QJ=["children","className","component","disabled","error","filled","focused","margin","required","variant"],JJ=t=>{const{classes:e,contained:n,size:r,disabled:o,error:i,filled:a,focused:s,required:u}=t,l={root:["root",o&&"disabled",i&&"error",r&&`size${re(r)}`,n&&"contained",s&&"focused",a&&"filled",u&&"required"]};return nt(l,XJ,e)},ZJ=me("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${re(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>O({color:t.palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${TI.disabled}`]:{color:t.palette.text.disabled},[`&.${TI.error}`]:{color:t.palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),eZ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiFormHelperText"}),{children:o,className:i,component:a="p"}=r,s=ke(r,QJ),u=Yl(),l=Xl({props:r,muiFormControl:u,states:["variant","size","disabled","error","filled","focused","required"]}),c=O({},r,{component:a,contained:l.variant==="filled"||l.variant==="outlined",variant:l.variant,size:l.size,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),d=JJ(c);return F(ZJ,O({as:a,ownerState:c,className:Ae(d.root,i),ref:n},s,{children:o===" "?RI||(RI=F("span",{className:"notranslate",children:"\u200B"})):o}))});var tZ=eZ;function nZ(t){return Qe("MuiFormLabel",t)}const rZ=Ge("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);var fd=rZ;const oZ=["children","className","color","component","disabled","error","filled","focused","required"],iZ=t=>{const{classes:e,color:n,focused:r,disabled:o,error:i,filled:a,required:s}=t,u={root:["root",`color${re(n)}`,o&&"disabled",i&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",i&&"error"]};return nt(u,nZ,e)},aZ=me("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>O({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>O({color:t.palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${fd.focused}`]:{color:t.palette[e.color].main},[`&.${fd.disabled}`]:{color:t.palette.text.disabled},[`&.${fd.error}`]:{color:t.palette.error.main}})),sZ=me("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${fd.error}`]:{color:t.palette.error.main}})),uZ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiFormLabel"}),{children:o,className:i,component:a="label"}=r,s=ke(r,oZ),u=Yl(),l=Xl({props:r,muiFormControl:u,states:["color","required","focused","disabled","error","filled"]}),c=O({},r,{color:l.color||"primary",component:a,disabled:l.disabled,error:l.error,filled:l.filled,focused:l.focused,required:l.required}),d=iZ(c);return ie(aZ,O({as:a,ownerState:c,className:Ae(d.root,i),ref:n},s,{children:[o,l.required&&ie(sZ,{ownerState:c,"aria-hidden":!0,className:d.asterisk,children:["\u2009","*"]})]}))});var lZ=uZ;const cZ=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function $x(t){return`scale(${t}, ${t**2})`}const dZ={entering:{opacity:1,transform:$x(1)},entered:{opacity:1,transform:"none"}},f0=typeof navigator!="undefined"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)[4-9]/i.test(navigator.userAgent),MM=T.exports.forwardRef(function(e,n){const{addEndListener:r,appear:o=!0,children:i,easing:a,in:s,onEnter:u,onEntered:l,onEntering:c,onExit:d,onExited:h,onExiting:f,style:p,timeout:v="auto",TransitionComponent:y=QE}=e,m=ke(e,cZ),g=T.exports.useRef(),x=T.exports.useRef(),w=za(),b=T.exports.useRef(null),C=pt(i.ref,n),E=pt(b,C),S=D=>U=>{if(D){const A=b.current;U===void 0?D(A):D(A,U)}},k=S(c),_=S((D,U)=>{e2(D);const{duration:A,delay:L,easing:z}=Sl({style:p,timeout:v,easing:a},{mode:"enter"});let j;v==="auto"?(j=w.transitions.getAutoHeightDuration(D.clientHeight),x.current=j):j=A,D.style.transition=[w.transitions.create("opacity",{duration:j,delay:L}),w.transitions.create("transform",{duration:f0?j:j*.666,delay:L,easing:z})].join(","),u&&u(D,U)}),I=S(l),N=S(f),$=S(D=>{const{duration:U,delay:A,easing:L}=Sl({style:p,timeout:v,easing:a},{mode:"exit"});let z;v==="auto"?(z=w.transitions.getAutoHeightDuration(D.clientHeight),x.current=z):z=U,D.style.transition=[w.transitions.create("opacity",{duration:z,delay:A}),w.transitions.create("transform",{duration:f0?z:z*.666,delay:f0?A:A||z*.333,easing:L})].join(","),D.style.opacity=0,D.style.transform=$x(.75),d&&d(D)}),M=S(h),B=D=>{v==="auto"&&(g.current=setTimeout(D,x.current||0)),r&&r(b.current,D)};return T.exports.useEffect(()=>()=>{clearTimeout(g.current)},[]),F(y,O({appear:o,in:s,nodeRef:b,onEnter:_,onEntered:I,onEntering:k,onExit:$,onExited:M,onExiting:N,addEndListener:B,timeout:v==="auto"?null:v},m,{children:(D,U)=>T.exports.cloneElement(i,O({style:O({opacity:0,transform:$x(.75),visibility:D==="exited"&&!s?"hidden":void 0},dZ[D],p,i.props.style),ref:E},U))}))});MM.muiSupportAuto=!0;var Xm=MM;const hZ=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],fZ=t=>{const{classes:e,disableUnderline:n}=t,o=nt({root:["root",!n&&"underline"],input:["input"]},kQ,e);return O({},e,o)},pZ=me(Wg,{shouldForwardProp:t=>To(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...Ug(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{const r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return O({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&:after":{borderBottom:`2px solid ${t.palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Kf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Kf.error}:after`]:{borderBottomColor:t.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Kf.disabled}):before`]:{borderBottom:`2px solid ${t.palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Kf.disabled}:before`]:{borderBottomStyle:"dotted"}})}),mZ=me(Vg,{name:"MuiInput",slot:"Input",overridesResolver:zg})({}),FM=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiInput"}),{disableUnderline:o,components:i={},componentsProps:a,fullWidth:s=!1,inputComponent:u="input",multiline:l=!1,type:c="text"}=r,d=ke(r,hZ),h=fZ(r),p={root:{ownerState:{disableUnderline:o}}},v=a?Zr(a,p):p;return F(i2,O({components:O({Root:pZ,Input:mZ},i),componentsProps:v,fullWidth:s,inputComponent:u,multiline:l,ref:n,type:c},d,{classes:h}))});FM.muiName="Input";var $M=FM;function vZ(t){return Qe("MuiInputLabel",t)}Ge("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const gZ=["disableAnimation","margin","shrink","variant"],yZ=t=>{const{classes:e,formControl:n,size:r,shrink:o,disableAnimation:i,variant:a,required:s}=t,l=nt({root:["root",n&&"formControl",!i&&"animated",o&&"shrink",r==="small"&&"sizeSmall",a],asterisk:[s&&"asterisk"]},vZ,e);return O({},e,l)},xZ=me(lZ,{shouldForwardProp:t=>To(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${fd.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,e[n.variant]]}})(({theme:t,ownerState:e})=>O({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&O({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&O({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&O({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))),wZ=T.exports.forwardRef(function(e,n){const r=Je({name:"MuiInputLabel",props:e}),{disableAnimation:o=!1,shrink:i}=r,a=ke(r,gZ),s=Yl();let u=i;typeof u=="undefined"&&s&&(u=s.filled||s.focused||s.adornedStart);const l=Xl({props:r,muiFormControl:s,states:["size","variant","required"]}),c=O({},r,{disableAnimation:o,formControl:s,shrink:u,size:l.size,variant:l.variant,required:l.required}),d=yZ(c);return F(xZ,O({"data-shrink":u,ownerState:c,ref:n},a,{classes:d}))});var bZ=wZ;function EZ(t){return Qe("MuiLinearProgress",t)}Ge("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const CZ=["className","color","value","valueBuffer","variant"];let Ql=t=>t,AI,NI,PI,DI,OI,MI;const Lx=4,_Z=Gl(AI||(AI=Ql`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),SZ=Gl(NI||(NI=Ql`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),kZ=Gl(PI||(PI=Ql`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),IZ=t=>{const{classes:e,variant:n,color:r}=t,o={root:["root",`color${re(r)}`,n],dashed:["dashed",`dashedColor${re(r)}`],bar1:["bar",`barColor${re(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${re(r)}`,n==="buffer"&&`color${re(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return nt(o,EZ,e)},a2=(t,e)=>e==="inherit"?"currentColor":t.palette.mode==="light"?WE(t.palette[e].main,.62):zE(t.palette[e].main,.5),TZ=me("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${re(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>O({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:a2(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),RZ=me("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${re(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=a2(e,t.color);return O({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},kg(DI||(DI=Ql`
    animation: ${0} 3s infinite linear;
  `),kZ)),AZ=me("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${re(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>O({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":e.palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${Lx}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${Lx}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&kg(OI||(OI=Ql`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),_Z)),NZ=me("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${re(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>O({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":e.palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:a2(e,t.color),transition:`transform .${Lx}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&kg(MI||(MI=Ql`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),SZ)),PZ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiLinearProgress"}),{className:o,color:i="primary",value:a,valueBuffer:s,variant:u="indeterminate"}=r,l=ke(r,CZ),c=O({},r,{color:i,variant:u}),d=IZ(c),h=za(),f={},p={bar1:{},bar2:{}};if((u==="determinate"||u==="buffer")&&a!==void 0){f["aria-valuenow"]=Math.round(a),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let v=a-100;h.direction==="rtl"&&(v=-v),p.bar1.transform=`translateX(${v}%)`}if(u==="buffer"&&s!==void 0){let v=(s||0)-100;h.direction==="rtl"&&(v=-v),p.bar2.transform=`translateX(${v}%)`}return ie(TZ,O({className:Ae(d.root,o),ownerState:c,role:"progressbar"},f,{ref:n},l,{children:[u==="buffer"?F(RZ,{className:d.dashed,ownerState:c}):null,F(AZ,{className:d.bar1,ownerState:c,style:p.bar1}),u==="determinate"?null:F(NZ,{className:d.bar2,ownerState:c,style:p.bar2})]}))});var DZ=PZ;const OZ=T.exports.createContext({});var Bx=OZ;function MZ(t){return Qe("MuiList",t)}Ge("MuiList",["root","padding","dense","subheader"]);const FZ=["children","className","component","dense","disablePadding","subheader"],$Z=t=>{const{classes:e,disablePadding:n,dense:r,subheader:o}=t;return nt({root:["root",!n&&"padding",r&&"dense",o&&"subheader"]},MZ,e)},LZ=me("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>O({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),BZ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiList"}),{children:o,className:i,component:a="ul",dense:s=!1,disablePadding:u=!1,subheader:l}=r,c=ke(r,FZ),d=T.exports.useMemo(()=>({dense:s}),[s]),h=O({},r,{component:a,dense:s,disablePadding:u}),f=$Z(h);return F(Bx.Provider,{value:d,children:ie(LZ,O({as:a,className:Ae(f.root,i),ref:n,ownerState:h},c,{children:[l,o]}))})});var UZ=BZ;const zZ=Ge("MuiListItemIcon",["root","alignItemsFlexStart"]);var FI=zZ;const WZ=Ge("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var $I=WZ;const VZ=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function p0(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function LI(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function LM(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function Ic(t,e,n,r,o,i){let a=!1,s=o(t,e,e?n:!1);for(;s;){if(s===t.firstChild){if(a)return!1;a=!0}const u=r?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!LM(s,i)||u)s=o(t,s,n);else return s.focus(),!0}return!1}const jZ=T.exports.forwardRef(function(e,n){const{actions:r,autoFocus:o=!1,autoFocusItem:i=!1,children:a,className:s,disabledItemsFocusable:u=!1,disableListWrap:l=!1,onKeyDown:c,variant:d="selectedMenu"}=e,h=ke(e,VZ),f=T.exports.useRef(null),p=T.exports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ri(()=>{o&&f.current.focus()},[o]),T.exports.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(x,w)=>{const b=!f.current.style.width;if(x.clientHeight<f.current.clientHeight&&b){const C=`${KO(Pn(x))}px`;f.current.style[w.direction==="rtl"?"paddingLeft":"paddingRight"]=C,f.current.style.width=`calc(100% + ${C})`}return f.current}}),[]);const v=x=>{const w=f.current,b=x.key,C=Pn(w).activeElement;if(b==="ArrowDown")x.preventDefault(),Ic(w,C,l,u,p0);else if(b==="ArrowUp")x.preventDefault(),Ic(w,C,l,u,LI);else if(b==="Home")x.preventDefault(),Ic(w,null,l,u,p0);else if(b==="End")x.preventDefault(),Ic(w,null,l,u,LI);else if(b.length===1){const E=p.current,S=b.toLowerCase(),k=performance.now();E.keys.length>0&&(k-E.lastTime>500?(E.keys=[],E.repeating=!0,E.previousKeyMatched=!0):E.repeating&&S!==E.keys[0]&&(E.repeating=!1)),E.lastTime=k,E.keys.push(S);const _=C&&!E.repeating&&LM(C,E);E.previousKeyMatched&&(_||Ic(w,C,!1,u,p0,E))?x.preventDefault():E.previousKeyMatched=!1}c&&c(x)},y=pt(f,n);let m=-1;T.exports.Children.forEach(a,(x,w)=>{!T.exports.isValidElement(x)||x.props.disabled||(d==="selectedMenu"&&x.props.selected||m===-1)&&(m=w)});const g=T.exports.Children.map(a,(x,w)=>{if(w===m){const b={};return i&&(b.autoFocus=!0),x.props.tabIndex===void 0&&d==="selectedMenu"&&(b.tabIndex=0),T.exports.cloneElement(x,b)}return x});return F(UZ,O({role:"menu",ref:y,className:s,onKeyDown:v,tabIndex:o?0:-1},h,{children:g}))});var HZ=jZ;function qZ(t){return Qe("MuiPopover",t)}Ge("MuiPopover",["root","paper"]);const GZ=["onEntering"],KZ=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function BI(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function UI(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function zI(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function m0(t){return typeof t=="function"?t():t}const XZ=t=>{const{classes:e}=t;return nt({root:["root"],paper:["paper"]},qZ,e)},YZ=me(AM,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),QZ=me(Kl,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),JZ=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiPopover"}),{action:o,anchorEl:i,anchorOrigin:a={vertical:"top",horizontal:"left"},anchorPosition:s,anchorReference:u="anchorEl",children:l,className:c,container:d,elevation:h=8,marginThreshold:f=16,open:p,PaperProps:v={},transformOrigin:y={vertical:"top",horizontal:"left"},TransitionComponent:m=Xm,transitionDuration:g="auto",TransitionProps:{onEntering:x}={}}=r,w=ke(r.TransitionProps,GZ),b=ke(r,KZ),C=T.exports.useRef(),E=pt(C,v.ref),S=O({},r,{anchorOrigin:a,anchorReference:u,elevation:h,marginThreshold:f,PaperProps:v,transformOrigin:y,TransitionComponent:m,transitionDuration:g,TransitionProps:w}),k=XZ(S),_=T.exports.useCallback(()=>{if(u==="anchorPosition")return s;const U=m0(i),L=(U&&U.nodeType===1?U:Pn(C.current).body).getBoundingClientRect();return{top:L.top+BI(L,a.vertical),left:L.left+UI(L,a.horizontal)}},[i,a.horizontal,a.vertical,s,u]),I=T.exports.useCallback(U=>({vertical:BI(U,y.vertical),horizontal:UI(U,y.horizontal)}),[y.horizontal,y.vertical]),N=T.exports.useCallback(U=>{const A={width:U.offsetWidth,height:U.offsetHeight},L=I(A);if(u==="none")return{top:null,left:null,transformOrigin:zI(L)};const z=_();let j=z.top-L.vertical,q=z.left-L.horizontal;const Y=j+A.height,Z=q+A.width,oe=ni(m0(i)),se=oe.innerHeight-f,de=oe.innerWidth-f;if(j<f){const ue=j-f;j-=ue,L.vertical+=ue}else if(Y>se){const ue=Y-se;j-=ue,L.vertical+=ue}if(q<f){const ue=q-f;q-=ue,L.horizontal+=ue}else if(Z>de){const ue=Z-de;q-=ue,L.horizontal+=ue}return{top:`${Math.round(j)}px`,left:`${Math.round(q)}px`,transformOrigin:zI(L)}},[i,u,_,I,f]),$=T.exports.useCallback(()=>{const U=C.current;if(!U)return;const A=N(U);A.top!==null&&(U.style.top=A.top),A.left!==null&&(U.style.left=A.left),U.style.transformOrigin=A.transformOrigin},[N]),M=(U,A)=>{x&&x(U,A),$()};T.exports.useEffect(()=>{p&&$()}),T.exports.useImperativeHandle(o,()=>p?{updatePosition:()=>{$()}}:null,[p,$]),T.exports.useEffect(()=>{if(!p)return;const U=Ng(()=>{$()}),A=ni(i);return A.addEventListener("resize",U),()=>{U.clear(),A.removeEventListener("resize",U)}},[i,p,$]);let B=g;g==="auto"&&!m.muiSupportAuto&&(B=void 0);const D=d||(i?Pn(m0(i)).body:void 0);return F(YZ,O({BackdropProps:{invisible:!0},className:Ae(k.root,c),container:D,open:p,ref:n,ownerState:S},b,{children:F(m,O({appear:!0,in:p,onEntering:M,timeout:B},w,{children:F(QZ,O({elevation:h},v,{ref:E,className:Ae(k.paper,v.className),children:l}))}))}))});var ZZ=JZ;function eee(t){return Qe("MuiMenu",t)}Ge("MuiMenu",["root","paper","list"]);const tee=["onEntering"],nee=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],ree={vertical:"top",horizontal:"right"},oee={vertical:"top",horizontal:"left"},iee=t=>{const{classes:e}=t;return nt({root:["root"],paper:["paper"],list:["list"]},eee,e)},aee=me(ZZ,{shouldForwardProp:t=>To(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),see=me(Kl,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),uee=me(HZ,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),lee=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:i,disableAutoFocusItem:a=!1,MenuListProps:s={},onClose:u,open:l,PaperProps:c={},PopoverClasses:d,transitionDuration:h="auto",TransitionProps:{onEntering:f}={},variant:p="selectedMenu"}=r,v=ke(r.TransitionProps,tee),y=ke(r,nee),m=za(),g=m.direction==="rtl",x=O({},r,{autoFocus:o,disableAutoFocusItem:a,MenuListProps:s,onEntering:f,PaperProps:c,transitionDuration:h,TransitionProps:v,variant:p}),w=iee(x),b=o&&!a&&l,C=T.exports.useRef(null),E=(_,I)=>{C.current&&C.current.adjustStyleForScrollbar(_,m),f&&f(_,I)},S=_=>{_.key==="Tab"&&(_.preventDefault(),u&&u(_,"tabKeyDown"))};let k=-1;return T.exports.Children.map(i,(_,I)=>{!T.exports.isValidElement(_)||_.props.disabled||(p==="selectedMenu"&&_.props.selected||k===-1)&&(k=I)}),F(aee,O({classes:d,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:g?"right":"left"},transformOrigin:g?ree:oee,PaperProps:O({component:see},c,{classes:O({},c.classes,{root:w.paper})}),className:w.root,open:l,ref:n,transitionDuration:h,TransitionProps:O({onEntering:E},v),ownerState:x},y,{children:F(uee,O({onKeyDown:S,actions:C,autoFocus:o&&(k===-1||a),autoFocusItem:b,variant:p},s,{className:Ae(w.list,s.className),children:i}))}))});var Ym=lee;function cee(t){return Qe("MuiMenuItem",t)}const dee=Ge("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var Tc=dee;const hee=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],fee=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},pee=t=>{const{disabled:e,dense:n,divider:r,disableGutters:o,selected:i,classes:a}=t,u=nt({root:["root",n&&"dense",e&&"disabled",!o&&"gutters",r&&"divider",i&&"selected"]},cee,a);return O({},a,u)},mee=me(rh,{shouldForwardProp:t=>To(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:fee})(({theme:t,ownerState:e})=>O({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${t.palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:t.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Tc.selected}`]:{backgroundColor:At(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${Tc.focusVisible}`]:{backgroundColor:At(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${Tc.selected}:hover`]:{backgroundColor:At(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:At(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Tc.focusVisible}`]:{backgroundColor:t.palette.action.focus},[`&.${Tc.disabled}`]:{opacity:t.palette.action.disabledOpacity},[`& + .${II.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${II.inset}`]:{marginLeft:52},[`& .${$I.root}`]:{marginTop:0,marginBottom:0},[`& .${$I.inset}`]:{paddingLeft:36},[`& .${FI.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&O({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${FI.root} svg`]:{fontSize:"1.25rem"}}))),vee=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiMenuItem"}),{autoFocus:o=!1,component:i="li",dense:a=!1,divider:s=!1,disableGutters:u=!1,focusVisibleClassName:l,role:c="menuitem",tabIndex:d}=r,h=ke(r,hee),f=T.exports.useContext(Bx),p={dense:a||f.dense||!1,disableGutters:u},v=T.exports.useRef(null);ri(()=>{o&&v.current&&v.current.focus()},[o]);const y=O({},r,{dense:p.dense,divider:s,disableGutters:u}),m=pee(r),g=pt(v,n);let x;return r.disabled||(x=d!==void 0?d:-1),F(Bx.Provider,{value:p,children:F(mee,O({ref:g,role:c,tabIndex:x,component:i,focusVisibleClassName:Ae(m.focusVisible,l)},h,{ownerState:y,classes:m}))})});var pd=vee;function gee(t){return Qe("MuiNativeSelect",t)}const yee=Ge("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var s2=yee;const xee=["className","disabled","IconComponent","inputRef","variant"],wee=t=>{const{classes:e,variant:n,disabled:r,multiple:o,open:i}=t,a={select:["select",n,r&&"disabled",o&&"multiple"],icon:["icon",`icon${re(n)}`,i&&"iconOpen",r&&"disabled"]};return nt(a,gee,e)},BM=({ownerState:t,theme:e})=>O({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},[`&.${s2.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:e.shape.borderRadius,"&:focus":{borderRadius:e.shape.borderRadius},"&&&":{paddingRight:32}}),bee=me("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:To,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],{[`&.${s2.multiple}`]:e.multiple}]}})(BM),UM=({ownerState:t,theme:e})=>O({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:e.palette.action.active,[`&.${s2.disabled}`]:{color:e.palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),Eee=me("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${re(n.variant)}`],n.open&&e.iconOpen]}})(UM),Cee=T.exports.forwardRef(function(e,n){const{className:r,disabled:o,IconComponent:i,inputRef:a,variant:s="standard"}=e,u=ke(e,xee),l=O({},e,{disabled:o,variant:s}),c=wee(l);return ie(T.exports.Fragment,{children:[F(bee,O({ownerState:l,className:Ae(c.select,r),disabled:o,ref:a||n},u)),e.multiple?null:F(Eee,{as:i,ownerState:l,className:c.icon})]})});var _ee=Cee,WI;const See=["children","classes","className","label","notched"],kee=me("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Iee=me("legend")(({ownerState:t,theme:e})=>O({float:"unset",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&O({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function Tee(t){const{className:e,label:n,notched:r}=t,o=ke(t,See),i=n!=null&&n!=="",a=O({},t,{notched:r,withLabel:i});return F(kee,O({"aria-hidden":!0,className:e,ownerState:a},o,{children:F(Iee,{ownerState:a,children:i?F("span",{children:n}):WI||(WI=F("span",{className:"notranslate",children:"\u200B"}))})}))}const Ree=["components","fullWidth","inputComponent","label","multiline","notched","type"],Aee=t=>{const{classes:e}=t,r=nt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},TQ,e);return O({},e,r)},Nee=me(Wg,{shouldForwardProp:t=>To(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Ug})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return O({position:"relative",borderRadius:t.shape.borderRadius,[`&:hover .${Hi.notchedOutline}`]:{borderColor:t.palette.text.primary},"@media (hover: none)":{[`&:hover .${Hi.notchedOutline}`]:{borderColor:n}},[`&.${Hi.focused} .${Hi.notchedOutline}`]:{borderColor:t.palette[e.color].main,borderWidth:2},[`&.${Hi.error} .${Hi.notchedOutline}`]:{borderColor:t.palette.error.main},[`&.${Hi.disabled} .${Hi.notchedOutline}`]:{borderColor:t.palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&O({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Pee=me(Tee,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>({borderColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"})),Dee=me(Vg,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:zg})(({theme:t,ownerState:e})=>O({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),zM=T.exports.forwardRef(function(e,n){var r;const o=Je({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:a=!1,inputComponent:s="input",label:u,multiline:l=!1,notched:c,type:d="text"}=o,h=ke(o,Ree),f=Aee(o),p=Yl(),v=Xl({props:o,muiFormControl:p,states:["required"]});return F(i2,O({components:O({Root:Nee,Input:Dee},i),renderSuffix:y=>F(Pee,{className:f.notchedOutline,label:u!=null&&u!==""&&v.required?r||(r=ie(T.exports.Fragment,{children:[u,"\xA0","*"]})):u,notched:typeof c!="undefined"?c:Boolean(y.startAdornment||y.filled||y.focused)}),fullWidth:a,inputComponent:s,multiline:l,ref:n,type:d},h,{classes:O({},f,{notchedOutline:null})}))});zM.muiName="Input";var WM=zM;function Oee(t){return Qe("MuiSelect",t)}const Mee=Ge("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var Qf=Mee,VI;const Fee=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],$ee=me("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${Qf.select}`]:e.select},{[`&.${Qf.select}`]:e[n.variant]},{[`&.${Qf.multiple}`]:e.multiple}]}})(BM,{[`&.${Qf.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Lee=me("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${re(n.variant)}`],n.open&&e.iconOpen]}})(UM),Bee=me("input",{shouldForwardProp:t=>oY(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function jI(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function Uee(t){return t==null||typeof t=="string"&&!t.trim()}const zee=t=>{const{classes:e,variant:n,disabled:r,multiple:o,open:i}=t,a={select:["select",n,r&&"disabled",o&&"multiple"],icon:["icon",`icon${re(n)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return nt(a,Oee,e)},Wee=T.exports.forwardRef(function(e,n){const{"aria-describedby":r,"aria-label":o,autoFocus:i,autoWidth:a,children:s,className:u,defaultOpen:l,defaultValue:c,disabled:d,displayEmpty:h,IconComponent:f,inputRef:p,labelId:v,MenuProps:y={},multiple:m,name:g,onBlur:x,onChange:w,onClose:b,onFocus:C,onOpen:E,open:S,readOnly:k,renderValue:_,SelectDisplayProps:I={},tabIndex:N,value:$,variant:M="standard"}=e,B=ke(e,Fee),[D,U]=qm({controlled:$,default:c,name:"Select"}),[A,L]=qm({controlled:S,default:l,name:"Select"}),z=T.exports.useRef(null),j=T.exports.useRef(null),[q,Y]=T.exports.useState(null),{current:Z}=T.exports.useRef(S!=null),[oe,se]=T.exports.useState(),de=pt(n,p),ue=T.exports.useCallback(ce=>{j.current=ce,ce&&Y(ce)},[]);T.exports.useImperativeHandle(de,()=>({focus:()=>{j.current.focus()},node:z.current,value:D}),[D]),T.exports.useEffect(()=>{l&&A&&q&&!Z&&(se(a?null:q.clientWidth),j.current.focus())},[q,a]),T.exports.useEffect(()=>{i&&j.current.focus()},[i]),T.exports.useEffect(()=>{if(!v)return;const ce=Pn(j.current).getElementById(v);if(ce){const lt=()=>{getSelection().isCollapsed&&j.current.focus()};return ce.addEventListener("click",lt),()=>{ce.removeEventListener("click",lt)}}},[v]);const Q=(ce,lt)=>{ce?E&&E(lt):b&&b(lt),Z||(se(a?null:q.clientWidth),L(ce))},X=ce=>{ce.button===0&&(ce.preventDefault(),j.current.focus(),Q(!0,ce))},ee=ce=>{Q(!1,ce)},he=T.exports.Children.toArray(s),fe=ce=>{const lt=he.map(Ct=>Ct.props.value).indexOf(ce.target.value);if(lt===-1)return;const Ce=he[lt];U(Ce.props.value),w&&w(ce,Ce)},ve=ce=>lt=>{let Ce;if(!!lt.currentTarget.hasAttribute("tabindex")){if(m){Ce=Array.isArray(D)?D.slice():[];const Ct=D.indexOf(ce.props.value);Ct===-1?Ce.push(ce.props.value):Ce.splice(Ct,1)}else Ce=ce.props.value;if(ce.props.onClick&&ce.props.onClick(lt),D!==Ce&&(U(Ce),w)){const Ct=lt.nativeEvent||lt,Do=new Ct.constructor(Ct.type,Ct);Object.defineProperty(Do,"target",{writable:!0,value:{value:Ce,name:g}}),w(Do,ce)}m||Q(!1,lt)}},Se=ce=>{k||[" ","ArrowUp","ArrowDown","Enter"].indexOf(ce.key)!==-1&&(ce.preventDefault(),Q(!0,ce))},De=q!==null&&A,Oe=ce=>{!De&&x&&(Object.defineProperty(ce,"target",{writable:!0,value:{value:D,name:g}}),x(ce))};delete B["aria-invalid"];let yt,ht;const Ke=[];let vt=!1;(o2({value:D})||h)&&(_?yt=_(D):vt=!0);const Mt=he.map((ce,lt,Ce)=>{if(!T.exports.isValidElement(ce))return null;let Ct;if(m){if(!Array.isArray(D))throw new Error(Os(2));Ct=D.some($n=>jI($n,ce.props.value)),Ct&&vt&&Ke.push(ce.props.children)}else Ct=jI(D,ce.props.value),Ct&&vt&&(ht=ce.props.children);if(ce.props.value===void 0)return T.exports.cloneElement(ce,{"aria-readonly":!0,role:"option"});const Do=()=>{if(D)return Ct;const $n=Ce.find(li=>li.props.value!==void 0&&li.props.disabled!==!0);return ce===$n?!0:Ct};return T.exports.cloneElement(ce,{"aria-selected":Ct?"true":"false",onClick:ve(ce),onKeyUp:$n=>{$n.key===" "&&$n.preventDefault(),ce.props.onKeyUp&&ce.props.onKeyUp($n)},role:"option",selected:Ce[0].props.value===void 0||Ce[0].props.disabled===!0?Do():Ct,value:void 0,"data-value":ce.props.value})});vt&&(m?Ke.length===0?yt=null:yt=Ke.reduce((ce,lt,Ce)=>(ce.push(lt),Ce<Ke.length-1&&ce.push(", "),ce),[]):yt=ht);let Wt=oe;!a&&Z&&q&&(Wt=q.clientWidth);let Tt;typeof N!="undefined"?Tt=N:Tt=d?null:0;const gt=I.id||(g?`mui-component-select-${g}`:void 0),nn=O({},e,{variant:M,value:D,open:De}),Ve=zee(nn);return ie(T.exports.Fragment,{children:[F($ee,O({ref:ue,tabIndex:Tt,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":De?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[v,gt].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:Se,onMouseDown:d||k?null:X,onBlur:Oe,onFocus:C},I,{ownerState:nn,className:Ae(Ve.select,u,I.className),id:gt,children:Uee(yt)?VI||(VI=F("span",{className:"notranslate",children:"\u200B"})):yt})),F(Bee,O({value:Array.isArray(D)?D.join(","):D,name:g,ref:z,"aria-hidden":!0,onChange:fe,tabIndex:-1,disabled:d,className:Ve.nativeInput,autoFocus:i,ownerState:nn},B)),F(Lee,{as:f,className:Ve.icon,ownerState:nn}),F(Ym,O({id:`menu-${g||""}`,anchorEl:q,open:De,onClose:ee,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:O({"aria-labelledby":v,role:"listbox",disableListWrap:!0},y.MenuListProps),PaperProps:O({},y.PaperProps,{style:O({minWidth:Wt},y.PaperProps!=null?y.PaperProps.style:null)}),children:Mt}))]})});var Vee=Wee,HI,qI;const jee=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Hee=t=>{const{classes:e}=t;return e},u2={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>To(t)&&t!=="variant",slot:"Root"},qee=me($M,u2)(""),Gee=me(WM,u2)(""),Kee=me(OM,u2)(""),VM=T.exports.forwardRef(function(e,n){const r=Je({name:"MuiSelect",props:e}),{autoWidth:o=!1,children:i,classes:a={},className:s,defaultOpen:u=!1,displayEmpty:l=!1,IconComponent:c=PQ,id:d,input:h,inputProps:f,label:p,labelId:v,MenuProps:y,multiple:m=!1,native:g=!1,onClose:x,onOpen:w,open:b,renderValue:C,SelectDisplayProps:E,variant:S="outlined"}=r,k=ke(r,jee),_=g?_ee:Vee,I=Yl(),$=Xl({props:r,muiFormControl:I,states:["variant"]}).variant||S,M=h||{standard:HI||(HI=F(qee,{})),outlined:F(Gee,{label:p}),filled:qI||(qI=F(Kee,{}))}[$],B=O({},r,{variant:$,classes:a}),D=Hee(B),U=pt(n,M.ref);return T.exports.cloneElement(M,O({inputComponent:_,inputProps:O({children:i,IconComponent:c,variant:$,type:void 0,multiple:m},g?{id:d}:{autoWidth:o,defaultOpen:u,displayEmpty:l,labelId:v,MenuProps:y,onClose:x,onOpen:w,open:b,renderValue:C,SelectDisplayProps:O({id:d},E)},f,{classes:f?Zr(D,f.classes):D},h?h.props.inputProps:{})},m&&g&&$==="outlined"?{notched:!0}:{},{ref:U,className:Ae(M.props.className,s),variant:$},k))});VM.muiName="Select";var Xee=VM;function Yee(t){return Qe("MuiSnackbarContent",t)}Ge("MuiSnackbarContent",["root","message","action"]);const Qee=["action","className","message","role"],Jee=t=>{const{classes:e}=t;return nt({root:["root"],action:["action"],message:["message"]},Yee,e)},Zee=me(Kl,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,n=z7(t.palette.background.default,e);return O({},t.typography.body2,{color:t.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:t.shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),ete=me("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),tte=me("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),nte=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiSnackbarContent"}),{action:o,className:i,message:a,role:s="alert"}=r,u=ke(r,Qee),l=r,c=Jee(l);return ie(Zee,O({role:s,square:!0,elevation:6,className:Ae(c.root,i),ownerState:l,ref:n},u,{children:[F(ete,{className:c.message,ownerState:l,children:a}),o?F(tte,{className:c.action,ownerState:l,children:o}):null]}))});var rte=nte;function ote(t){return Qe("MuiSnackbar",t)}Ge("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const ite=["onEnter","onExited"],ate=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],ste=t=>{const{classes:e,anchorOrigin:n}=t,r={root:["root",`anchorOrigin${re(n.vertical)}${re(n.horizontal)}`]};return nt(r,ote,e)},ute=me("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`anchorOrigin${re(n.anchorOrigin.vertical)}${re(n.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const n=O({},!e.isRtl&&{left:"50%",right:"auto",transform:"translateX(-50%)"},e.isRtl&&{right:"50%",left:"auto",transform:"translateX(50%)"});return O({zIndex:t.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:O({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&n,e.anchorOrigin.horizontal==="left"&&O({},!e.isRtl&&{left:24,right:"auto"},e.isRtl&&{right:24,left:"auto"}),e.anchorOrigin.horizontal==="right"&&O({},!e.isRtl&&{right:24,left:"auto"},e.isRtl&&{left:24,right:"auto"}))})}),lte=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiSnackbar"}),o=za(),i={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:s,horizontal:u}={vertical:"bottom",horizontal:"left"},autoHideDuration:l=null,children:c,className:d,ClickAwayListenerProps:h,ContentProps:f,disableWindowBlurListener:p=!1,message:v,onBlur:y,onClose:m,onFocus:g,onMouseEnter:x,onMouseLeave:w,open:b,resumeHideDuration:C,TransitionComponent:E=Xm,transitionDuration:S=i,TransitionProps:{onEnter:k,onExited:_}={}}=r,I=ke(r.TransitionProps,ite),N=ke(r,ate),$=o.direction==="rtl",M=O({},r,{anchorOrigin:{vertical:s,horizontal:u},isRtl:$}),B=ste(M),D=T.exports.useRef(),[U,A]=T.exports.useState(!0),L=wo((...X)=>{m&&m(...X)}),z=wo(X=>{!m||X==null||(clearTimeout(D.current),D.current=setTimeout(()=>{L(null,"timeout")},X))});T.exports.useEffect(()=>(b&&z(l),()=>{clearTimeout(D.current)}),[b,l,z]);const j=()=>{clearTimeout(D.current)},q=T.exports.useCallback(()=>{l!=null&&z(C!=null?C:l*.5)},[l,C,z]),Y=X=>{g&&g(X),j()},Z=X=>{x&&x(X),j()},oe=X=>{y&&y(X),q()},se=X=>{w&&w(X),q()},de=X=>{m&&m(X,"clickaway")},ue=X=>{A(!0),_&&_(X)},Q=(X,ee)=>{A(!1),k&&k(X,ee)};return T.exports.useEffect(()=>{if(!p&&b)return window.addEventListener("focus",q),window.addEventListener("blur",j),()=>{window.removeEventListener("focus",q),window.removeEventListener("blur",j)}},[p,q,b]),T.exports.useEffect(()=>{if(!b)return;function X(ee){ee.defaultPrevented||(ee.key==="Escape"||ee.key==="Esc")&&m&&m(ee,"escapeKeyDown")}return document.addEventListener("keydown",X),()=>{document.removeEventListener("keydown",X)}},[U,b,m]),!b&&U?null:F(q7,O({onClickAway:de},h,{children:F(ute,O({className:Ae(B.root,d),onBlur:oe,onFocus:Y,onMouseEnter:Z,onMouseLeave:se,ownerState:M,ref:n,role:"presentation"},N,{children:F(E,O({appear:!0,in:b,timeout:S,direction:s==="top"?"down":"up",onEnter:Q,onExited:ue},I,{children:c||F(rte,O({message:v,action:a},f))}))}))}))});var uf=lte;function cte(t){return Qe("MuiTooltip",t)}const dte=Ge("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);var ua=dte;const hte=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"];function fte(t){return Math.round(t*1e5)/1e5}const pte=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:o,placement:i}=t,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",o&&"touch",`tooltipPlacement${re(i.split("-")[0])}`],arrow:["arrow"]};return nt(a,cte,e)},mte=me(kM,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>O({zIndex:t.zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${ua.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${ua.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${ua.arrow}`]:O({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${ua.arrow}`]:O({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),vte=me("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${re(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>O({backgroundColor:At(t.palette.grey[700],.92),borderRadius:t.shape.borderRadius,color:t.palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${fte(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${ua.popper}[data-popper-placement*="left"] &`]:O({transformOrigin:"right center"},e.isRtl?O({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):O({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${ua.popper}[data-popper-placement*="right"] &`]:O({transformOrigin:"left center"},e.isRtl?O({marginRight:"14px"},e.touch&&{marginRight:"24px"}):O({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${ua.popper}[data-popper-placement*="top"] &`]:O({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${ua.popper}[data-popper-placement*="bottom"] &`]:O({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),gte=me("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:At(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Jf=!1,v0=null;function Zf(t,e){return n=>{e&&e(n),t(n)}}const yte=T.exports.forwardRef(function(e,n){var r,o,i,a,s,u;const l=Je({props:e,name:"MuiTooltip"}),{arrow:c=!1,children:d,components:h={},componentsProps:f={},describeChild:p=!1,disableFocusListener:v=!1,disableHoverListener:y=!1,disableInteractive:m=!1,disableTouchListener:g=!1,enterDelay:x=100,enterNextDelay:w=0,enterTouchDelay:b=700,followCursor:C=!1,id:E,leaveDelay:S=0,leaveTouchDelay:k=1500,onClose:_,onOpen:I,open:N,placement:$="bottom",PopperComponent:M,PopperProps:B={},title:D,TransitionComponent:U=Xm,TransitionProps:A}=l,L=ke(l,hte),z=za(),j=z.direction==="rtl",[q,Y]=T.exports.useState(),[Z,oe]=T.exports.useState(null),se=T.exports.useRef(!1),de=m||C,ue=T.exports.useRef(),Q=T.exports.useRef(),X=T.exports.useRef(),ee=T.exports.useRef(),[he,fe]=qm({controlled:N,default:!1,name:"Tooltip",state:"open"});let ve=he;const Se=Pg(E),De=T.exports.useRef(),Oe=T.exports.useCallback(()=>{De.current!==void 0&&(document.body.style.WebkitUserSelect=De.current,De.current=void 0),clearTimeout(ee.current)},[]);T.exports.useEffect(()=>()=>{clearTimeout(ue.current),clearTimeout(Q.current),clearTimeout(X.current),Oe()},[Oe]);const yt=Xe=>{clearTimeout(v0),Jf=!0,fe(!0),I&&!ve&&I(Xe)},ht=wo(Xe=>{clearTimeout(v0),v0=setTimeout(()=>{Jf=!1},800+S),fe(!1),_&&ve&&_(Xe),clearTimeout(ue.current),ue.current=setTimeout(()=>{se.current=!1},z.transitions.duration.shortest)}),Ke=Xe=>{se.current&&Xe.type!=="touchstart"||(q&&q.removeAttribute("title"),clearTimeout(Q.current),clearTimeout(X.current),x||Jf&&w?Q.current=setTimeout(()=>{yt(Xe)},Jf?w:x):yt(Xe))},vt=Xe=>{clearTimeout(Q.current),clearTimeout(X.current),X.current=setTimeout(()=>{ht(Xe)},S)},{isFocusVisibleRef:Mt,onBlur:Wt,onFocus:Tt,ref:gt}=PE(),[,nn]=T.exports.useState(!1),Ve=Xe=>{Wt(Xe),Mt.current===!1&&(nn(!1),vt(Xe))},ce=Xe=>{q||Y(Xe.currentTarget),Tt(Xe),Mt.current===!0&&(nn(!0),Ke(Xe))},lt=Xe=>{se.current=!0;const Ln=d.props;Ln.onTouchStart&&Ln.onTouchStart(Xe)},Ce=Ke,Ct=vt,Do=Xe=>{lt(Xe),clearTimeout(X.current),clearTimeout(ue.current),Oe(),De.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ee.current=setTimeout(()=>{document.body.style.WebkitUserSelect=De.current,Ke(Xe)},b)},$n=Xe=>{d.props.onTouchEnd&&d.props.onTouchEnd(Xe),Oe(),clearTimeout(X.current),X.current=setTimeout(()=>{ht(Xe)},k)};T.exports.useEffect(()=>{if(!ve)return;function Xe(Ln){(Ln.key==="Escape"||Ln.key==="Esc")&&ht(Ln)}return document.addEventListener("keydown",Xe),()=>{document.removeEventListener("keydown",Xe)}},[ht,ve]);const li=pt(Y,n),oc=pt(gt,li),k$=pt(d.ref,oc);D===""&&(ve=!1);const ic=T.exports.useRef({x:0,y:0}),fy=T.exports.useRef(),I$=Xe=>{const Ln=d.props;Ln.onMouseMove&&Ln.onMouseMove(Xe),ic.current={x:Xe.clientX,y:Xe.clientY},fy.current&&fy.current.update()},ac={},py=typeof D=="string";p?(ac.title=!ve&&py&&!y?D:null,ac["aria-describedby"]=ve?Se:null):(ac["aria-label"]=py?D:null,ac["aria-labelledby"]=ve&&!py?Se:null);const so=O({},ac,L,d.props,{className:Ae(L.className,d.props.className),onTouchStart:lt,ref:k$},C?{onMouseMove:I$}:{}),sc={};g||(so.onTouchStart=Do,so.onTouchEnd=$n),y||(so.onMouseOver=Zf(Ce,so.onMouseOver),so.onMouseLeave=Zf(Ct,so.onMouseLeave),de||(sc.onMouseOver=Ce,sc.onMouseLeave=Ct)),v||(so.onFocus=Zf(ce,so.onFocus),so.onBlur=Zf(Ve,so.onBlur),de||(sc.onFocus=ce,sc.onBlur=Ve));const T$=T.exports.useMemo(()=>{var Xe;let Ln=[{name:"arrow",enabled:Boolean(Z),options:{element:Z,padding:4}}];return(Xe=B.popperOptions)!=null&&Xe.modifiers&&(Ln=Ln.concat(B.popperOptions.modifiers)),O({},B.popperOptions,{modifiers:Ln})},[Z,B]),uc=O({},l,{isRtl:j,arrow:c,disableInteractive:de,placement:$,PopperComponentProp:M,touch:se.current}),my=pte(uc),LC=(r=h.Popper)!=null?r:mte,BC=(o=(i=h.Transition)!=null?i:U)!=null?o:Xm,UC=(a=h.Tooltip)!=null?a:vte,zC=(s=h.Arrow)!=null?s:gte,R$=Hf(LC,O({},B,f.popper),uc),A$=Hf(BC,O({},A,f.transition),uc),N$=Hf(UC,O({},f.tooltip),uc),P$=Hf(zC,O({},f.arrow),uc);return ie(T.exports.Fragment,{children:[T.exports.cloneElement(d,so),F(LC,O({as:M!=null?M:kM,placement:$,anchorEl:C?{getBoundingClientRect:()=>({top:ic.current.y,left:ic.current.x,right:ic.current.x,bottom:ic.current.y,width:0,height:0})}:q,popperRef:fy,open:q?ve:!1,id:Se,transition:!0},sc,R$,{className:Ae(my.popper,B==null?void 0:B.className,(u=f.popper)==null?void 0:u.className),popperOptions:T$,children:({TransitionProps:Xe})=>{var Ln,WC;return F(BC,O({timeout:z.transitions.duration.shorter},Xe,A$,{children:ie(UC,O({},N$,{className:Ae(my.tooltip,(Ln=f.tooltip)==null?void 0:Ln.className),children:[D,c?F(zC,O({},P$,{className:Ae(my.arrow,(WC=f.arrow)==null?void 0:WC.className),ref:oe})):null]}))}))}}))]})});var xte=yte;function wte(t){return Qe("MuiTextField",t)}Ge("MuiTextField",["root"]);const bte=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Ete={standard:$M,filled:OM,outlined:WM},Cte=t=>{const{classes:e}=t;return nt({root:["root"]},wte,e)},_te=me(KJ,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),Ste=T.exports.forwardRef(function(e,n){const r=Je({props:e,name:"MuiTextField"}),{autoComplete:o,autoFocus:i=!1,children:a,className:s,color:u="primary",defaultValue:l,disabled:c=!1,error:d=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:p,id:v,InputLabelProps:y,inputProps:m,InputProps:g,inputRef:x,label:w,maxRows:b,minRows:C,multiline:E=!1,name:S,onBlur:k,onChange:_,onFocus:I,placeholder:N,required:$=!1,rows:M,select:B=!1,SelectProps:D,type:U,value:A,variant:L="outlined"}=r,z=ke(r,bte),j=O({},r,{autoFocus:i,color:u,disabled:c,error:d,fullWidth:f,multiline:E,required:$,select:B,variant:L}),q=Cte(j),Y={};L==="outlined"&&(y&&typeof y.shrink!="undefined"&&(Y.notched=y.shrink),Y.label=w),B&&((!D||!D.native)&&(Y.id=void 0),Y["aria-describedby"]=void 0);const Z=Pg(v),oe=p&&Z?`${Z}-helper-text`:void 0,se=w&&Z?`${Z}-label`:void 0,de=Ete[L],ue=F(de,O({"aria-describedby":oe,autoComplete:o,autoFocus:i,defaultValue:l,fullWidth:f,multiline:E,name:S,rows:M,maxRows:b,minRows:C,type:U,value:A,id:Z,inputRef:x,onBlur:k,onChange:_,onFocus:I,placeholder:N,inputProps:m},Y,g));return ie(_te,O({className:Ae(q.root,s),disabled:c,error:d,fullWidth:f,ref:n,required:$,color:u,variant:L,ownerState:j},z,{children:[w!=null&&w!==""&&F(bZ,O({htmlFor:Z,id:se},y,{children:w})),B?F(Xee,O({"aria-describedby":oe,id:Z,labelId:se,value:A,input:ue},D,{children:a})):ue,p&&F(tZ,O({id:oe},h,{children:p}))]}))});var Ii=Ste,l2={},Jl={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Jl);var Zl={},kte=oR(dY);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=kte})(Zl);var lf=oR(cG),Ite=Jl.exports;Object.defineProperty(l2,"__esModule",{value:!0});var jM=l2.default=void 0,Tte=Ite(Zl),Rte=lf,Ate=(0,Tte.default)((0,Rte.jsx)("path",{d:"M20 2h-8C6.38 2 2 6.66 2 12.28 2 17.5 6.49 22 11.72 22 17.39 22 22 17.62 22 12V4c0-1.1-.9-2-2-2zm-3 13-3-2v2H7V9h7v2l3-2v6z"}),"Duo");jM=l2.default=Ate;var c2={},Nte=Jl.exports;Object.defineProperty(c2,"__esModule",{value:!0});var Qm=c2.default=void 0,Pte=Nte(Zl),Dte=lf,Ote=(0,Pte.default)((0,Dte.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");Qm=c2.default=Ote;function Mte(t,r){var n=function(o){function i(Q,X){return Q<<X|Q>>>32-X}function a(Q,X){var ee,he,fe,ve,Se;return fe=Q&2147483648,ve=X&2147483648,ee=Q&1073741824,he=X&1073741824,Se=(Q&1073741823)+(X&1073741823),ee&he?Se^2147483648^fe^ve:ee|he?Se&1073741824?Se^3221225472^fe^ve:Se^1073741824^fe^ve:Se^fe^ve}function s(Q,X,ee){return Q&X|~Q&ee}function u(Q,X,ee){return Q&ee|X&~ee}function l(Q,X,ee){return Q^X^ee}function c(Q,X,ee){return X^(Q|~ee)}function d(Q,X,ee,he,fe,ve,Se){return Q=a(Q,a(a(s(X,ee,he),fe),Se)),a(i(Q,ve),X)}function h(Q,X,ee,he,fe,ve,Se){return Q=a(Q,a(a(u(X,ee,he),fe),Se)),a(i(Q,ve),X)}function f(Q,X,ee,he,fe,ve,Se){return Q=a(Q,a(a(l(X,ee,he),fe),Se)),a(i(Q,ve),X)}function p(Q,X,ee,he,fe,ve,Se){return Q=a(Q,a(a(c(X,ee,he),fe),Se)),a(i(Q,ve),X)}function v(Q){for(var X,ee=Q.length,he=ee+8,fe=(he-he%64)/64,ve=(fe+1)*16,Se=Array(ve-1),De=0,Oe=0;Oe<ee;)X=(Oe-Oe%4)/4,De=Oe%4*8,Se[X]=Se[X]|Q.charCodeAt(Oe)<<De,Oe++;return X=(Oe-Oe%4)/4,De=Oe%4*8,Se[X]=Se[X]|128<<De,Se[ve-2]=ee<<3,Se[ve-1]=ee>>>29,Se}function y(Q){var X="",ee="",he,fe;for(fe=0;fe<=3;fe++)he=Q>>>fe*8&255,ee="0"+he.toString(16),X=X+ee.substr(ee.length-2,2);return X}function m(Q){Q=Q.replace(/rn/g,"n");for(var X="",ee=0;ee<Q.length;ee++){var he=Q.charCodeAt(ee);he<128?X+=String.fromCharCode(he):he>127&&he<2048?(X+=String.fromCharCode(he>>6|192),X+=String.fromCharCode(he&63|128)):(X+=String.fromCharCode(he>>12|224),X+=String.fromCharCode(he>>6&63|128),X+=String.fromCharCode(he&63|128))}return X}var g=Array(),x,w,b,C,E,S,k,_,I,N=7,$=12,M=17,B=22,D=5,U=9,A=14,L=20,z=4,j=11,q=16,Y=23,Z=6,oe=10,se=15,de=21;for(o=m(o),g=v(o),S=1732584193,k=4023233417,_=2562383102,I=271733878,x=0;x<g.length;x+=16)w=S,b=k,C=_,E=I,S=d(S,k,_,I,g[x+0],N,3614090360),I=d(I,S,k,_,g[x+1],$,3905402710),_=d(_,I,S,k,g[x+2],M,606105819),k=d(k,_,I,S,g[x+3],B,3250441966),S=d(S,k,_,I,g[x+4],N,4118548399),I=d(I,S,k,_,g[x+5],$,1200080426),_=d(_,I,S,k,g[x+6],M,2821735955),k=d(k,_,I,S,g[x+7],B,4249261313),S=d(S,k,_,I,g[x+8],N,1770035416),I=d(I,S,k,_,g[x+9],$,2336552879),_=d(_,I,S,k,g[x+10],M,4294925233),k=d(k,_,I,S,g[x+11],B,2304563134),S=d(S,k,_,I,g[x+12],N,1804603682),I=d(I,S,k,_,g[x+13],$,4254626195),_=d(_,I,S,k,g[x+14],M,2792965006),k=d(k,_,I,S,g[x+15],B,1236535329),S=h(S,k,_,I,g[x+1],D,4129170786),I=h(I,S,k,_,g[x+6],U,3225465664),_=h(_,I,S,k,g[x+11],A,643717713),k=h(k,_,I,S,g[x+0],L,3921069994),S=h(S,k,_,I,g[x+5],D,3593408605),I=h(I,S,k,_,g[x+10],U,38016083),_=h(_,I,S,k,g[x+15],A,3634488961),k=h(k,_,I,S,g[x+4],L,3889429448),S=h(S,k,_,I,g[x+9],D,568446438),I=h(I,S,k,_,g[x+14],U,3275163606),_=h(_,I,S,k,g[x+3],A,4107603335),k=h(k,_,I,S,g[x+8],L,1163531501),S=h(S,k,_,I,g[x+13],D,2850285829),I=h(I,S,k,_,g[x+2],U,4243563512),_=h(_,I,S,k,g[x+7],A,1735328473),k=h(k,_,I,S,g[x+12],L,2368359562),S=f(S,k,_,I,g[x+5],z,4294588738),I=f(I,S,k,_,g[x+8],j,2272392833),_=f(_,I,S,k,g[x+11],q,1839030562),k=f(k,_,I,S,g[x+14],Y,4259657740),S=f(S,k,_,I,g[x+1],z,2763975236),I=f(I,S,k,_,g[x+4],j,1272893353),_=f(_,I,S,k,g[x+7],q,4139469664),k=f(k,_,I,S,g[x+10],Y,3200236656),S=f(S,k,_,I,g[x+13],z,681279174),I=f(I,S,k,_,g[x+0],j,3936430074),_=f(_,I,S,k,g[x+3],q,3572445317),k=f(k,_,I,S,g[x+6],Y,76029189),S=f(S,k,_,I,g[x+9],z,3654602809),I=f(I,S,k,_,g[x+12],j,3873151461),_=f(_,I,S,k,g[x+15],q,530742520),k=f(k,_,I,S,g[x+2],Y,3299628645),S=p(S,k,_,I,g[x+0],Z,4096336452),I=p(I,S,k,_,g[x+7],oe,1126891415),_=p(_,I,S,k,g[x+14],se,2878612391),k=p(k,_,I,S,g[x+5],de,4237533241),S=p(S,k,_,I,g[x+12],Z,1700485571),I=p(I,S,k,_,g[x+3],oe,2399980690),_=p(_,I,S,k,g[x+10],se,4293915773),k=p(k,_,I,S,g[x+1],de,2240044497),S=p(S,k,_,I,g[x+8],Z,1873313359),I=p(I,S,k,_,g[x+15],oe,4264355552),_=p(_,I,S,k,g[x+6],se,2734768916),k=p(k,_,I,S,g[x+13],de,1309151649),S=p(S,k,_,I,g[x+4],Z,4149444226),I=p(I,S,k,_,g[x+11],oe,3174756917),_=p(_,I,S,k,g[x+2],se,718787259),k=p(k,_,I,S,g[x+9],de,3951481745),S=a(S,w),k=a(k,b),_=a(_,C),I=a(I,E);var ue=y(S)+y(k)+y(_)+y(I);return ue.toLowerCase()},r=r||80;return"http://www.gravatar.com/avatar/"+n(t)+".jpg?s="+r}function Ux(t){return new Promise((e,n)=>{setTimeout(e,t)})}var d2={},Fte=Jl.exports;Object.defineProperty(d2,"__esModule",{value:!0});var h2=d2.default=void 0,$te=Fte(Zl),Lte=lf,Bte=(0,$te.default)((0,Lte.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");h2=d2.default=Bte;function Ute({auth:t,socket:e,db:n}){var q;const[r,o]=T.exports.useState(null),[i,a]=T.exports.useState(""),[s,u]=T.exports.useState(new Date),[l,c]=T.exports.useState([]),[d,h]=T.exports.useState(!1),[f,p]=T.exports.useState(null),[v,y]=T.exports.useState(null),[m,g]=T.exports.useState(""),[x,w]=T.exports.useState(!1),[b,C]=T.exports.useState(""),[E,S]=T.exports.useState(!1),[k,_]=T.exports.useState(!1),[I,N]=T.exports.useState(!1),[$,M]=T.exports.useState(null),B=Y=>{M(Y.currentTarget)},D=()=>{M(null)},U=Y=>{y(Y.currentTarget)},A=()=>{y(null)},L=CE(),z=()=>{t.currentUser==null?(C("You are not logged in!"),w(!0),setTimeout(()=>L("login"),1e3)):t.currentUser.displayName?h(!0):(C("Set your name before creating room!"),w(!0))},j=Y=>{t.currentUser==null?(C("You are not logged in!"),w(!0),setTimeout(()=>L("login"),1e3)):t.currentUser.displayName?e.emit("joinRoom",t.currentUser.uid,t.currentUser.displayName||"participant",Y):(C("Set your name before creating room!"),w(!0))};return T.exports.useEffect(()=>{(async()=>o((await(await fetch("https://api.quotable.io/random")).json()).content))()},[]),T.exports.useEffect(()=>{let Y=null;t.onAuthStateChanged(()=>{Y&&(Y(),Y=null),t.currentUser==null?(C("You are not logged in!"),w(!0),setTimeout(()=>L("login"),1e3)):(Y=mx(Np(n,t.currentUser.uid),Z=>{const oe=[];Z.forEach(se=>{oe.push(se.id)}),c(oe),l.length>0&&p(l[0])}),t.currentUser.photoURL||xS(t.currentUser,{photoURL:Mte(t.currentUser.email)}),t.currentUser.displayName&&a(t.currentUser.displayName))}),setInterval(()=>{u(new Date)},1e3),e.on("leftWaitingRoom",Z=>{C("Left waiting room"),w(!0),S(!1)}),e.on("couldNotLeaveWaitingRoom",Z=>{C("Could not leave waiting room!"),w(!0)}),e.on("getRoomId",Z=>{L(`/room?room=${Z}`)}),e.on("couldNotCreateRoom",()=>{C("Could not create room!"),w(!0)}),e.on("couldNotJoinRoom",()=>{C("Could not join room!"),w(!0)}),e.on("hostWillLetYouIn",Z=>{S(!0)}),e.on("joinedRoom",async Z=>{C("Joined room"),w(!0),await Ux(1e3),L(`/room?room=${Z}`)})},[]),ie("div",{className:"Front bg-gradient-to-r from-slate-900 to-blue-800 min-h-screen",children:[ie(n2,{position:"static",className:"p-3 bg-gradient-to-r from-slate-800 to-blue-500 flex items-center",elevation:10,style:{flexDirection:"row"},children:[F("span",{className:"text-lg",children:"Face App"}),t.currentUser&&ie(sa,{children:[F(t2,{className:"right-2",sx:{position:"absolute",right:"0.5rem"},"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:B,children:F("img",{src:((q=t.currentUser)==null?void 0:q.photoURL)||"",className:"w-10 h-10 rounded-full",alt:"Profile picture"})}),ie(Ym,{id:"menu-appbar",anchorEl:$,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean($),onClose:D,children:[F(pd,{onClick:()=>{D(),_(!0)},children:"Change Display Name"}),F(pd,{onClick:()=>L("/attendance"),children:"Visit Attendance Portal"})]})]})]}),ie("div",{className:"flex flex-col items-center min-h-screen md:flex-row md:items-start md:h-screen pb-16 select-none",children:[ie("div",{className:"flex flex-row md:pt-20 md:pl-16 justify-center gap-5 action-meetings",children:[F("div",{className:"flex-container",children:ie("div",{className:"flex flex-col items-center hover:bg-slate-700 cursor-pointer rounded-md active:scale-90",onClick:()=>z(),children:[F(jM,{style:{color:"blue",height:"calc(3.5rem + 10vh)",width:"calc(3.5rem + 10vw)"}}),F("span",{className:"text-xl mt-2",children:"New Meeting"})]})}),F("div",{className:"flex-container",children:ie("div",{className:"flex flex-col items-center p-4 hover:bg-slate-700 cursor-pointer rounded-md active:scale-90",onClick:()=>N(!0),children:[F("div",{className:"p-4 mt-2 bg-slate-900 rounded-xl",children:F(Qm,{style:{color:"orange",width:"4rem",height:"4rem"}})}),F("span",{className:"text-xl mt-2",children:"Join Meeting"})]})})]}),F("div",{className:"flex flex-col items-center min-h-full pt-20 timer",children:ie("div",{className:"time-cont flex flex-col items-center shadow-lg  shadow-blue-700 border border-blue-500",children:[ie("div",{className:"time-inner flex flex-col items-center px-32 py-8 bg-gray-800 w-full",children:[F("span",{className:"text-4xl font-bold mb-4",children:s.toLocaleTimeString()}),F("span",{className:"text-xl",children:s.toDateString()})]}),F("div",{className:"w-full py-32 px-32 bg-gradient-to-r from-slate-600 to-gray-700 flex flex-col items-center justify-center",children:F("span",{className:"text-xl",children:r||"Loading..."})})]})})]}),F(uf,{style:{left:"35%"},open:x,onClose:()=>w(!1),autoHideDuration:3e3,message:b}),ie(ss,{open:d,TransitionComponent:ep,onClose:()=>h(!1),children:[F(Ku,{children:"Create a Meeting"}),ie(Gu,{children:[F(Fx,{children:"Select an attendance list"}),ie("div",{className:"p-6 w-full",children:[ie(Bg,{className:"bg-gradient-to-r py-1 px-5 from-orange-500 to-red-500 shadow-xl shadow-orange-400 border border-red-600 rounded-md text-center text-black w-full",sx:{cursor:"pointer",minHeight:"2rem",fontSize:"1.3rem"},"aria-label":"account of current user","aria-controls":"attendance-list","aria-haspopup":"true",onClick:U,children:[f||"---",F(h2,{})]}),F(Ym,{id:"attendance-list",anchorEl:v,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(v),onClose:A,children:l.map(Y=>F(pd,{onClick:()=>{A(),p(Y)},children:Y},Y))})]})]}),ie(qu,{children:[F(tr,{onClick:()=>h(!1),children:"Cancel"}),F(tr,{onClick:()=>{h(!1),e.emit("createRoom",t.currentUser.uid,t.currentUser.displayName,f,new Date().getTime())},children:"Create"})]})]}),F(ss,{fullScreen:!0,open:E,TransitionComponent:ep,children:ie("div",{className:"w-full h-full flex flex-col bg-slate-800",children:[F("button",{className:"py-2 px-3 bg-red-600 text-white self-end",onClick:()=>{e.emit("leaveWaitingRoom",t.currentUser.uid,m)},children:"Leave"}),F("div",{className:"di-cont w-full flex-wrap flex flex-col items-center justify-center",children:F("span",{className:"text-center text-white",children:"The host will let you in soon"})})]})}),ie(ss,{TransitionComponent:ep,open:I,onClose:()=>{g(""),N(!1)},children:[F(Ku,{children:"Join Meeting"}),ie(Gu,{children:[F(Fx,{children:"Enter the meeting code the host has provided you to join the meeting"}),F(Ii,{autoFocus:!0,onChange:Y=>g(Y.target.value),margin:"dense",label:"Enter meeting code",type:"number",fullWidth:!0,variant:"standard"})]}),ie(qu,{children:[F(tr,{onClick:()=>{g(""),N(!1)},children:"Cancel"}),F(tr,{onClick:()=>{j(m),N(!1)},children:"Join"})]})]}),ie(ss,{TransitionComponent:ep,open:k,onClose:()=>{a(t.currentUser.displayName||""),_(!1)},children:[F(Ku,{children:"Change Display Name"}),F(Gu,{children:F(Ii,{value:i,autoFocus:!0,onChange:Y=>a(Y.target.value),margin:"dense",label:"Enter your name",type:"text",fullWidth:!0,variant:"standard"})}),ie(qu,{children:[F(tr,{onClick:()=>{a(t.currentUser.displayName||""),_(!1)},children:"Cancel"}),F(tr,{onClick:()=>{xS(t.currentUser,{displayName:i}).then(()=>{C("Changed name successfully!"),w(!0)}).finally(()=>{a(t.currentUser.displayName||""),_(!1)})},children:"Change"})]})]})]})}const ep=T.exports.forwardRef(function(e,n){return F(PM,lc({direction:"up",ref:n},e))});var f2={},zte=Jl.exports;Object.defineProperty(f2,"__esModule",{value:!0});var p2=f2.default=void 0;jte(T.exports);var Wte=zte(Zl),Vte=lf;function HM(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(HM=function(r){return r?n:e})(t)}function jte(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=HM(e);if(n&&n.has(t))return n.get(t);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}var Hte=(0,Wte.default)((0,Vte.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");p2=f2.default=Hte;var m2={},qte=Jl.exports;Object.defineProperty(m2,"__esModule",{value:!0});var v2=m2.default=void 0,Gte=qte(Zl),Kte=lf,Xte=(0,Gte.default)((0,Kte.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack");v2=m2.default=Xte;function Yte({auth:t}){const[e,n]=T.exports.useState(""),[r,o]=T.exports.useState(""),[i,a]=T.exports.useState(!1),[s,u]=T.exports.useState(""),[l,c]=T.exports.useState(!1),[d,h]=T.exports.useState(""),f=()=>{c(!0)},p=()=>{h(""),c(!1)};return ie("div",{className:"login bg-gradient-to-r from-cyan-400 to-slate-500 min-h-screen",children:[ie(n2,{position:"static",className:"p-4 flex",sx:{flexDirection:"row"},children:[F(_x,{to:"/",children:F(v2,{})}),F("span",{className:"font-semibold text-lg ml-2",children:"Login to Face App"})]}),F("div",{className:"forms-in flex flex-col justify-center items-center w-screen",style:{height:"80vh"},children:ie("div",{className:"flex flex-col py-12 px-8 items-center justify-center",style:{minWidth:"50%",boxShadow:"0 8px 32px 0 rgba( 31, 38, 135, 0.37 )",borderRadius:"10px",background:"rgba( 255, 255, 255, 0.25 )",WebkitBackdropFilter:"blur(4px)"},children:[F("span",{className:"text-xl font-semibold",children:"Login with Email and Password "}),F(Ii,{label:"Enter Your Email",type:"email",className:"w-full",sx:{marginBottom:"1rem",marginTop:"1rem"},variant:"filled",onChange:g=>{n(g.target.value||"")}}),F(Ii,{label:"Enter Password",type:"password",variant:"filled",className:"w-full",onChange:g=>{o(g.target.value||"")}}),F("span",{onClick:f,className:"self-start text-sm mb-4 mt-2 cursor-pointer hover:underline",children:"Forgot Password?"}),F(tr,{variant:"contained",className:"mb-4",sx:{boxShadow:"2px 2px 10px blue"},onClick:()=>{f5(t,e,r).then(()=>{t.currentUser!=null?u("Logged in"):u("Could not log in!"),a(!0)}).catch(g=>{console.log(`Error occurred while logging in: ${g}`),u("Error occurred while logging in!"),a(!0)})},children:"Login"}),ie("div",{className:"flex flex-row items-center",children:[F("span",{children:"Or Login with"})," ",F(t2,{onClick:()=>{eP(t,new zo).then(()=>{t.currentUser!=null?u("Logged in"):u("Could not log in!"),a(!0)}).catch(g=>{console.log(`Error occurred while logging in: ${g}`),u("Error occurred while logging in!"),a(!0)})},children:F(p2,{})})]}),ie("div",{className:"self-start",children:["Don't have an account? ",F(_x,{to:"/signup",className:"hover:underline",children:"Sign Up"})]})]})}),F(uf,{style:{left:"35%"},open:i,onClose:()=>a(!1),autoHideDuration:3e3,message:s}),ie(ss,{open:l,onClose:p,children:[F(Ku,{children:"Forgot Password"}),ie(Gu,{children:[F(Fx,{children:"Enter your email to reset your password"}),F(Ii,{autoFocus:!0,margin:"dense",label:"Email Address",type:"email",fullWidth:!0,variant:"standard",onChange:g=>{h(g.target.value)}})]}),ie(qu,{children:[F(tr,{onClick:p,children:"Cancel"}),F(tr,{onClick:()=>{d5(t,d).then(()=>{u("Sent reset email!"),a(!0),c(!1)}).catch(()=>{u("Could not send email!"),a(!0),c(!1)})},children:"Send Reset Email"})]})]})]})}function Qte({auth:t}){const[e,n]=T.exports.useState(""),[r,o]=T.exports.useState(""),[i,a]=T.exports.useState(""),[s,u]=T.exports.useState(!1),[l,c]=T.exports.useState("");return ie("div",{className:"signup bg-gradient-to-r to-yellow-300 from-cyan-500 min-h-screen",children:[ie(n2,{position:"static",className:"p-4 flex",sx:{flexDirection:"row"},children:[F(_x,{to:"/login",children:F(v2,{})}),F("span",{className:"font-semibold text-lg ml-2",children:"Sign up for Face App"})]}),ie("div",{className:"m-cont p-4 flex flex-col items-center md:flex-row",style:{minHeight:"80vh"},children:[F("div",{className:"cont flex-1 flex justify-center",children:F("img",{src:"Daco_2327111.png",className:"select-none max-h-80",alt:""})}),ie("div",{className:"flex flex-col flex-1 p-4 mr-10",style:{boxShadow:"0 8px 32px 0 rgba( 31, 38, 135, 0.37 )",borderRadius:"10px",background:"rgba( 255, 255, 255, 0.25 )",WebkitBackdropFilter:"blur(4px)"},children:[F("span",{className:"text-lg font-semibold mb-2",children:"Sign Up with Email"}),F(Ii,{label:"Enter Your Email",type:"email",variant:"filled",onChange:f=>{n(f.target.value||"")}}),F(Ii,{sx:{marginBottom:"0.5rem",marginTop:"0.5rem"},label:"Enter Password",type:"password",variant:"filled",marginTop:"13rem",onChange:f=>{o(f.target.value||"")}}),F(Ii,{label:"Confirm Password",type:"password",variant:"filled",onChange:f=>{a(f.target.value||"")}}),F(tr,{className:"self-center",onClick:()=>{e.length>0&&r.length>0&&i===r?h5(t,e,r).then(()=>{t.currentUser!=null?c("Signed up"):c("Could not signup!"),u(!0)}).catch(f=>{console.log(`Error occurred while logging in: ${f}`),c("Error occurred while signing up!"),u(!0)}):(c("Please enter all fields correctly!"),u(!0))},sx:{marginTop:"1rem",fontWeight:600},children:"Sign up"}),ie("div",{className:"flex flex-row items-center self-center",children:[F("span",{children:"Or Sign Up with"})," ",F(t2,{onClick:()=>{eP(t,new zo).then(()=>{t.currentUser!=null?c("Logged in"):c("Could not log in!"),u(!0)}).catch(f=>{console.log(`Error occurred while logging in: ${f}`),c("Error occurred while logging in!"),u(!0)})},children:F(p2,{})})]})]})]}),F(uf,{style:{left:"35%"},open:s,onClose:()=>u(!1),autoHideDuration:3e3,message:l})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var qM=function(t,e){return(qM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(t,e)};function Ro(t,e){function n(){this.constructor=t}qM(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function be(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(l){try{u(r.next(l))}catch(c){i(c)}}function s(l){try{u(r.throw(l))}catch(c){i(c)}}function u(l){l.done?o(l.value):new n(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function Ee(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(c[0]===6&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(d){c=[6,d],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var Jte=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var o=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+o+"."),this.set(e,o)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,o=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return Zte(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach(function(i){var a=i.split(":"),s=a[0],u=a[1];e.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},t}();function Zte(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function K(){return GM}var GM=null,Jm=new Map,zx=new Map;function KM(t,e){var n=YM(t,e);return Jm.get(n)}function ene(t){return zx.get(t)}function GI(t){for(var e=Jm.entries(),n=[];;){var r=e.next(),o=r.done,i=r.value;if(o)break;var a=i[0],s=i[1];a.split("_")[0]===t&&n.push(s)}return n}function XM(t){var e=t.kernelName,n=t.backendName,r=YM(e,n);if(Jm.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");Jm.set(r,t)}function tne(t){var e=t.kernelName;zx.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),zx.set(e,t)}function YM(t,e){return e+"_"+t}function KI(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function Zm(t,e,n){return Math.max(t,Math.min(e,n))}function g2(t){return t%2==0?t:t+1}function QM(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function P(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ut(t,e,n){n===void 0&&(n=""),P(Jt(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function Gs(t){P(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Oi(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||In(t)&&!n)for(var r=0;r<t.length;++r)Oi(t[r],e,n);else e.push(t);return e}function _e(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function Jt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ut(t){return t%1==0}function JM(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function ev(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function ms(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Wx(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,o){var i=0,a=function(){if(t())r();else{i++;var s=e(i);n!=null&&i>=n?o():setTimeout(a,s)}};a()})}function ZM(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(t[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var i=t.slice();return i[r]=e/n,i}function tn(t,e){var n=e.length;return P((t=t==null?e.map(function(r,o){return o}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),P(t.every(function(r){return Ut(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function ra(t,e){for(var n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||o?null:tn(e,t).sort(),a=0,s=0;s<t.length;++s){if(i!=null){if(i[a]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(i[a]==null||i[a]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),i[a]<=s&&a++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Il(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function oh(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function e3(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function t3(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function n3(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function In(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function y2(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function r3(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=n.length}),e}function la(t){return typeof t=="string"||t instanceof String}function o3(t){return typeof t=="boolean"}function i3(t){return typeof t=="number"}function ec(t){return Array.isArray(t)?ec(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":i3(t)?"float32":la(t)?"string":o3(t)?"bool":"float32"}function tv(t){return!!(t&&t.constructor&&t.call&&t.apply)}function nv(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Co(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function x2(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Oi(t)),n&&e3(t,e),function(i,a){return i instanceof Float32Array&&a==="float32"||i instanceof Int32Array&&a==="int32"||i instanceof Uint8Array&&a==="bool"}(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)Math.round(t[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function Vx(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,o){return r*o});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function r(o,i,a){var s=new Array;if(i.length===1)for(var u=i[0],l=0;l<u;l++)s[l]=a[o+l];else{u=i[0];var c=i.slice(1),d=c.reduce(function(h,f){return h*f});for(l=0;l<u;l++)s[l]=r(o+l*d,c,a)}return s}(0,t,e)}function w2(t,e){for(var n=tc(t,e),r=0;r<n.length;r++)n[r]=1;return n}function tc(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function mo(){return K().platform.now()}function b2(t){t.forEach(function(e){P(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function a3(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",K().platform.encode(t,e)}function ih(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",K().platform.decode(t,e)}function jx(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function s3(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}Object.freeze({shuffle:KI,clamp:Zm,nearestLargerEven:g2,sum:QM,randUniform:function(t,e){var n=Math.random();return e*n+(1-n)*t},distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var o=Number(t[r])-Number(e[r]);n+=o*o}return n},assert:P,assertShapesMatch:ut,assertNonNull:Gs,flatten:Oi,sizeFromShape:_e,isScalarShape:function(t){return t.length===0},arraysEqual:Jt,isInt:Ut,tanh:JM,sizeToSquarishShape:ev,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return KI(e),e},rightPad:ms,repeatedTry:Wx,inferFromImplicitShape:ZM,parseAxisParam:tn,squeezeShape:ra,getTypedArrayFromDType:Il,getArrayFromDType:oh,checkConversionForErrors:e3,isValidDtype:t3,hasEncodingLoss:n3,isTypedArray:In,bytesPerElement:y2,bytesFromStringArray:r3,isString:la,isBoolean:o3,isNumber:i3,inferDtype:ec,isFunction:tv,nearestDivisor:nv,computeStrides:Co,toTypedArray:x2,toNestedArray:Vx,makeOnesTypedArray:w2,makeZerosTypedArray:tc,now:mo,assertNonNegativeIntegerDimensions:b2,fetch:function(t,e){return K().platform.fetch(t,e)},encodeString:a3,decodeString:ih,locToIndex:jx,indexToLoc:s3});var nne=function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new rne)}return t.prototype.profileKernel=function(e,n,r){var o,i=this,a=this.backendTimer.time(function(){o=r()});return o.forEach(function(s){s.data().then(function(u){(function(l,c,d){if(c!=="float32")return!1;for(var h=0;h<l.length;h++){var f=l[h];if(isNaN(f)||!isFinite(f))return console.warn("Found "+f+" in the result of '"+d+"'"),!0}})(u,s.dtype,e),a.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),i.logger.logKernelProfile(e,s,u,l.kernelMs,n,c)})})}),o},t}(),rne=function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,o,i,a){var s=typeof o=="number"?ms(o+"ms",9):o.error,u=ms(e,25),l=n.rank,c=n.size,d=ms(n.shape.toString(),14),h="";for(var f in i){var p=i[f].shape||n.shape,v=p.length;h+=f+": "+v+"D "+(v>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+d+"	%c"+c+"	%c"+h+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),XI=20,Rc=3,g0=7;function one(t,e,n,r){var o=Co(e),i=function(l,c,d,h){var f=_e(c),p=h[h.length-1],v=new Array(p).fill(0),y=c.length,m=d==="complex64"?Nc(l):l;if(y>1)for(var g=0;g<f/p;g++)for(var x=g*p,w=0;w<p;w++)v[w]=Math.max(v[w],Ac(m[x+w],0,d).length);return v}(t,e,n,o),a=e.length,s=function l(c,d,h,f,p,v){v===void 0&&(v=!0);var y=h==="complex64"?2:1,m=d[0],g=d.length;if(g===0)return h==="complex64"?[Ac(Nc(c)[0],0,h)]:h==="bool"?[u3(c[0])]:[c[0].toString()];if(g===1){if(m>XI){var x=Rc*y,w=Array.from(c.slice(0,x)),b=Array.from(c.slice((m-Rc)*y,m*y));return h==="complex64"&&(w=Nc(w),b=Nc(b)),["["+w.map(function(B,D){return Ac(B,p[D],h)}).join(", ")+", ..., "+b.map(function(B,D){return Ac(B,p[m-Rc+D],h)}).join(", ")+"]"]}return["["+(h==="complex64"?Nc(c):Array.from(c)).map(function(B,D){return Ac(B,p[D],h)}).join(", ")+"]"]}var C=d.slice(1),E=f.slice(1),S=f[0]*y,k=[];if(m>XI){for(var _=0;_<Rc;_++){var I=(N=_*S)+S;k.push.apply(k,l(c.slice(N,I),C,h,E,p,!1))}for(k.push("..."),_=m-Rc;_<m;_++)I=(N=_*S)+S,k.push.apply(k,l(c.slice(N,I),C,h,E,p,_===m-1))}else for(_=0;_<m;_++){var N;I=(N=_*S)+S,k.push.apply(k,l(c.slice(N,I),C,h,E,p,_===m-1))}var $=g===2?",":"";for(k[0]="["+k[0]+$,_=1;_<k.length-1;_++)k[_]=" "+k[_]+$;var M=`,
`;for(_=2;_<g;_++)M+=`
`;return k[k.length-1]=" "+k[k.length-1]+"]"+(v?"":M),k}(t,e,n,o,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function Ac(t,e,n){return ms(Array.isArray(t)?parseFloat(t[0].toFixed(g0))+" + "+parseFloat(t[1].toFixed(g0))+"j":la(t)?"'"+t+"'":n==="bool"?u3(t):parseFloat(t.toFixed(g0)).toString(),e)}function u3(t){return t===0?"false":"true"}function Nc(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var ah=function(){function t(e,n,r){var o=this;if(this.dtype=n,this.shape=e.slice(),this.size=_e(e),r!=null){var i=r.length;P(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||oh(n,this.size),this.strides=Co(e)}return t.prototype.set=function(e){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),P(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var i=this.locToIndex(r);this.values[i]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,o=0,i=e;o<i.length;o++){var a=i[o];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Wo().makeTensor(this.values,this.shape,this.dtype)},t}(),Wo=null,G=null,l3=null,$t=function(){function t(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=_e(e),this.strides=Co(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),P(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,o){return this.throwIfDisposed(),this.reshape([e,n,r,o])},t.prototype.as5D=function(e,n,r,o,i){return this.throwIfDisposed(),this.reshape([e,n,r,o,i])},t.prototype.asType=function(e){return this.throwIfDisposed(),G.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return be(this,void 0,void 0,function(){var e;return Ee(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,G.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return G.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return be(this,void 0,void 0,function(){var e;return Ee(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,Vx(this.shape,e)]}})})},t.prototype.arraySync=function(){return Vx(this.shape,this.dataSync())},t.prototype.data=function(){return be(this,void 0,void 0,function(){var e,n;return Ee(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Wo().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map(function(o){return ih(o)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var e=Wo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(n){return ih(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return be(this,void 0,void 0,function(){var e;return Ee(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Wo().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Wo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),G.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),G.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),G.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),G.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),G.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),G.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),G.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),one(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),G.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),G.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),G.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),G.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),G.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),G.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),G.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),G.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),G.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),G.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),G.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),G.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,o,i){return r===void 0&&(r=.001),l3("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,i,o,r)},t.prototype.batchNorm=function(e,n,r,o,i){return i===void 0&&(i=.001),this.throwIfDisposed(),G.batchNorm(this,e,n,r,o,i)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),G.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),G.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),G.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),G.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),G.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),G.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),G.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),G.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),G.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),G.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),G.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),G.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),G.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),G.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),G.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),G.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),G.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),G.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),G.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),G.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),G.div(this,e)},t.prototype.divNoNan=function(e){return this.throwIfDisposed(),G.divNoNan(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),G.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),G.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),G.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),G.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),G.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),G.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),G.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),G.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),G.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),G.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),G.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),G.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),G.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),G.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),G.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),G.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),G.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),G.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),G.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),G.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),G.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),G.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),G.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),G.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),G.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),G.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),G.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),G.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),G.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),G.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),G.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),G.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),G.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),G.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),G.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),G.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),G.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),G.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),G.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),G.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),G.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),G.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),G.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),G.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),G.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),G.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),G.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),G.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),G.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),G.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),G.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),G.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),G.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),G.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),G.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),G.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),G.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),G.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),G.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),G.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),G.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),G.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),G.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),G.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),G.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),G.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),G.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),G.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),G.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),G.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),G.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),G.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),G.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),G.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,o,i,a){return o===void 0&&(o="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),G.conv1d(this,e,n,r,o,i,a)},t.prototype.conv2d=function(e,n,r,o,i,a){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),G.conv2d(this,e,n,r,o,i,a)},t.prototype.conv2dTranspose=function(e,n,r,o,i){return this.throwIfDisposed(),G.conv2dTranspose(this,e,n,r,o,i)},t.prototype.depthwiseConv2D=function(e,n,r,o,i,a){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),G.depthwiseConv2d(this,e,n,r,o,i,a)},t.prototype.separableConv2d=function(e,n,r,o,i,a){return i===void 0&&(i=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),G.separableConv2d(this,e,n,r,o,i,a)},t.prototype.avgPool=function(e,n,r,o){return this.throwIfDisposed(),G.avgPool(this,e,n,r,o)},t.prototype.maxPool=function(e,n,r,o){return this.throwIfDisposed(),G.maxPool(this,e,n,r,o)},t.prototype.localResponseNormalization=function(e,n,r,o){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),G.localResponseNormalization(this,e,n,r,o)},t.prototype.pool=function(e,n,r,o,i){return this.throwIfDisposed(),G.pool(this,e,n,r,o,i)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Wo().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),G.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),G.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),G.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),G.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,o,i,a,s,u){return o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),G.stridedSlice(this,e,n,r,o,i,a,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),G.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),G.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),G.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),G.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),G.spectral.irfft(this)},t}();Object.defineProperty($t,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var YI,Hx,qx,Gx,Kx,Tl=function(t){function e(n,r,o,i){var a=t.call(this,n.shape,n.dtype,n.dataId,i)||this;return a.trainable=r,a.name=o,a}return Ro(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Jt(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Wo().disposeTensor(this),this.dataId=n.dataId,Wo().incRef(this,null)},e.prototype.dispose=function(){Wo().disposeVariable(this),this.isDisposedInternal=!0},e}($t);Object.defineProperty(Tl,Symbol.hasInstance,{value:function(t){return t instanceof $t&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(YI||(YI={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(Hx||(Hx={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(qx||(qx={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(Gx||(Gx={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(Kx||(Kx={}));var ine={float32:Gx,int32:Hx,bool:qx,complex64:Kx};function mn(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return ine[t][e]}function y0(t){return mn(t,"int32")}function Ot(t,e){if(t.dtype===e.dtype)return[t,e];var n=mn(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function c3(t,e){P(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function E2(t){var e=[];return function n(r,o,i){if(r!=null){if(r instanceof $t)return void o.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var u in s){var l=s[u];i.has(l)||(i.add(l),n(l,o,i))}}}}(t,e,new Set),e}var x0;Object.freeze({makeTypesMatch:Ot,assertTypesMatch:c3,isTensorInList:function(t,e){return e.some(function(n){return n.id===t.id})},getTensorsInContainer:E2});var QI=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),ane=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new QI}return t.prototype.ready=function(){return be(this,void 0,void 0,function(){var e,n,r;return Ee(this,function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,o.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return be(this,void 0,void 0,function(){var n,r,o;return Ee(this,function(i){switch(i.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return o=i.sent(),[3,3];case 2:o=r,i.label=3;case 3:if(!o)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new nne(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this;GI(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var n=this;GI(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])})},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var i=++this.pendingBackendInitId,a=o.then(function(s){return!(i<n.pendingBackendInitId)&&(n.registry[e]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(i<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=o,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],o=this.initializeBackend(r),i=o.success,a=o.asyncInit;if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),o=r.backend,i=this.readSync(n);o.disposeData(n),r.backend=e,e.move(n,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,o=this,i=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun(function(){return o.startScope(i)},function(){return o.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var o=r();return n(),o}catch(i){throw n(),i}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],function(o){return{x:function(){return o.toFloat()}}},[]),n},t.prototype.runKernel=function(e,n,r,o,i){return this.runKernelFunc(null,n,null,e,r,o,i)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var o=this.backend.numDataIds(),i=0;r.forEach(function(u){i+=u.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=o-n-i-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,o,i,a,s){var u,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var c=[],d=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var h,f=function(g){d&&(c=g.map(function(x){return l.keep(l.clone(x))}))},p=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var y,m=KM(o,this.backendName);return h=m!=null?function(){var g=l.backend.numDataIds();y=m.kernelFunc({inputs:n,attrs:i,backend:l.backend});var x=Array.isArray(y)?y:[y];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,g,x);var w=x.map(function(C){var E=C.dataId,S=C.shape,k=C.dtype;return l.makeTensorFromDataId(E,S,k)}),b=w.filter(function(C,E){return s[E]});return f((a||[]).slice().concat(b)),w}:function(){var g=l.backend.numDataIds();y=l.tidy(function(){return e(l.backend,f)});var x=Array.isArray(y)?y:[y];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,g,x),x},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(o,n,function(){return h()}):h()}),d&&this.addTapeNode(o,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(g){return n[g].shape}),outputShapes:u.map(function(g){return g.shape})}),Array.isArray(y)?u:u[0]},t.prototype.makeTensor=function(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var i=e;r==="string"&&la(e[0])&&(i=e.map(function(c){return a3(c)}));var a=o.write(i,n,r),s=new $t(n,r,a,this.nextTensorId());if(this.incRef(s,o),r==="string"){var u=this.state.tensorInfo.get(a),l=r3(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(e,n,r,o){var i=new $t(n,r=r||"float32",e,this.nextTensorId());return this.incRef(i,o),i},t.prototype.makeVariable=function(e,n,r,o){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.asType(o));var i=new Tl(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(o=e.size*y2(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Tl||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return be(this,void 0,void 0,function(){var n,r;return Ee(this,function(o){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,o,i){var a=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},u=ene(e);u!=null&&(o=u.gradFunc),o!=null&&(s.gradient=function(l){return l=l.map(function(c,d){if(c==null){var h=r[d],f=tc(h.size,h.dtype);return a.makeTensor(f,h.shape,h.dtype)}return c}),o(l.length>1?l:l[0],i)}),this.state.activeTape.push(s)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=E2(e),o=new Set(r.map(function(u){return u.id})),i=0;i<this.state.activeScope.track.length;i++){var a=this.state.activeScope.track[i];a.kept||o.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},t.prototype.gradients=function(e,n,r,o){var i=this;if(o===void 0&&(o=!1),P(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",e)});P(a instanceof $t,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var d={},h={},f=0;f<l.length;f++)d[l[f].id]=!0;for(f=0;f<u.length;f++){var p=(C=u[f]).inputs;for(var v in p){for(var y=p[v],m=!1,g=0;g<l.length;g++)if(d[y.id]){C.outputs.forEach(function(_){return d[_.id]=!0}),m=!0,h[C.id]=!0;break}if(m)break}}var x={};x[c.id]=!0;var w={};for(f=u.length-1;f>=0;f--)for(p=(C=u[f]).inputs,g=0;g<C.outputs.length;g++)if(x[C.outputs[g].id]){for(var v in p)x[p[v].id]=!0,w[C.id]=!0;break}var b=[];for(f=0;f<u.length;f++){var C;if(h[(C=u[f]).id]&&w[C.id]){var E={};for(var v in C.inputs){var S=C.inputs[v];d[S.id]&&(E[v]=S)}var k=Object.assign({},C);k.inputs=E,k.outputs=C.outputs,b.push(k)}}return b}(this.state.activeTape,n,a);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[a.id]=r==null?(u=a.shape,l=w2(_e(u),"float32"),V.makeTensor(l,u,"float32")):r,function(h,f,p){for(var v=function(m){var g=f[m],x=[];if(g.outputs.forEach(function(E){var S=h[E.id];S!=null?x.push(S):x.push(null)}),g.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+g.kernelName+".");var w=g.gradient(x),b=function(E){if(!(E in w))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(w)+".");var S=p(function(){return w[E]()});if(S.dtype!=="float32")throw new Error("Error in gradient for op "+g.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+S.dtype+"'");var k=g.inputs[E];if(!Jt(S.shape,k.shape))throw new Error("Error in gradient for op "+g.kernelName+". The gradient of input '"+E+"' has shape '"+S.shape+"', which does not match the shape of the input '"+k.shape+"'");if(h[k.id]==null)h[k.id]=S;else{var _=h[k.id];h[k.id]=_.add(S),_.dispose()}};for(var C in g.inputs)b(C)},y=f.length-1;y>=0;y--)v(y)}(c,s,function(h){return i.tidy(h)});var d=n.map(function(h){return c[h.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(h){for(var f=0,p=h.saved;f<p.length;f++)p[f].dispose()}),i.state.activeTape=null),{value:a,grads:d}})},t.prototype.customGrad=function(e){var n=this;return P(tv(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];P(o.every(function(s){return s instanceof $t}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return o.forEach(function(s,u){a[u]=s}),n.runKernelFunc(function(s,u){return P((r=e.apply(void 0,o.concat([u]))).value instanceof $t,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),P(tv(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];P(c.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),P(c.every(function(h){return h instanceof $t}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return c.forEach(function(h,f){d[f]=function(){return h}}),d})}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return be(this,void 0,void 0,function(){var n,r;return Ee(this,function(o){switch(o.label){case 0:return n=mo(),[4,this.backend.time(e)];case 1:return(r=o.sent()).wallMs=mo()-n,[2,r]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new QI,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),V=function(){var t=function(){if(x0==null){var n=void 0;if(typeof window!="undefined")n=window;else if(typeof global!="undefined")n=global;else if(typeof process!="undefined")n=process;else{if(typeof self=="undefined")throw new Error("Could not find a global object");n=self}x0=n}return x0}();if(t._tfengine==null){var e=new Jte(t);t._tfengine=new ane(e)}return function(n){GM=n}(t._tfengine.ENV),Wo=function(){return t._tfengine},t._tfengine}();function d3(){return typeof window!="undefined"&&window.document!=null||typeof WorkerGlobalScope!="undefined"}var ci=K();ci.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ci.registerFlag("IS_BROWSER",function(){return d3()}),ci.registerFlag("IS_NODE",function(){return typeof process!="undefined"&&process.versions!==void 0&&process.versions.node!==void 0}),ci.registerFlag("IS_CHROME",function(){return typeof navigator!="undefined"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),ci.registerFlag("PROD",function(){return!1}),ci.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return ci.getBool("DEBUG")}),ci.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),ci.registerFlag("IS_TEST",function(){return!1});var sh,Nr,Ar,Ja={},w0={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function h3(t,e){Ja[t]=e}function si(t){t in Ja||(Ja[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(o){if(typeof OffscreenCanvas!="undefined"&&o===2)return new OffscreenCanvas(300,150);if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(o){o.preventDefault(),delete Ja[n]},!1),n===1?r.getContext("webgl",w0)||r.getContext("experimental-webgl",w0):r.getContext("webgl2",w0)}(t));var e=Ja[t];return e.isContextLost()?(delete Ja[t],si(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Ja[t])}function jg(t,e){return[e,t]}function md(t){var e=_e(t);return ev(Math.ceil(e/4))}function cf(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function C2(t,e){var n,r,o,i,a,s,u,l,c,d=t;return K().getNumber("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,o=d.RGBA16F,i=d.RGBA32F,a=d.RED,s=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,i=d.RGBA,a=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function ye(t,e,n){var r=n();return e&&function(o){var i=o.getError();if(i!==o.NO_ERROR)throw new Error("WebGL Error: "+p3(o,i))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(sh||(sh={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(Nr||(Nr={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Ar||(Ar={}));var sne=596e-10,une=65504;function f3(t){return!!(K().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||sne<Math.abs(t)&&Math.abs(t)<une)}function p3(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Hc(t,e,n){return $i(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function m3(t,e,n){var r=$i(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ye(t,e,function(){return t.shaderSource(r,n)}),ye(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function v3(t,e,n){var r=$i(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ye(t,e,function(){return t.shaderSource(r,n)}),ye(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(o,i){var a=lne.exec(i);if(a==null)return console.log("Couldn't parse line number in error: "+i),void console.log(o);for(var s=+a[1],u=o.split(`
`),l=u.length.toString().length+2,c=u.map(function(y,m){return ms((m+1).toString(),l)+y}),d=0,h=0;h<c.length;h++)d=Math.max(c[h].length,d);var f=c.slice(0,s-1),p=c.slice(s-1,s),v=c.slice(s);console.log(f.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+ms(p[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(v.join(`
`))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Wp,Vp,lne=/ERROR: [0-9]+:([0-9]+):/g;function g3(t,e){return $i(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function y3(t,e,n){if(ye(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function jp(t,e,n){if(ye(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function x3(t,e,n){var r=$i(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ye(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ye(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function w3(t,e,n){var r=$i(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ye(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),ye(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function b3(t,e){return $i(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function E3(t,e){var n=K().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function C3(t,e){return $i(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function Xx(t,e,n,r,o,i,a,s){var u=t.getAttribLocation(n,r);return u!==-1&&(ye(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,o)}),ye(t,e,function(){return t.vertexAttribPointer(u,i,t.FLOAT,!1,a,s)}),ye(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function _3(t,e,n,r){R3(t,r),ye(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),ye(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function S3(t,e,n,r){return $i(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function k3(t,e,n){return t.getUniformLocation(e,n)}function I3(t,e,n,r,o,i){ye(t,e,function(){return _3(t,e,r,i)}),ye(t,e,function(){return t.uniform1i(o,i)})}function Hp(t,e,n,r){ye(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),ye(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function Yx(t,e,n){ye(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),ye(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function qc(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+T3(t,e))}function T3(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function $i(t,e,n,r){var o=ye(t,e,function(){return n()});if(o==null)throw new Error(r);return o}function R3(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function uh(t,e){return e===void 0&&(e=2),_e(t.slice(0,t.length-e))}function lh(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function qp(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[uh(t)].concat(lh(t))),e}function A3(t,e){var n;e===void 0&&(e=!1);var r=K().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?g2(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var o=ra(t);t=o.newShape}var i=_e(t);if(t.length<=1&&i<=r)return[1,i];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var a=uh(t),s=2,u=2;return t.length&&(s=(n=lh(t))[0],u=n[1]),ev(i=a*(s/2)*(u/2)).map(function(l){return 2*l})}return ev(i)}function tp(t){return t%2==0}function Gc(t,e){if(Jt(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||tp(n)&&tp(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&tp(t[0])&&tp(e[0])}function N3(t){if(Wp==null){var e=si(t);Wp=e.getParameter(e.MAX_TEXTURE_SIZE)}return Wp}function P3(t){if(Vp==null){var e=si(t);Vp=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Vp)}function D3(t){if(t===0)return 0;var e=si(t);return Pr(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Pr(e,"EXT_disjoint_timer_query")?1:0}function Pr(t,e){return t.getExtension(e)!=null}function Qx(t){try{if(si(t)!=null)return!0}catch{return!1}return!1}function O3(t){if(t===0)return!1;var e=si(t);if(t===1){if(!Pr(e,"OES_texture_float"))return!1}else if(!Pr(e,"EXT_color_buffer_float"))return!1;return Jx(e)}function M3(t){if(t===0)return!1;var e=si(t);if(t!==1){if(Pr(e,"EXT_color_buffer_float"))return Jx(e);if(Pr(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(r,o){var i=C2(r,o),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),u}(e,n)}return!1}return!!Pr(e,"OES_texture_float")&&!!Pr(e,"WEBGL_color_buffer_float")&&Jx(e)}function Jx(t){var e=C2(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}function F3(t){return t===2&&si(t).fenceSync!=null}var cne=Object.freeze({callAndCheck:ye,canBeRepresented:f3,getWebGLErrorMessage:p3,getExtensionOrThrow:Hc,createVertexShader:m3,createFragmentShader:v3,createProgram:g3,linkProgram:y3,validateProgram:jp,createStaticVertexBuffer:x3,createStaticIndexBuffer:w3,getNumChannels:function(){return K().getNumber("WEBGL_VERSION")===2?1:4},createTexture:b3,validateTextureSize:E3,createFramebuffer:C3,bindVertexBufferToProgramAttribute:Xx,bindTextureUnit:_3,unbindTextureUnit:function(t,e,n){R3(t,n),ye(t,e,function(){return t.activeTexture(t.TEXTURE0+n)}),ye(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:S3,getProgramUniformLocation:k3,bindTextureToProgramUniformSampler:I3,bindCanvasToFramebuffer:function(t,e){ye(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),ye(t,e,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),ye(t,e,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:Hp,unbindColorTextureFromFramebuffer:Yx,validateFramebuffer:qc,getFramebufferErrorMessage:T3,getBatchDim:uh,getRowsCols:lh,getShapeAs3D:qp,getTextureShapeFromLogicalShape:A3,isReshapeFree:Gc,getWebGLMaxTextureSize:N3,resetMaxTextureSize:function(){Wp=null},resetMaxTexturesInShader:function(){Vp=null},getMaxTexturesInShader:P3,getWebGLDisjointQueryTimerVersion:D3,hasExtension:Pr,isWebGLVersionEnabled:Qx,isCapableOfRenderingToFloatTexture:O3,isDownloadFloatTextureEnabled:M3,isWebGLFenceEnabled:F3}),Fe=K();function $3(t){K().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function pe(t,e){return V.tidy(t,e)}function Sr(t){E2(t).forEach(function(e){return e.dispose()})}function dne(t){return V.keep(t)}function rv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];K().getBool("IS_TEST")||console.warn.apply(console,t)}function ii(t,e){var n=t;if(In(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||In(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&K().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function o(i,a,s){if(s=s||[],!Array.isArray(i)&&!In(i))return void P(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});P(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),P(i.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+i.length+" elements"});for(var u=a.slice(1),l=0;l<i.length;++l)o(i[l],u,s.concat(l))}(t,r,[]),r}function JI(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function R(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof $t)return JI(r,t.dtype,e,n),t;var o=ec(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),JI(r,o,e,n),t==null||!In(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var i=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var a=ii(t,o);In(t)||Array.isArray(t)||(t=[t]);var s=o!=="string"?x2(t,o,K().getBool("DEBUG")):Oi(t,[],!0);return V.makeTensor(s,a,o)}function ov(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(o,i){return R(o,e+"["+i+"]",n)},r)}function _2(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function L3(t,e,n){for(var r=t.length+e.length,o=[],i=0,a=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(t[i++]):o.push(e[a++]);return o}function Sn(t,e){for(var n=[],r=t.length,o=0;o<r;o++)e.indexOf(o)===-1&&n.push(t[o]);return[n,e.map(function(i){return t[i]})]}function or(t,e){return L3(t,e.map(function(n){return 1}),e)}function cr(t,e,n){P(_2(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function Ao(t,e){if(_2(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(o){return n.push(o)}),n}function Hg(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function No(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function B3(t,e){var n=t[0].length;t.forEach(function(o,i){P(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+n+")"})}),P(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(o,i){for(var a=0;a<n;a++)P(a===e||o[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Fs(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function W(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];V.startScope(n);try{var s=r.apply(void 0,i);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),V.endScope(s),s}catch(u){throw V.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Fe.registerFlag("HAS_WEBGL",function(){return Fe.getNumber("WEBGL_VERSION")>0}),Fe.registerFlag("WEBGL_VERSION",function(){return Qx(2)?2:Qx(1)?1:0}),Fe.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Fe.get("WEBGL_VERSION")===2}),Fe.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Fe.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Fe.registerFlag("WEBGL_PACK",function(){return Fe.getBool("HAS_WEBGL")}),Fe.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_CLIP",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Fe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_PACK_REDUCE",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_CONV_IM2COL",function(){return Fe.getBool("WEBGL_PACK")}),Fe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return N3(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return P3(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=Fe.getNumber("WEBGL_VERSION");return t===0?0:D3(t)}),Fe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Fe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),Fe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return O3(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Fe.getBool("WEBGL_FORCE_F16_TEXTURES")&&Fe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Fe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return M3(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return F3(Fe.getNumber("WEBGL_VERSION"))}),Fe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Fe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),l3=$3;var Cn=W({complex_:function(t,e){var n=R(t,"real","complex"),r=R(e,"imag","complex");return ut(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),V.runKernelFunc(function(o){return o.complex(n,r)},{$real:n,$imag:r})}}),Xr=W({real_:function(t){var e=R(t,"input","real");return V.runKernelFunc(function(n){return n.real(e)},{$input:e})}}),Vo=W({imag_:function(t){var e=R(t,"input","imag");return V.runKernelFunc(function(n){return n.imag(e)},{$input:e})}});function kn(t,e,n){return Wa(t,e,ii(t,n),n)}function Wa(t,e,n,r){if(r==null&&(r=ec(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!In(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){b2(e);var o=_e(e),i=_e(n);P(o===i,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+i});for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==_e(e.slice(a));P(n[a]===e[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return In(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?x2(t,r,K().getBool("DEBUG")):Oi(t,[],!0),V.makeTensor(t,e,r)}function le(t,e){if((In(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&In(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Wa(t,[],[],e)}function Yt(t,e){Gs(t);var n=ii(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Wa(t,null,n,e)}function ba(t,e,n){if(Gs(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=ii(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Wa(t,e,r,n)}function S2(t,e,n){if(Gs(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=ii(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Wa(t,e,r,n)}function hr(t,e,n){if(Gs(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=ii(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Wa(t,e,r,n)}function hne(t,e,n){if(Gs(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=ii(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Wa(t,e,r,n)}function fne(t,e,n){if(Gs(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=ii(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Wa(t,e=e||r,r,n)}function pne(t,e,n,r){return e===void 0&&(e=!0),V.makeVariable(t,e,n,r)}function nc(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=nc(t,"float32"),r=St(t,"float32");return Cn(n,r)}var o=w2(_e(t),e);return V.makeTensor(o,t,e)}function St(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=St(t,"float32"),r=St(t,"float32");return Cn(n,r)}var o=tc(_e(t),e);return V.makeTensor(o,t,e)}function Jo(t,e,n){return V.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function mne(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return V.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function iv(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return St([0],r);var o=tc(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),o[0]=t;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return Yt(o,r)}var U3=W({onesLike_:function(t){var e=R(t,"x","onesLike");if(e.dtype==="complex64"){var n=U3(Xr(e)),r=tt(Vo(e));return Cn(n,r)}return V.runKernelFunc(function(o){return o.onesLike(e)},{$x:e},function(o,i){return{$x:function(){return tt(o)}}})}}),tt=W({zerosLike_:function(t){var e=R(t,"x","zerosLike");return V.runKernelFunc(function(n){return n.zerosLike(e)},{$x:e},function(n,r){return{$x:function(){return tt(n)}}})}}),un=W({concat_:function(t,e){e===void 0&&(e=0),P(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=ov(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),e=tn(e,n[0].shape)[0];var r=Fs(n.map(function(s){return s.shape}),e);if(_e(r)===0)return kn([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var o=n.map(function(s){return s.shape});B3(o,e);var i=n,a={axis:e};return V.runKernelFunc(function(s){return s.concat(n,e)},i,function(s){var u=o.map(function(l){return l[e]});return k2(s,u,e).map(function(l){return function(){return l}})},"Concat",a)}}),vne=W({concat1d_:function(t){return un(t,0)}}),gne=W({concat2d_:function(t,e){return un(t,e)}}),yne=W({concat3d_:function(t,e){return un(t,e)}}),xne=W({concat4d_:function(t,e){return un(t,e)}}),k2=W({split_:function(t,e,n){n===void 0&&(n=0);var r,o=R(t,"x","split");return n=tn(n,o.shape)[0],typeof e=="number"?(P(o.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(o.shape[n]/e)):(P(o.shape[n]===e.reduce(function(i,a){return i+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),V.runKernelFunc(function(i){return i.split(o,r,n)},{$x:o},function(i){return{$x:function(){return un(i,n)}}})}});function Ks(t,e){return t(e={exports:{}},e.exports),e.exports}var wne=Ks(function(t){(function(e,n,r){function o(s){var u,l=this,c=(u=4022871197,function(d){d=d.toString();for(var h=0;h<d.length;h++){var f=.02519603282416938*(u+=d.charCodeAt(h));f-=u=f>>>0,u=(f*=u)>>>0,u+=4294967296*(f-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var d=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=0|d)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function i(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function a(s,u){var l=new o(s),c=u&&u.state,d=l.next;return d.int32=function(){return 4294967296*l.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(0,t,!1)}),bne=Ks(function(t){(function(e,n,r){function o(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(0,t,!1)}),Ene=Ks(function(t){(function(e,n,r){function o(s){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^d^d<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(0,t,!1)}),Cne=Ks(function(t){(function(e,n,r){function o(s){var u=this;u.next=function(){var l,c,d=u.x,h=u.i;return l=d[h],c=(l^=l>>>7)^l<<24,c^=(l=d[h+1&7])^l>>>10,c^=(l=d[h+3&7])^l>>>3,c^=(l=d[h+4&7])^l<<7,l=d[h+7&7],c^=(l^=l<<13)^l<<9,d[h]=c,u.i=h+1&7,c},function(l,c){var d,h=[];if(c===(0|c))h[0]=c;else for(c=""+c,d=0;d<c.length;++d)h[7&d]=h[7&d]<<15^c.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],l.x=h,l.i=0,d=256;d>0;--d)l.next()}(u,s)}function i(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(c.x&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(0,t,!1)}),_ne=Ks(function(t){(function(e,n,r){function o(s){var u=this;u.next=function(){var l,c,d=u.w,h=u.X,f=u.i;return u.w=d=d+1640531527|0,c=h[f+34&127],l=h[f=f+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=h[f]=c^l,u.i=f,c+(d^d>>>16)|0},function(l,c){var d,h,f,p,v,y=[],m=128;for(c===(0|c)?(h=c,c=null):(c+="\0",h=0,m=Math.max(m,c.length)),f=0,p=-32;p<m;++p)c&&(h^=c.charCodeAt((p+32)%c.length)),p===0&&(v=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(v=v+1640531527|0,f=(d=y[127&p]^=h+v)==0?f+1:0);for(f>=128&&(y[127&(c&&c.length||0)]=-1),f=127,p=512;p>0;--p)h=y[f+34&127],d=y[f=f+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,y[f]=h^d;l.w=v,l.X=y,l.i=f}(u,s)}function i(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(c.X&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(0,t,!1)}),Sne=Ks(function(t){(function(e,n,r){function o(s){var u=this,l="";u.next=function(){var d=u.b,h=u.c,f=u.d,p=u.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,u.b=d=d<<20^d>>>12^h,u.c=h=h-f|0,u.d=f<<16^h>>>16^p,u.a=p-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function i(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(0,t,!1)}),Za=Ks(function(t){(function(e,n){var r,o=this,i=256,a=6,s="random",u=n.pow(i,a),l=n.pow(2,52),c=2*l,d=i-1;function h(m,g,x){var w=[],b=v(function S(k,_){var I,N=[],$=typeof k;if(_&&$=="object")for(I in k)try{N.push(S(k[I],_-1))}catch{}return N.length?N:$=="string"?k:k+"\0"}((g=g==1?{entropy:!0}:g||{}).entropy?[m,y(e)]:m==null?function(){try{var S;return r&&(S=r.randomBytes)?S=S(i):(S=new Uint8Array(i),(o.crypto||o.msCrypto).getRandomValues(S)),y(S)}catch{var k=o.navigator,_=k&&k.plugins;return[+new Date,o,_,o.screen,y(e)]}}():m,3),w),C=new f(w),E=function(){for(var S=C.g(a),k=u,_=0;S<l;)S=(S+_)*i,k*=i,_=C.g(1);for(;S>=c;)S/=2,k/=2,_>>>=1;return(S+_)/k};return E.int32=function(){return 0|C.g(4)},E.quick=function(){return C.g(4)/4294967296},E.double=E,v(y(C.S),e),(g.pass||x||function(S,k,_,I){return I&&(I.S&&p(I,C),S.state=function(){return p(C,{})}),_?(n[s]=S,k):S})(E,b,"global"in g?g.global:this==n,g.state)}function f(m){var g,x=m.length,w=this,b=0,C=w.i=w.j=0,E=w.S=[];for(x||(m=[x++]);b<i;)E[b]=b++;for(b=0;b<i;b++)E[b]=E[C=d&C+m[b%x]+(g=E[b])],E[C]=g;(w.g=function(S){for(var k,_=0,I=w.i,N=w.j,$=w.S;S--;)k=$[I=d&I+1],_=_*i+$[d&($[I]=$[N=d&N+k])+($[N]=k)];return w.i=I,w.j=N,_})(i)}function p(m,g){return g.i=m.i,g.j=m.j,g.S=m.S.slice(),g}function v(m,g){for(var x,w=m+"",b=0;b<w.length;)g[d&b]=d&(x^=19*g[d&b])+w.charCodeAt(b++);return y(g)}function y(m){return String.fromCharCode.apply(0,m)}if(n["seed"+s]=h,v(n.random(),e),t.exports){t.exports=h;try{r=require("crypto")}catch{}}})([],Math)});Za.alea=wne,Za.xor128=bne,Za.xorwow=Ene,Za.xorshift7=Cne,Za.xor4096=_ne,Za.tychei=Sne;var qg=Za.alea,I2=function(){function t(e,n,r,o,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=qg(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,o=!1;!o;){var i=void 0,a=void 0,s=void 0;do s=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*u,r=this.mean+this.stdDev*a*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),kne=function(){function t(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;var i=o||Math.random();this.randu=qg(i.toString()),this.randn=new I2(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,o,i,a;;){do o=this.randn.nextValue(),a=1+this.c*o;while(a<=0);if(a*=a*a,n=1-.331*(e=o*o)*e,r=.5*e+this.d*(1-a+Math.log(a)),(i=this.randu())<n||Math.log(i)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),Ine=function(){function t(e,n,r,o){var i=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=qg(o)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Be(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",b2(t),new ah(t,e,n)}function Tne(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var z3=W({batchToSpaceND_:function(t,e,n){var r=R(t,"x","batchToSpaceND"),o=e.reduce(function(i,a){return i*a});return P(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),P(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),P(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o}),V.runKernelFunc(function(i){return i.batchToSpaceND(r,e,n)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(e,n)}}})}}),Rne=W({broadcastTo_:function(t,e){var n=R(t,"broadcastTo","x"),r=n.shape;if(e.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var o=n.shape.slice();o.length<e.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(e),a=e.length-1;a>=0;a--)if(n.shape[a]===e[a])i[a]=1;else if(n.shape[a]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var s=i.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():V.runKernelFunc(function(u){return u.tile(n,i)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),Ane=W({cast_:function(t,e){var n=R(t,"x","cast");if(!t3(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return V.runKernelFunc(function(o){return o.cast(n,e)},{x:n},function(o){return{x:function(){return o.clone()}}},"Cast",r)}}),Nne=W({clone_:function(t){var e=R(t,"x","clone",null);return V.runKernelFunc(function(){return V.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}}),Pne=W({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=R(t,"x","cumsum"),i=Ao([e|=0],o.rank),a=o;i!=null&&(a=o.transpose(i));var s=No(1,o.rank)[0],u=V.runKernelFunc(function(l){return l.cumsum(a,s,n,r)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return i!=null&&(u=u.transpose(i)),u}}),Dne=W({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=R(t,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];return P(o*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),P(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+` for depthToSpace with input shape
          `+r.shape}),P(a%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+a+" for depthToSpace with input shape "+r.shape}),V.runKernelFunc(function(s){return s.depthToSpace(r,e,n)},{$x:r})}}),Gr=W({expandDims_:function(t,e){e===void 0&&(e=0);var n=R(t,"x","expandDims",null);P(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(P(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),bo(n,r)}}),W3=W({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var o=Be([t,e],r),i=t<=e?t:e,a=0;a<i;++a)o.set(1,a,a);var s=o.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return Xu(Gr(s,0),[n[0],1,1]);if(n.length===2)return Xu(Gr(Gr(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Xu(Gr(Gr(Gr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),One=W({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var o=R(t,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=a===1?o.as2D(1,-1):o,u=V.runKernelFunc(function(l){return l.multinomial(s,r,e,n)},{logits2D:s});return a===1?u.as1D():u}}),Zx=W({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=R(t,"indices","oneHot","int32"),i=o.shape.concat([e]);return o=o.flatten(),V.runKernelFunc(function(a){return a.oneHot(o,e,n,r)},{$indices:o},function(a){return{$indices:function(){return St(o.shape,"float32")}}}).reshape(i)}}),Xs=W({pad_:function(t,e,n){n===void 0&&(n=0);var r=R(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:e,constantValue:n};return V.runKernelFunc(function(i){return i.pad(r,e,n)},{x:r},function(i){var a=e.map(function(s){return s[0]});return{x:function(){return i.slice(a,r.shape)}}},"PadV2",o)}}),Mne=W({pad1d_:function(t,e,n){return n===void 0&&(n=0),P(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Xs(t,[e],n)}}),Fne=W({pad2d_:function(t,e,n){return n===void 0&&(n=0),P(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Xs(t,e,n)}}),$ne=W({pad3d_:function(t,e,n){return n===void 0&&(n=0),P(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Xs(t,e,n)}}),Lne=W({pad4d_:function(t,e,n){return n===void 0&&(n=0),P(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Xs(t,e,n)}}),Bne=W({rand_:function(t,e,n){var r=_e(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=e();return V.makeTensor(o,t,n)}}),Une=W({randomNormal_:function(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new I2(e,n,r,!1,o),a=Be(t,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),zne=W({randomGamma_:function(t,e,n,r,o){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new kne(e,n,r,o),a=Be(t,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),V3=W({randomUniform_:function(t,e,n,r,o){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var i=Be(t,r),a=new Ine(e,n,null,o),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),bo=W({reshape_:function(t,e){var n=R(t,"x","reshape",null);e=ZM(e,n.size),P(n.size===_e(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return V.runKernelFunc(function(o){return o.reshape(n,e)},{x:n},function(o){return{x:function(){return o.reshape(n.shape)}}},"Reshape",r)}}),j3=W({spaceToBatchND_:function(t,e,n){var r=R(t,"x","spaceToBatchND");return P(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),P(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),P(r.shape.reduce(function(o,i,a){return a>0&&a<=e.length?o&&(i+n[a-1][0]+n[a-1][1])%e[a-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),V.runKernelFunc(function(o){return o.spaceToBatchND(r,e,n)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(e,n)}}})}}),H3=W({squeeze_:function(t,e){var n=R(t,"x","squeeze");return bo(n,ra(n.shape,e).newShape)}}),$r=W({stack_:function(t,e){e===void 0&&(e=0);var n=ov(t,"tensors","stack");if(P(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,i=n[0].dtype;P(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){ut(o,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){P(i===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=n.map(function(s){return s.expandDims(e)});return un(a,e)}}),Xu=W({tile_:function(t,e){var n=R(t,"x","tile",null);P(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],o={reps:e};return V.runKernelFunc(function(i,a){var s=i.tile(n,e);return a([n]),s},{x:n},function(i,a){var s=a[0];return{x:function(){var u=tt(s);if(s.rank===1)for(var l=0;l<e[0];++l)u=u.add(i.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<e[0];++l)for(var c=0;c<e[1];++c)u=u.add(i.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(var d=0;d<e[2];++d)u=u.add(i.slice([l*s.shape[0],c*s.shape[1],d*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(d=0;d<e[2];++d)for(var h=0;h<e[3];++h)u=u.add(i.slice([l*s.shape[0],c*s.shape[1],d*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",o,r)}}),Wne=W({truncatedNormal_:function(t,e,n,r,o){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new I2(e,n,r,!0,o),a=Be(t,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),ln=W({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=R(t,"x","unstack");P(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return V.runKernelFunc(function(o){return o.unstack(n,e)},{x:n},function(o){return{x:function(){return $r(o,e)}}},"Unpack",r)}}),Vne=function(t,e){return be(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,d;return Ee(this,function(h){switch(h.label){case 0:return n=R(t,"x","setdiff1d"),r=R(e,"y","setdiff1d"),P(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),P(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),P(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=h.sent(),[4,r.data()];case 2:for(i=h.sent(),a=new Set(i),s=0,c=0;c<o.length;c++)a.has(o[c])||s++;for(u=new ah([s],n.dtype),l=new ah([s],"int32"),c=0,d=0;c<o.length;c++)a.has(o[c])||(u.values[d]=o[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}})})};function av(t,e,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var i=e.length,a=0;a<i;++a)o=o.concat([t[a+1]/e[a],e[a]]);o=o.concat(t.slice(i+1))}return o}function sv(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function uv(t,e,n,r){r===void 0&&(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var i=1;i<t.length;++i)i<=e.length?r?o.push(e[i-1]*t[i]):o.push(t[i]/e[i-1]):o.push(t[i]);return o}function q3(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function G3(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}function T2(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var a=t.shape,s=n.slice();s.pop();var u=1;for(i=r;i<t.rank;++i)u*=a[i],s.push(a[i]);var l=Co(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,o,u,l]}Object.freeze({prepareAndValidate:T2});var R2=30;function Gp(t){return t<=R2?t:nv(t,Math.floor(Math.sqrt(t)))}function K3(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(i+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(i+" update.rank != "+(o+t.length-r));for(var a=0;a<o;++a)if(n.shape[a]!==e.shape[a])throw new Error(i+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+e.shape[a]+").");for(a=0;a<n.rank-o;++a)if(n.shape[a+o]!==t[a+r])throw new Error(i+" updates.shape["+(a+o)+"] ("+n.shape[a+o]+") != shape["+(a+o)+"] ("+t[a+o]+")")}function X3(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}K3(n,e,t)}function ch(t,e,n){for(var r=e.shape.length,o=r>1?e.shape[r-1]:1,i=n.length,a=1,s=o;s<i;++s)a*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:_e(e.shape)/u,sliceSize:a,strides:Co(n.slice(0,o)).concat([1]),outputSize:_e(n)}}Object.freeze({validateUpdateShape:K3,validateInput:X3,calculateShapes:ch});function Y3(t,e,n){P(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),P(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(i){P(e[i]+n[i]<=t.shape[i],function(){return"Error in slice"+t.rank+"D: begin["+i+"] + size["+i+"] ("+(e[i]+n[i])+") would overflow input.shape["+i+"] ("+t.shape[i]+")"})},o=0;o<t.rank;++o)r(o)}function ew(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function Gg(t,e,n){for(var r=[],o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function Q3(t,e,n,r,o){var i=e[o],a=n[o]||1;(t&1<<o||i==null)&&(i=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),i=Zm(0,i,s-1)}function J3(t,e,n,r,o){var i=e[o],a=n[o]||1;(t&1<<o||i==null)&&(i=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),i=a>0?Zm(0,i,s):Zm(-1,i,s-1)}function A2(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function N2(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}Object.freeze({assertParamsValid:Y3,maskToAxes:ew,computeOutShape:Gg,startForAxis:Q3,stopForAxis:J3,isSliceContinous:A2,computeFlatOffset:N2});function jne(t,e){P(tv(t),function(){return"The f passed in variableGrads(f) must be a function"}),P(e==null||Array.isArray(e)&&e.every(function(c){return c instanceof Tl}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=e!=null;if(!n)for(var r in e=[],V.registeredVariables)e.push(V.registeredVariables[r]);var o=n?e.filter(function(c){return!c.trainable}):null,i=e.length;P((e=e.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var a=V.gradients(t,e,null,!0),s=a.value,u=a.grads;P(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),P(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return e.forEach(function(c,d){u[d]!=null&&(l[c.name]=u[d])}),o!=null&&o.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function Kg(t){return V.customGrad(t)}var Li=W({softmax_:function(t,e){e===void 0&&(e=-1);var n=R(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return V.runKernelFunc(function(r,o){var i=r.softmax(n,e);return o([i]),i},{logits:n},function(r,o){var i=o[0],a=r.mul(i);return{logits:function(){return a.sub(a.sum([e],!0).mul(i))}}},"Softmax",{dim:e},[],[!0])}}),Hne=W({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=R(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return Kg(function(r,o){var i=r.max(e,!0),a=r.sub(i),s=a.toFloat().sub(a.exp().sum(e,!0).log());return o([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(e,!0).mul(c))}}})(n)}}),Z3=function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),eF=function(){function t(){}return t.prototype.time=function(e){return H("time")},t.prototype.read=function(e){return H("read")},t.prototype.readSync=function(e){return H("readSync")},t.prototype.numDataIds=function(){return H("numDataIds")},t.prototype.disposeData=function(e){return H("disposeData")},t.prototype.write=function(e,n,r){return H("write")},t.prototype.move=function(e,n,r,o){return H("move")},t.prototype.memory=function(){return H("memory")},t.prototype.floatPrecision=function(){return H("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,o){return H("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,H("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return H("slice")},t.prototype.stridedSlice=function(e,n,r,o){return H("stridedSlice")},t.prototype.unstack=function(e,n){return H("unstack")},t.prototype.reverse=function(e,n){return H("reverse")},t.prototype.concat=function(e,n){return H("concat")},t.prototype.neg=function(e){return H("neg")},t.prototype.add=function(e,n){return H("add")},t.prototype.addN=function(e){return H("addN")},t.prototype.subtract=function(e,n){return H("subtract")},t.prototype.multiply=function(e,n){return H("multiply")},t.prototype.realDivide=function(e,n){return H("realDivide")},t.prototype.floorDiv=function(e,n){return H("floorDiv")},t.prototype.sum=function(e,n){return H("sum")},t.prototype.prod=function(e,n){return H("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return H("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return H("argMin")},t.prototype.argMax=function(e,n){return H("argMax")},t.prototype.equal=function(e,n){return H("equal")},t.prototype.notEqual=function(e,n){return H("notEqual")},t.prototype.less=function(e,n){return H("less")},t.prototype.lessEqual=function(e,n){return H("lessEqual")},t.prototype.greater=function(e,n){return H("greater")},t.prototype.greaterEqual=function(e,n){return H("greaterEqual")},t.prototype.logicalNot=function(e){return H("logicalNot")},t.prototype.logicalAnd=function(e,n){return H("logicalAnd")},t.prototype.logicalOr=function(e,n){return H("logicalOr")},t.prototype.where=function(e){return H("where")},t.prototype.select=function(e,n,r){return H("select")},t.prototype.topk=function(e,n,r){return H("topk")},t.prototype.min=function(e,n){return H("min")},t.prototype.minimum=function(e,n){return H("minimum")},t.prototype.mod=function(e,n){return H("mod")},t.prototype.max=function(e,n){return H("max")},t.prototype.maximum=function(e,n){return H("maximum")},t.prototype.all=function(e,n){return H("all")},t.prototype.any=function(e,n){return H("any")},t.prototype.squaredDifference=function(e,n){return H("squaredDifference")},t.prototype.ceil=function(e){return H("ceil")},t.prototype.floor=function(e){return H("floor")},t.prototype.round=function(e){return H("round")},t.prototype.sign=function(e){return H("sign")},t.prototype.isNaN=function(e){return H("isNaN")},t.prototype.isInf=function(e){return H("isInf")},t.prototype.isFinite=function(e){return H("isFinite")},t.prototype.pow=function(e,n){return H("pow")},t.prototype.exp=function(e){return H("exp")},t.prototype.expm1=function(e){return H("expm1")},t.prototype.softmax=function(e,n){return H("softmax")},t.prototype.log=function(e){return H("log")},t.prototype.log1p=function(e){return H("log1p")},t.prototype.sqrt=function(e){return H("sqrt")},t.prototype.rsqrt=function(e){return H("rsqrt")},t.prototype.square=function(e){return H("square")},t.prototype.reciprocal=function(e){return H("reciprocal")},t.prototype.relu=function(e){return H("relu")},t.prototype.relu6=function(e){return H("relu6")},t.prototype.prelu=function(e,n){return H("prelu")},t.prototype.elu=function(e){return H("elu")},t.prototype.eluDer=function(e,n){return H("eluDer")},t.prototype.selu=function(e){return H("selu")},t.prototype.int=function(e){return H("int")},t.prototype.clip=function(e,n,r){return H("clip")},t.prototype.abs=function(e){return H("abs")},t.prototype.complexAbs=function(e){return H("complexAbs")},t.prototype.sigmoid=function(e){return H("sigmoid")},t.prototype.softplus=function(e){return H("softplus")},t.prototype.sin=function(e){return H("sin")},t.prototype.cos=function(e){return H("cos")},t.prototype.tan=function(e){return H("tan")},t.prototype.asin=function(e){return H("asin")},t.prototype.acos=function(e){return H("acos")},t.prototype.atan=function(e){return H("atan")},t.prototype.atan2=function(e,n){return H("atan2")},t.prototype.sinh=function(e){return H("sinh")},t.prototype.cosh=function(e){return H("cosh")},t.prototype.tanh=function(e){return H("tanh")},t.prototype.asinh=function(e){return H("asinh")},t.prototype.acosh=function(e){return H("acosh")},t.prototype.atanh=function(e){return H("atanh")},t.prototype.erf=function(e){return H("erf")},t.prototype.step=function(e,n){return H("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,H("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return H("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return H("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return H("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,H("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return H("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return H("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return H("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return H("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return H("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return H("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return H("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,o){return H("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return H("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return H("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return H("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return H("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return H("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,o){return H("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return H("reshape")},t.prototype.cast=function(e,n){return H("cast")},t.prototype.tile=function(e,n){return H("tile")},t.prototype.pad=function(e,n,r){return H("pad")},t.prototype.transpose=function(e,n){return H("transpose")},t.prototype.gather=function(e,n,r){return H("gather")},t.prototype.gatherND=function(e,n){return H("gatherND")},t.prototype.scatterND=function(e,n,r){return H("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return H("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return H("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,o){return H("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return H("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,o){return H("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return H("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,o,i,a){return H("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,o,i){return H("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,o,i,a,s){return H("LRNGrad")},t.prototype.multinomial=function(e,n,r,o){return H("multinomial")},t.prototype.oneHot=function(e,n,r,o){return H("oneHot")},t.prototype.cumsum=function(e,n,r,o){return H("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,o,i){return H("nonMaxSuppression")},t.prototype.fft=function(e){return H("fft")},t.prototype.ifft=function(e){return H("ifft")},t.prototype.complex=function(e,n){return H("complex")},t.prototype.real=function(e){return H("real")},t.prototype.imag=function(e){return H("imag")},t.prototype.cropAndResize=function(e,n,r,o,i,a){return H("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return H("depthToSpace")},t.prototype.split=function(e,n,r){return H("split")},t.prototype.sparseToDense=function(e,n,r,o){return H("sparseToDense")},t.prototype.diag=function(e){return H("diag")},t.prototype.fill=function(e,n,r){return H("fill")},t.prototype.onesLike=function(e){return H("onesLike")},t.prototype.zerosLike=function(e){return H("zerosLike")},t.prototype.linspace=function(e,n,r){return H("linspace")},t.prototype.dispose=function(){return H("dispose")},t}();function H(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Ei(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var i=n-1-o,a=t[i]||1;(e[e.length-1-o]||1)>1&&a===1&&r.unshift(i)}return r}function en(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],i=e.length-r-1,a=e[i];(o==null||o===1&&a>1)&&n.unshift(i)}return n}function qe(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var i=t[t.length-o-1];i==null&&(i=1);var a=e[e.length-o-1];if(a==null&&(a=1),i===1)n.unshift(a);else if(a===1)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(i)}}return n}function Rl(t,e,n,r,o,i,a){a===void 0&&(a="channelsLast");var s,u=lv(e),l=u[0],c=u[1];if(a==="channelsLast")s=[l,c,t[3],t[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,c,t[1],t[1]]}return Va(t,s,n,r,o,i,!1,a)}function dh(t,e,n,r,o,i,a){a===void 0&&(a="NDHWC");var s,u,l=tw(e),c=l[0],d=l[1],h=l[2];if(a==="NDHWC")u="channelsLast",s=[c,d,h,t[4],t[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[c,d,h,t[1],t[1]]}return hh(t,s,n,r,o,!1,u,i)}function Va(t,e,n,r,o,i,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],h=u[3];if(s==="channelsLast")l=t[0],c=t[1],d=t[2],h=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],h=t[1],c=t[2],d=t[3]}var f,p=e[0],v=e[1],y=e[3],m=lv(n),g=m[0],x=m[1],w=lv(r),b=w[0],C=w[1],E=Yu(p,b),S=Yu(v,C),k=function(M,B,D,U,A,L,z,j){var q,Y,Z;if(typeof M=="number"){q={top:M,bottom:M,left:M,right:M,type:M===0?"VALID":"NUMBER"};var oe=function(ee,he,fe,ve,Se){ve==null&&(ve=P2(ee,he,fe));var De=ee[0],Oe=ee[1],yt=vd((De-he+2*ve)/fe+1,Se);P(Ut(yt),function(){return"The output # of rows ("+yt+") must be an integer. Change the stride and/or zero pad parameters"});var ht=vd((Oe-he+2*ve)/fe+1,Se);return P(Ut(ht),function(){return"The output # of columns ("+ht+") must be an integer. Change the stride and/or zero pad parameters"}),[yt,ht]}([B,D],L,U,M,j);Y=oe[0],Z=oe[1]}else if(M==="same"){Y=Math.ceil(B/U),Z=Math.ceil(D/A);var se=Math.max(0,(Y-1)*U+L-B),de=Math.max(0,(Z-1)*A+z-D),ue=Math.floor(se/2),Q=se-ue,X=Math.floor(de/2);q={top:ue,bottom:Q,left:X,right:de-X,type:"SAME"}}else{if(M!=="valid")throw Error("Unknown padding parameter: "+M);q={top:0,bottom:0,left:0,right:0,type:"VALID"},Y=Math.ceil((B-L+1)/U),Z=Math.ceil((D-z+1)/A)}return{padInfo:q,outHeight:Y,outWidth:Z}}(o,c,d,g,x,E,S,i),_=k.padInfo,I=k.outHeight,N=k.outWidth,$=a?y*h:y;return s==="channelsFirst"?f=[l,$,I,N]:s==="channelsLast"&&(f=[l,I,N,$]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:h,outHeight:I,outWidth:N,outChannels:$,padInfo:_,strideHeight:g,strideWidth:x,filterHeight:p,filterWidth:v,effectiveFilterHeight:E,effectiveFilterWidth:S,dilationHeight:b,dilationWidth:C,inShape:t,outShape:f,filterShape:e}}function hh(t,e,n,r,o,i,a,s){i===void 0&&(i=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],h=u[3],f=u[4];if(a==="channelsLast")l=t[0],c=t[1],d=t[2],h=t[3],f=t[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],f=t[1],c=t[2],d=t[3],h=t[4]}var p,v=e[0],y=e[1],m=e[2],g=e[4],x=tw(n),w=x[0],b=x[1],C=x[2],E=tw(r),S=E[0],k=E[1],_=E[2],I=Yu(v,S),N=Yu(y,k),$=Yu(m,_),M=function(z,j,q,Y,Z,oe,se,de,ue,Q,X){var ee,he,fe,ve;if(typeof z=="number"){ee={top:z,bottom:z,left:z,right:z,front:z,back:z,type:z===0?"VALID":"NUMBER"};var Se=function(Tt,gt,nn,Ve,ce,lt){ce==null&&(ce=P2(Tt,gt,Ve));var Ce=Tt[0],Ct=Tt[1],Do=Tt[2],$n=vd((Ce-gt+2*ce)/Ve+1,lt);P(Ut($n),function(){return"The output # of depths ("+$n+") must be an integer. Change the stride and/or zero pad parameters"});var li=vd((Ct-gt+2*ce)/Ve+1,lt);P(Ut(li),function(){return"The output # of rows ("+li+") must be an integer. Change the stride and/or zero pad parameters"});var oc=vd((Do-gt+2*ce)/Ve+1,lt);return P(Ut(oc),function(){return"The output # of columns ("+oc+") must be an integer. Change the stride and/or zero pad parameters"}),[$n,li,oc,nn]}([j,q,Y,1],de,1,Z,z,X);he=Se[0],fe=Se[1],ve=Se[2]}else if(z==="same"){he=Math.ceil(j/Z),fe=Math.ceil(q/oe),ve=Math.ceil(Y/se);var De=(he-1)*Z+de-j,Oe=(fe-1)*oe+ue-q,yt=(ve-1)*se+Q-Y,ht=Math.floor(De/2),Ke=De-ht,vt=Math.floor(Oe/2),Mt=Oe-vt,Wt=Math.floor(yt/2);ee={top:vt,bottom:Mt,left:Wt,right:yt-Wt,front:ht,back:Ke,type:"SAME"}}else{if(z!=="valid")throw Error("Unknown padding parameter: "+z);ee={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},he=Math.ceil((j-de+1)/Z),fe=Math.ceil((q-ue+1)/oe),ve=Math.ceil((Y-Q+1)/se)}return{padInfo:ee,outDepth:he,outHeight:fe,outWidth:ve}}(o,c,d,h,w,b,C,I,N,$,s),B=M.padInfo,D=M.outDepth,U=M.outHeight,A=M.outWidth,L=i?g*f:g;return a==="channelsFirst"?p=[l,L,D,U,A]:a==="channelsLast"&&(p=[l,D,U,A,L]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:d,inWidth:h,inChannels:f,outDepth:D,outHeight:U,outWidth:A,outChannels:L,padInfo:B,strideDepth:w,strideHeight:b,strideWidth:C,filterDepth:v,filterHeight:y,filterWidth:m,effectiveFilterDepth:I,effectiveFilterHeight:N,effectiveFilterWidth:$,dilationDepth:S,dilationHeight:k,dilationWidth:_,inShape:t,outShape:p,filterShape:e}}function P2(t,e,n,r){r===void 0&&(r=1);var o=Yu(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function lv(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function tw(t){return typeof t=="number"?[t,t,t]:t}function Yu(t,e){return e<=1?t:t+(t-1)*(e-1)}function vd(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function $s(t){var e=lv(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function ir(t,e){return $s(t)||$s(e)}function Xg(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function D2(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=St(t.shape),o=t.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!n3(t.dtype,e))return V.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var a=n.real(t);return i=a.cast(e),a.dispose(),i}if(e==="int32")return n.int(t);if(e==="bool"){var s=le(0,t.dtype);return i=n.notEqual(t,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function cv(t,e){return V.makeTensorFromDataId(t.dataId,e,t.dtype)}function O2(t,e,n){var r=(e-t)/(n-1),o=tc(n,"float32");o[0]=t;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return Yt(o,"float32")}Object.freeze({castTensor:D2,reshapeTensor:cv,linspaceImpl:O2,upcastType:mn,axesAreInnerMostDims:_2,combineLocations:L3,computeOutAndReduceShapes:Sn,expandShapeToKeepDim:or,assertAxesAreInnerMostDims:cr,getAxesPermutation:Ao,getUndoAxesPermutation:Hg,getInnerMostAxes:No,getBroadcastDims:Ei,getReductionAxes:en,assertAndGetBroadcastShape:qe,assertParamsConsistent:B3,computeOutShape:Fs,computePool2DInfo:Rl,computePool3DInfo:dh,computeConv2DInfo:Va,computeConv3DInfo:hh,computeDefaultPad:P2,tupleValuesAreOne:$s,eitherStridesOrDilationsAreOne:ir,convertConv2DDataFormat:Xg,PARALLELIZE_THRESHOLD:R2,computeOptimalWindowSize:Gp});function nw(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function ZI(t,e){return{real:t[2*e],imag:t[2*e+1]}}function qne(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Gne(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Kne(t,e,n){var r=function(i,a,s){return function(u,l,c){for(var d=0,h=u.length,f=0,p=!1;d<h;){var v=c(l,u[f=d+(h-d>>>1)]);v>0?d=f+1:(h=f,p=!v)}return p?d:-d-1}(i,a,s||Xne)}(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function Xne(t,e){return t>e?1:t<e?-1:0}function M2(t,e,n,r,o){return tF(t,e,n,r,o,0).selectedIndices}function F2(t,e,n,r,o,i){var a=tF(t,e,n,r,o,i);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function tF(t,e,n,r,o,i,a,s){s===void 0&&(s=!1);for(var u=Array.from(e).map(function(w,b){return{score:w,boxIndex:b,suppressBeginIndex:0}}).filter(function(w){return w.score>o}).sort(eT),l=i>0?-.5/i:0,c=[],d=[];c.length<n&&u.length>0;){var h=u.pop(),f=h.score,p=h.boxIndex,v=h.suppressBeginIndex;if(f<o)break;for(var y=!1,m=c.length-1;m>=v;--m){var g=Yne(t,p,c[m]);if(g>=r){y=!0;break}if(h.score=h.score*Qne(r,l,g),h.score<=o)break}h.suppressBeginIndex=c.length,y||(h.score===f?(c.push(p),d.push(h.score)):h.score>o&&Kne(u,h,eT))}var x=c.length;return s&&(c.fill(0,x),d.fill(0,x)),{selectedIndices:Yt(c,"int32"),selectedScores:Yt(d,"float32"),numValidOutputs:le(x,"int32")}}function Yne(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),f=(s-i)*(u-a),p=(d-l)*(h-c);if(f<=0||p<=0)return 0;var v=Math.max(i,l),y=Math.max(a,c),m=Math.min(s,d),g=Math.min(u,h),x=Math.max(m-v,0)*Math.max(g-y,0);return x/(f+p-x)}function Qne(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function eT(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function nF(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map(function(i){o[n]=i;var a=t.slice(r,o);return r[n]+=i,a})}function rF(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=Be(n,t.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),a=new Array(t.rank),s=0;s<a.length;s++)a[s]=i[s]%t.shape[s];var u=t.locToIndex(a);o.values[r]=t.values[u]}return o.toTensor()}function oF(t,e,n,r,o){for(var i=e[e.length-1],a=[t.length/i,i],s=a[0],u=a[1],l=Il(n,s*r),c=Il("int32",s*r),d=0;d<s;d++){for(var h=d*u,f=t.subarray(h,h+u),p=[],v=0;v<f.length;v++)p.push({value:f[v],index:v});p.sort(function(w,b){return b.value-w.value});var y=d*r,m=l.subarray(y,y+r),g=c.subarray(y,y+r);for(v=0;v<r;v++)m[v]=p[v].value,g[v]=p[v].index}var x=e.slice();return x[x.length-1]=r,[kn(l,x,n),kn(c,x,"int32")]}function $2(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=Be(t,"int32"),i=Be([n.length,t.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]),s=r*t.length;i.values.set(a,s)}return i.toTensor()}var Jne=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},Zne=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},ere=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,i=t.inSize,a=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function iF(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function mr(t,e){return e===1?[t]:iF(t,e)}function Hn(){var t,e,n,r,o,i,a,s,u,l;return K().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function us(t,e,n){n===void 0&&(n="index");var r=Co(e);return r.map(function(o,i){return"int "+t[i]+" = "+n+" / "+o+"; "+(i===r.length-1?"int "+t[i+1]+" = "+n+" - "+t[i]+" * "+o:"index -= "+t[i]+" * "+o)+";"}).join("")}function L2(t){var e=Co(t).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var aF=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function tre(t,e,n,r){var o=[];t.forEach(function(f){var p=_e(f.shapeInfo.logicalShape);f.shapeInfo.isUniform?o.push("uniform float "+f.name+(p>1?"["+p+"]":"")+";"):(o.push("uniform sampler2D "+f.name+";"),o.push("uniform int offset"+f.name+";"))});var i,a,s=o.join(`
`),u=t.map(function(f){return function(p,v,y){y===void 0&&(y=!1);var m="";m+=y?sF(p):mu(p);var g=p.shapeInfo.logicalShape,x=v.logicalShape;return g.length<=x.length&&(m+=y?function(w,b){var C,E=w.name,S=E.charAt(0).toUpperCase()+E.slice(1),k="get"+S+"AtOutCoords",_=w.shapeInfo.logicalShape.length,I=b.logicalShape.length,N=Ei(w.shapeInfo.logicalShape,b.logicalShape),$=bt(I),M=I-_,B=["x","y","z","w","u","v"];C=_===0?"":I<2&&N.length>=1?"coords = 0;":N.map(function(q){return"coords."+B[q+M]+" = 0;"}).join(`
`);var D="";D=I<2&&_>0?"coords":w.shapeInfo.logicalShape.map(function(q,Y){return"coords."+B[Y+M]}).join(", ");var U="return outputValue;",A=_e(w.shapeInfo.logicalShape)===1,L=_e(b.logicalShape)===1;if(_!==1||A||L){if(A&&!L)U=I===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(N.length){var z=_-2,j=_-1;N.indexOf(z)>-1&&N.indexOf(j)>-1?U="return vec4(outputValue.x);":N.indexOf(z)>-1?U="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":N.indexOf(j)>-1&&(U="return vec4(outputValue.xx, outputValue.zz);")}}else U=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+k+`() {
      `+$+` coords = getOutputCoords();
      `+C+`
      vec4 outputValue = get`+S+"("+D+`);
      `+U+`
    }
  `}(p,v):function(w,b){var C=w.name,E=C.charAt(0).toUpperCase()+C.slice(1),S="get"+E+"AtOutCoords",k=b.texShape,_=w.shapeInfo.texShape,I=w.shapeInfo.logicalShape.length,N=b.logicalShape.length;if(!w.shapeInfo.isUniform&&I===N&&w.shapeInfo.flatOffset==null&&Jt(_,k))return`
      float `+S+`() {
        return sampleTexture(`+C+`, resultUV);
      }
    `;var $,M=bt(N),B=Ei(w.shapeInfo.logicalShape,b.logicalShape),D=N-I,U=["x","y","z","w","u","v"];$=I===0?"":N<2&&B.length>=1?"coords = 0;":B.map(function(L){return"coords."+U[L+D]+" = 0;"}).join(`
`);var A="";return A=N<2&&I>0?"coords":w.shapeInfo.logicalShape.map(function(L,z){return"coords."+U[z+D]}).join(", "),`
    float `+S+`() {
      `+M+` coords = getOutputCoords();
      `+$+`
      return get`+E+"("+A+`);
    }
  `}(p,v)),m}(f,e,r)}).join(`
`),l=e.texShape,c=Hn(),d=function(f){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+f.texture2D+`(textureSampler, uv).r;
    }
  `}(c),h=function(f){return f.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+f.varyingFs+` vec2 resultUV;
    `+f.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+f.defineSpecialNaN+`
    `+f.defineSpecialInf+`
    `+f.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+nre+`
    `+rre+`
    `+ore+`
  `}(c);return e.isPacked?(i=function(f,p){switch(f.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(w,b){var C=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)];return C[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return 2 * (resTexRC.x * `+C[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(w,b){var C=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)];if(Jt(w,b))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `;var E=Math.ceil(w[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(f,p);case 3:return v=f,y=p,m=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],g=Math.ceil(v[2]/2),x=g*Math.ceil(v[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;

      int b = index / `+x+`;
      index -= b * `+x+`;

      int r = 2 * (index / `+g+`);
      int c = imod(index, `+g+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(w,b){for(var C=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],E=Math.ceil(w[w.length-1]/2),S=E*Math.ceil(w[w.length-2]/2),k=S,_="",I="b, r, c",N=2;N<w.length-1;N++)k*=w[w.length-N-1],_=`
      int b`+N+" = index / "+k+`;
      index -= b`+N+" * "+k+`;
    `+_,I="b"+N+", "+I;return`
    ivec`+w.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+_+`

      int b = index / `+S+`;
      index -= b * `+S+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+w.length+"("+I+`);
    }
  `}(f,p)}var v,y,m,g,x}(e.logicalShape,l),a=function(f){return`
    void setOutput(vec4 val) {
      `+f.output+` = val;
    }
  `}(c)):(i=function(f,p){switch(f.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(m,g){return g[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+g[1]+`.0);
      }
    `:g[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+g[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      return resTexRC.x * `+g[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(m,g){return Jt(m,g)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+g[0]+", "+g[1]+`));
      }
    `:m[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+g[0]+", "+g[1]+`));
        int index = resTexRC.x * `+g[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:m[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+g[0]+", "+g[1]+`));
        int index = resTexRC.x * `+g[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      int r = index / `+m[1]+`;
      int c = index - r * `+m[1]+`;
      return ivec2(r, c);
    }
  `}(f,p);case 3:return v=p,y=us(["r","c","d"],f),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+y+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(m,g){var x=us(["r","c","d","d2"],m);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      `+x+`
      return ivec4(r, c, d, d2);
    }
  `}(f,p);case 5:return function(m,g){var x=us(["r","c","d","d2","d3"],m);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+g[0]+`,
                             `+g[1]+`));

      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      `+x+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(f,p);case 6:return function(m,g){var x=us(["r","c","d","d2","d3","d4"],m);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      `+x+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(f,p);default:throw new Error(f.length+"-D output sampling is not yet supported")}var v,y}(e.logicalShape,l),a=function(f){return`
    void setOutput(float val) {
      `+f.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(h+=ire),[h,d,a,s,i,u,n].join(`
`)}function mu(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var i=n.shapeInfo.texShape,a=i[0],s=i[1];if(a===1&&s===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],d=qa(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+su(n)+`
      }
    `;var i=n.shapeInfo.texShape,a=i[0],s=i[1];if(s===1&&a===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=qa(r);return s===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=n.shapeInfo.texShape;if(a!=null&&Jt(r,a)){var s=a[0],u=a[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var l=ra(r),c=l.newShape,d=l.keptDims,h=c;if(h.length<r.length){var f=vu(n,h);return`
      `+mu(f)+`
      float `+i+`(int row, int col) {
        return `+i+"("+gu(["row","col"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+su(n)+`
      }
    `;var p=a[0],v=a[1],y=qa(o);return v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:p===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+v+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+y+`;
    vec2 uv = uvFromFlat(`+p+", "+v+`, index);
    return sampleTexture(`+o+`, uv);
  }
`}(t);case 3:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[1]*r[2],s=r[2],u=ra(r),l=u.newShape,c=u.keptDims,d=l;if(d.length<r.length){var h=vu(n,d);return`
        `+mu(h)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+gu(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+su(n)+`
      }
    `;var f=n.shapeInfo.texShape,p=f[0],v=f[1],y=n.shapeInfo.flatOffset;if(v===a&&y==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+v+".0, "+p+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(v===s&&y==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+".0, "+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var m=qa(o);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+m+`;
        vec2 uv = uvFromFlat(`+p+", "+v+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `}(t);case 4:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[3],s=r[2]*a,u=r[1]*s,l=ra(r),c=l.newShape,d=l.keptDims;if(c.length<r.length){var h=vu(n,c);return`
      `+mu(h)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+gu(["row","col","depth","depth2"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+a+`, 1)));
        `+su(n)+`
      }
    `;var f=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,v=p[0],y=p[1];if(y===u&&f==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(y===a&&f==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var m=qa(o);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+v+", "+y+", index + "+m+`);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);case 5:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[4],s=r[3]*a,u=r[2]*s,l=r[1]*u,c=ra(r),d=c.newShape,h=c.keptDims;if(d.length<r.length){var f=vu(n,d);return`
      `+mu(f)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+gu(["row","col","depth","depth2","depth3"],h)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+a+`)) +
          depth3;
        `+su(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,y=v[0],m=v[1];if(m===l&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(m===a&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var g=qa(o);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+g+`;
      vec2 uv = uvFromFlat(`+y+", "+m+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);case 6:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=ra(r),s=a.newShape,u=a.keptDims;if(s.length<r.length){var l=vu(n,s);return`
      `+mu(l)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+gu(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],d=r[4]*c,h=r[3]*d,f=r[2]*h,p=r[1]*f;if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+f+", "+h+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+su(n)+`
      }
    `;var v=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,m=y[0],g=y[1];if(g===p&&v==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+f+", "+h+", "+d+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(g===c&&v==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var x=qa(o);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+f+" + depth * "+h+` +
          depth2 * `+d+" + depth3 * "+c+" + depth4 + "+x+`;
      vec2 uv = uvFromFlat(`+m+", "+g+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function sF(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Hn(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(o){var i=o.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),s=o.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=Hn();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+i+`, uv);
    }
  `}(t);case 2:return function(o){var i=o.shapeInfo.logicalShape,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=o.shapeInfo.texShape,l=u[0],c=u[1],d=Hn();if(u!=null&&Jt(i,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+d.texture2D+"("+a+`, uv);
      }
    `;var h=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],f=Math.ceil(i[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+f+", "+h[0]+", "+h[1]+`, row, col);
      return `+d.texture2D+"("+a+`, uv);
    }
  `}(t);case 3:return function(o){var i=o.shapeInfo.logicalShape,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=o.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(i[0]===1){var c=i.slice(1),d=vu(o,c);return`
        `+sF(d)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+gu(["b","row","col"],[1,2])+`);
        }
      `}var h=l[0],f=l[1],p=Math.ceil(i[2]/2),v=p*Math.ceil(i[1]/2),y=Hn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+h+", "+f+", "+v+", "+p+`, b, row, col);
      return `+y.texture2D+"("+a+`, uv);
    }
  `}(t);default:return function(o){for(var i=o.shapeInfo.logicalShape,a=i.length,s=o.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=o.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=c[0],h=c[1],f=Math.ceil(i[a-1]/2),p=f*Math.ceil(i[a-2]/2),v="int b, int row, int col",y="b * "+p+" + (row / 2) * "+f+" + (col / 2)",m=2;m<a-1;m++)v="int b"+m+", "+v,p*=i[a-m-1],y="b"+m+" * "+p+" + "+y;var g=Hn();return`
    vec4 `+u+"("+v+`) {
      int index = `+y+`;
      int texR = index / `+h+`;
      int texC = index - texR * `+h+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+h+", "+d+`);
      return `+g.texture2D+"("+s+`, uv);
    }
  `}(t)}}var nre=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,rre=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ore=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ire=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function qa(t){return"offset"+t}function su(t){var e=t.name,n=_e(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function bt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function vu(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function gu(t,e){return e.map(function(n){return t[n]}).join(", ")}var are=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=t[t.length-1],i=Math.ceil(o/e);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,l=u.length,c=bt(l),d=mr("coords",l);if(i===1){var h=bt(s=l+1);a=`
        `+h+" sourceLocR = "+h+"("+d.join()+`, 0);
        ++`+d[l-1]+`;
        `+h+" sourceLocG = "+h+"("+d.join()+`, 0);
        ++`+d[l-2]+`;
        `+h+" sourceLocA = "+h+"("+d.join()+`, 0);
        --`+d[l-1]+`;
        `+h+" sourceLocB = "+h+"("+d.join()+`, 0);
        --`+d[l-2]+";"}else s=l,a=`
        `+c+` sourceLocR = coords;
        ++`+d[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+d[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+d[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+d[l-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),p="."+f[s-1],v=f.map(function(S){return"int "+S}),y=mr("sourceLocR",s-1).concat("inIdx.r"),m=mr("sourceLocG",s-1).concat("inIdx.g"),g=mr("sourceLocB",s-1).concat("inIdx.b"),x=mr("sourceLocA",s-1).concat("inIdx.a"),w=n==="max"?"greaterThan":"lessThan",b=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+m.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+x.join()+")));",C=`vec4(
            getAChannel(`+y.join()+`),
            hasNextCol ? getAChannel(`+m.join()+`) : 0.,
            hasNextRow ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+x.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+v.join()+`) {
        return getChannel(getBestIndicesA(`+f.join()+`),
                                          vec2(`+f.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+v.join()+`) {
        return getChannel(getA(`+f.join()+`),
                               vec2(`+f.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+d[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+d[l-2]+" < "+(u[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+C+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+b+`
          vec4 candidate = `+C+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+w+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},sre=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,c=u-1-t.padInfo.left,d=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},ure=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=c-1-t.padInfo.front,p=d-1-t.padInfo.top,v=h-1-t.padInfo.left,y=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+f+", "+p+", "+v+`);
      const float avgMultiplier = float(`+y+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},lre=function(t,e,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],qe(t,e),qe(t,n);var a="0.0";r!=null&&(qe(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";o!=null&&(qe(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},cre=function(t,e,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],qe(t,e),qe(t,n);var a="vec4(0.0)";r!=null&&(qe(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(qe(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},dre="return areal * breal - aimag * bimag;",hre="return areal * bimag + aimag * breal;",tT=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=qe(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},b0="return a + b;",E0="return a - b;",nT="return a * b;",uF="return (a < 0.) ? b * a : a;",Vt=function(t,e,n){this.variableNames=["A","B"],this.outputShape=qe(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},lF=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,hi=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=qe(e,n);var o=this.outputShape.length,i="";if(r)if(o===0||_e(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+bt(o)+` coords = getOutputCoords();
        `,o===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=mr("coords",o);i+=`
            bool nextRowOutOfBounds =
              (`+a[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+a[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},fre=function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,i){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t}(),pre=function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(o,i){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(r.minLoc,e),o.gl.uniform1f(r.maxLoc,n)}},t}(),mre=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},vre=function(t){this.outputShape=[],this.outputShape=Fs(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var o=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var i=e.length,a=e[e.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},gre=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Fs(t,e);var n=this.outputShape,r=n.length,o=bt(r),i=mr("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(y,m){return"T"+m});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=a[e],c=a.slice(-2),d=a.join(),h="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var f=s[u-1];h+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+np(a,l,f)+`),
            vec2(`+np(c,l,f)+`));
        }`}var p=s.length,v=s[s.length-1];h+=`
        return getChannel(
          getT`+p+"("+np(a,l,v)+`),
          vec2(`+np(c,l,v)+"));",this.userCode=`
      float getValue(`+a.map(function(y){return"int "+y})+`) {
        `+h+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+n[r-2]+` &&
            `+i[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function np(t,e,n){var r=t.indexOf(e);return t.map(function(o,i){return i===r?o+" - "+n:o}).join()}var yre=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,i=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},xre=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,i=t.dataFormat==="channelsLast",a=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=i?1:2,l=i?2:3,c=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},wre=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,i=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+o+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+i+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},bre=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Ere=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},Cre=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,i=e-1-t.padInfo.top,a=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},rT=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,i=t.padInfo.left,a=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,h=4*Math.floor(t.inChannels/4),f=t.inChannels%4,p=t.dataFormat==="channelsLast",v=p?1:2,y=p?2:3,m=p?3:1,g="",x="";n&&(g=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,x="result = activation(result);");var w=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+o+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+m+`];

        ivec2 xRCCorner =
            ivec2(coords[`+v+"], coords["+y+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+h+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(f===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+h+`) *
                    getW(wR, wC, `+h+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+h+`, xR, xC) *
                    getW(wR, wC, `+h+`, d2);
              }

            } else if (`+(f===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(f===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2),
                getW(wR, wC, `+h+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1),
                  getX(batch, xR, xC, `+h+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC),
                  getX(batch, `+h+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+w+`
        `+x+`
        setOutput(result);
      }
    `},_re=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,d=t.filterHeight,h=t.filterWidth,f=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+i+", "+a+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+f+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+f+`) *
                  getW(wF, wR, wC, `+f+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+f+`),
                  getX(batch, xF, xR, xC, `+f+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+f+`, d2),
                  getW(wF, wR, wC, `+f+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+f+`),
                  getX(batch, xF, xR, xC, `+f+` + 1),
                  getX(batch, xF, xR, xC, `+f+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+f+`, d2),
                  getW(wF, wR, wC, `+f+` + 1, d2),
                  getW(wF, wR, wC, `+f+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},oT=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,i=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,f=t.filterWidth,p=t.outChannels/t.inChannels,v="",y="";n&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var m=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+m+`
        `+y+`
        setOutput(result);
      }
    `},iT=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,i=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,f=t.filterWidth,p=f,v="int xR; int xC; int xCOffset;",y=0;y<h;y++)for(var m=0;m<f;m++)v+=`
          vec4 xTexelR`+y+"C"+2*m+` = vec4(0.);
          vec4 wR`+y+"C"+m+` = vec4(0.);
          vec4 xR`+y+"C"+m+" = vec4(0.);";for(y=0;y<h;y++)for(var g=0;g<p;g++){if(v+=`
          xR = xRCorner + `+y*c+`;
          xC = xCCorner + `+(m=2*g)*d+`;
        `,l===1){if(m<f&&(v+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+y+"C"+m+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+y+"C"+m+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+y+"C"+m+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+y+"C"+m+" = vec4(previous.zw, xTexelR"+y+"C"+m+`.xy);
                } else {
                  xR`+y+"C"+m+" = vec4(0, 0, xTexelR"+y+"C"+m+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+y+"C"+m+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+m+` = vec4(0.);
                }

                xR`+y+"C"+m+" = xTexelR"+y+"C"+m+`;
              `,m+1<f)){var x=s%2==0?g2(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(v+=`
                  xCOffset = xC + `+s%2+" + "+x+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(v+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+y+"C"+m+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+y+"C"+m+` = vec4(0.);
                    }
                  `),v+=`
                  xR`+y+"C"+(m+1)+` = vec4(
                    xTexelR`+y+"C"+m+".zw, xTexelR"+y+"C"+(m+2)+`.xy);
                `):v+=`
                  xCOffset = xC + `+x+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+y+"C"+(m+1)+" = xTexelR"+y+"C"+(m+2)+`;
                `}}else m<f&&(v+=`
              if(xR >= 0 && xR < `+o+`) {
            `,s%2==1?(v+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+m+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+m+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+y+"C"+(m+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+y+"C"+(m+2)+` = vec4(0.);
                }

                xR`+y+"C"+m+` = vec4(
                  xTexelR`+y+"C"+m+".zw, xTexelR"+y+"C"+(m+2)+`.zw);
              `,m+1<f&&(v+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+y+"C"+(m+1)+" = vec4(xTexelR"+y+"C"+(m+2)+`.xy, final.xy);
                `)):(v+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+y+"C"+m+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+m+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+(m+2)+` = vec4(0.);
                }

                xR`+y+"C"+m+` = vec4(
                  xTexelR`+y+"C"+m+".xy, xTexelR"+y+"C"+(m+2)+`.xy);
              `,m+1<f&&(v+=`
                  xR`+y+"C"+(m+1)+` = vec4(
                    xTexelR`+y+"C"+m+".zw, xTexelR"+y+"C"+(m+2)+`.zw);
                `)),v+="}");m<f&&(v+=`
            vec4 wTexelR`+y+"C"+m+" = getW("+y+", "+m+`, d1, q);
            wR`+y+"C"+m+" = vec4(wTexelR"+y+"C"+m+".xz, wTexelR"+y+"C"+m+`.xz);
          `,m+1<f&&(v+=`
              vec4 wTexelR`+y+"C"+(m+1)+" = getW("+y+", "+(m+1)+`, d1, q);
              wR`+y+"C"+(m+1)+` =
                vec4(wTexelR`+y+"C"+(m+1)+".xz, wTexelR"+y+"C"+(m+1)+".xz);"))}for(y=0;y<h;y++)for(m=0;m<f;m++)v+="dotProd += xR"+y+"C"+m+" * wR"+y+"C"+m+";";var w="",b="";n&&(w=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,b="result = activation(result);");var C=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+w+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+v+`

        vec4 result = dotProd;
        `+C+`
        `+b+`
        setOutput(result);
      }
    `},Sre=function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=t[0],a=t[1],s=t[2],u=t[3],l=e[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var h=r==="bilinear"?1:0,f=[a-1+".0",s-1+".0"],p=f[0],v=f[1],y=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],m=y[0],g=y[1],x=y[2],w=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],b=w[0],C=w[1],E=w[2];this.userCode=`
      const float height_ratio = float(`+m+`);
      const float width_ratio = float(`+b+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+g+`;
        float width_scale = `+C+`;

        float in_y = `+x+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+v+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+h+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},kre=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],i=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+bt(r)+` coords = getOutputCoords();
        int end = `+aT(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+aT(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function aT(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var Ire=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=sh.DENSE;var e=md(t),n=Hn();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+us(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},Tre=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=sh.DENSE;var e=md(t),n=Hn();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+us(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},Rre=function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),Are=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Nre=function(t){this.variableNames=["A"],this.outTexUsage=Nr.DOWNLOAD;var e=Hn();this.outputShape=t,this.userCode=`
      `+aF+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},Pre=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Nr.DOWNLOAD;var e=Hn();this.outputShape=t,this.userCode=`
      `+aF+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},Dre=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=Hn(),o=e[0],i=e[1];this.outputShape=t;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+L2(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},Ore=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Hn(),o=e[0],i=e[1];this.outputShape=t;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+L2(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `},Mre="return real * expR - imag * expI;",Fre="return real * expI + imag * expR;",sT=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},$re=function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,e)}},t}(),Lre=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=bt(this.rank),i=function(a,s){var u=a.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=0;d<a.length;d++)d===s?c.push("int(getIndices("+l[d]+"))"):c.push(""+l[d]);return c.join()}(t,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},Bre=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=bt(e.length),o=bt(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function cF(t,e){var n=Hn();return m3(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function dF(t,e){return x3(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function hF(t,e){return w3(t,e,new Uint16Array([0,1,2,2,1,3]))}function df(t,e,n,r,o,i,a){E3(n,r);var s=b3(t,e),u=t.TEXTURE_2D;return ye(t,e,function(){return t.bindTexture(u,s)}),ye(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),ye(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),ye(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),ye(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),ye(t,e,function(){return t.texImage2D(u,0,o,n,r,0,i,a,null)}),ye(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function fF(t,e,n,r,o){var i=jg(n,r);return df(t,e,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function pF(t,e,n,r,o){var i=jg(n,r);return df(t,e,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function mF(t,e,n,r,o){var i=jg(n,r);return df(t,e,i[0],i[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function vF(t,e,n,r,o){var i=cf(n,r);return df(t,e,i[0],i[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function gF(t,e,n,r,o){var i=cf(n,r);return df(t,e,i[0],i[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function yF(t,e,n,r){return ye(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Xx(t,e,n,"clipSpacePos",r,3,20,0)&&Xx(t,e,n,"uv",r,2,20,12)}function xF(t,e,n,r,o,i,a){var s,u,l;ye(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),i instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*o*4),u=t.FLOAT,l=a.internalFormatPackedFloat),s.set(i),ye(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,o,0,t.RGBA,u,s)}),ye(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function wF(t,e,n,r){ye(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?ye(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):ye(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),ye(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function bF(t,e,n,r,o){var i=t.createBuffer();ye(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,i)});var a=16*n*r;return ye(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)}),ye(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),ye(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),i}function EF(t,e,n){var r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function CF(t,e,n,r,o){var i=jg(n,r),a=i[0],s=i[1],u=new Uint8Array(n*r*4);return ye(t,e,function(){return t.readPixels(0,0,a,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function _F(t,e,n,r,o,i,a,s){var u=t,l=new Float32Array(function(c,d){var h=cf(c,d);return h[0]*h[1]*4}(i,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function SF(t,e,n,r){var o=new Float32Array(n*r*4);return ye(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,o)}),o}var Ure=Object.freeze({createVertexShader:cF,createVertexBuffer:dF,createIndexBuffer:hF,createFloat32MatrixTexture:fF,createFloat16MatrixTexture:pF,createUnsignedBytesMatrixTexture:mF,createPackedMatrixTexture:vF,createFloat16PackedMatrixTexture:gF,bindVertexProgramAttributeStreams:yF,uploadDenseMatrixToTexture:xF,uploadPixelDataToTexture:wF,createBufferFromOutputTexture:bF,downloadFloat32MatrixFromBuffer:EF,downloadByteEncodedFloatMatrixFromOutputTexture:CF,downloadPackedMatrixFromBuffer:_F,downloadMatrixFromPackedOutputTexture:SF}),kF=function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=K().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,h3(n,e)):this.gl=si(n);var r="WEBGL_color_buffer_float";if(K().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Hc(this.gl,this.debug,"OES_texture_float"),Pr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Hc(this.gl,this.debug,"OES_texture_half_float");else if(K().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Pr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Hc(this.gl,this.debug,"EXT_color_buffer_half_float");else if(K().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Pr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Pr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=dF(this.gl,this.debug),this.indexBuffer=hF(this.gl,this.debug),this.framebuffer=C3(this.gl,this.debug),this.textureConfig=C2(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return K().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;ye(n,this.debug,function(){return n.finish()}),ye(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),ye(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),ye(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),ye(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),ye(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),fF(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),pF(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),mF(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),wF(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,o){this.throwIfDisposed(),xF(this.gl,this.debug,e,n,r,o,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),gF(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),vF(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(Yx(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ye(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return CF(o.gl,o.debug,n,r,o.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,o,i,a){return _F(this.gl,e,0,0,0,i,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return EF(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var o=bF(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,o=this;if(K().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=i.clientWaitSync(a,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=a}else K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var o=this;return this.downloadMatrixDriver(e,function(){return SF(o.gl,o.debug,n,r)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=v3(n,this.debug,e),o=cF(n,this.debug),i=g3(n,this.debug);return ye(n,this.debug,function(){return n.attachShader(i,o)}),ye(n,this.debug,function(){return n.attachShader(i,r)}),y3(n,this.debug,i),this.debug&&jp(n,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=yF(n,this.debug,this.program,this.vertexBuffer)),i},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&ye(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&jp(this.gl,this.debug,this.program),ye(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?S3(this.gl,this.debug,e,n):k3(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),ye(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),I3(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var o=cf(n,r),i=o[0],a=o[1];this.setOutputMatrixTextureDriver(e,i,a)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&jp(this.gl,this.debug,this.program),qc(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),ye(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),ye(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Hc(this.gl,this.debug,K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),i=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),i},t.prototype.endQuery=function(){if(K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return be(this,void 0,void 0,function(){var n=this;return Ee(this,function(r){switch(r.label){case 0:return[4,Wx(function(){return n.disposed||n.isQueryAvailable(e,K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(e,o.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||Wx(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Hp(this.gl,this.debug,e,this.framebuffer),this.debug&&qc(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Hp(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&qc(this.gl)):Yx(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var o=this.gl;Hp(o,this.debug,e,this.framebuffer),this.debug&&qc(o),this.outputTexture=e,ye(o,this.debug,function(){return o.viewport(0,0,n,r)}),ye(o,this.debug,function(){return o.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,o){var i=this;this.throwIfDisposed(),ye(this.gl,this.debug,function(){return i.gl.scissor(e,n,r,o)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function uT(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var o=n.logicalShape,i=e[r],a=i.shape;if(!Jt(o,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+a+" must match");if(!n.isUniform||!i.isUniform){var s=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!Jt(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var zre=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,o=n.inChannels,i=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,h=s.left,f=s.top,p=o*r,v=Hn(),y=d==="channelsLast",m=y?0:1,g=y?1:2,x="",w=0;w<=1;w++)for(var b=0;b<=1;b++)x+=`
          blockIndex = rc.y + `+b+`;
          pos = rc.x + `+w+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+a+" - "+f+`;
            d0 = offsetY + `+c+" * (pos / "+p+`);

            if(d0 < `+e[m]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+i+". - "+h+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+o+`.));

              if(d1 < `+e[g]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+y+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*w+b)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*w+b)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+x+`

        `+v.output+` = result;
      }
    `},Wre=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var i,a=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";i=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},Vre=function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},jre=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,a=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";i=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},Hre=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,i=t.effectiveFilterWidth,a=o-1-t.padInfo.top,s=i-1-t.padInfo.left,u=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},qre=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.dilationDepth,i=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=s-1-t.padInfo.front,d=u-1-t.padInfo.top,h=l-1-t.padInfo.left,f=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+d+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+f+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},C0=function(t,e,n,r,o,i,a){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),i===void 0&&(i=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",p="";i&&(f=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,p="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+f+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+h[0]+`);
          result += (`+d[1]+" * "+h[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+v+`

        `+p+`

        setOutput(result);
      }
    `},Gre=function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t}(),Kre=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},Xre=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=mr("rc",e),r=bt(e),o=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",d=s-2;d<s;d++)c+=l[d]+" >= "+u[d],d<s-1&&(c+="||");return c}(e,t,n),i=function(s,u,l,c){if(s===1)return"";var d=c.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(e,t[t.length-1],t[t.length-2],n),a=function(s,u){var l=s.length,c=function(d,h){for(var f=[],p=0;p<=1;p++)for(var v=0;v<=1;v++){for(var y=(p===0?"r":"rp1")+", "+(v===0?"c":"cp1"),m=2;m<d;m++)y=h[h.length-1-m]+","+y;f.push(y)}return f}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},Yre=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,o=bt(r),i=e.map(function(u){return u[0]}).join(","),a=e.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+i+`);
      `+o+" end = "+o+"("+a+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},Qre=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(y,m){return y[0]+t[m]+y[1]});for(var r=t.length,o=bt(r),i=e.map(function(y){return y[0]}).join(","),a=e.map(function(y,m){return y[0]+t[m]}).join(","),s=mr("rc",r),u=mr("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",d=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",p=0,v=r===1?2:4;p<v;p++)f+=`
        `+d[p]+`
        if (`+h+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;f+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+i+`);
      const `+o+" end = "+o+"("+a+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+f+`
        setOutput(result);
      }
    `},_0=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;var h=e==="avg",f="0.0";if(h||(f="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+i+`);
        const ivec2 pads = ivec2(`+c+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(p="avgValue / count");var v=4*Math.floor(r/4),y=r%4,m=`
      if (`+h+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+i+`);
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float initializationValue = `+f+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+f+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+m+`
          }

          int xC = xCCorner + `+v+`;
          if (`+(y===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+m+`
          } else if (`+(y===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+m+`
          } else if (`+(y===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+m+`
          }
        }
        setOutput(`+p+`);
      }
    `}},S0=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,o=t.strideDepth,i=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,p=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var y=e==="avg",m="0.0";if(y||(m="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+i+", "+a+`);
        const ivec3 pads = ivec3(`+f+", "+p+", "+v+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+h+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+d+" * "+h+` +
                      wR * `+h+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var g=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(g="avgValue / count");var x=4*Math.floor(r/4),w=r%4,b=`
      if (`+y+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+i+", "+a+`);
      const ivec3 pads = ivec3(`+f+", "+p+", "+v+`);
      const float initializationValue = `+m+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+m+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+x+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+b+`
            }

            int xC = xCCorner + `+x+`;
            if (`+(w===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+b+`
            } else if (`+(w===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+b+`
            } else if (`+(w===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+b+`
            }
          }
          setOutput(`+g+`);
        }
      }
    `}},Jre=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",s="min"):e==="max"&&(a="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,h="vec4";e==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");var f="";o%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+f+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===2)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===3)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+u+`);
      }
    `},Zre=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+us(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+L2(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},eoe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],h=l[1]/c[1],f=1/d,p=1/h,v=2*Math.ceil(f)+2,y=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+f+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},toe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],i=t[1],a=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?i-1:i,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},noe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[0],i=t[1],a=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?i-1:i,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},roe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],i=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],h=l[1]/c[1],f=1/d,p=1/h,v=2*Math.ceil(f)+2,y=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+f+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},ooe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],i=t[1],a=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?i-1:i,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},ioe=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(i,a){return function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),o=bt(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},aoe=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=mr("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],a=bt(n);function s(u){var l=t.map(function(c,d){return function(h,f){return e.indexOf(h)!==-1&&t[h]!==1?t[h]+" - "+f[h]+" - 1":""+f[h]}(d,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+o+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+o+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},lT=function(t,e,n,r,o,i,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=bt(o.length),u=bt(i.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var h="getUpdates("+d+")",f=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+f+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+h+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},soe=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,i=t.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";o%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},uoe=function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<e.length;u++)s.push(""+i[u]),u<t&&a.push(""+i[u]);r=a.join(),o=s.join()}var l=bt(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},loe=function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=bt(this.rank),o="uniform int start["+this.rank+"];",i=function(a){if(a===1)return"sourceLoc";if(a<=6)return k0.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(a,s){return"sourceLoc."+k0[s]+" = start["+s+"] + coords."+k0[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+i+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),k0=["x","y","z","w","u","v"],coe=function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=bt(this.rank),r=mr("coords",this.rank),o=mr("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",a="getChannel(getSource("+o.join()+"), "+i+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+a+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(c,d){return"start["+d+"]"}).join()+");":e.map(function(c,d){return o[d]+" = "+r[d]+" + start["+d+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),doe=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=bt(n.length),i=bt(n.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=n.map(function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+t+`);
      `+o+" strides = "+o+"("+e+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},hoe=function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var o,i=cT(n,r),a=dT(e,i,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),i===Ar.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===Ar.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===Ar.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===Ar.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===Ar.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),o},t.prototype.releaseTexture=function(e,n,r,o){if(this.freeTextures!=null){var i=dT(n,cT(r,o),o);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[i],s=a.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){e.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function cT(t,e){if(t===Nr.UPLOAD)return Ar.PACKED_2X2_FLOAT32;if(t===Nr.RENDER||t==null)return function(n){return K().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Ar.PACKED_2X2_FLOAT32:Ar.UNPACKED_FLOAT32:n?Ar.PACKED_2X2_FLOAT16:Ar.UNPACKED_FLOAT16}(e);if(t===Nr.DOWNLOAD||t===Nr.PIXELS)return Ar.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function dT(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var foe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=bt(this.rank),i=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<a.length;c++)l.push("imod("+u[c]+", "+a[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},poe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=bt(this.rank),i=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<a.length;c++)l[a[c]]=u[c];return l.join()}(e);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},moe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=bt(this.rank),i=iF("rc",this.rank),a=new Array(this.rank);for(r=0;r<e.length;r++)a[e[r]]=i[r];var s="vec2("+a.slice(-2).join()+")",u="++"+i[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},B2=1.7580993408473768,U2=1.0507009873554805,We=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Po="if (isnan(x)) return x;",voe="return x;",hT="return abs(x);",IF=Po+`
  return (x < 0.0) ? 0.0 : x;
`,TF=Po+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,RF="return (x >= 0.0) ? x : (exp(x) - 1.0);",goe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+B2+`;
  float scale = `+U2+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,fT="return -x;",pT="return ceil(x);",mT="return floor(x);",vT="return exp(x);",gT="return exp(x) - 1.0;",yoe=Po+`
  return sin(x);
`,xoe=Po+`
  return cos(x);
`,woe=Po+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,boe=Po+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Eoe=Po+`
  return atan(x);
`,Coe=Po+"return log(x + sqrt(x * x + 1.0));",_oe=Po+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Soe=Po+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,rp="return x;",koe="return x;",AF=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,NF=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PF=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Pc=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Ioe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=mr("rc",e),r=bt(e),o=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(e,n),i=n.slice(-2),a=e<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},op={};function ip(t,e){if(e===void 0&&(e=!1),t==="linear")return e?koe:voe;if(t==="relu")return e?AF:IF;if(t==="elu")return e?PF:RF;if(t==="relu6")return e?NF:TF;if(t==="prelu")return e?lF:uF;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Toe=600,DF=function(t){function e(n){var r,o=t.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!K().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var i=si(K().getNumber("WEBGL_VERSION"));o.binaryCache=((r=K().getNumber("WEBGL_VERSION"))in op||(op[r]={}),op[r]),o.gpgpu=new kF(i),o.canvas=i.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new hoe(o.gpgpu),o.numMBBeforeWarning=K().global.screen==null?1024:K().global.screen.height*K().global.screen.width*window.devicePixelRatio*Toe/1024/1024,o.texData=new Z3(o,V),o}return Ro(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,o){if(K().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:o,values:n,usage:Nr.UPLOAD}),i},e.prototype.move=function(n,r,o,i){if(K().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:i,values:r,usage:Nr.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),o=r.values,i=r.dtype,a=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new Pc(u,rp):new We(u,rp);var d=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:i}],i),h=this.readSync(d.dataId);return this.disposeData(d.dataId),h}if(o!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return o;var f,p,v=this.activeTimers!=null;return v&&(f=mo()),i==="complex64"?p=nw(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(n),v&&(this.downloadWaitMs+=mo()-f),this.convertAndCacheOnCPU(n,p)},e.prototype.read=function(n){return be(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,d,h,f,p,v,y,m,g,x,w,b,C,E,S;return Ee(this,function(k){switch(k.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(_){return r.push(_)})];if(o=this.texData.get(n),i=o.values,a=o.shape,s=o.slice,u=o.dtype,l=o.complexTensors,c=o.isPacked,s!=null)return d=void 0,d=c?new Pc(a,rp):new We(a,rp),h=this.runWebGLProgram(d,[{dataId:n,shape:a,dtype:u}],u),f=this.read(h.dataId),this.disposeData(h.dataId),[2,f];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(!K().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&K().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&K().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(n),y=this.texData.get(v.dataId),p=(S=this.gpgpu).createBufferFromTexture.apply(S,[y.texture].concat(md(a)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return g=k.sent(),x=g[0],w=g[1],m=nw(x,w),[3,5];case 4:p==null?m=this.getValuesFromTexture(n):(b=_e(a),m=this.gpgpu.downloadFloat32MatrixFromBuffer(p,b)),k.label=5;case 5:return v!=null&&this.disposeData(v.dataId),C=this.convertAndCacheOnCPU(n,m),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(_){return _(C)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,C]}})})},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var o=n[r];if(!f3(o))throw K().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,o=this.texData.get(n),i=o.shape,a=o.dtype,s=o.isPacked,u=_e(i);if(K().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(md(i))).subarray(0,u);return this.disposeData(l.dataId),d}var h=K().getBool("WEBGL_PACK")&&s===!0,f=h?qp(i):i,p=h?new Pre(f):new Nre(f),v=this.runWebGLProgram(p,[{shape:f,dtype:a,dataId:n}],"float32"),y=this.texData.get(v.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,u);return this.disposeData(v.dataId),m},e.prototype.time=function(n){return be(this,void 0,void 0,function(){var r,o,i,a,s,u,l;return Ee(this,function(c){switch(c.label){case 0:return r=this.activeTimers,o=[],i=!1,this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,n(),a=Oi(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),s=Oi(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return l=c.sent(),u.kernelMs=QM(l),u.getExtraProfileInfo=function(){return l.map(function(d,h){return{name:s[h],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:mo(),endMs:null}},e.prototype.endTimer=function(n){return K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=mo(),n)},e.prototype.getQueryTime=function(n){return be(this,void 0,void 0,function(){var r;return Ee(this,function(o){return K().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),o=r.texture,i=r.dtype,a=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(a,i),this.textureManager.releaseTexture(o,a,s,u)));var h=this.texData.get(n);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return K().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=V.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(i){return o.texData.get(i.dataId).texture==null&&i.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:V.keep(n.clone()),imag:V.keep(r.clone())},o},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,o);if(_e(o)===0)return kn([],o,n.dtype);var i=this.texData.get(n.dataId).isPacked,a=A2(n.shape,r,o);if(i||!a){var s=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new coe(o):new loe(o),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,o)},e.prototype.shallowSlice=function(n,r,o){var i=this.texData.get(n.dataId),a=this.makeOutput(o,n.dtype),s=this.texData.get(a.dataId);Object.assign(s,i),s.shape=o,s.dtype=n.dtype;var u=N2(r,n.strides);i.slice&&(u+=i.slice.flatOffset),s.slice={flatOffset:u,origDataId:i.slice&&i.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},e.prototype.stridedSlice=function(n,r,o,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,o,i);var a=Gg(r,o,i);if(a.some(function(u){return u===0}))return kn([],a);var s=new doe(r,i,a);return this.compileAndRun(s,[n])},e.prototype.reverse=function(n,r){var o=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aoe(n.shape,r):new ioe(n.shape,r);return this.compileAndRun(o,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var o=n.map(function(f){return Xr(f)}),i=n.map(function(f){return Vo(f)});return Cn(this.concat(o,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>K().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(n.length/2),s=this.concat(n.slice(0,a),r),u=this.concat(n.slice(a),r);return this.concat([s,u],r)}if(K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new gre(n.map(function(f){return f.shape}),r);return this.compileAndRun(l,n)}var c=Fs(n.map(function(f){return f.shape}),r),d=n.map(function(f){return f.as2D(-1,_e(f.shape.slice(r)))}),h=new vre(d.map(function(f){return f.shape}));return this.compileAndRun(h,d).reshape(c)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,fT,n.dtype);var r=new We(n.shape,fT);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,o,i){var a=o?n.shape[2]:n.shape[1],s=i?r.shape[1]:r.shape[2],u=o?n.shape[1]:n.shape[2],l=n.shape[0];if((a===1||s===1)&&u>1e3){o&&(n=n.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),d=s===1?2:1,h=s===1?r.as3D(l,1,u):r;return this.multiply(c,h).sum(d,!0)}var f=mn(n.dtype,r.dtype),p=new C0(n.shape,[l,a,s],o,i);return this.compileAndRun(p,[n,r],f)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,i=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=i?r.shape[2]:r.shape[1],d=a?o.shape[1]:o.shape[2],h=r.shape[0],f=mn(r.dtype,o.dtype),p=s!=null,v=l!=null,y=u?ip(u,!0):null,m=new C0(r.shape,[h,c,d],i,a,p,y,v),g=[r,o];return s&&g.push(s),l&&g.push(l),this.compileAndRun(m,g,f)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),i=this.texData.get(r.dataId),a=new tT(dre,n.shape,r.shape),s=new tT(hre,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],l=this.compileAndRun(a,u),c=this.compileAndRun(s,u),d=this.complex(l,c);return l.dispose(),c.dispose(),d}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,nT,n.dtype);var h=new Vt(nT,n.shape,r.shape);return this.compileAndRun(h,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,o,i,a,s){var u=[n,r,o],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(a!=null&&(c=a.shape,u.push(a)),K().getBool("WEBGL_PACK_NORMALIZATION")){var d=new cre(n.shape,r.shape,o.shape,l,c,i);return this.compileAndRun(d,u)}var h=new lre(n.shape,r.shape,o.shape,l,c,i);return this.compileAndRun(h,u)},e.prototype.localResponseNormalization4D=function(n,r,o,i,a){var s=K().getBool("WEBGL_PACK_NORMALIZATION")?new jre(n.shape,r,o,i,a):new Wre(n.shape,r,o,i,a);return this.compileAndRun(s,[n])},e.prototype.LRNGrad=function(n,r,o,i,a,s,u){var l=new Vre(r.shape,i,a,s,u);return this.compileAndRun(l,[r,o,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var o=this.readSync(n.dataId).map(function(a){return ih(a)});return rF(Be(n.shape,n.dtype,o),r)}var i=new foe(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.pad=function(n,r,o){var i=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Qre(n.shape,r,o):new Yre(n.shape,r,o);return this.compileAndRun(i,[n])},e.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var o=K().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new moe(n.shape,r):new poe(n.shape,r);return this.compileAndRun(o,[n])},e.prototype.gather=function(n,r,o){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,o);var i=new Lre(n.shape,r.size,o);return this.compileAndRun(i,[n,r])},e.prototype.batchToSpaceND=function(n,r,o){P(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(d,h){return d*h}),a=av(n.shape,r,i),s=sv(a.length,r.length),u=uv(n.shape,r,i),l=q3(o,r.length),c=G3(u,o,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,o){P(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(h,f){return h*f}),a=[[0,0]];a.push.apply(a,o);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=av(u.shape,r,i,!1),c=sv(l.length,r.length,!1),d=uv(u.shape,r,i,!1);return u.reshape(l).transpose(c).reshape(d)},e.prototype.reduce=function(n,r,o){var i=n.shape[0],a=n.shape[1],s=Gp(a),u=new Jre({windowSize:s,inSize:a,batchSize:i},r),l=this.compileAndRun(u,[n],o);return l.shape[1]===1?l:this.reduce(l,r,o)},e.prototype.argReduce=function(n,r,o){o===void 0&&(o=null);var i=n.shape[0],a=n.shape[1];o!=null&&(i=o.shape[0],a=o.shape[1]);var s=Gp(a),u=new ere({windowSize:s,inSize:a,batchSize:i},r,o==null),l=[n];o!=null&&l.push(o);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},e.prototype.argReducePacked=function(n,r,o){o===void 0&&(o=null);var i=o!=null?o.shape:n.shape,a=Gp(i[i.length-1]),s=new are(i,a,r,o==null),u=o==null?[n]:[n,o],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){cr("sum",r,n.rank);var o=Sn(n.shape,r),i=o[0],a=_e(o[1]),s=n.as2D(-1,a),u=y0(n.dtype);return this.reduce(s,"sum",u).reshape(i)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var o=Sn(n.shape,r),i=o[0],a=_e(o[1]),s=n.as2D(-1,a),u=y0(n.dtype);return this.reduce(s,"prod",u).reshape(i)},e.prototype.unsortedSegmentSum=function(n,r,o){var i=0,a=Ao([i],n.rank),s=n;a!=null&&(s=n.transpose(a),i=No(1,n.rank)[0]);var u=function(f,p,v){for(var y=[],m=f.length,g=0;g<m;g++)g!==p?y.push(f[g]):y.push(v);return y}(s.shape,i,o),l=_e([s.shape[i]]),c=s.as2D(-1,l),d=y0(n.dtype),h=this.segOpCompute(c,"unsortedSegmentSum",r,d,o).reshape(u);return a!=null&&(h=h.transpose(Hg(a))),h},e.prototype.segOpCompute=function(n,r,o,i,a){var s=n.shape[0],u=n.shape[1],l=function(h,f){var p,v=!1;for(h<=R2?(p=h,v=!0):p=nv(h,Math.floor(Math.sqrt(h)));!v;)p>f||p===h?v=!0:p=nv(h,p+1);return p}(u,a),c=new soe({windowSize:l,inSize:u,batchSize:s,numSegments:a},r),d=this.compileAndRun(c,[n,o],i);return d.shape[1]===a?d:(o=iv(0,a).tile([u/l]),this.segOpCompute(d,r,o,i,a))},e.prototype.argMinMaxReduce=function(n,r,o){var i=[r];if(cr("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,n.rank),!K().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var a=Sn(n.shape,i),s=a[0],u=_e(a[1]),l=n.as2D(-1,u);return this.argReduce(l,o).reshape(s)}return this.argReducePacked(n,o)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,o,i){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var a=new kre(n.shape,o,i);return this.compileAndRun(a,[n])},e.prototype.equal=function(n,r){if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var o=new Vt("return float(a == b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new Vt("return float(a != b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new Vt("return float(a < b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new Vt("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new Vt("return float(a > b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new Vt("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new We(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new Vt("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new Vt("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},e.prototype.select=function(n,r,o){var i=new uoe(n.rank,r.shape,r.rank);return this.compileAndRun(i,[n,r,o],mn(r.dtype,o.dtype))},e.prototype.where=function(n){rv("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return $2(n.shape,r)},e.prototype.topk=function(n,r,o){return oF(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){cr("min",r,n.rank);var o=Sn(n.shape,r),i=o[0],a=_e(o[1]),s=n.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(i)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var o=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hi(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Vt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.mod=function(n,r){var o=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hi(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Vt(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);cr("max",r,n.rank);var o=Sn(n.shape,r),i=o[0],a=_e(o[1]),s=n.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(i)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var o=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hi(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Vt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.all=function(n,r){cr("all",r,n.rank);var o=Sn(n.shape,r),i=o[0],a=_e(o[1]),s=n.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(i)},e.prototype.any=function(n,r){cr("any",r,n.rank);var o=Sn(n.shape,r),i=o[0],a=_e(o[1]),s=n.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(i)},e.prototype.realDivide=function(n,r){if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var o=new Vt(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"float32")},e.prototype.floorDiv=function(n,r){if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new Vt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,b0);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var o=mn(n.dtype,r.dtype);if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,b0,o);var i=new Vt(b0,n.shape,r.shape);return this.compileAndRun(i,[n,r],o)},e.prototype.packedUnaryOp=function(n,r,o){var i=new Pc(n.shape,r);return this.compileAndRun(i,[n],o)},e.prototype.packedBinaryOp=function(n,r,o,i,a){a===void 0&&(a=!1);var s=new hi(o,n.shape,r.shape,a);return this.compileAndRun(s,[n,r],i)},e.prototype.complexSeparableBinaryOp=function(n,r,o){var i=this,a=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(h){var f=h[0],p=h[1],v=i.makeComplexComponentTensorInfo(n,f),y=i.makeComplexComponentTensorInfo(r,p),m=new Vt(o,n.shape,r.shape);return i.compileAndRun(m,[v,y],mn(f.dtype,p.dtype))}),l=u[0],c=u[1],d=this.complex(l,c);return l.dispose(),c.dispose(),d},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>K().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),o=this.addN(n.slice(0,r)),i=this.addN(n.slice(r));return this.addN([o,i])}var a=n.map(function(l){return l.dtype}).reduce(function(l,c){return mn(l,c)}),s=n.map(function(l){return l.shape}),u=K().getBool("WEBGL_PACK")?new Zne(n[0].shape,s):new Jne(n[0].shape,s);return this.compileAndRun(u,n,a)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,E0);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var o=mn(n.dtype,r.dtype);if(K().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,E0,n.dtype);var i=new Vt(E0,n.shape,r.shape);return this.compileAndRun(i,[n,r],o)},e.prototype.pow=function(n,r){var o=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hi(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Vt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),i=mn(n.dtype,r.dtype);return this.compileAndRun(o,[n,r],i)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,pT,n.dtype);var r=new We(n.shape,pT);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,mT,n.dtype);var r=new We(n.shape,mT);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new We(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new We(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new We(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new We(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new We(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,vT,n.dtype);var r=new We(n.shape,vT);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,gT,n.dtype);var r=new We(n.shape,gT);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var o=tn([r],n.shape),i=this.max(n,o),a=or(i.shape,o),s=this.subtract(n,i.reshape(a)),u=this.exp(s),l=this.sum(u,o).reshape(a);return this.realDivide(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new We(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new We(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new We(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new We(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new We(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=K().getBool("WEBGL_PACK")?new Pc(n.shape,AF):new We(n.shape,IF),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=K().getBool("WEBGL_PACK")?new Pc(n.shape,NF):new We(n.shape,TF),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var o=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hi(lF,n.shape,r.shape):new Vt(uF,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.elu=function(n){if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,PF,n.dtype);var r=new We(n.shape,RF);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var o=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hi(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new Vt("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.selu=function(n){var r=new We(n.shape,goe);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new We(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,o){var i,a=(i=K().getBool("WEBGL_PACK_CLIP")?new pre(n.shape):new fre(n.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(i,[n],null,a)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(K().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,hT,n.dtype);var r=new We(n.shape,hT);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),o=new mre(n.shape),i=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(o,i)},e.prototype.sigmoid=function(n){var r=new We(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new We(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new We(n.shape,yoe);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new We(n.shape,xoe);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new We(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new We(n.shape,woe);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new We(n.shape,boe);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new We(n.shape,Eoe);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var o=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hi(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Vt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},e.prototype.sinh=function(n){var r=new We(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new We(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new We(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new We(n.shape,Coe);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new We(n.shape,_oe);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new We(n.shape,Soe);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new We(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var o=new We(n.shape,function(i){return i===void 0&&(i=0),Po+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(o,[n])},e.prototype.conv2dByMatMul=function(n,r,o,i,a,s){var u=n.shape,l=this.texData.get(n.dataId),c=o.inChannels,d=u[0]*u[1]*u[2],h=o.outChannels,f=o.dataFormat==="channelsLast",p=(d===1||h===1)&&c>1e3,v=u[2]%2!=0&&!!l.isPacked;if(p||!K().getBool("WEBGL_LAZILY_UNPACK")||!K().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!v){var y=f?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],m=this.reshape(n,[1,y,o.inChannels]),g=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s}),o.outShape)}var x=f?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),w={dataId:n.dataId,shape:[1,x,o.inChannels],dtype:n.dtype},b=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,P(Gc(l.shape,w.shape),function(){return"packed reshape "+l.shape+" to "+w.shape+" isn't free"});var C=this.reshape(r,[1,o.inChannels,o.outChannels]),E=this.fusedBatchMatMul({a:w,b:C,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s}),S=this.texData.get(E.dataId);return P(S.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=b,S.shape=o.outShape,V.makeTensorFromDataId(E.dataId,o.outShape,E.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,o,i,a,s){var u=o.filterWidth,l=o.filterHeight,c=o.inChannels,d=o.outWidth,h=o.outHeight,f=o.dataFormat==="channelsLast",p=u*l*c,v=h*d,y=[p,v],m=n.squeeze([0]),g=r.reshape([1,p,-1]),x=new zre(y,m.shape,o),w=this.compileAndRun(x,[m]).reshape([1,y[0],y[1]]),b=i!=null,C=s!=null,E=a?ip(a,!0):null,S=new C0(w.shape,[1,v,o.outChannels],!0,!1,b,E,C),k=[w,g];i&&k.push(i),C&&k.push(s);var _=this.compileAndRun(S,k);return f?_.reshape([1,h,d,o.outChannels]):_.reshape([1,o.outChannels,h,d])},e.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,i,a,s,u);if(K().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,i,a,s,u);var l=a!=null,c=u!=null,d=s?ip(s,!1):null,h=new rT(i,l,d,c),f=[r,o];return a&&f.push(a),u&&f.push(u),this.compileAndRun(h,f)},e.prototype.conv2d=function(n,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,o);if(K().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,o);var i=new rT(o);return this.compileAndRun(i,[n,r])},e.prototype.conv2dDerInput=function(n,r,o){var i=new xre(o);return this.compileAndRun(i,[n,r])},e.prototype.conv2dDerFilter=function(n,r,o){var i=new yre(o);return this.compileAndRun(i,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,o=n.input,i=n.filter,a=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=K().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,d=u?ip(u,c):null,h=[o,i],f=s!=null,p=l!=null;return f&&h.push(s),p&&h.push(l),c?(r=new iT(a,f,d,p),this.compileAndRun(r,h)):(r=new oT(a,f,d,p),this.compileAndRun(r,h))},e.prototype.depthwiseConv2D=function(n,r,o){var i;return K().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(i=new iT(o),this.compileAndRun(i,[n,r])):(i=new oT(o),this.compileAndRun(i,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,o){var i=new Cre(o);return this.compileAndRun(i,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,o){var i=new Ere(o);return this.compileAndRun(i,[n,r])},e.prototype.conv3d=function(n,r,o){var i=new _re(o);return this.compileAndRun(i,[n,r])},e.prototype.conv3dDerInput=function(n,r,o){var i=new bre(o);return this.compileAndRun(i,[n,r])},e.prototype.conv3dDerFilter=function(n,r,o){var i=new wre(o);return this.compileAndRun(i,[n,r])},e.prototype.maxPool=function(n,r){var o=new _0(r,"max",!1);return this.compileAndRun(o,[n])},e.prototype.avgPool=function(n,r){var o=new _0(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,o,i){var a=new _0(i,"max",!0),s=this.compileAndRun(a,[r]),u=new Hre(i),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,o){var i=new sre(o);return this.compileAndRun(i,[n],r.dtype)},e.prototype.cast=function(n,r){return D2(n,r,this)},e.prototype.unstack=function(n,r){for(var o=n.shape[r],i=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(i[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(o);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(i);return c},e.prototype.avgPool3d=function(n,r){var o=new S0(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,o){var i=new ure(o);return this.compileAndRun(i,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var o=new S0(r,"max",!1);return this.compileAndRun(o,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,o,i){var a=new S0(i,"max",!0),s=this.compileAndRun(a,[r]),u=new qre(i),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(n,r){var o=this.texData.get(n.dataId);if(o.isPacked&&!Gc(n.shape,r)&&(o.texture===null||!Gc(o.shape,r))){var i=this.packedReshape(n,r);return V.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return cv(n,r)},e.prototype.resizeBilinear=function(n,r,o,i){var a=K().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new noe(n.shape,r,o,i):new toe(n.shape,r,o,i);return this.compileAndRun(a,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,o){var i=new eoe(n,r,o);return this.compileAndRun(i,[n])},e.prototype.resizeNearestNeighbor=function(n,r,o,i){var a=new ooe(n.shape,r,o,i);return this.compileAndRun(a,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,o){var i=new roe(n,r,o);return this.compileAndRun(i,[n])},e.prototype.multinomial=function(n,r,o,i){var a=r?n:Li(n),s=a.shape[0],u=a.shape[1],l=new Gre(s,u,o),c=l.getCustomSetupFunc(i);return this.compileAndRun(l,[a],"int32",c)},e.prototype.oneHot=function(n,r,o,i){var a=new Kre(n.size,r,o,i);return this.compileAndRun(a,[n])},e.prototype.diag=function(n){var r=new Are(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,o,i,a){return rv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),M2(n.dataSync(),r.dataSync(),o,i,a)},e.prototype.cropAndResize=function(n,r,o,i,a,s){var u=new Sre(n.shape,r.shape,i,a,s);return this.compileAndRun(u,[n,r,o],"float32")},e.prototype.depthToSpace=function(n,r,o){P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=n.shape[0],a=o==="NHWC"?n.shape[1]:n.shape[2],s=o==="NHWC"?n.shape[2]:n.shape[3],u=o==="NHWC"?n.shape[3]:n.shape[1],l=a*r,c=s*r,d=u/(r*r),h=new Rre(o==="NHWC"?[i,l,c,d]:[i,d,l,c],r,o);return this.compileAndRun(h,[n])},e.prototype.split=function(n,r,o){return nF(n,r,o)},e.prototype.scatterND=function(n,r,o){var i=ch(0,n,o),a=i.sliceRank,s=i.numUpdates,u=i.sliceSize,l=i.strides,c=i.outputSize,d=[c/u,u],h=n.reshape([s,a]),f=r.reshape([s,u]);if(c===0)return cv(kn([]),o);var p=le(0),v=new lT(s,a,h.rank,f.rank,l,d);return this.compileAndRun(v,[f,h,p]).reshape(o)},e.prototype.sparseToDense=function(n,r,o,i){var a=ch(0,n,o),s=a.sliceRank,u=a.numUpdates,l=a.strides,c=a.outputSize,d=new lT(u,s,n.rank,r.rank,l,[c,1],!1);return this.compileAndRun(d,[r,n,i]).reshape(o)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var o=this.texData.get(n.dataId),i=new sT(Mre,n.shape,r),a=new sT(Fre,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],u=this.compileAndRun(i,s),l=this.compileAndRun(a,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},e.prototype.gatherND=function(n,r){var o=r.shape,i=o[o.length-1],a=T2(n,r),s=a[0],u=a[1],l=a[2],c=a[3],d=r.reshape([u,i]),h=n.reshape([n.size/l,l]),f=new Bre(i,c,[u,l]);return this.compileAndRun(f,[h,d]).reshape(s)},e.prototype.fill=function(n,r,o){if((o=o||ec(r))==="string"){var i=oh(o,_e(n));return i.fill(r),V.makeTensor(i,n,o,this)}var a=new $re(n,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],o,s)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,o){return O2(n,r,o)},e.prototype.makeTensorInfo=function(n,r){var o=this.write(null,n,r);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var o=this.makeTensorInfo(n,r).dataId;return V.makeTensorFromDataId(o,n,r,this)},e.prototype.unpackTensor=function(n){var r=new Ioe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new Xre(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var o=[uh(n.shape)].concat(lh(n.shape)),i={dtype:n.dtype,shape:o,dataId:n.dataId},a=[uh(r)].concat(lh(r)),s=new Zre(a,o),u=this.runWebGLProgram(s,[i],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,o=this.texData.get(n),i=o.isPacked,a=o.shape,s=o.dtype,u=qp(a);return r=i?new Tre(u):new Ire(u),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,o,i,a){var s=this;a===void 0&&(a=!1);var u=this.makeTensorInfo(n.outputShape,o),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===sh.DENSE){var c=md(n.outputShape);l.texShape=c.map(function(x){return 2*x})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),_e(u.shape)===0)return l.values=Il(u.dtype,0),u;var d=[],h=r.map(function(x){if(x.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var w=s.texData.get(x.dataId);if(w.texture==null){if(!n.packedInputs&&_e(x.shape)<=K().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:x.shape,texData:null,isUniform:!0,uniformValues:w.values};n.packedInputs&&(w.isPacked=!0,w.shape=x.shape)}else if(!!w.isPacked!=!!n.packedInputs)x=w.isPacked?s.unpackTensor(x):s.packTensor(x),d.push(x),w=s.texData.get(x.dataId);else if(w.isPacked&&!Gc(w.shape,x.shape)){var b=x,C=x.shape;x.shape=w.shape,x=s.packedReshape(x,C),d.push(x),w=s.texData.get(x.dataId),b.shape=C}return s.uploadToGPU(x.dataId),{shape:x.shape,texData:w,isUniform:!1}});this.uploadToGPU(u.dataId);var f,p={shape:u.shape,texData:l,isUniform:!1},v=function(x,w,b){var C="";w.concat(b).forEach(function(k){var _=k.texData!=null&&k.texData.slice!=null&&k.texData.slice.flatOffset>0,I=k.isUniform?"uniform":k.texData.texShape;C+=k.shape+"_"+I+"_"+_});var E=x.userCode,S=x.constructor.name;return S+="_"+C+"_"+E}(n,h,p),y=this.getAndSaveBinary(v,function(){return function(x,w,b,C){var E=w.userCode,S=b.map(function(A,L){var z={logicalShape:A.shape,texShape:A.isUniform?null:A.texData.texShape,isUniform:A.isUniform,isPacked:!A.isUniform&&A.texData.isPacked,flatOffset:null};return A.texData!=null&&A.texData.slice!=null&&A.texData.slice.flatOffset>0&&(z.flatOffset=A.texData.slice.flatOffset),{name:w.variableNames[L],shapeInfo:z}}),k=S.map(function(A){return A.shapeInfo}),_={logicalShape:C.shape,texShape:C.texData.texShape,isUniform:!1,isPacked:C.texData.isPacked,flatOffset:null},I=tre(S,_,E,w.packedInputs),N=x.createProgram(I),$=null,M=x.getUniformLocation(N,"NAN",!1);K().getNumber("WEBGL_VERSION")===1&&($=x.getUniformLocation(N,"INFINITY",!1));for(var B={},D=0;D<w.variableNames.length;D++){var U=w.variableNames[D];B[U]=x.getUniformLocation(N,U,!1),B["offset"+U]=x.getUniformLocation(N,"offset"+U,!1)}return{program:w,source:I,webGLProgram:N,uniformLocations:B,inShapeInfos:k,outShapeInfo:_,infLoc:$,nanLoc:M}}(s.gpgpu,n,h,p)}),m=this.activeTimers!=null;if(m&&(f=this.startTimer()),function(x,w,b,C,E){uT(w.inShapeInfos,b),uT([w.outShapeInfo],[C]);var S=C.texData.texture,k=C.texData.texShape;C.texData.isPacked?x.setOutputPackedMatrixTexture(S,k[0],k[1]):x.setOutputMatrixTexture(S,k[0],k[1]),x.setProgram(w.webGLProgram),K().getNumber("WEBGL_VERSION")===1&&w.infLoc!==null&&x.gl.uniform1f(w.infLoc,1/0),w.nanLoc!==null&&x.gl.uniform1f(w.nanLoc,NaN),b.forEach(function(_,I){var N=w.program.variableNames[I],$=w.uniformLocations[N],M=w.uniformLocations["offset"+N];if($!=null)if(_.isUniform)if(_e(_.shape)<2)x.gl.uniform1f($,_.uniformValues[0]);else{var B=_.uniformValues;B instanceof Float32Array||(B=new Float32Array(B)),x.gl.uniform1fv($,B)}else _.texData.slice!=null&&M!=null&&x.gl.uniform1i(M,_.texData.slice.flatOffset),x.setInputMatrixTexture(_.texData.texture,$,I)}),E!=null&&E(x,w.webGLProgram),x.executeProgram()}(this.gpgpu,y,h,p,i),d.forEach(function(x){return s.disposeData(x.dataId)}),m&&(f=this.endTimer(f),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(f)})),!K().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var g=this.unpackTensor(u);return this.disposeData(u.dataId),g}return u},e.prototype.compileAndRun=function(n,r,o,i,a){a===void 0&&(a=!1),o=o||r[0].dtype;var s=this.runWebGLProgram(n,r,o,i,a);return V.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(K().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement!="undefined"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=pe(function(){if(!K().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=K().getBool("DEBUG");K().set("DEBUG",!1);var o=n.abs(le(1e-8)).dataSync()[0];if(K().set("DEBUG",r),o>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,o=this.texData.get(n),i=o.shape,a=o.dtype,s=o.values,u=o.texture,l=o.usage,c=o.isPacked;if(u==null){var d,h=this.activeTimers!=null;h&&(d=mo());var f=o.texShape;if(f==null&&(f=A3(i,c),o.texShape=f),s!=null){var p=qp(i),v=void 0,y=f[1],m=f[0],g=s instanceof Uint8Array;c?(y=(r=cf(f[0],f[1]))[0],m=r[1],v=new Ore(p,[m,y],g)):v=new Dre(p,[m,y],g);var x=this.makeTensorInfo([m,y],a);this.texData.get(x.dataId).usage=g?Nr.PIXELS:Nr.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),y,m,s);var w=this.runWebGLProgram(v,[x],a,null,!0),b=this.texData.get(w.dataId);o.texture=b.texture,o.texShape=b.texShape,o.isPacked=b.isPacked,o.usage=b.usage,this.disposeData(x.dataId),this.texData.delete(w.dataId),o.values=null,h&&(this.uploadWaitMs+=mo()-d)}else{var C=this.acquireTexture(f,l,a,c);o.texture=C}}},e.prototype.convertAndCacheOnCPU=function(n,r){var o=this.texData.get(n),i=o.dtype;return this.releaseGPUData(n),r!=null&&(o.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<u.length;++l)u[l]=Math.round(a[l]);return u}throw new Error("Unknown dtype "+s)}(r,i)),o.values},e.prototype.acquireTexture=function(n,r,o,i){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,i)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*y2(r)},e}(eF);d3()&&V.registerBackend("webgl",function(){return new DF},2);var Roe=W({square_:function(t){var e=R(t,"x","square"),n=[e];return V.runKernelFunc(function(r,o){return o([e]),r.square(e)},{x:e},null,"Square",{},n,[])}}),fh="SquaredDifference",OF=W({squaredDifference_:function(t,e){var n,r=R(t,"a","squaredDifference"),o=R(e,"b","squaredDifference");n=Ot(r,o),r=n[0],o=n[1],qe(r.shape,o.shape);var i={a:r,b:o},a=[r,o];return V.runKernelFunc(function(s,u){var l=s.squaredDifference(r,o);return u([r,o]),l},i,function(s,u){var l=u[0],c=u[1],d=le(2);return{a:function(){return s.mul(l.sub(c).mul(d))},b:function(){return s.mul(c.sub(l).mul(d))}}},fh,{},a,[])}}),Aoe=W({abs_:function(t){var e=R(t,"x","abs");return e.dtype==="complex64"?V.runKernelFunc(function(n){return n.complexAbs(e)},{$x:e}):V.runKernelFunc(function(n,r){var o=n.abs(e);return r([e]),o},{x:e},function(n,r){var o=r[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}},"Abs")}}),Noe=W({acos_:function(t){var e=R(t,"x","acos");return V.runKernelFunc(function(n,r){var o=n.acos(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(le(1).sub(o.toFloat().square()).sqrt()).neg()}}})}}),Poe=W({acosh_:function(t){var e=R(t,"x","acosh");return V.runKernelFunc(function(n,r){var o=n.acosh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}}),Doe=W({asin_:function(t){var e=R(t,"x","asin");return V.runKernelFunc(function(n,r){var o=n.asin(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(le(1).sub(o.toFloat().square()).sqrt())}}})}}),Ooe=W({asinh_:function(t){var e=R(t,"x","asinh");return V.runKernelFunc(function(n,r){var o=n.asinh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(le(1).add(o.toFloat().square()).sqrt())}}})}}),Moe=W({atan_:function(t){var e=R(t,"x","atan");return V.runKernelFunc(function(n,r){var o=n.atan(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}}),Foe=W({atanh_:function(t){var e=R(t,"x","atanh");return V.runKernelFunc(function(n,r){var o=n.atanh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(le(1).sub(o.toFloat().square()))}}})}}),$oe=W({ceil_:function(t){var e=R(t,"x","ceil");return V.runKernelFunc(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return tt(n)}}})}}),z2=W({clipByValue_:function(t,e,n){var r=R(t,"x","clipByValue");P(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var o=[r],i={min:e,max:n};return V.runKernelFunc(function(a,s){var u=a.clip(r,e,n);return s([r]),u},{x:r},function(a,s){var u=s[0];return{x:function(){return a.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),tt(a))}}},"ClipByValue",i,o)}}),Loe=W({cos_:function(t){var e=R(t,"x","cos"),n=[e];return V.runKernelFunc(function(r,o){var i=r.cos(e);return o([e]),i},{x:e},function(r,o){var i=o[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),Boe=W({cosh_:function(t){var e=R(t,"x","cosh");return V.runKernelFunc(function(n,r){var o=n.cosh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}}),Uoe=W({erf_:function(t){var e=R(t,"x","erf");return P(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),V.runKernelFunc(function(n,r){var o=n.erf(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),rw=W({exp_:function(t){var e=R(t,"x","exp");return V.runKernelFunc(function(n,r){var o=n.exp(e);return r([o]),o},{x:e},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),zoe=W({expm1_:function(t){var e=R(t,"x","expm1");return V.runKernelFunc(function(n,r){var o=n.expm1(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}})}}),Woe=W({floor_:function(t){var e=R(t,"x","floor");return V.runKernelFunc(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return tt(n)}}})}}),Voe=W({log_:function(t){var e=R(t,"x","log"),n=[e];return V.runKernelFunc(function(r,o){var i=r.log(e);return o([e]),i},{x:e},function(r,o){var i=o[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},n)}}),joe=W({log1p_:function(t){var e=R(t,"x","log1p");return V.runKernelFunc(function(n,r){var o=n.log1p(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}})}}),Hoe=W({logSigmoid_:function(t){var e=R(t,"x","logSigmoid");return V.runKernelFunc(function(n,r){var o=n.softplus(e.neg()).neg();return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}}),dv=W({neg_:function(t){var e=R(t,"x","neg"),n=[e];return V.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),qoe=W({reciprocal_:function(t){var e=R(t,"x","reciprocal");return V.runKernelFunc(function(n,r){var o=n.reciprocal(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}})}}),Goe=W({round_:function(t){var e=R(t,"x","round");return V.runKernelFunc(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return tt(n)}}})}}),MF=W({rsqrt_:function(t){var e=R(t,"x","rsqrt"),n=[e];return V.runKernelFunc(function(r,o){var i=r.rsqrt(e);return o([e]),i},{x:e},function(r,o){var i=o[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),FF=W({sigmoid_:function(t){var e=R(t,"x","sigmoid");return V.runKernelFunc(function(n,r){var o=n.sigmoid(e);return r([o]),o},{x:e},function(n,r){var o=r[0];return{x:function(){return n.mul(o.mul(le(1).sub(o)))}}},"Sigmoid")}}),Koe=W({sign_:function(t){var e=R(t,"x","sign");return V.runKernelFunc(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return tt(n)}}})}}),Xoe=W({isNaN_:function(t){var e=R(t,"x","isNaN");return V.runKernelFunc(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return tt(n)}}})}}),Yoe=W({isInf_:function(t){var e=R(t,"x","isInf");return V.runKernelFunc(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return tt(n)}}})}}),Qoe=W({isFinite_:function(t){var e=R(t,"x","isFinite");return V.runKernelFunc(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return tt(n)}}})}}),Joe=W({sin_:function(t){var e=R(t,"x","sin"),n=[e];return V.runKernelFunc(function(r,o){var i=r.sin(e);return o([e]),i},{x:e},function(r,o){var i=o[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},n)}}),Zoe=W({sinh_:function(t){var e=R(t,"x","sinh");return V.runKernelFunc(function(n,r){var o=n.sinh(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}}),eie=W({softplus_:function(t){var e=R(t,"x","softplus");return V.runKernelFunc(function(n,r){var o=n.softplus(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}})}}),tie=W({sqrt_:function(t){var e=R(t,"x","sqrt");return V.runKernelFunc(function(n,r){var o=n.sqrt(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}}),nie=W({step_:function(t,e){e===void 0&&(e=0);var n=R(t,"x","step");return V.runKernelFunc(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return tt(r)}}})}}),rie=W({tan_:function(t){var e=R(t,"x","tan");return V.runKernelFunc(function(n,r){var o=n.tan(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}})}}),oie=W({tanh_:function(t){var e=R(t,"x","tanh");return V.runKernelFunc(function(n,r){var o=n.tanh(e);return r([o]),o},{x:e},function(n,r){var o=r[0];return{x:function(){return le(1).sub(o.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function $F(t,e,n,r,o,i){var a,s,u=R(t,"x","batchNorm"),l=R(e,"mean","batchNorm"),c=R(n,"variance","batchNorm");return o!=null&&(a=R(o,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),P(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),P(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),P(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&P(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&P(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),hf(u,l,c,s,a,i)}function LF(t,e,n,r,o,i){var a,s,u=R(t,"x","batchNorm"),l=R(e,"mean","batchNorm"),c=R(n,"variance","batchNorm");return o!=null&&(a=R(o,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),P(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),P(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),P(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&P(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&P(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),hf(u,l,c,s,a,i)}function BF(t,e,n,r,o,i){var a,s,u=R(t,"x","batchNorm"),l=R(e,"mean","batchNorm"),c=R(n,"variance","batchNorm");return o!=null&&(a=R(o,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),P(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),P(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),P(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&P(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&P(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),hf(u,l,c,s,a,i)}function hf(t,e,n,r,o,i){i==null&&(i=.001);var a,s,u,l=R(t,"x","batchNorm"),c=R(e,"mean","batchNorm"),d=R(n,"variance","batchNorm");o!=null&&(a=R(o,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),P(c.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),P(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),P(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,c,d,a];return V.runKernelFunc(function(f,p){var v=f.batchNormalization(u,ap(c),ap(d),i,ap(a),ap(s));return p([l,c,d,a]),v},{x:l,mean:c,variance:d,scale:a,offset:s},function(f,p){var v=p,y=v[0],m=v[1],g=v[2],x=v[3],w=x==null?le(1):x,b=en(m.shape,u.shape),C=[];if(m.rank===1){for(var E=0;E<u.shape.length-1;++E)C.push(u.shape[E]);C.push(1)}var S=y.sub(m),k=f.mul(w),_=MF(g.add(le(i))),I=_.mul(_).mul(_).mul(le(-.5));return{x:function(){return m.rank===1?f.mul(Xu(_.as4D(1,1,1,m.shape[0]),C)).mul(w).reshape(y.shape):f.mul(_).mul(w).reshape(y.shape)},mean:function(){var N=_.mul(le(-1)).mul(k);return m.rank===1&&(N=N.sum(b)),N.reshape(m.shape)},variance:function(){var N=I.mul(S).mul(k);return m.rank===1&&(N=N.sum(b)),N.reshape(m.shape)},scale:function(){var N=S.mul(_),$=f.mul(N);return m.rank===1&&($=$.sum(b)),$.reshape(m.shape)},offset:function(){var N=f;return m.rank===1&&(N=N.sum(b)),N.reshape(m.shape)}}},"BatchNormalization",{varianceEpsilon:i},h).reshape(l.shape)}function ap(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Yg(){$3("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var iie=W({batchNormalization2d_:function(t,e,n,r,o,i){return r===void 0&&(r=.001),Yg(),$F(t,e,n,i,o,r)}}),aie=W({batchNormalization3d_:function(t,e,n,r,o,i){return r===void 0&&(r=.001),Yg(),LF(t,e,n,i,o,r)}}),sie=W({batchNormalization4d_:function(t,e,n,r,o,i){return r===void 0&&(r=.001),Yg(),BF(t,e,n,i,o,r)}}),uie=W({batchNormalization_:function(t,e,n,r,o,i){return r===void 0&&(r=.001),Yg(),hf(t,e,n,i,o,r)}}),UF=W({batchNorm_:hf}),lie=W({batchNorm2d_:$F}),cie=W({batchNorm3d_:LF}),die=W({batchNorm4d_:BF}),Qg=W({logicalAnd_:function(t,e){var n=R(t,"a","logicalAnd","bool"),r=R(e,"b","logicalAnd","bool");return qe(n.shape,r.shape),V.runKernelFunc(function(o){return o.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),hie=W({logicalNot_:function(t){var e=R(t,"x","logicalNot","bool");return V.runKernelFunc(function(n){return n.logicalNot(e)},{$x:e})}}),zF=W({logicalOr_:function(t,e){var n=R(t,"a","logicalOr","bool"),r=R(e,"b","logicalOr","bool");return qe(n.shape,r.shape),V.runKernelFunc(function(o){return o.logicalOr(n,r)},{$a:n,$b:r})}}),fie=W({logicalXor_:function(t,e){var n=R(t,"a","logicalXor","bool"),r=R(e,"b","logicalXor","bool");return qe(n.shape,r.shape),zF(t,e).logicalAnd(Qg(t,e).logicalNot())}}),Ls=W({where_:function(t,e,n){var r=R(e,"a","where"),o=R(n,"b","where"),i=R(t,"condition","where","bool");return ut(r.shape,o.shape,"Error in where: "),i.rank===1?P(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ut(i.shape,o.shape,"Error in where: "),V.runKernelFunc(function(a,s){var u=a.select(i,r,o);return s([i]),u},{$condition:i,$a:r,$b:o},function(a,s){var u=s[0];return{$condition:function(){return tt(u).toFloat()},$a:function(){return a.mul(u.cast(a.dtype))},$b:function(){return a.mul(u.logicalNot().cast(a.dtype))}}})}}),WF=function(t){return be(this,void 0,void 0,function(){var e,n,r;return Ee(this,function(o){switch(o.label){case 0:return[4,(e=R(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=$2(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},He=W({add_:function(t,e){var n,r=R(t,"a","add"),o=R(e,"b","add");n=Ot(r,o),r=n[0],o=n[1];var i=qe(r.shape,o.shape);return V.runKernelFunc(function(a){return a.add(r,o)},{a:r,b:o},function(a){return{a:function(){var s=a,u=en(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=en(o.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(o.shape)}}},"Add")}}),pie=W({addN_:function(t){P(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),P(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(o,i){return R(o,"tensors"+i,"addN")}),n=e[0];e.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(o){if(!Jt(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return V.runKernelFunc(function(o){return o.addN(e)},r,function(o){var i={};return e.forEach(function(a,s){i[s]=function(){return o.clone()}}),i},"AddN")}}),mie=W({addStrict_:function(t,e){var n=R(t,"a","addStrict"),r=R(e,"b","addStrict");return ut(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),vie=W({atan2_:function(t,e){var n,r=R(t,"a","atan2"),o=R(e,"b","atan2");n=Ot(r,o),r=n[0],o=n[1];var i=qe(r.shape,o.shape);return V.runKernelFunc(function(a,s){var u=a.atan2(r,o);return s([r,o]),u},{$a:r,$b:o},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=He(u.square(),l.square()),d=a.mul(l.div(c)),h=en(u.shape,i);return h.length>0&&(d=d.sum(h)),d.reshape(u.shape)},$b:function(){var c=He(u.square(),l.square()),d=dv(a.mul(u.div(c))),h=en(l.shape,i);return h.length>0&&(d=d.sum(h)),d.reshape(l.shape)}}})}}),vo=W({div_:function(t,e){var n,r=R(t,"a","div"),o=R(e,"b","div");if(n=Ot(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return VF(r,o);var i=qe(r.shape,o.shape);return V.runKernelFunc(function(a,s){var u=a.realDivide(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),d=en(u.shape,i);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),d=en(l.shape,i);d.length>0&&(c=c.sum(d).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"Div")}}),gie=W({divNoNan_:function(t,e){var n,r=R(t,"a","div"),o=R(e,"b","div");r=(n=Ot(r,o))[0],o=n[1];var i=vo(r,o),a=tt(i),s=o.equal(a);return Ls(s,a,i)}}),yie=W({divStrict_:function(t,e){var n=R(t,"a","div"),r=R(e,"b","div");return ut(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),VF=W({floorDiv_:function(t,e){var n,r=R(t,"a","floorDiv"),o=R(e,"b","floorDiv");n=Ot(r,o),r=n[0],o=n[1];var i=qe(r.shape,o.shape);return V.runKernelFunc(function(a,s){var u=a.floorDiv(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),d=en(u.shape,i);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),d=en(l.shape,i);d.length>0&&(c=c.sum(d).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"FloorDiv")}}),W2=W({maximum_:function(t,e){var n,r=R(t,"a","maximum"),o=R(e,"b","maximum");return n=Ot(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),qe(r.shape,o.shape),V.runKernelFunc(function(i,a){var s=i.maximum(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return i.mul(s.greaterEqual(u).toFloat())},b:function(){return i.mul(s.less(u).toFloat())}}},"Maximum")}}),xie=W({maximumStrict_:function(t,e){var n=R(t,"a","maximumStrict"),r=R(e,"b","maximumStrict");return ut(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),jF=W({minimum_:function(t,e){var n,r=R(t,"a","minimum"),o=R(e,"b","minimum");return n=Ot(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),qe(r.shape,o.shape),V.runKernelFunc(function(i,a){var s=i.minimum(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return i.mul(s.lessEqual(u).toFloat())},b:function(){return i.mul(s.greater(u).toFloat())}}},"Minimum")}}),wie=W({minimumStrict_:function(t,e){var n=R(t,"a","minimumStrict"),r=R(e,"b","minimumStrict");return ut(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),bie=W({mod_:function(t,e){var n,r=R(t,"a","mod"),o=R(e,"b","mod");n=Ot(r,o),r=n[0],o=n[1];var i=qe(r.shape,o.shape);return V.runKernelFunc(function(a,s){var u=a.mod(r,o);return s([r,o]),u},{$a:r,$b:o},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=en(u.shape,i);return c.length>0?a.sum(c).reshape(u.shape):a},$b:function(){var c=a.mul(u.div(l).floor().neg()),d=en(l.shape,i);return d.length>0?c.sum(d).reshape(l.shape):c}}})}}),Eie=W({modStrict_:function(t,e){var n=R(t,"a","modStrict"),r=R(e,"b","modStrict");return ut(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Gn=W({mul_:function(t,e){var n,r=R(t,"a","mul"),o=R(e,"b","mul");n=Ot(r,o),r=n[0],o=n[1];var i=qe(r.shape,o.shape);return V.runKernelFunc(function(a,s){var u=a.multiply(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.mul(l.toFloat()),d=en(u.shape,i);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),d=en(l.shape,i);return d.length>0?c.sum(d).reshape(l.shape):c}}},"Mul")}}),Cie=W({mulStrict_:function(t,e){var n=R(t,"a","mul"),r=R(e,"b","mul");return ut(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),hv=W({pow_:function(t,e){var n,r=R(t,"base","pow"),o=R(e,"exp","pow");n=Ot(r,o),r=n[0],o=n[1];var i=qe(r.shape,o.shape),a=[r,o];return V.runKernelFunc(function(s,u){var l=s.pow(r,o);return u([r,o,l]),l},{a:r,b:o},function(s,u){var l=u[0],c=u[1],d=u[2];return{a:function(){var h=c.toFloat(),f=s.mul(h.mul(l.pow(h.sub(le(1))))),p=en(l.shape,i);return p.length>0&&(f=f.sum(p)),f.reshape(l.shape)},b:function(){var h=l.greater(0),f=l.log().where(h,tt(l)),p=s.mul(d.mul(f)),v=en(c.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)}}},"Pow",{},a,[!0])}}),_ie=W({powStrict_:function(t,e){return ut(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Sie=W({squaredDifferenceStrict_:function(t,e){var n=R(t,"a","squaredDifferenceStrict"),r=R(e,"b","squaredDifferenceStrict");return ut(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),cn=W({sub_:function(t,e){var n,r=R(t,"a","sub"),o=R(e,"b","sub");n=Ot(r,o),r=n[0],o=n[1];var i=qe(r.shape,o.shape);return V.runKernelFunc(function(a){return a.subtract(r,o)},{a:r,b:o},function(a){return{a:function(){var s=a,u=en(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=en(o.shape,i);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}},"Sub")}}),kie=W({subStrict_:function(t,e){var n=R(t,"a","subStrict"),r=R(e,"b","subStrict");return ut(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),HF=W({equal_:function(t,e){var n,r=R(t,"a","equal"),o=R(e,"b","equal");return n=Ot(r,o),r=n[0],o=n[1],qe(r.shape,o.shape),V.runKernelFunc(function(i){return i.equal(r,o)},{$a:r,$b:o})}}),Iie=W({equalStrict_:function(t,e){var n=R(t,"a","equalStrict"),r=R(e,"b","equalStrict");return ut(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Tie=W({greater_:function(t,e){var n,r=R(t,"a","greater"),o=R(e,"b","greater");return n=Ot(r,o),r=n[0],o=n[1],qe(r.shape,o.shape),V.runKernelFunc(function(i){return i.greater(r,o)},{a:r,b:o},null,"Greater")}}),qF=W({greaterEqual_:function(t,e){var n,r=R(t,"a","greaterEqual"),o=R(e,"b","greaterEqual");return n=Ot(r,o),r=n[0],o=n[1],qe(r.shape,o.shape),V.runKernelFunc(function(i,a){var s=i.greaterEqual(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return tt(s)},b:function(){return tt(u)}}},"GreaterEqual")}}),Rie=W({greaterEqualStrict_:function(t,e){var n=R(t,"a","greaterEqualStrict"),r=R(e,"b","greaterEqualStrict");return ut(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Aie=W({greaterStrict_:function(t,e){var n=R(t,"a","greaterStrict"),r=R(e,"b","greaterStrict");return ut(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Nie=W({less_:function(t,e){var n,r=R(t,"a","less"),o=R(e,"b","less");return n=Ot(r,o),r=n[0],o=n[1],qe(r.shape,o.shape),V.runKernelFunc(function(i){return i.less(r,o)},{a:r,b:o},null,"Less")}}),Pie=W({lessEqual_:function(t,e){var n,r=R(t,"a","lessEqual"),o=R(e,"b","lessEqual");return n=Ot(r,o),r=n[0],o=n[1],qe(r.shape,o.shape),V.runKernelFunc(function(i,a){var s=i.lessEqual(r,o);return a([r,o]),s},{a:r,b:o},null,"LessEqual")}}),Die=W({lessEqualStrict_:function(t,e){var n=R(t,"a","lessEqualStrict"),r=R(e,"b","lessEqualStrict");return ut(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Oie=W({lessStrict_:function(t,e){var n=R(t,"a","lessStrict"),r=R(e,"b","lessStrict");return ut(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Mie=W({notEqual_:function(t,e){var n,r=R(t,"a","notEqual"),o=R(e,"b","notEqual");return n=Ot(r,o),r=n[0],o=n[1],qe(r.shape,o.shape),V.runKernelFunc(function(i){return i.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),Fie=W({notEqualStrict_:function(t,e){var n=R(t,"a","notEqualStrict"),r=R(e,"b","notEqualStrict");return ut(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function yT(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function xT(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var V2=W({gather_:function(t,e,n){n===void 0&&(n=0);var r=R(t,"x","gather"),o=R(e,"indices","gather","int32");n=tn(n,r.shape)[0];var i=function(a,s,u){for(var l=a.shape[u],c=[],d=1,h=1,f=0;f<u;f++)c.push(a.shape[f]),d*=a.shape[f];for(f=0;f<s.rank;f++)c.push(s.shape[f]);for(f=u+1;f<a.rank;f++)c.push(a.shape[f]),h*=a.shape[f];return{batchSize:d,sliceSize:h,dimSize:l,outputShape:c}}(r,o,n);return V.runKernelFunc(function(a,s){var u=a.gather(r,o.flatten(),n);return s([o]),u},{x:r,indices:o},function(a,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,d=l.slice(0,n),h=d.length,f=l.slice(n,l.length).slice(1),p=f.length,v=yT(0,h),y=yT(h+1,h+1+p),m=xT([d,[c],f]),g=a.reshape(m),x=u.reshape([c]),w=xT([[h],v,y]),b=g.transpose(w),C=GF(b,x,r.shape[n]),E=Hg(w);return C=C.transpose(E)},indices:function(){return u}}},"Gather",{axis:n}).reshape(i.outputShape)}}),GF=W({unsortedSegmentSum_:function(t,e,n){var r=R(t,"x","unsortedSegmentSum"),o=R(e,"segmentIds","unsortedSegmentSum","int32");return P(Ut(n),function(){return"numSegments must be of dtype int"}),V.runKernelFunc(function(i,a){var s=i.unsortedSegmentSum(r,o,n);return a([o]),s},{$x:r},function(i,a){var s=a[0];return{$x:function(){return function(u,l){for(var c=W2(l,tt(l)),d=V2(u,c),h=qF(l,le(0,"int32")),f=d.rank-h.rank,p=0;p<f;++p)h=Gr(h,p+1);h=Qg(h,nc(d.shape,"bool"));var v=tt(d);return Ls(h,d,v)}(i,s)}}})}}),$ie=function(t,e,n){return be(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,d,h,f,p,v;return Ee(this,function(y){switch(y.label){case 0:for(r=R(t,"tensor","boolMask"),o=R(e,"mask","boolMask","bool"),i=n==null?0:n,a=o.rank,s=r.shape,P(a>0,function(){return"mask cannot be scalar"}),ut(s.slice(i,i+a),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=i;l<i+a;l++)u*=s[l];return c=s.slice(0,i).concat([u],s.slice(i+a)),d=r.reshape(c),h=o.reshape([-1]),[4,WF(h)];case 1:return f=y.sent(),p=f.squeeze([1]),v=V2(d,p,i),t!==r&&r.dispose(),e!==o&&o.dispose(),p.dispose(),d.dispose(),h.dispose(),f.dispose(),[2,v]}})})};function KF(t,e,n,r,o,i,a){i===void 0&&(i="NHWC"),P(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),P(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),P(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),P(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?u.shape[3]:u.shape[1];P(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),P(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),a!=null&&P(Ut(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var h=Xg(i),f=Va(s,n.shape,r,1,o,a,!1,h),p=V.runKernelFunc(function(v,y){var m=v.conv2dDerInput(u,n,f);return y([n,u]),m},{dy4D:u,filter:n},function(v,y){var m=y[0],g=y[1];return{dy4D:function(){return ao(v,m,r,o,i,1,a)},filter:function(){return j2(v,g,m.shape,r,o,i,a)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function I0(t){var e=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(t),n=e[0],r=e[1],o=e[2];return n===1&&r===1&&o===1}function XF(t,e,n,r,o){P(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var i=t,a=e,s=!1;e.rank===4&&(s=!0,a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),i=[1,t[0],t[1],t[2],t[3]]);var u=i[4],l=a.shape[4];P(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),P(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),P(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),P(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),P(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=hh(i,n.shape,r,1,o),d=V.runKernelFunc(function(h){return h.conv3dDerInput(a,n,c)},{dy5D:a});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var Lie=W({conv1d_:function(t,e,n,r,o,i,a){o===void 0&&(o="NWC"),i===void 0&&(i=1);var s=R(t,"x","conv1d"),u=R(e,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),P(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),P(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),a!=null&&P(Ut(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),P(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),P(ir(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"}),P(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=ao(h,d,[1,n],r,"NHWC",[1,i],a);return c?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),ao=W({conv2d_:function(t,e,n,r,o,i,a){o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]);var s=R(t,"x","conv2d"),u=R(e,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),P(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),a!=null&&P(Ut(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=o==="NHWC"?l.shape[3]:l.shape[1];P(d===u.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."}),P(ir(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"});var h=Xg(o),f=Va(l.shape,u.shape,n,i,r,a,!1,h),p=[u,l],v=V.runKernelFunc(function(y,m){var g=y.conv2d(l,u,f);return m([u,l]),g},{x:l,filter:u},function(y,m){var g=m,x=g[0],w=g[1];return P($s(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return YF(w.shape,y,x,n,r,o)},filter:function(){return j2(w,y,x.shape,n,r,o)}}},"Conv2D",f,p);return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Bie=W({conv3d_:function(t,e,n,r,o,i){o===void 0&&(o="NDHWC"),i===void 0&&(i=[1,1,1]);var a=R(t,"x","conv3d"),s=R(e,"filter","conv3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),P(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),P(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),P(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),P(function(h,f){return I0(h)||I0(f)}(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),P(o==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var c=hh(u.shape,s.shape,n,i,r),d=V.runKernelFunc(function(h,f){var p=h.conv3d(u,s,c);return f([u,s]),p},{x:u,$filter:s},function(h,f){P(I0(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var p=f[0],v=f[1];return{x:function(){return XF(p.shape,h,v,n,r)},$filter:function(){return function(y,m,g,x,w){var b=y;y.rank===4&&(b=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3]));var C=m;C.rank===4&&(C=m.as5D(1,m.shape[0],m.shape[1],m.shape[2],m.shape[3])),P(b.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+b.shape+"."}),P(C.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+C.shape+"."}),P(g.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+g+"."}),P(b.shape[4]===g[3],function(){return"Error in conv3dDerFilter: depth of input "+b.shape[4]+") must match input depth in filter ("+g[3]+"."}),P(C.shape[4]===g[4],function(){return"Error in conv3dDerFilter: depth of dy ("+C.shape[4]+") must match output depth for filter ("+g[4]+")."});var E=hh(b.shape,g,x,1,w);return V.runKernelFunc(function(S){return S.conv3dDerFilter(b,C,E)},{x5D:b,dy5D:C})}(p,h,v.shape,n,r)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),j2=W({conv2dDerFilter_:function(t,e,n,r,o,i,a){i===void 0&&(i="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),P(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),P(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),P(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];P(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),P(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),a!=null&&P(Ut(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var d=Xg(i),h=Va(s.shape,n,r,1,o,a,!1,d);return V.runKernelFunc(function(f){return f.conv2dDerFilter(s,u,h)},{x4D:s,dy4D:u})}}),YF=W({conv2dDerInput_:KF}),Jg=W({depthwiseConv2d_:function(t,e,n,r,o,i,a){i===void 0&&(i=[1,1]);var s=R(t,"x","depthwiseConv2d"),u=R(e,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),P(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),P(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),i==null&&(i=[1,1]),P(ir(n,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),a!=null&&P(Ut(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=Va(l.shape,u.shape,n,i,r,a,!0),h=[l,u],f=V.runKernelFunc(function(p,v){var y=p.depthwiseConv2D(l,u,d);return v([l,u]),y},{x:l,filter:u},function(p,v){P($s(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var y=v[0],m=v[1];return{x:function(){return QF(y.shape,p,m,d)},filter:function(){return JF(y,p,m.shape,d)}}},"DepthwiseConv2dNative",d,h);return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),QF=W({depthwiseConv2dDerInput_:function(t,e,n,r){var o=e,i=!1;e.rank===3&&(i=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=V.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),JF=W({depthwiseConv2dDerFilter_:function(t,e,n,r){var o=t;t.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=e;return i.rank===3&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),V.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}}),H2=W({separableConv2d_:function(t,e,n,r,o,i,a){i===void 0&&(i=[1,1]),a===void 0&&(a="NHWC");var s=R(t,"x","separableConv2d"),u=R(e,"depthwiseFilter","separableConv2d"),l=R(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(s.rank===3&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),P(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),P(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),P(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),P(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var h=u.shape[2],f=u.shape[3];P(l.shape[2]===h*f,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*f+", but got "+l.shape[2]+"."});var p=Jg(c,u,r,o,a,i),v=ao(p,l,1,"valid",a);return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Uie=W({conv2dTranspose_:function(t,e,n,r,o,i){return KF(n,R(t,"x","conv2dTranspose"),R(e,"filter","conv2dTranspose"),r,o,"NHWC",i)}}),zie=W({conv3dTranspose_:function(t,e,n,r,o){return XF(n,R(t,"x","conv3dTranspose"),R(e,"filter","conv3dTranspose"),r,o)}}),Zg=W({matMul_:function(t,e,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=R(t,"a","matMul"),a=R(e,"b","matMul");o=Ot(i,a),i=o[0],a=o[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],l=n?i.shape[i.rank-1]:i.shape[i.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],d=i.shape.slice(0,-2),h=a.shape.slice(0,-2),f=_e(d),p=_e(h);P(i.rank>=2&&a.rank>=2&&i.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."}),P(Jt(d,h),function(){return"Error in matMul: outer dimensions ("+d+") and ("+h+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."}),P(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var v=i.shape.slice(0,-2).concat([l,c]),y=n?i.as3D(f,s,l):i.as3D(f,l,s),m=r?a.as3D(p,c,u):a.as3D(p,u,c),g={transposeA:n,transposeB:r};return V.runKernelFunc(function(x,w){var b=x.batchMatMul(y,m,n,r);return w([y,m]),b},{a:y,b:m},function(x,w){var b=w,C=b[0],E=b[1];return n||r?!n&&r?{a:function(){return x.matMul(E,!1,!1)},b:function(){return x.matMul(C,!0,!1)}}:n&&!r?{a:function(){return E.matMul(x,!1,!0)},b:function(){return C.matMul(x,!1,!1)}}:{a:function(){return E.matMul(x,!0,!0)},b:function(){return x.matMul(C,!0,!0)}}:{a:function(){return x.matMul(E,!1,!0)},b:function(){return C.matMul(x,!0,!1)}}},"BatchMatMul",g).reshape(v)}}),Wie=W({dot_:function(t,e){var n=R(t,"t1","dot"),r=R(e,"t2","dot");P(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];return P(o===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Vie=W({outerProduct_:function(t,e){var n=R(t,"v1","outerProduct"),r=R(e,"v2","outerProduct");return P(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),ff=W({reverse_:function(t,e){var n=R(t,"x","reverse");if(n.rank===0)return n.clone();var r=tn(e,n.shape);return V.runKernelFunc(function(o){return o.reverse(n,r)},{$x:n},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(n)}}),jie=W({reverse1d_:function(t){var e=R(t,"x","reverse");return P(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),ff(e,0)}}),Hie=W({reverse2d_:function(t,e){var n=R(t,"x","reverse");return P(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),ff(n,e)}}),qie=W({reverse3d_:function(t,e){var n=R(t,"x","reverse");return P(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),ff(n,e)}}),Gie=W({reverse4d_:function(t,e){var n=R(t,"x","reverse");return P(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),ff(n,e)}});function ZF(t,e,n,r,o,i){var a=R(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),r==null&&(r=[1,1]),P(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),P(ir(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),i!=null&&P(Ut(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var l=Rl(s.shape,e,n,r,o,i);if(l.filterWidth===1&&l.filterHeight===1&&Jt(l.inShape,l.outShape))return a.clone();var c=[s],d=V.runKernelFunc(function(h,f){var p=h.maxPool(s,l);return f([s,p]),p},{x:s},function(h,f){var p=f[0],v=f[1];return{x:function(){return function(y,m,g,x,w,b,C,E){var S=R(y,"dy","maxPoolBackprop"),k=R(m,"input","maxPoolBackprop"),_=R(g,"output","maxPoolBackprop");P(k.rank===S.rank,function(){return"Rank of input ("+k.rank+") does not match rank of dy ("+S.rank+")"}),b==null&&(b=[1,1]),P(ir(w,b),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+b+"'"}),P(S.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+S.rank+"."}),P(k.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+k.rank+"."}),E!=null&&P(Ut(C),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+C+"."});var I=Rl(k.shape,x,w,b,C,E);return V.runKernelFunc(function(N){return N.maxPoolBackprop(S,k,_,I)},{$dy:S,$input:k})}(h,p,v,e,n,r,o)}}},"MaxPool",l,c);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function e4(t,e,n,r,o,i){var a=R(t,"x","avgPool","float32");r==null&&(r=[1,1]),P(ir(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),i!=null&&P(Ut(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var l=Rl(s.shape,e,n,r,o,i);if(l.filterWidth===1&&l.filterHeight===1&&Jt(l.inShape,l.outShape))return a.clone();var c=V.runKernelFunc(function(d){return d.avgPool(s,l)},{x:s},function(d){return{x:function(){return function(h,f,p,v,y,m){var g=R(h,"dy","avgPoolBackprop"),x=R(f,"input","avgPoolBackprop");P(x.rank===g.rank,function(){return"Rank of input ("+x.rank+") does not match rank of dy ("+g.rank+")"}),y==null&&(y=[1,1]),P(ir(v,y),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+y+"'"});var w=x,b=g,C=!1;x.rank===3&&(C=!0,w=x.as4D(1,x.shape[0],x.shape[1],x.shape[2]),b=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),P(b.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+b.rank+"."}),P(w.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+w.rank+"."});var E=Rl(w.shape,p,v,y,m),S=V.runKernelFunc(function(k){return k.avgPoolBackprop(b,w,E)},{dy4D:b,input4D:w});return C?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}(d,s,e,n,r,o)}}},"AvgPool",l);return c=c.cast(a.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var dn=W({maxPool_:function(t,e,n,r,o){return ZF(t,e,n,1,r,o)}}),pf=W({avgPool_:function(t,e,n,r,o){return e4(t,e,n,1,r,o)}}),Kie=W({pool_:function(t,e,n,r,o,i){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");var a=R(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(ir(i,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"});var l,c=Rl(s.shape,e,i,o,r),d=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(w,b){var C=w.map(function(k,_){return k+(k-1)*(b[_]-1)}).map(function(k){return k-1}),E=C.map(function(k){return Math.floor(k/2)}),S=C.map(function(k,_){return k-E[_]});return C.map(function(k,_){return[E[_],S[_]]})}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var h=d[0]===1&&d[1]===1,f=function(w,b,C){var E=C.map(function(M){return M[0]}),S=C.map(function(M){return M[1]}),k=w.concat(E,S),_=b.map(function(M,B){return(M-k[B]%M)%M}),I=S.map(function(M,B){return M+_[B]}),N=b.map(function(M,B){return[E[B],I[B]]}),$=b.map(function(M,B){return[0,_[B]]});return[N,$]}([c.inHeight,c.inWidth],d,l),p=f[0],v=f[1],y=h?r:"valid",m=h?s:j3(s,d,p),g=(n==="avg"?function(){return e4(m,e,i,1,y)}:function(){return ZF(m,e,i,1,y)})(),x=h?g:z3(g,d,v);return u?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Xie=W({maxPool3d_:function(t,e,n,r,o,i,a){i===void 0&&(i="NDHWC");var s=R(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),P(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),P(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),P(ir(n,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&P(Ut(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=dh(u.shape,e,n,a,r,o,i),d=V.runKernelFunc(function(h,f){var p=h.maxPool3d(u,c);return f([u,p]),p},{x:u},function(h,f){var p=f[0],v=f[1];return{x:function(){return function(y,m,g,x,w,b,C,E){var S=R(y,"dy","maxPool3dBackprop"),k=R(m,"input","maxPool3dBackprop"),_=R(g,"output","maxPool3dBackprop"),I=S,N=k,$=_,M=!1;k.rank===4&&(M=!0,I=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),N=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),$=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),P(I.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+I.rank+"."}),P(N.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+N.rank+"."}),P($.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+$.rank+"."}),b==null&&(b=[1,1,1]),P(ir(w,b),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+b+"'"}),E!=null&&P(Ut(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+C+"."});var B=dh(N.shape,x,w,b,C,E),D=V.runKernelFunc(function(U){return U.maxPool3dBackprop(I,N,$,B)},{dy5D:I,input5D:N});return M?D.as4D(D.shape[1],D.shape[2],D.shape[3],D.shape[4]):D}(h,p,v,e,n,a,r,o)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Yie=W({avgPool3d_:function(t,e,n,r,o,i,a){i===void 0&&(i="NDHWC");var s=R(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),P(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),P(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),P(ir(n,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&P(Ut(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=dh(u.shape,e,n,a,r,o,i),d=V.runKernelFunc(function(h){return h.avgPool3d(u,c)},{x:u},function(h){return{x:function(){return function(f,p,v,y,m,g,x){var w=R(f,"dy","avgPool3dBackprop"),b=R(p,"input","avgPool3dBackprop"),C=w,E=b,S=!1;b.rank===4&&(S=!0,C=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]),E=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3])),P(C.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+C.rank+"."}),P(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),m==null&&(m=[1,1,1]),P(ir(y,m),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+m+"'"}),x!=null&&P(Ut(g),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+x+" but got pad "+g+"."});var k=dh(E.shape,v,y,m,g,x),_=V.runKernelFunc(function(I){return I.avgPool3dBackprop(C,E,k)},{dy5D:C,input5D:E});return S?_.as4D(_.shape[1],_.shape[2],_.shape[3],_.shape[4]):_}(h,u,e,n,a,r,o)}}});return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),ai=W({slice_:function(t,e,n){var r,o,i=R(t,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(i.rank-1).fill(0)):e.length<i.rank?e.concat(new Array(i.rank-e.length).fill(0)):e.slice()).forEach(function(u){P(u!==-1,function(){return"slice() does not support negative begin indexing."})}),o=(o=n==null?new Array(i.rank).fill(-1):typeof n=="number"?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(P(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),i.shape[l]-r[l])}),Y3(i,r,o);var a=i.shape,s={begin:r,size:o};return V.runKernelFunc(function(u){return u.slice(i,r,o)},{x:i},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],a[c]-r[c]-o[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),Qie=W({slice1d_:function(t,e,n){var r=R(t,"x","slice1d");return P(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),ai(r,[e],[n])}}),Jie=W({slice2d_:function(t,e,n){var r=R(t,"x","slice2d");return P(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),ai(r,e,n)}}),t4=W({slice3d_:function(t,e,n){var r=R(t,"x","slice3d");return P(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),ai(r,e,n)}}),Zie=W({slice4d_:function(t,e,n){var r=R(t,"x","slice4d");return P(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),ai(r,e,n)}});function n4(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(or(e.shape,r))),t.rank<n.rank&&(t=t.reshape(or(t.shape,r))),{x:function(){var i=t.mul(n.equal(e).cast(t.dtype));return o==null?i:i.transpose(o)}}}var eae=W({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=R(t,"x","all","bool"),o=tn(e,r.shape),i=o,a=Ao(i,r.rank);a!=null&&(r=r.transpose(a),i=No(i.length,r.rank));var s=V.runKernelFunc(function(l){return l.all(r,i)},{$x:r});if(n){var u=or(s.shape,o);return s.reshape(u)}return s}}),tae=W({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=R(t,"x","any","bool"),o=tn(e,r.shape),i=o,a=Ao(i,r.rank);a!=null&&(r=r.transpose(a),i=No(i.length,r.rank));var s=V.runKernelFunc(function(l){return l.any(r,i)},{$x:r});if(n){var u=or(s.shape,o);return s.reshape(u)}return s}}),nae=W({argMax_:function(t,e){e===void 0&&(e=0);var n=R(t,"x","argMax");e==null&&(e=0);var r=tn(e,n.shape),o=Ao(r,n.rank);o!=null&&(n=n.transpose(o),r=No(r.length,n.rank));var i={axis:r[0]},a=[n];return V.runKernelFunc(function(s,u){var l=s.argMax(n,r[0]);return u([n]),l},{x:n},function(s,u){var l=u[0];return{x:function(){return tt(l)}}},"ArgMax",i,a)}}),rae=W({argMin_:function(t,e){e===void 0&&(e=0);var n=R(t,"x","argMin");e==null&&(e=0);var r=tn(e,n.shape),o=Ao(r,n.rank);return o!=null&&(n=n.transpose(o),r=No(r.length,n.rank)),V.runKernelFunc(function(i,a){var s=i.argMin(n,r[0]);return a([n]),s},{$x:n},function(i,a){var s=a[0];return{$x:function(){return tt(s)}}})}}),oae=W({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=R(t,"x","logSumExp"),o=tn(e,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=or(s.shape,o);return s.reshape(u)}return s}}),ey=W({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=R(t,"x","max"),o=r,i=tn(e,r.shape),a=i,s=Ao(a,r.rank);s!=null&&(r=r.transpose(s),a=No(a.length,r.rank));var u=[r],l=V.runKernelFunc(function(d,h){var f=d.max(r,a);return h([o,f]),f},{x:r},function(d,h){return n4(d,h[1],h[0],i,s)},"Max",{axes:a},u,[!0]);if(n){var c=or(l.shape,i);l=l.reshape(c)}return l}}),iae=W({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=R(t,"x","mean"),o=tn(e,r.shape),i=_e(Sn(r.shape,o)[1]);return Kg(function(a){var s=le(i);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=a.shape.slice();return o.forEach(function(c){l[c]=1}),u.reshape(l).mul(nc(a.shape,"float32")).div(i)}}})(r)}}),aae=W({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=R(t,"x","min"),o=r,i=tn(e,r.shape),a=i,s=Ao(a,r.rank);s!=null&&(r=r.transpose(s),a=No(a.length,r.rank));var u=[r],l=V.runKernelFunc(function(d,h){var f=d.min(r,a);return h([o,f]),f},{x:r},function(d,h){return n4(d,h[1],h[0],i,s)},"Min",{axes:a},u,[!0]);if(n){var c=or(l.shape,i);l=l.reshape(c)}return l}}),sae=W({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=tn(e,(t=R(t,"x","moments")).shape),o=t.mean(r,n),i=o.shape;n||(i=or(o.shape,r));var a=t.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:a.mean(r,n)}}}),r4=W({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=R(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=tn(e,r.shape);return Kg(function(i){var a=Ao(o,i.rank),s=o,u=i;a!=null&&(u=i.transpose(a),s=No(s.length,i.rank));var l=function(f){var p=i.shape.slice();return o.forEach(function(v){p[v]=1}),f.reshape(p).mul(nc(i.shape,"float32"))},c={axes:s},d=V.runKernelFunc(function(f){return f.sum(u,s)},{x:u},function(f){return{x:function(){return l(f)}}},"Sum",c);if(n){var h=or(d.shape,o);d=d.reshape(h)}return{value:d,gradFunc:l}})(r)}}),uae=W({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=R(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=tn(e,r.shape),i=Ao(o,r.rank),a=o,s=r;i!=null&&(s=r.transpose(i),a=No(a.length,r.rank));var u=V.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(n){var l=or(u.shape,o);u=u.reshape(l)}return u}}),o4=W({elu_:function(t){var e=R(t,"x","elu");return V.runKernelFunc(function(n,r){var o=n.elu(e);return r([o]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){return V.runKernelFunc(function(i){return i.eluDer(n,o)},{dy:n,y:o})}}})}}),lae=W({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=R(t,"x","leakyRelu");return W2(le(e).mul(n),n)}}),i4=W({prelu_:function(t,e){var n=R(t,"x","prelu"),r=R(e,"alpha","prelu");return V.runKernelFunc(function(o,i){var a=o.prelu(n,r);return i([n,r]),a},{x:n,alpha:r},function(o,i){var a=i[0],s=i[1],u=a.greater(0);return{x:function(){return Ls(u,o,o.mul(s))},alpha:function(){var l=Ls(u,tt(o),o.mul(a)),c=en(s.shape,o.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),Lt=W({relu_:function(t){var e=R(t,"x","relu");return e.dtype==="bool"?e.toInt():V.runKernelFunc(function(n,r){var o=n.relu(e);return r([e]),o},{x:e},function(n,r){var o=r[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}},"Relu")}}),a4=W({relu6_:function(t){var e=R(t,"x","relu6");return e.dtype==="bool"?e.toInt():V.runKernelFunc(function(n,r){var o=n.relu6(e);return r([e]),o},{x:e},function(n,r){var o=r[0],i=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(i.toFloat())}}},"Relu6")}}),cae=W({selu_:function(t){var e=R(t,"x","selu");return V.runKernelFunc(function(n,r){var o=n.selu(e);return r([e]),o},{$x:e},function(n,r){var o=r[0];return{$x:function(){var i=o.greater(le(0)),a=le(B2),s=le(U2),u=n.mul(s),l=n.mul(a).mul(o.toFloat().exp());return Ls(i,u,l)}}})}}),Aa=W({transpose_:function(t,e){var n=R(t,"x","transpose");if(e==null&&(e=n.shape.map(function(o,i){return i}).reverse()),P(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(o){P(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return V.runKernelFunc(function(o){return o.transpose(n,e)},{x:n},function(o){var i=Hg(e);return{x:function(){return o.transpose(i)}}},"Transpose",r)}}),dae=W({localResponseNormalization_:function(t,e,n,r,o){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var i=R(t,"x","localResponseNormalization");P(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),P(Ut(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var a=i,s=!1;i.rank===3&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=V.runKernelFunc(function(l,c){var d=l.localResponseNormalization4D(a,e,n,r,o);return c([a,d]),d},{x4D:a},function(l,c){var d=c[0],h=c[1];return{x4D:function(){return V.runKernelFunc(function(f){return f.LRNGrad(l,d,h,e,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),s4=W({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(le(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=R(t,"x","norm"),e,n),i=o.shape;if(r){var a=tn(n,t.shape);i=or(o.shape,a)}return o.reshape(i)}}),hae=W({basicLSTMCell_:function(t,e,n,r,o,i){var a=R(t,"forgetBias","basicLSTMCell"),s=R(e,"lstmKernel","basicLSTMCell"),u=R(n,"lstmBias","basicLSTMCell"),l=R(r,"data","basicLSTMCell"),c=R(o,"c","basicLSTMCell"),d=R(i,"h","basicLSTMCell"),h=l.concat(d,1).matMul(s).add(u),f=h.shape[0],p=h.shape[1]/4,v=[f,p],y=h.slice([0,0],v),m=h.slice([0,p],v),g=h.slice([0,2*p],v),x=h.slice([0,3*p],v),w=y.sigmoid().mulStrict(m.tanh()).addStrict(c.mulStrict(a.add(g).sigmoid())),b=w.tanh().mulStrict(x.sigmoid());return[w,b]}}),fae=W({multiRNNCell_:function(t,e,n,r){for(var o=R(e,"data","multiRNNCell"),i=ov(n,"c","multiRNNCell"),a=ov(r,"h","multiRNNCell"),s=o,u=[],l=0;l<t.length;l++){var c=t[l](s,i[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],h=[];for(l=0;l<u.length;l+=2)d.push(u[l]),h.push(u[l+1]);return[d,h]}}),pae=W({movingAverage_:function(t,e,n,r,o){o===void 0&&(o=!0);var i=R(t,"v","movingAverage"),a=R(e,"x","movingAverage"),s=R(n,"decay","movingAverage");c3(i,a),P(Jt(i.shape,a.shape),function(){return"Shape mismatch in v and x"});var u=le(1),l=u.sub(s),c=a.sub(i).mul(l);if(o){P(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=R(r,"step","movingAverage");c=c.div(u.sub(hv(s,d)))}return i.add(c)}}),mae=W({stridedSlice_:function(t,e,n,r,o,i,a,s,u){if(o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=R(t,"x","stridedSlice"),c=ew(s),d=l.shape.slice();c.forEach(function(y){e[y]=0,n[y]=1,d.splice(y,0,1)}),l=l.reshape(d);for(var h=0;h<l.rank;h++)e[h]=Q3(o,e,r,l.shape,h),n[h]=J3(i,n,r,l.shape,h),r[h]=r[h]||1;var f=ew(u);f.forEach(function(y){n[y]=e[y]+1,r[y]=1});var p=Gg(e,n,r),v=p.filter(function(y,m){return f.indexOf(m)===-1});return r.every(function(y){return y===1})?ai(l,e,p).reshape(v):V.runKernelFunc(function(y){return y.stridedSlice(l,e,n,r)},{$x:l}).reshape(v)}}),vae=W({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=R(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var i=V.runKernelFunc(function(a){return a.topk(r,e,n)},{$x:r});return{values:i[0],indices:i[1]}}}),gae=W({scatterND_:function(t,e,n){var r=R(t,"indices","scatterND","int32"),o=R(e,"updates","scatterND");return X3(o,r,n),V.runKernelFunc(function(i){return i.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),q2=W({fft_:function(t){P(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return V.runKernelFunc(function(o){return o.fft(r)},{input:t}).reshape(t.shape)}}),fv=W({ifft_:function(t){P(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return V.runKernelFunc(function(o){return o.ifft(r)},{input:t}).reshape(t.shape)}}),G2=W({rfft_:function(t,e){P(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],o=t.size/r;if(e!=null&&e<r){var i=t.shape.map(function(m){return 0}),a=t.shape.map(function(m){return m});a[t.shape.length-1]=e,n=t.slice(i,a),r=e}else if(e!=null&&e>r){var s=t.shape.map(function(m){return m});s[t.shape.length-1]=e-r,n=t.concat(St(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=Cn(n,u).as2D(o,r),c=q2(l),d=Math.floor(r/2)+1,h=Xr(c),f=Vo(c),p=h.split([d,r-d],h.shape.length-1),v=f.split([d,r-d],f.shape.length-1),y=n.shape.slice();return y[n.shape.length-1]=d,Cn(p[0],v[0]).reshape(y)}}),u4=W({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=fv(r);return Xr(o)}var i=[n,2*(e-1)],a=Xr(t).as2D(n,e),s=Vo(t).as2D(n,e),u=a.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(le(-1)),c=a.concat(u,1),d=s.concat(l,1);return r=Cn(c,d).as2D(i[0],i[1]),o=fv(r),Xr(o)}}),yae=Object.freeze({fft:q2,ifft:fv,rfft:G2,irfft:u4}),xae=W({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var o=R(t,"sparseIndices","sparseToDense","int32"),i=R(e,"sparseValues","sparseToDense"),a=R(r,"defaultValue","sparseToDense",i.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var d=s.rank>0?s.shape[0]:1,h=s.rank>1?s.shape[1]:1;if(l.length!==h)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+h+".");var f=u.size;if(u.rank!==0&&(u.rank!==1||f!==d))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+d+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,a),V.runKernelFunc(function(s){return s.sparseToDense(o,i,n,a)},{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}}),wae=W({gatherND_:function(t,e){var n=R(e,"indices","gatherND","int32"),r=R(t,"x","gatherND");return V.runKernelFunc(function(o){return o.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),bae=W({diag_:function(t){var e=R(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return V.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(n)}}),Eae=W({dropout_:function(t,e,n,r){var o=R(t,"x","dropout");if(P(o.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),P(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof $t?o.clone():o;var i=function(u,l){if(l==null)return u.shape.slice();if(Jt(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],d=0;d<u.shape.length;d++)l[d]==null&&u.shape[d]!=null?c.push(u.shape[d]):c.push(l[d]);return c}return l}(o,n),a=1-e,s=V3(i,0,1,"float32",r).add(a).floor().div(a);return o.mul(s)}});function l4(t,e,n){for(var r=1-t%2,o=new Float32Array(t),i=0;i<t;++i){var a=2*Math.PI*i/(t+r-1);o[i]=e-n*Math.cos(a)}return Yt(o,"float32")}var K2=W({hannWindow_:function(t){return l4(t,.5,.5)}}),c4=W({hammingWindow_:function(t){return l4(t,.54,.46)}}),X2=W({frame_:function(t,e,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var i=0,a=[];i+e<=t.size;)a.push(ai(t,i,e)),i+=n;if(r)for(;i<t.size;){var s=i+e-t.size,u=un([ai(t,i,e-s),Jo([s],o)]);a.push(u),i+=n}return a.length===0?ba([],[0,e]):un(a).as2D(a.length,e)}}),d4=W({stft_:function(t,e,n,r,o){var i;o===void 0&&(o=K2),r==null&&(i=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var a=X2(t,e,n),s=Gn(a,o(e)),u=[],l=0;l<a.shape[0];l++)u.push(G2(s.slice([l,0],[1,e]),r));return un(u)}}),Cae=Object.freeze({hannWindow:K2,hammingWindow:c4,frame:X2,stft:d4}),qn,_ae=function(t,e,n){return n===void 0&&(n=1),be(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,d,h,f,p,v,y;return Ee(this,function(m){switch(m.label){case 0:return r=R(t,"predictions","inTopK"),o=R(e,"targets","inTopK"),P(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),P(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),ut(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],P(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n}),[4,r.data()];case 1:return a=m.sent(),[4,o.data()];case 2:for(s=m.sent(),u=[a.length/i,i],c=u[1],d=Il("bool",l=u[0]),h=0;h<l;h++){for(f=h*c,p=a.subarray(f,f+c),v=[],y=0;y<p.length;y++)v.push({value:p[y],index:y});for(v.sort(function(g,x){return x.value-g.value}),d[h]=0,y=0;y<n;y++)if(v[y].index===s[h]){d[h]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),[2,kn(d,o.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(qn||(qn={}));var Sae=W({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=qn.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","absoluteDifference"),i=R(e,"predictions","absoluteDifference"),a=null;n!=null&&(a=R(n,"weights","absoluteDifference")),ut(o.shape,i.shape,"Error in absoluteDifference: ");var s=o.sub(i).abs();return Bi(s,a,r)}}),Bi=W({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=qn.SUM_BY_NONZERO_WEIGHTS);var r=R(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=R(e,"weights","computeWeightedLoss"));var i=o==null?r:r.mul(o);if(n===qn.NONE)return i;if(n===qn.SUM)return i.sum();if(n===qn.MEAN){if(o==null)return i.mean();var a=r.size/o.size,s=i.sum().div(o.sum());return a>1?s.div(le(a)):s}if(n===qn.SUM_BY_NONZERO_WEIGHTS){if(o==null)return i.sum().div(le(r.size));var u=o.mul(nc(r.shape)).notEqual(le(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),kae=W({cosineDistance_:function(t,e,n,r,o){o===void 0&&(o=qn.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","cosineDistance"),a=R(e,"predictions","cosineDistance"),s=null;r!=null&&(s=R(r,"weights","cosineDistance")),ut(i.shape,a.shape,"Error in cosineDistance: ");var u=le(1).sub(i.mul(a).sum(n,!0));return Bi(u,s,o)}}),Iae=W({hingeLoss_:function(t,e,n,r){r===void 0&&(r=qn.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","hingeLoss"),i=R(e,"predictions","hingeLoss"),a=null;n!=null&&(a=R(n,"weights","hingeLoss")),ut(o.shape,i.shape,"Error in hingeLoss: ");var s=le(1);o=le(2).mul(o).sub(s);var u=s.sub(o.mul(i)).relu();return Bi(u,a,r)}}),Tae=W({huberLoss_:function(t,e,n,r,o){r===void 0&&(r=1),o===void 0&&(o=qn.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","huberLoss"),a=R(e,"predictions","huberLoss"),s=null;n!=null&&(s=R(n,"weights","huberLoss")),ut(i.shape,a.shape,"Error in huberLoss: ");var u=le(r),l=a.sub(i).abs(),c=jF(l,u),d=l.sub(c),h=le(.5).mul(c.square()).add(u.mul(d));return Bi(h,s,o)}}),Rae=W({logLoss_:function(t,e,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=qn.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"labels","logLoss"),a=R(e,"predictions","logLoss"),s=null;n!=null&&(s=R(n,"weights","logLoss")),ut(i.shape,a.shape,"Error in logLoss: ");var u=le(1),l=le(r),c=i.mul(a.add(l).log()).neg().sub(u.sub(i).mul(u.sub(a).add(l).log()));return Bi(c,s,o)}}),Aae=W({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=qn.SUM_BY_NONZERO_WEIGHTS);var o=R(t,"labels","meanSquaredError"),i=R(e,"predictions","meanSquaredError"),a=null;n!=null&&(a=R(n,"weights","meanSquaredError")),ut(o.shape,i.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(i);return Bi(s,a,r)}}),Nae=W({sigmoidCrossEntropy_:function(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=qn.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"multiClassLabels","sigmoidCrossEntropy"),a=R(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=R(n,"weights","sigmoidCrossEntropy")),ut(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=le(r),l=le(1),c=le(.5);i=i.mul(l.sub(u)).add(c.mul(u))}var d=function(h,f){var p=R(h,"labels","sigmoidCrossEntropyWithLogits"),v=R(f,"logits","sigmoidCrossEntropyWithLogits");ut(p.shape,v.shape,"Error in sigmoidCrossEntropyWithLogits: ");var y=v.relu(),m=v.mul(p),g=v.abs().neg().exp().log1p();return y.sub(m).add(g)}(i,a);return Bi(d,s,o)}}),Pae=W({softmaxCrossEntropy_:function(t,e,n,r,o){r===void 0&&(r=0),o===void 0&&(o=qn.SUM_BY_NONZERO_WEIGHTS);var i=R(t,"onehotLabels","softmaxCrossEntropy"),a=R(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=R(n,"weights","softmaxCrossEntropy")),ut(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=le(r),l=le(1),c=le(i.shape[1]);i=i.mul(l.sub(u)).add(u.div(c))}var d=function(h,f,p){if(p===void 0&&(p=-1),p===-1&&(p=f.rank-1),p!==f.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+f.rank+" and dim was "+p);return Kg(function(v,y,m){var g=y.logSumExp([p],!0),x=y.toFloat().sub(g);return m([v,x]),{value:x.mul(v).neg().sum([p]),gradFunc:function(w,b){var C=b[0],E=b[1],S=or(w.shape,[p]);return[w.reshape(S).mul(C.toFloat().sub(E.exp())),w.reshape(S).mul(E.exp().sub(C.toFloat()))]}}})(h,f)}(i,a);return Bi(d,s,o)}}),Dae=Object.freeze({get Reduction(){return qn},absoluteDifference:Sae,computeWeightedLoss:Bi,cosineDistance:kae,hingeLoss:Iae,huberLoss:Tae,logLoss:Rae,meanSquaredError:Aae,sigmoidCrossEntropy:Nae,softmaxCrossEntropy:Pae});function wT(t,e){return e===void 0&&(e=!1),V.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=W3(n),i=t.clone(),a=ba([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(d){var h,f=i,p=s,v=o;h=V.tidy(function(){var y=i.slice([d,d],[n-d,1]),m=y.norm(),g=i.slice([d,d],[1,1]),x=ba([[-1]]).where(g.greater(0),ba([[1]])),w=g.sub(x.mul(m)),b=y.div(w);s=b.shape[0]===1?a.clone():a.concat(b.slice([1,0],[b.shape[0]-1,b.shape[1]]),0);var C=x.matMul(w).div(m).neg(),E=i.slice([d,0],[n-d,r]),S=C.mul(s);if(d===0)i=E.sub(S.matMul(s.transpose().matMul(E)));else{var k=E.sub(S.matMul(s.transpose().matMul(E)));i=i.slice([0,0],[d,r]).concat(k,0)}var _=o.slice([0,d],[n,o.shape[1]-d]);if(d===0)o=_.sub(_.matMul(s).matMul(S.transpose()));else{var I=_.sub(_.matMul(s).matMul(S.transpose()));o=o.slice([0,0],[n,d]).concat(I,1)}return[s,i,o]}),s=h[0],i=h[1],o=h[2],Sr([f,p,v])},c=0;c<u;++c)l(c);return!e&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]})}var Oae=W({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=R(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,i=r.shape.slice(-2),a=i[0],s=i[1];if(!(e<=a))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=a),n<0&&(n=s);var u=iv(0,a,1,"int32").reshape([-1,1]),l=iv(0,s,1,"int32"),c=cn(u,l),d=Qg(c.lessEqual(le(+e,"int32")),c.greaterEqual(le(-n,"int32"))),h=St([a,s],r.dtype);return $r(ln(r.reshape([-1,a,s])).map(function(f){return Ls(d,f,h)})).reshape(o)}}),Mae=W({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,P(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){P(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},o=1;o<t.length;++o)r(o)}else e=!0,t=k2(t,t.shape[0],0).map(function(u){return H3(u,[0])});P(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var i=[],a=t,s=function(u){i.push(V.tidy(function(){var l=a[u];if(u>0)for(var c=0;c<u;++c){var d=r4(i[c].mulStrict(l)).mul(i[c]);l=l.sub(d)}return l.div(s4(l,"euclidean"))}))};for(o=0;o<t.length;++o)s(o);return e?$r(i,0):i}}),Fae=W({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return wT(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(a,s){return a*s}),r=ln(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];return r.forEach(function(a){var s=wT(a,e),u=s[0],l=s[1];o.push(u),i.push(l)}),[$r(o,0).reshape(t.shape),$r(i,0).reshape(t.shape)]}}),$ae=Object.freeze({bandPart:Oae,gramSchmidt:Mae,qr:Fae});function ty(t,e,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);var a=t.shape[0];return n=Math.min(n,a),P(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),P(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),P(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),P(e.rank===1,function(){return"scores must be a 1D tensor"}),P(e.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+e.shape[0]}),P(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}var Lae=W({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=R(t,"images","resizeBilinear");P(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=V.runKernelFunc(function(l,c){return c([o]),l.resizeBilinear(o,a,s,n)},{x:o},function(l,c){return{x:function(){return V.runKernelFunc(function(d){return d.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Bae=W({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=R(t,"images","resizeNearestNeighbor");P(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),P(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=V.runKernelFunc(function(l,c){return c([o]),l.resizeNearestNeighbor(o,a,s,n)},{batchImages:o},function(l,c){return{batchImages:function(){return V.runKernelFunc(function(d){return d.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Uae=W({nonMaxSuppression_:function(t,e,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var i=R(t,"boxes","nonMaxSuppression"),a=R(e,"scores","nonMaxSuppression"),s=ty(i,a,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return V.runKernelFunc(function(l){return l.nonMaxSuppression(i,a,n,r,o)},{boxes:i,scores:a},null,"NonMaxSuppressionV3",u)}}),zae=function(t,e,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),be(this,void 0,void 0,function(){var i,a,s,u,l,c,d;return Ee(this,function(h){switch(h.label){case 0:return i=R(t,"boxes","nonMaxSuppressionAsync"),a=R(e,"scores","nonMaxSuppressionAsync"),s=ty(i,a,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([i.data(),a.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],d=M2(l,c,n,r,o),i!==t&&i.dispose(),a!==e&&a.dispose(),[2,d]}})})},Wae=W({nonMaxSuppressionWithScore_:function(t,e,n,r,o,i){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var a=R(t,"boxes","nonMaxSuppression"),s=R(e,"scores","nonMaxSuppression"),u=ty(a,s,n,r,o,i),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},c=V.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),Vae=function(t,e,n,r,o,i){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),be(this,void 0,void 0,function(){var a,s,u,l,c,d,h;return Ee(this,function(f){switch(f.label){case 0:return a=R(t,"boxes","nonMaxSuppressionAsync"),s=R(e,"scores","nonMaxSuppressionAsync"),u=ty(a,s,n,r,o,i),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,i=u.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return l=f.sent(),c=l[0],d=l[1],h=F2(c,d,n,r,o,i),a!==t&&a.dispose(),s!==e&&s.dispose(),[2,h]}})})},jae=W({cropAndResize_:function(t,e,n,r,o,i){var a=R(t,"image","cropAndResize"),s=R(e,"boxes","cropAndResize","float32"),u=R(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var l=s.shape[0];return P(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),P(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),P(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),P(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),P(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),P(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),V.runKernelFunc(function(c,d){return c.cropAndResize(a,s,u,r,o,i)},{images:a,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:r})}}),Y2=Object.freeze({resizeBilinear:Lae,resizeNearestNeighbor:Bae,nonMaxSuppression:Uae,nonMaxSuppressionAsync:zae,nonMaxSuppressionWithScore:Wae,nonMaxSuppressionWithScoreAsync:Vae,cropAndResize:jae}),Q2=function(t,e){return!(t>0)||e==="linear"},J2=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},Z2=function(t,e){var n=e,r=en(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},eC=function(t,e,n){if(e==="linear")return t;if(e==="relu")return Lt(t);if(e==="elu")return o4(t);if(e==="relu6")return a4(t);if(e==="prelu")return i4(t,n);throw new Error("Unknown fused activation "+e+".")},Hae=W({fusedMatMul_:function(t){var e,n=t.a,r=t.b,o=t.transposeA,i=o!==void 0&&o,a=t.transposeB,s=a!==void 0&&a,u=t.bias,l=t.activation,c=l===void 0?"linear":l,d=t.preluActivationWeights;if(Q2(V.state.gradientDepth,c)===!1){var h=Zg(n,r,i,s);return u!=null&&(h=He(h,u)),eC(h,c,d)}var f=R(n,"a","fused matMul"),p=R(r,"b","fused matMul");e=Ot(f,p),f=e[0],p=e[1];var v=i?f.shape[f.rank-2]:f.shape[f.rank-1],y=s?p.shape[p.rank-1]:p.shape[p.rank-2],m=i?f.shape[f.rank-1]:f.shape[f.rank-2],g=s?p.shape[p.rank-2]:p.shape[p.rank-1],x=f.shape.slice(0,-2),w=p.shape.slice(0,-2),b=_e(x),C=_e(w);P(f.rank>=2&&p.rank>=2&&f.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+p.rank+"."}),P(Jt(x,w),function(){return"Error in fused matMul: outer dimensions ("+x+") and ("+w+") of Tensors with shapes "+f.shape+" and "+p.shape+" must match."}),P(v===y,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+y+") of Tensors with shapes "+f.shape+" and "+p.shape+" and transposeA="+i+" and transposeB="+s+" must match."});var E,S,k=f.shape.slice(0,-2).concat([m,g]),_=i?f.as3D(b,v,m):f.as3D(b,m,v),I=s?p.as3D(C,g,y):p.as3D(C,y,g);u!=null&&qe(k,(E=Ot(E=R(u,"bias","fused matMul"),f)[0]).shape),d!=null&&(S=R(d,"prelu weights","fused matMul"));var N={a:_,b:I};u!=null&&(N.bias=E),d!=null&&(N.preluActivationWeights=S);var $=[_,I];return V.runKernelFunc(function(M,B){var D=M.fusedBatchMatMul({a:_,b:I,transposeA:i,transposeB:s,bias:E,activation:c,preluActivationWeights:S});return B([_,I,D]),D},N,function(M,B){var D=B[0],U=B[1],A=B[2],L=J2(M,A,c),z={};return u!=null&&(z={bias:function(){return Z2(E,L)}}),Object.assign(i||s?!i&&s?{a:function(){return L.matMul(U,!1,!1)},b:function(){return L.matMul(D,!0,!1)}}:i&&!s?{a:function(){return U.matMul(L,!1,!0)},b:function(){return D.matMul(L,!1,!1)}}:{a:function(){return U.matMul(L,!0,!0)},b:function(){return L.matMul(D,!0,!0)}}:{a:function(){return L.matMul(U,!1,!0)},b:function(){return D.matMul(L,!0,!1)}},z)},"_FusedMatMul",{transposeA:i,transposeB:s,activation:c},$,[!0]).reshape(k)}}),qae=W({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,i=t.dataFormat,a=i===void 0?"NHWC":i,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,d=t.activation,h=d===void 0?"linear":d,f=t.preluActivationWeights;if(h=h||"linear",Q2(V.state.gradientDepth,h)===!1){var p=ao(e,n,r,o,a,u,l);return c!=null&&(p=He(p,c)),eC(p,h,f)}var v=R(e,"x","conv2d"),y=R(n,"filter","conv2d"),m=v,g=!1;v.rank===3&&(g=!0,m=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),P(m.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+m.rank+"."}),P(y.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+y.rank+"."}),l!=null&&P(Ut(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."}),P(m.shape[3]===y.shape[2],function(){return"Error in conv2d: depth of input ("+m.shape[3]+") must match input depth for filter "+y.shape[2]+"."}),P(ir(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),P(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var x,w,b=Va(m.shape,y.shape,r,u,o,l);c!=null&&(x=Ot(x=R(c,"bias","fused conv2d"),v)[0],qe(b.outShape,x.shape)),f!=null&&(w=R(f,"prelu weights","fused conv2d"));var C={x:m,filter:y};c!=null&&(C.bias=x),f!=null&&(C.preluActivationWeights=w);var E=[y,m],S=V.runKernelFunc(function(k,_){var I=k.fusedConv2d({input:m,filter:y,convInfo:b,bias:x,activation:h,preluActivationWeights:w});return _([y,m,I]),I},C,function(k,_){var I=_,N=I[0],$=I[1],M=I[2],B=J2(k,M,h);P($s(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var D={};return c!=null&&(D={bias:function(){return Z2(x,B)}}),Object.assign({x:function(){return YF($.shape,B,N,r,o)},filter:function(){return j2($,B,N.shape,r,o)}},D)},"FusedConv2D",{convInfo:b,activation:h},E,[!0]);return g?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),Gae=W({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,i=t.dataFormat,a=i===void 0?"NHWC":i,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,d=t.activation,h=d===void 0?"linear":d,f=t.preluActivationWeights;if(Q2(V.state.gradientDepth,h)===!1){var p=Jg(e,n,r,o,a,u,l);return c!=null&&(p=He(p,c)),eC(p,h,f)}var v=R(e,"x","depthwiseConv2d"),y=R(n,"filter","depthwiseConv2d"),m=v,g=!1;v.rank===3&&(g=!0,m=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),P(m.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+m.rank+"."}),P(y.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+y.rank+"."}),P(m.shape[3]===y.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+m.shape[3]+") must match the inChannels dimension in filter "+y.shape[2]+"."}),u==null&&(u=[1,1]),P(ir(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&P(Ut(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."});var x,w,b=Va(m.shape,y.shape,r,u,o,l,!0);c!=null&&(x=Ot(x=R(c,"bias","fused conv2d"),v)[0],qe(b.outShape,x.shape)),f!=null&&(w=R(f,"prelu weights","fused depthwiseConv2d"));var C={x:m,filter:y};c!=null&&(C.bias=x),f!=null&&(C.preluActivationWeights=w);var E=[y,m],S=V.runKernelFunc(function(k,_){var I=k.fusedDepthwiseConv2D({input:m,filter:y,convInfo:b,bias:x,activation:h,preluActivationWeights:w});return _([y,m,I]),I},C,function(k,_){P($s(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var I=_[0],N=_[1],$=_[2],M=J2(k,$,h),B={};return c!=null&&(B={bias:function(){return Z2(x,M)}}),Object.assign({x:function(){return QF(N.shape,M,I,b)},filter:function(){return JF(N,M,I.shape,b)}},B)},"FusedDepthwiseConv2D",{convInfo:b,activation:h},E,[!0]);return g?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),Kae=Object.freeze({matMul:Hae,conv2d:qae,depthwiseConv2d:Gae}),Xae=Object.freeze({image:Y2,linalg:$ae,losses:Dae,spectral:yae,fused:Kae,signal:Cae,square:Roe,squaredDifference:OF,conv1d:Lie,conv2d:ao,conv3d:Bie,depthwiseConv2d:Jg,separableConv2d:H2,conv2dTranspose:Uie,conv3dTranspose:zie,op:W,batchNormalization2d:iie,batchNormalization3d:aie,batchNormalization4d:sie,batchNormalization:uie,batchNorm:UF,batchNorm2d:lie,batchNorm3d:cie,batchNorm4d:die,booleanMaskAsync:$ie,complex:Cn,real:Xr,imag:Vo,concat:un,concat1d:vne,concat2d:gne,concat3d:yne,concat4d:xne,split:k2,matMul:Zg,dot:Wie,outerProduct:Vie,reverse:ff,reverse1d:jie,reverse2d:Hie,reverse3d:qie,reverse4d:Gie,maxPool:dn,avgPool:pf,pool:Kie,maxPool3d:Xie,avgPool3d:Yie,slice:ai,slice1d:Qie,slice2d:Jie,slice3d:t4,slice4d:Zie,abs:Aoe,acos:Noe,acosh:Poe,asin:Doe,asinh:Ooe,atan:Moe,atanh:Foe,ceil:$oe,clipByValue:z2,cos:Loe,cosh:Boe,erf:Uoe,exp:rw,expm1:zoe,floor:Woe,log:Voe,log1p:joe,logSigmoid:Hoe,neg:dv,reciprocal:qoe,round:Goe,rsqrt:MF,sigmoid:FF,sign:Koe,isNaN:Xoe,isInf:Yoe,isFinite:Qoe,sin:Joe,sinh:Zoe,softplus:eie,sqrt:tie,step:nie,tan:rie,tanh:oie,all:eae,any:tae,argMax:nae,argMin:rae,logSumExp:oae,max:ey,mean:iae,min:aae,moments:sae,sum:r4,prod:uae,equal:HF,equalStrict:Iie,greater:Tie,greaterEqual:qF,greaterEqualStrict:Rie,greaterStrict:Aie,less:Nie,lessEqual:Pie,lessEqualStrict:Die,lessStrict:Oie,notEqual:Mie,notEqualStrict:Fie,add:He,addN:pie,addStrict:mie,atan2:vie,div:vo,divNoNan:gie,divStrict:yie,floorDiv:VF,maximum:W2,maximumStrict:xie,minimum:jF,minimumStrict:wie,mod:bie,modStrict:Eie,mul:Gn,mulStrict:Cie,pow:hv,powStrict:_ie,squaredDifferenceStrict:Sie,sub:cn,subStrict:kie,elu:o4,leakyRelu:lae,prelu:i4,relu:Lt,relu6:a4,selu:cae,logicalAnd:Qg,logicalNot:hie,logicalOr:zF,logicalXor:fie,where:Ls,whereAsync:WF,buffer:Be,print:Tne,batchToSpaceND:z3,broadcastTo:Rne,cast:Ane,clone:Nne,cumsum:Pne,depthToSpace:Dne,expandDims:Gr,eye:W3,multinomial:One,oneHot:Zx,pad:Xs,pad1d:Mne,pad2d:Fne,pad3d:$ne,pad4d:Lne,rand:Bne,randomNormal:Une,randomGamma:zne,randomUniform:V3,reshape:bo,spaceToBatchND:j3,squeeze:H3,stack:$r,tile:Xu,truncatedNormal:Wne,unstack:ln,setdiff1dAsync:Vne,fill:Jo,linspace:mne,ones:nc,range:iv,scalar:le,tensor:kn,tensor1d:Yt,tensor2d:ba,tensor3d:S2,tensor4d:hr,tensor5d:hne,tensor6d:fne,variable:pne,zeros:St,onesLike:U3,zerosLike:tt,transpose:Aa,softmax:Li,logSoftmax:Hne,localResponseNormalization:dae,norm:s4,gather:V2,unsortedSegmentSum:GF,basicLSTMCell:hae,multiRNNCell:fae,movingAverage:pae,stridedSlice:mae,topk:vae,scatterND:gae,fft:q2,ifft:fv,rfft:G2,irfft:u4,sparseToDense:xae,gatherND:wae,diag:bae,dropout:Eae,hannWindow:K2,hammingWindow:c4,frame:X2,stft:d4,inTopKAsync:_ae});function J(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(n){n!=null&&P(n.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function T0(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Yae=function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new Z3(n,V),n}return Ro(e,t),e.prototype.write=function(n,r,o){this.firstUse&&(this.firstUse=!1,K().get("IS_NODE")&&rv(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:n,dtype:o}),i},e.prototype.move=function(n,r,o,i){this.data.set(n,{values:r,dtype:i})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return be(this,void 0,void 0,function(){return Ee(this,function(r){return[2,this.readSync(n)]})})},e.prototype.readSync=function(n){var r=this.data.get(n),o=r.dtype,i=r.complexTensors;return o==="complex64"?nw(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),o=r;if(n.dtype==="string")try{o=r.map(function(i){return ih(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Be(n.shape,n.dtype,o)},e.prototype.makeOutput=function(n,r,o){var i=this.write(n,r,o);return V.makeTensorFromDataId(i,r,o,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return be(this,void 0,void 0,function(){var r;return Ee(this,function(o){return r=mo(),n(),[2,{kernelMs:mo()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:V.keep(n.clone()),imag:V.keep(r.clone())},o},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,o){if(J(n,"slice"),A2(n.shape,r,o)){var i=N2(r,n.strides),a=_e(o);return kn(this.readSync(n.dataId).subarray(i,i+a),o,n.dtype)}for(var s=Be(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(d,h){return d+r[h]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},e.prototype.stridedSlice=function(n,r,o,i){J(n,"stridedSlice");var a=Gg(r,o,i);if(a.some(function(f){return f===0}))return kn([],a);for(var s=Be(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),d=new Array(c.length),h=0;h<d.length;h++)d[h]=c[h]*i[h]+r[h];s.set.apply(s,[u.get.apply(u,d)].concat(c))}return s.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),o=Be([n.size,n.size],n.dtype),i=o.values,a=0;a<r.length;a++)i[a*n.size+a]=r[a];return o.toTensor()},e.prototype.unstack=function(n,r){for(var o=n.shape[r],i=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(i[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(o);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(i);return c},e.prototype.reverse=function(n,r){J(n,"reverse");for(var o=Be(n.shape,n.dtype),i=this.bufferSync(n),a=function(u){var l=o.indexToLoc(u),c=l.slice();r.forEach(function(d){return c[d]=n.shape[d]-1-c[d]}),o.set.apply(o,[i.get.apply(i,c)].concat(l))},s=0;s<o.size;s++)a(s);return o.toTensor()},e.prototype.concat=function(n,r){var o=this;if(n[0].dtype==="complex64"){var i=n.map(function(f){return Xr(f)}),a=n.map(function(f){return Vo(f)});return Cn(this.concat(i,r),this.concat(a,r))}var s=n.map(function(f){var p=_e(f.shape.slice(r));return f.as2D(-1,p)}),u=Fs(s.map(function(f){return f.shape}),1),l=Be(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(f){l.set(o.readSync(f.dataId),c),c+=f.size})}else{var d=0;s.forEach(function(f){for(var p=o.readSync(f.dataId),v=0,y=0;y<f.shape[0];++y)for(var m=y*u[1]+d,g=0;g<f.shape[1];++g)l[m+g]=p[v++];d+=f.shape[1]})}var h=Fs(n.map(function(f){return f.shape}),r);return kn(l,h,n[0].dtype)},e.prototype.neg=function(n){return J(n,"neg"),this.multiply(le(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o+a,imag:i+s}}):this.broadcastedBinaryOp(n,r,mn(n.dtype,r.dtype),function(o,i){return o+i})},e.prototype.addN=function(n){var r=this;J(n,"addN");for(var o=n.map(function(c){return r.readSync(c.dataId)}),i=Be(n[0].shape,n[0].dtype),a=i.values,s=0;s<n.length;s++)for(var u=o[s],l=0;l<a.length;l++)a[l]+=u[l];return i.toTensor()},e.prototype.softmax=function(n,r){var o=tn([r],n.shape),i=this.max(n,o),a=or(i.shape,o),s=this.subtract(n,i.reshape(a)),u=this.exp(s),l=this.sum(u,o).reshape(a);return this.realDivide(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o-a,imag:i-s}}):this.broadcastedBinaryOp(n,r,mn(n.dtype,r.dtype),function(o,i){return o-i})},e.prototype.pow=function(n,r){return J([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.pow(o,i)})},e.prototype.batchMatMul=function(n,r,o,i){J([n,r],"matMul");for(var a=o?n.shape[1]:n.shape[2],s=o?n.shape[2]:n.shape[1],u=i?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),d=this.readSync(r.dataId),h=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],f=h[0],p=h[1],v=h[2],y=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],m=y[0],g=y[1],x=y[2],w=s*u,b=Be([l,s,u],n.dtype),C=b.values,E=this.blockSize,S=0;S<l;S++)for(var k=0;k<s;k+=E)for(var _=0;_<u;_+=E)for(var I=0;I<a;I+=E)for(var N=Math.min(k+E,s),$=Math.min(_+E,u),M=Math.min(I+E,a),B=k;B<N;B++)for(var D=_;D<$;D++){for(var U=0,A=I;A<M;A++)U+=c[S*f+B*p+A*v]*d[A*m+D*g+S*x];C[S*w+(B*u+D)]+=U}return b.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,i=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,o,i,a);return s&&(c=this.add(c,s)),u&&(c=T0(this,c,u,l)),c},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o*a-i*s,imag:o*s+i*a}}):this.broadcastedBinaryOp(n,r,mn(n.dtype,r.dtype),function(o,i){return o*i})},e.prototype.realDivide=function(n,r){return J([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(o,i){return o/i})},e.prototype.floorDiv=function(n,r){return J([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(o,i){return Math.floor(o/i)})},e.prototype.sum=function(n,r){J(n,"sum"),cr("sum",r,n.rank);for(var o=Sn(n.shape,r),i=o[0],a=o[1],s=St(i,mn(n.dtype,"int32")),u=_e(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var h=d*u,f=0,p=0;p<u;++p)f+=c[h+p];l[d]=f}return s},e.prototype.prod=function(n,r){J(n,"sum");for(var o=Sn(n.shape,r),i=o[0],a=o[1],s=St(i,mn(n.dtype,"int32")),u=_e(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var h=d*u,f=1,p=0;p<u;++p)f*=c[h+p];l[d]=f}return s},e.prototype.unsortedSegmentSum=function(n,r,o){J(n,"unsortedSegmentSum");for(var i=[],a=n.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<o;++s){var u=le(s,"int32"),l=HF(u,r).asType("float32").mul(n).sum(0);i.push(l)}return $r(i)},e.prototype.argMin=function(n,r){J(n,"argMin");var o=[r];cr("argMin",o,n.rank);for(var i=Sn(n.shape,o),a=i[0],s=i[1],u=St(a,"int32"),l=_e(s),c=this.readSync(u.dataId),d=this.readSync(n.dataId),h=0;h<c.length;++h){for(var f=h*l,p=d[f],v=0,y=0;y<l;++y){var m=d[f+y];m<p&&(p=m,v=y)}c[h]=v}return u},e.prototype.argMax=function(n,r){J(n,"argMax");var o=[r];cr("argMax",o,n.rank);for(var i=Sn(n.shape,o),a=i[0],s=i[1],u=St(a,"int32"),l=_e(s),c=this.readSync(u.dataId),d=this.readSync(n.dataId),h=0;h<c.length;++h){for(var f=h*l,p=d[f],v=0,y=0;y<l;++y){var m=d[f+y];m>p&&(p=m,v=y)}c[h]=v}return u},e.prototype.cumsum=function(n,r,o,i){if(J(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var a=mn(n.dtype,"int32"),s=St(n.shape,a),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],d=i?function(y,m){return y+c-m-1}:function(y,m){return y+m},h=0;h<l.length;h+=c)for(var f=0;f<c;f++){var p=d(h,f);if(f===0)u[p]=o?0:l[p];else{var v=d(h,f-1);u[p]=o?l[v]+u[v]:l[p]+u[v]}}return s},e.prototype.equal=function(n,r){return J([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o===i?1:0})},e.prototype.notEqual=function(n,r){return J([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o!==i?1:0})},e.prototype.less=function(n,r){return J([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o<i?1:0})},e.prototype.lessEqual=function(n,r){return J([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o<=i?1:0})},e.prototype.greater=function(n,r){return J([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o>i?1:0})},e.prototype.greaterEqual=function(n,r){return J([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o>=i?1:0})},e.prototype.logicalNot=function(n){J(n,"logicalNot");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)o[i]=r[i]?0:1;return this.makeOutput(o,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return J([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o&&i})},e.prototype.logicalOr=function(n,r){return J([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o||i})},e.prototype.select=function(n,r,o){J([n,r,o],"select");for(var i=this.readSync(n.dataId),a=this.readSync(r.dataId),s=this.readSync(o.dataId),u=St(r.shape,mn(r.dtype,o.dtype)),l=this.readSync(u.dataId),c=0,d=n.rank===0||n.rank>1||r.rank===1?1:_e(r.shape.slice(1)),h=0;h<i.length;h++)for(var f=0;f<d;f++)i[h]===1?l[c++]=a[h]:l[c++]=s[h];return u},e.prototype.where=function(n){J([n],"where");var r=this.readSync(n.dataId);return $2(n.shape,r)},e.prototype.topk=function(n,r,o){return J(n,"topk"),oF(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){J(n,"min"),cr("min",r,n.rank);for(var o=Sn(n.shape,r),i=o[0],a=o[1],s=St(i,n.dtype),u=_e(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var h=d*u,f=c[h],p=0;p<u;++p){var v=c[h+p];v<f&&(f=v)}l[d]=f}return s},e.prototype.minimum=function(n,r){return J([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.min(o,i)})},e.prototype.mod=function(n,r){return J([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){var a=o%i;return o<0&&i<0||o>=0&&i>=0?a:(a+i)%i})},e.prototype.max=function(n,r){J(n,"max"),cr("max",r,n.rank);for(var o=Sn(n.shape,r),i=o[0],a=o[1],s=St(i,n.dtype),u=_e(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var h=d*u,f=c[h],p=0;p<u;++p){var v=c[h+p];v>f&&(f=v)}l[d]=f}return s},e.prototype.maximum=function(n,r){return J([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.max(o,i)})},e.prototype.all=function(n,r){J(n,"all"),cr("all",r,n.rank);for(var o=Sn(n.shape,r),i=o[0],a=o[1],s=St(i,n.dtype),u=_e(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var h=d*u,f=c[h],p=0;p<u;++p){var v=c[h+p];f=f&&v}l[d]=f}return s},e.prototype.any=function(n,r){J(n,"any"),cr("any",r,n.rank);for(var o=Sn(n.shape,r),i=o[0],a=o[1],s=St(i,n.dtype),u=_e(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var h=d*u,f=c[h],p=0;p<u;++p){var v=c[h+p];f=f||v}l[d]=f}return s},e.prototype.squaredDifference=function(n,r){return J([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){var a=o-i;return a*a})},e.prototype.ceil=function(n){J(n,"ceil");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.ceil(r[i]);return this.makeOutput(o,n.shape,"float32")},e.prototype.floor=function(n){J(n,"floor");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.floor(r[i]);return this.makeOutput(o,n.shape,"float32")},e.prototype.sign=function(n){J(n,"x");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?o[i]=-1:r[i]>0?o[i]=1:o[i]=0;return this.makeOutput(o,n.shape,"float32")},e.prototype.isNaN=function(n){J(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.isInf=function(n){J(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.isFinite=function(n){J(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},e.prototype.round=function(n){J(n,"round");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=Math.floor(r[i]);r[i]-a<.5?o[i]=Math.floor(r[i]):r[i]-a>.5?o[i]=Math.ceil(r[i]):o[i]=a%2==0?a:a+1}return this.makeOutput(o,n.shape,"float32")},e.prototype.exp=function(n){J(n,"exp");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.exp(r[i]);return this.makeOutput(o,n.shape,"float32")},e.prototype.expm1=function(n){J(n,"expm1");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.expm1(r[i]);return this.makeOutput(o,n.shape,"float32")},e.prototype.log=function(n){J(n,"log");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.log(a)}return this.makeOutput(o,n.shape,"float32")},e.prototype.log1p=function(n){J(n,"log1p");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.log1p(a)}return this.makeOutput(o,n.shape,"float32")},e.prototype.sqrt=function(n){J(n,"sqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.sqrt(a)}return this.makeOutput(o,n.shape,"float32")},e.prototype.rsqrt=function(n){J(n,"rsqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=1/Math.sqrt(a)}return this.makeOutput(o,n.shape,"float32")},e.prototype.reciprocal=function(n){J(n,"reciprocal");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=1/r[i];return this.makeOutput(o,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){J(n,"relu");for(var r=St(n.shape,n.dtype),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<i.length;++a)o[a]=Math.max(0,i[a]);return r},e.prototype.relu6=function(n){J(n,"relu");for(var r=St(n.shape,n.dtype),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<i.length;++a)o[a]=Math.min(Math.max(0,i[a]),6);return r},e.prototype.prelu=function(n,r){return J([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return o<0?i*o:o})},e.prototype.elu=function(n){J(n,"elu");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=o[i];r[i]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){J([n,r],"eluDer");for(var o=new Float32Array(r.size),i=this.readSync(r.dataId),a=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];o[s]=u>=1?a[s]:a[s]*(u+1)}return this.makeOutput(o,r.shape,"float32")},e.prototype.selu=function(n){J(n,"selu");for(var r=B2,o=U2,i=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>=0?o*u:r*(Math.exp(u)-1)}return this.makeOutput(i,n.shape,"float32")},e.prototype.clip=function(n,r,o){J(n,"clip");for(var i=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>o?o:u<r?r:u}return this.makeOutput(i,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.abs(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<n.size;++i){var a=o[2*i],s=o[2*i+1];r[i]=Math.hypot(a,s)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){J(n,"int");for(var r=new Int32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=o[i];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){J(n,"sigmoid");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=1/(1+Math.exp(-o[i]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){J(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a]>-r,u=i[a]<r,l=Math.exp(i[a]),c=void 0;c=u?l:s?i[a]:Math.log(1+l),o[a]=c}return this.makeOutput(o,n.shape,"float32")},e.prototype.sin=function(n){J(n,"sin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.sin(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){J(n,"cos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.cos(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){J(n,"tan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.tan(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){J(n,"asin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.asin(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){J(n,"acos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.acos(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){J(n,"atan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.atan(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return J([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.atan2(o,i)})},e.prototype.sinh=function(n){J(n,"sinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.sinh(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){J(n,"cosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.cosh(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){J(n,"tanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=JM(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){J(n,"asinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.asinh(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){J(n,"acosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.acosh(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){J(n,"atanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.atanh(o[i]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){J(n,"erf");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=Math.sign(o[i]),s=Math.abs(o[i]),u=1/(1+.3275911*s);r[i]=a*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),J(n,"step");for(var o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a];isNaN(s)?o[a]=NaN:o[a]=s>0?1:r}return this.makeOutput(o,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,o,i);return a&&(l=this.add(l,a)),s&&(l=T0(this,l,s,u)),l},e.prototype.conv2d=function(n,r,o){J([n,r],"conv2d");for(var i=o.filterHeight,a=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,c=o.padInfo.top,d=o.dataFormat==="channelsLast",h=Be(o.outShape,n.dtype),f=n.strides[0],p=d?n.strides[1]:n.strides[2],v=d?n.strides[2]:1,y=d?1:n.strides[1],m=h.strides[0],g=d?h.strides[1]:h.strides[2],x=d?h.strides[2]:1,w=d?1:h.strides[1],b=this.readSync(n.dataId),C=this.readSync(r.dataId),E=h.values,S=0;S<o.batchSize;++S)for(var k=S*f,_=S*m,I=0;I<o.outHeight;++I)for(var N=_+I*g,$=I*o.strideHeight-c,M=0;M<i;M++){var B=$+M*s;if(!(B<0||B>=o.inHeight))for(var D=M*r.strides[0],U=k+B*p,A=0;A<o.outWidth;++A)for(var L=N+A*x,z=A*o.strideWidth-l,j=0;j<a;j++){var q=z+j*u;if(!(q<0||q>=o.inWidth))for(var Y=U+q*v,Z=D+j*r.strides[1],oe=0;oe<o.inChannels;++oe){for(var se=b[Y+oe*y],de=0;de<o.outChannels;++de)E[L+de*w]+=se*C[Z+de];Z+=o.outChannels}}}return h.toTensor()},e.prototype.conv3d=function(n,r,o){for(var i=o.filterDepth,a=o.filterHeight,s=o.filterWidth,u=o.dilationDepth,l=o.dilationHeight,c=o.dilationWidth,d=o.padInfo.front,h=o.padInfo.left,f=o.padInfo.top,p=Be(o.outShape,n.dtype),v=this.readSync(n.dataId),y=this.readSync(r.dataId),m=p.values,g=0;g<o.batchSize;++g)for(var x=g*n.strides[0],w=g*p.strides[0],b=0;b<o.outDepth;++b)for(var C=w+b*p.strides[1],E=b*o.strideDepth-d,S=0;S<i;S++){var k=E+S*u;if(!(k<0||k>=o.inDepth))for(var _=S*r.strides[0],I=x+k*n.strides[1],N=0;N<o.outHeight;++N)for(var $=C+N*p.strides[2],M=N*o.strideHeight-f,B=0;B<a;B++){var D=M+B*l;if(!(D<0||D>=o.inHeight))for(var U=_+B*r.strides[1],A=I+D*n.strides[2],L=0;L<o.outWidth;++L)for(var z=$+L*o.outChannels,j=L*o.strideWidth-h,q=0;q<s;q++){var Y=j+q*c;if(!(Y<0||Y>=o.inWidth))for(var Z=U+q*r.strides[2],oe=A+Y*o.inChannels,se=Z,de=0;de<o.inChannels;++de){for(var ue=v[oe+de],Q=0;Q<o.outChannels;++Q)m[z+Q]+=ue*y[se+Q];se+=o.outChannels}}}}return p.toTensor()},e.prototype.conv2dDerInput=function(n,r,o){J([n,r],"conv2dDerInput");for(var i=Be(o.inShape,"float32"),a=i.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],d=l[1],h=l[2],f=o.batchSize,p=o.filterHeight,v=o.filterWidth,y=o.inChannels,m=o.inHeight,g=o.inWidth,x=o.outChannels,w=o.outHeight,b=o.outWidth,C=o.strideHeight,E=o.strideWidth,S=o.dataFormat,k=p-1-o.padInfo.top,_=v-1-o.padInfo.left,I=S==="channelsLast",N=i.strides[0],$=I?i.strides[1]:i.strides[2],M=I?i.strides[2]:1,B=I?1:i.strides[1],D=n.strides[0],U=I?n.strides[1]:n.strides[2],A=I?n.strides[2]:1,L=I?1:n.strides[1],z=0;z<f;++z)for(var j=0;j<y;++j)for(var q=0;q<m;++q)for(var Y=q-k,Z=Math.max(0,Math.ceil(Y/C)),oe=Math.min(w,(p+Y)/C),se=0;se<g;++se){for(var de=se-_,ue=Math.max(0,Math.ceil(de/E)),Q=Math.min(b,(v+de)/E),X=0,ee=Z;ee<oe;++ee)for(var he=ee*C-Y,fe=ue;fe<Q;++fe)for(var ve=D*z+U*ee+A*fe,Se=c*(p-1-he)+d*(v-1-(fe*E-de))+h*j,De=0;De<x;++De)X+=s[ve+L*De]*u[Se+De];a[N*z+$*q+M*se+B*j]=X}return i.toTensor()},e.prototype.conv3dDerInput=function(n,r,o){for(var i=Be(o.inShape,"float32"),a=i.values,s=i.strides,u=s[0],l=s[1],c=s[2],d=s[3],h=this.readSync(n.dataId),f=n.strides,p=f[0],v=f[1],y=f[2],m=f[3],g=this.readSync(r.dataId),x=r.strides,w=x[0],b=x[1],C=x[2],E=x[3],S=o.batchSize,k=o.filterDepth,_=o.filterHeight,I=o.filterWidth,N=o.inChannels,$=o.inDepth,M=o.inHeight,B=o.inWidth,D=o.outChannels,U=o.outDepth,A=o.outHeight,L=o.outWidth,z=o.strideDepth,j=o.strideHeight,q=o.strideWidth,Y=k-1-o.padInfo.front,Z=_-1-o.padInfo.top,oe=I-1-o.padInfo.left,se=0;se<S;++se)for(var de=0;de<N;++de)for(var ue=0;ue<$;++ue)for(var Q=ue-Y,X=Math.max(0,Math.ceil(Q/z)),ee=Math.min(U,(k+Q)/z),he=0;he<M;++he)for(var fe=he-Z,ve=Math.max(0,Math.ceil(fe/j)),Se=Math.min(A,(_+fe)/j),De=0;De<B;++De){for(var Oe=De-oe,yt=Math.max(0,Math.ceil(Oe/q)),ht=Math.min(L,(I+Oe)/q),Ke=0,vt=X;vt<ee;++vt)for(var Mt=vt*z-Q,Wt=ve;Wt<Se;++Wt)for(var Tt=Wt*j-fe,gt=yt;gt<ht;++gt)for(var nn=p*se+v*vt+y*Wt+m*gt,Ve=w*(k-1-Mt)+b*(_-1-Tt)+C*(I-1-(gt*q-Oe))+E*de,ce=0;ce<D;++ce)Ke+=h[nn+ce]*g[Ve+ce];a[u*se+l*ue+c*he+d*De+de]=Ke}return i.toTensor()},e.prototype.conv2dDerFilter=function(n,r,o){J([n,r],"conv2dDerFilter");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dataFormat==="channelsLast",c=Be(o.filterShape,"float32"),d=o.padInfo.left,h=o.padInfo.top,f=this.bufferSync(n),p=this.bufferSync(r),v=0;v<s;++v)for(var y=Math.max(0,Math.ceil((h-v)/i)),m=Math.min(o.outHeight,(o.inHeight+h-v)/i),g=0;g<u;++g)for(var x=Math.max(0,Math.ceil((d-g)/a)),w=Math.min(o.outWidth,(o.inWidth+d-g)/a),b=0;b<o.inChannels;++b)for(var C=0;C<o.outChannels;++C){for(var E=0,S=0;S<o.batchSize;++S)for(var k=y;k<m;++k)for(var _=v+k*i-h,I=x;I<w;++I){var N=g+I*a-d;E+=l?f.get(S,_,N,b)*p.get(S,k,I,C):f.get(S,b,_,N)*p.get(S,C,k,I)}c.set(E,v,g,b,C)}return c.toTensor()},e.prototype.conv3dDerFilter=function(n,r,o){for(var i=o.strideDepth,a=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,c=o.filterWidth,d=Be(o.filterShape,"float32"),h=d.values,f=d.strides,p=f[0],v=f[1],y=f[2],m=f[3],g=this.readSync(r.dataId),x=r.strides,w=x[0],b=x[1],C=x[2],E=x[3],S=this.readSync(n.dataId),k=n.strides,_=k[0],I=k[1],N=k[2],$=k[3],M=o.padInfo.front,B=o.padInfo.left,D=o.padInfo.top,U=0;U<u;++U)for(var A=Math.max(0,Math.ceil((M-U)/i)),L=Math.min(o.outDepth,(o.inDepth+M-U)/i),z=U*p,j=0;j<l;++j)for(var q=Math.max(0,Math.ceil((D-j)/a)),Y=Math.min(o.outHeight,(o.inHeight+D-j)/a),Z=j*v+z,oe=0;oe<c;++oe)for(var se=Math.max(0,Math.ceil((B-oe)/s)),de=Math.min(o.outWidth,(o.inWidth+B-oe)/s),ue=oe*y+Z,Q=0;Q<o.inChannels;++Q)for(var X=Q*m+ue,ee=0;ee<o.outChannels;++ee){for(var he=0,fe=0;fe<o.batchSize;++fe)for(var ve=fe*_,Se=fe*w,De=A;De<L;++De)for(var Oe=(U+De*i-M)*I+ve,yt=De*b+Se,ht=q;ht<Y;++ht)for(var Ke=(j+ht*a-D)*N+Oe,vt=ht*C+yt,Mt=se;Mt<de;++Mt){var Wt=Mt*E+vt;he+=S[(oe+Mt*s-B)*$+Ke+Q]*g[Wt+ee]}h[X+ee]=he}return d.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,o,i);return a&&(l=this.add(l,a)),s&&(l=T0(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(n,r,o){J([n,r],"depthwiseConv2D");for(var i=o.filterHeight,a=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,c=o.padInfo.top,d=o.outChannels/o.inChannels,h=Be(o.outShape,n.dtype),f=this.readSync(n.dataId),p=this.readSync(r.dataId),v=h.values,y=0;y<o.batchSize;++y)for(var m=y*n.strides[0],g=y*h.strides[0],x=0;x<o.outHeight;++x)for(var w=g+x*h.strides[1],b=x*o.strideHeight-l,C=0;C<i;++C){var E=b+C*s;if(!(E<0||E>=o.inHeight))for(var S=C*r.strides[0],k=m+E*n.strides[1],_=0;_<o.outWidth;++_)for(var I=w+_*h.strides[2],N=_*o.strideWidth-c,$=0;$<a;++$){var M=N+$*u;if(!(M<0||M>=o.inWidth))for(var B=S+$*r.strides[1],D=k+M*o.inChannels,U=I,A=B,L=0;L<o.inChannels;++L){for(var z=f[D+L],j=0;j<d;++j)v[U+j]+=z*p[A+j];U+=d,A+=d}}}return h.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,o){J([n,r],"depthwiseConv2DDerInput");for(var i=Be(o.inShape,"float32"),a=i.values,s=i.strides,u=s[0],l=s[1],c=s[2],d=this.readSync(n.dataId),h=n.strides,f=h[0],p=h[1],v=h[2],y=this.readSync(r.dataId),m=r.strides,g=m[0],x=m[1],w=m[2],b=o.batchSize,C=o.filterHeight,E=o.filterWidth,S=o.inChannels,k=o.inHeight,_=o.inWidth,I=o.outChannels,N=o.outHeight,$=o.outWidth,M=o.strideHeight,B=o.strideWidth,D=C-1-o.padInfo.top,U=E-1-o.padInfo.left,A=I/S,L=0;L<b;++L)for(var z=0;z<S;++z)for(var j=0;j<k;++j)for(var q=j-D,Y=Math.max(0,Math.ceil(q/M)),Z=Math.min(N,(C+q)/M),oe=0;oe<_;++oe){for(var se=oe-U,de=Math.max(0,Math.ceil(se/B)),ue=Math.min($,(E+se)/B),Q=0,X=Y;X<Z;++X)for(var ee=X*M-q,he=de;he<ue;++he)for(var fe=f*L+p*X+v*he,ve=g*(C-1-ee)+x*(E-1-(he*B-se))+w*z,Se=0;Se<A;++Se)Q+=d[fe+(z*A+Se)]*y[ve+Se];a[u*L+l*j+c*oe+z]=Q}return i.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,o){J([n,r],"depthwiseConv2DDerFilter");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=Be(o.filterShape,"float32"),c=o.padInfo.left,d=o.padInfo.top,h=o.outChannels/o.inChannels,f=this.bufferSync(n),p=this.bufferSync(r),v=0;v<s;++v)for(var y=Math.max(0,Math.ceil((d-v)/i)),m=Math.min(o.outHeight,(o.inHeight+d-v)/i),g=0;g<u;++g)for(var x=Math.max(0,Math.ceil((c-g)/a)),w=Math.min(o.outWidth,(o.inWidth+c-g)/a),b=0;b<o.outChannels;++b){for(var C=Math.trunc(b/h),E=b%h,S=0,k=0;k<o.batchSize;++k)for(var _=y;_<m;++_)for(var I=v+_*i-d,N=x;N<w;++N){var $=g+N*a-c;S+=f.get(k,I,$,C)*p.get(k,_,N,b)}l.set(S,v,g,C,E)}return l.toTensor()},e.prototype.tile=function(n,r){return J(n,"tile"),rF(this.bufferSync(n),r)},e.prototype.pad=function(n,r,o){J(n,"pad");var i=r.map(function(h,f){return h[0]+n.shape[f]+h[1]}),a=r.map(function(h){return h[0]}),s=this.bufferSync(n),u=Be(i,n.dtype);o!==0&&u.values.fill(o);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),d=c.map(function(h,f){return h+a[f]});u.set.apply(u,[s.get.apply(s,c)].concat(d))}return u.toTensor()},e.prototype.transpose=function(n,r){J(n,"transpose");for(var o=new Array(n.rank),i=0;i<o.length;i++)o[i]=n.shape[r[i]];var a=this.readSync(n.dataId),s=Be(o,n.dtype),u=this.bufferSync(n);for(i=0;i<n.size;++i){for(var l=u.indexToLoc(i),c=new Array(l.length),d=0;d<c.length;d++)c[d]=l[r[d]];var h=s.locToIndex(c);s.values[h]=a[i]}return s.toTensor()},e.prototype.gather=function(n,r,o){J([n,r],"gather");var i=n.shape.slice(),a=this.readSync(r.dataId);i[o]=a.length;for(var s=Be(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),d=c.slice();d[o]=a[c[o]];var h=u.locToIndex(d);s.values[l]=u.values[h]}return s.toTensor()},e.prototype.batchToSpaceND=function(n,r,o){J([n],"batchToSpaceND");var i=r.reduce(function(d,h){return d*h}),a=av(n.shape,r,i),s=sv(a.length,r.length),u=uv(n.shape,r,i),l=q3(o,r.length),c=G3(u,o,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,o){J([n],"spaceToBatchND");var i=r.reduce(function(h,f){return h*f}),a=[[0,0]];a.push.apply(a,o);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=av(u.shape,r,i,!1),c=sv(l.length,r.length,!1),d=uv(u.shape,r,i,!1);return u.reshape(l).transpose(c).reshape(d)},e.prototype.pool=function(n,r,o){J(n,"pool");for(var i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,h=r.padInfo.left,f=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),v=Be(r.outShape,n.dtype),y=v.values,m=r.outShape[1]*r.outShape[2]*r.outShape[3],g=r.outShape[2]*r.outShape[3],x=r.outShape[3],w=0;w<r.batchSize;++w)for(var b=w*m,C=w*n.strides[0],E=0;E<r.inChannels;++E)for(var S=0;S<r.outHeight;++S)for(var k=S*i-d,_=Math.max(0,k),I=Math.min(r.inHeight,l+k),N=b+S*g,$=0;$<r.outWidth;++$){for(var M=$*a-h,B=Math.max(0,M),D=Math.min(r.inWidth,c+M),U=f,A=0,L=0,z=_;z<I;z+=s){for(var j=C+z*n.strides[1],q=B;q<D;q+=u){var Y=p[j+q*n.strides[2]+E];o==="max"&&Y>U?U=Y:o==="avg"&&(A+=Y,L++)}if(isNaN(U))break}y[N+$*x+E]=o==="avg"?A/L:U}return v.toTensor()},e.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},e.prototype.maxPoolPositions=function(n,r){for(var o=Be(r.outShape,"int32"),i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,h=r.padInfo.left,f=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var m=y*i-d,g=m;g<0;)g+=s;for(var x=Math.min(r.inHeight,l+m),w=0;w<r.outWidth;++w){for(var b=w*a-h,C=b;C<0;)C+=u;for(var E=Math.min(r.inWidth,c+b),S=Number.NEGATIVE_INFINITY,k=-1,_=g;_<x;_+=s)for(var I=_-m,N=C;N<E;N+=u){var $=N-b,M=f.get(p,_,N,v);M>S&&(S=M,k=I*c+$)}o.set(k,p,y,w,v)}}return o.toTensor()},e.prototype.maxPoolBackprop=function(n,r,o,i){J([r,o],"maxPoolBackprop");for(var a=this.maxPoolPositions(r,i),s=i.strideHeight,u=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,d=i.effectiveFilterHeight,h=i.effectiveFilterWidth,f=h-1-i.padInfo.left,p=d-1-i.padInfo.top,v=Be(r.shape,"float32"),y=this.bufferSync(a),m=this.bufferSync(n),g=0;g<i.batchSize;++g)for(var x=0;x<i.inChannels;++x)for(var w=0;w<i.inHeight;++w)for(var b=0;b<i.inWidth;++b){for(var C=w-p,E=b-f,S=0,k=0;k<d;k+=l){var _=(C+k)/s;if(!(_<0||_>=i.outHeight||Math.floor(_)!==_))for(var I=0;I<h;I+=c){var N=(E+I)/u;if(!(N<0||N>=i.outWidth||Math.floor(N)!==N)){var $=d*h-1-y.get(g,_,N,x)===k*h+I?1:0;$!==0&&(S+=m.get(g,_,N,x)*$)}}}v.set(S,g,w,b,x)}return v.toTensor()},e.prototype.avgPoolBackprop=function(n,r,o){J([n,r],"avgPoolBackprop");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dilationHeight,c=o.dilationWidth,d=o.effectiveFilterHeight,h=o.effectiveFilterWidth,f=h-1-o.padInfo.left,p=d-1-o.padInfo.top,v=Be(r.shape,"float32"),y=1/(s*u),m=this.bufferSync(n),g=0;g<o.batchSize;++g)for(var x=0;x<o.inChannels;++x)for(var w=0;w<o.inHeight;++w)for(var b=0;b<o.inWidth;++b){for(var C=w-p,E=b-f,S=0,k=0;k<d;k+=l){var _=(C+k)/i;if(!(_<0||_>=o.outHeight||Math.floor(_)!==_))for(var I=0;I<h;I+=c){var N=(E+I)/a;N<0||N>=o.outWidth||Math.floor(N)!==N||(S+=m.get(g,_,N,x))}}v.set(S*y,g,w,b,x)}return v.toTensor()},e.prototype.pool3d=function(n,r,o){J(n,"pool3d");for(var i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.front,v=r.padInfo.top,y=r.padInfo.left,m=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(n.dataId),x=Be(r.outShape,n.dtype),w=x.values,b=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],S=r.outShape[4],k=0;k<r.batchSize;++k)for(var _=k*b,I=k*n.strides[0],N=0;N<r.inChannels;++N)for(var $=0;$<r.outDepth;++$){for(var M=$*i-p,B=M;B<0;)B+=u;for(var D=Math.min(r.inDepth,d+M),U=_+$*C,A=0;A<r.outHeight;++A){for(var L=A*a-v,z=L;z<0;)z+=l;for(var j=Math.min(r.inHeight,h+L),q=U+A*E,Y=0;Y<r.outWidth;++Y){for(var Z=Y*s-y,oe=Z;oe<0;)oe+=c;for(var se=Math.min(r.inWidth,f+Z),de=q+Y*S,ue=m,Q=0,X=0,ee=B;ee<D;ee+=u){for(var he=I+ee*n.strides[1],fe=z;fe<j;fe+=l){for(var ve=he+fe*n.strides[2],Se=oe;Se<se;Se+=c){var De=g[ve+Se*n.strides[3]+N];if(o==="max"&&De>ue?ue=De:o==="avg"&&(Q+=De,X++),isNaN(ue))break}if(isNaN(ue))break}if(isNaN(ue))break}w[de+N]=o==="avg"?Q/X:ue}}}return x.toTensor()},e.prototype.avgPool3d=function(n,r){return J(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,o){J([n,r],"avgPool3dBackprop");for(var i=o.strideDepth,a=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,c=o.filterWidth,d=o.dilationDepth,h=o.dilationHeight,f=o.dilationWidth,p=o.effectiveFilterDepth,v=o.effectiveFilterHeight,y=o.effectiveFilterWidth,m=p-1-o.padInfo.front,g=y-1-o.padInfo.left,x=v-1-o.padInfo.top,w=Be(r.shape,"float32"),b=1/(u*l*c),C=this.bufferSync(n),E=0;E<o.batchSize;++E)for(var S=0;S<o.inChannels;++S)for(var k=0;k<o.inDepth;++k)for(var _=0;_<o.inHeight;++_)for(var I=0;I<o.inWidth;++I){for(var N=k-m,$=_-x,M=I-g,B=0,D=0;D<p;D+=d){var U=(N+D)/i;if(!(U<0||U>=o.outDepth||Math.floor(U)!==U))for(var A=0;A<v;A+=h){var L=($+A)/a;if(!(L<0||L>=o.outHeight||Math.floor(L)!==L))for(var z=0;z<y;z+=f){var j=(M+z)/s;j<0||j>=o.outWidth||Math.floor(j)!==j||(B+=C.get(E,U,L,j,S))}}}w.set(B*b,E,k,_,I,S)}return w.toTensor()},e.prototype.maxPool3d=function(n,r){return J(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var o=Be(r.outShape,"int32"),i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.front,v=r.padInfo.top,y=r.padInfo.left,m=this.bufferSync(n),g=0;g<r.batchSize;++g)for(var x=0;x<r.inChannels;++x)for(var w=0;w<r.outDepth;++w){for(var b=w*i-p,C=b;C<0;)C+=u;for(var E=Math.min(r.inDepth,d+b),S=0;S<r.outHeight;++S){for(var k=S*a-v,_=k;_<0;)_+=l;for(var I=Math.min(r.inHeight,h+k),N=0;N<r.outWidth;++N){for(var $=N*s-y,M=$;M<0;)M+=c;for(var B=Math.min(r.inWidth,f+$),D=Number.NEGATIVE_INFINITY,U=-1,A=C;A<E;A+=u)for(var L=A-b,z=_;z<I;z+=l)for(var j=z-k,q=M;q<B;q+=c){var Y=q-$,Z=m.get(g,A,z,q,x);Z>=D&&(D=Z,U=L*h*f+j*h+Y)}o.set(U,g,w,S,N,x)}}}return o.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,o,i){J([r,o],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,i),s=i.strideDepth,u=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,d=i.dilationHeight,h=i.dilationWidth,f=i.effectiveFilterDepth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,y=f-1-i.padInfo.front,m=v-1-i.padInfo.left,g=p-1-i.padInfo.top,x=Be(r.shape,"float32"),w=this.bufferSync(a),b=this.bufferSync(n),C=0;C<i.batchSize;++C)for(var E=0;E<i.inChannels;++E)for(var S=0;S<i.inDepth;++S)for(var k=0;k<i.inHeight;++k)for(var _=0;_<i.inWidth;++_){for(var I=S-y,N=k-g,$=_-m,M=0,B=0;B<f;B+=c){var D=(I+B)/s;if(!(D<0||D>=i.outDepth||Math.floor(D)!==D))for(var U=0;U<p;U+=d){var A=(N+U)/u;if(!(A<0||A>=i.outHeight||Math.floor(A)!==A))for(var L=0;L<v;L+=h){var z=($+L)/l;if(!(z<0||z>=i.outWidth||Math.floor(z)!==z)){var j=f*p*v-1-w.get(C,D,A,z,E)===B*p*v+U*v+L?1:0;j!==0&&(M+=b.get(C,D,A,z,E)*j)}}}}x.set(M,C,S,k,_,E)}return x.toTensor()},e.prototype.cast=function(n,r){return D2(n,r,this)},e.prototype.reshape=function(n,r){return cv(n,r)},e.prototype.avgPool=function(n,r){return J(n,"avgPool"),this.pool(n,r,"avg").toFloat()},e.prototype.resizeBilinear=function(n,r,o,i){J(n,"resizeBilinear");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],d=this.readSync(n.dataId),h=new Float32Array(_e([s,r,o,c])),f=[i&&r>1?u-1:u,i&&o>1?l-1:l],p=[i&&r>1?r-1:r,i&&o>1?o-1:o],v=0,y=f[0]/p[0],m=f[1]/p[1],g=0;g<s;g++)for(var x=0;x<r;x++)for(var w=y*x,b=Math.floor(w),C=w-b,E=Math.min(u-1,Math.ceil(w)),S=g*n.strides[0]+b*n.strides[1],k=g*n.strides[0]+E*n.strides[1],_=0;_<o;_++)for(var I=m*_,N=Math.floor(I),$=I-N,M=Math.min(l-1,Math.ceil(I)),B=S+N*n.strides[2],D=k+N*n.strides[2],U=S+M*n.strides[2],A=k+M*n.strides[2],L=0;L<c;L++){var z=d[B+L],j=d[D+L],q=z+(d[U+L]-z)*$,Y=q+(j+(d[A+L]-j)*$-q)*C;h[v++]=Y}return kn(h,[s,r,o,c])},e.prototype.resizeBilinearBackprop=function(n,r,o){J([n,r],"resizeBilinearBackprop");for(var i=r.shape,a=i[0],s=i[1],u=i[2],l=i[3],c=n.shape,d=c[1],h=c[2],f=new Float32Array(a*s*u*l),p=[o&&d>1?s-1:s,o&&h>1?u-1:u],v=[o&&d>1?d-1:d,o&&h>1?h-1:h],y=p[0]/v[0],m=p[1]/v[1],g=this.readSync(n.dataId),x=0,w=0;w<a;w++)for(var b=w*r.strides[0],C=0;C<d;C++)for(var E=C*y,S=Math.floor(E),k=Math.min(Math.ceil(E),s-1),_=b+S*r.strides[1],I=b+k*r.strides[1],N=E-S,$=1-N,M=0;M<h;M++)for(var B=M*m,D=Math.floor(B),U=Math.min(Math.ceil(B),u-1),A=B-D,L=1-A,z=_+D*r.strides[2],j=_+U*r.strides[2],q=I+D*r.strides[2],Y=I+U*r.strides[2],Z=$*L,oe=$*A,se=N*L,de=N*A,ue=0;ue<l;ue++){var Q=g[x++];f[z+ue]+=Q*Z,f[j+ue]+=Q*oe,f[q+ue]+=Q*se,f[Y+ue]+=Q*de}return hr(f,[a,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,o,i){J(n,"resizeNearestNeighbor");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],d=this.readSync(n.dataId),h=new Float32Array(s*r*o*c),f=[i&&r>1?u-1:u,i&&o>1?l-1:l],p=[i&&r>1?r-1:r,i&&o>1?o-1:o],v=f[0]/p[0],y=f[1]/p[1],m=0,g=0;g<s;g++)for(var x=g*n.strides[0],w=0;w<r;w++)for(var b=v*w,C=x+Math.min(u-1,i?Math.round(b):Math.floor(b))*n.strides[1],E=0;E<o;E++)for(var S=y*E,k=C+Math.min(l-1,i?Math.round(S):Math.floor(S))*n.strides[2],_=0;_<c;_++){var I=d[k+_];h[m++]=I}return kn(h,[s,r,o,c],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,o){J([n,r],"resizeNearestNeighborBackprop");for(var i=r.shape,a=i[0],s=i[1],u=i[2],l=i[3],c=n.shape,d=c[1],h=c[2],f=new Float32Array(a*s*u*l),p=this.readSync(n.dataId),v=[o&&d>1?s-1:s,o&&h>1?u-1:u],y=[o&&d>1?d-1:d,o&&h>1?h-1:h],m=v[0]/y[0],g=v[1]/y[1],x=1/m,w=1/g,b=2*Math.ceil(x)+2,C=2*Math.ceil(w)+2,E=0;E<a;E++)for(var S=E*r.strides[0],k=0;k<s;k++)for(var _=S+k*r.strides[1],I=Math.floor(k*x),N=Math.floor(I-b/2),$=0;$<u;$++)for(var M=_+$*r.strides[2],B=Math.floor($*w),D=Math.floor(B-C/2),U=0;U<l;U++){for(var A=0,L=0;L<b;L++){var z=L+N;if(!(z<0||z>=d)){var j=S+z*n.strides[1],q=z*m;if(k===Math.min(s-1,o?Math.round(q):Math.floor(q)))for(var Y=0;Y<C;Y++){var Z=Y+D;if(!(Z<0||Z>=h)){var oe=j+Z*n.strides[2],se=Z*g;$===Math.min(u-1,o?Math.round(se):Math.floor(se))&&(A+=p[oe+U])}}}}f[M+U]=A}return hr(f,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,o,i,a,s){J([n,r,o,a,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(o.dataId),d=a?this.readSync(a.dataId):new Float32Array([1]),h=s?this.readSync(s.dataId):new Float32Array([0]),f=new Float32Array(u.length),p=h.length,v=d.length,y=c.length,m=l.length,g=0,x=0,w=0,b=0,C=0;C<u.length;++C)f[C]=h[g++]+(u[C]-l[x++])*d[w++]/Math.sqrt(c[b++]+i),g>=p&&(g=0),x>=m&&(x=0),w>=v&&(w=0),b>=y&&(b=0);return hr(f,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,o,i,a){J(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,d=new Float32Array(c);function h(y){for(var m=y%s,g=y-m+Math.max(0,m-r),x=y-m+Math.min(m+r,u),w=0;g<=x;g++){var b=l[g];w+=b*b}return w}for(var f=0;f<c;f++){var p=h(f),v=l[f]*Math.pow(o+i*p,-a);d[f]=v}return hr(d,n.shape)},e.prototype.LRNGrad=function(n,r,o,i,a,s,u){J(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),d=this.readSync(r.dataId),h=this.readSync(o.dataId),f=new Float32Array(n.size),p=n.size,v=0;v<p;v++){for(var y=v%l,m=v-y+Math.max(0,y-i),g=v-y+Math.min(l,y+i+1),x=0,w=m;w<g;w++)x+=Math.pow(d[w],2);for(x=s*x+a,w=m;w<g;w++){var b=-2*s*u*d[w]*h[v]/x;v===w&&(b+=Math.pow(x,-u)),b*=c[v],f[w]+=b}}return hr(f,n.shape)},e.prototype.multinomial=function(n,r,o,i){J(n,"multinomial");for(var a=r?n:Li(n),s=a.shape[0],u=a.shape[1],l=St([s,o],"int32"),c=this.readSync(l.dataId),d=this.readSync(a.dataId),h=0;h<s;++h){var f=h*u,p=new Float32Array(u-1);p[0]=d[f];for(var v=1;v<p.length;++v)p[v]=p[v-1]+d[f+v];for(var y=qg(i.toString()),m=h*o,g=0;g<o;++g){var x=y();c[m+g]=p.length;for(var w=0;w<p.length;w++)if(x<p[w]){c[m+g]=w;break}}}return l},e.prototype.oneHot=function(n,r,o,i){J(n,"oneHot");var a=new Float32Array(n.size*r);a.fill(i);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(a[u*r+s[u]]=o);return ba(a,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,o,i,a){return J(n,"nonMaxSuppression"),M2(this.readSync(n.dataId),this.readSync(r.dataId),o,i,a)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var o=n.shape[0],i=n.shape[1],a=Be(n.shape,"float32"),s=Be(n.shape,"float32"),u=Xr(n).as2D(o,i),l=Vo(n).as2D(o,i),c=0;c<o;c++)for(var d=u.slice([c,0],[1,i]),h=l.slice([c,0],[1,i]),f=Cn(d,h),p=this.readSync(this.fftImpl(f,r).dataId),v=0;v<i;v++){var y=ZI(p,v);a.values[c*i+v]=y.real,s.values[c*i+v]=y.imag}return Cn(a.toTensor(),s.toTensor()).as2D(o,i)},e.prototype.fftImpl=function(n,r){var o=n.as1D(),i=o.size;if(this.isExponentOf2(i)){var a=this.fftRadix2(o,i,r).as2D(n.shape[0],n.shape[1]);return r&&(a=Cn(Xr(a).div(le(i)),Vo(a).div(le(i)))),a}var s=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),d=new Float32Array(l.length/2),h=0;h<l.length;h+=2)c[h/2]=l[h],d[h/2]=l[h+1];return{real:c,imag:d}}(this.fourierTransformByMatmul(s,i,r));return Cn(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,o){if(r===1)return n;var i=this.readSync(n.dataId),a=r/2,s=function(m){for(var g=Math.ceil(m.length/4),x=new Float32Array(g),w=new Float32Array(g),b=0;b<m.length;b+=4)x[Math.floor(b/4)]=m[b],w[Math.floor(b/4)]=m[b+1];return{real:x,imag:w}}(i),u=Cn(s.real,s.imag).as1D(),l=function(m){for(var g=Math.floor(m.length/4),x=new Float32Array(g),w=new Float32Array(g),b=2;b<m.length;b+=4)x[Math.floor(b/4)]=m[b],w[Math.floor(b/4)]=m[b+1];return{real:x,imag:w}}(i),c=Cn(l.real,l.imag).as1D();u=this.fftRadix2(u,a,o),c=this.fftRadix2(c,a,o);var d=function(m,g){for(var x=new Float32Array(m/2),w=new Float32Array(m/2),b=0;b<Math.ceil(m/2);b++){var C=(g?2:-2)*Math.PI*(b/m);x[b]=Math.cos(C),w[b]=Math.sin(C)}return{real:x,imag:w}}(r,o),h=Cn(d.real,d.imag).mul(c),f=u.add(h),p=u.sub(h),v=Xr(f).concat(Xr(p)),y=Vo(f).concat(Vo(p));return Cn(v,y).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,o){for(var i=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,u=0,l=0;l<r;l++){var c=Gne(a*l,r,o),d=ZI(n,l);s+=d.real*c.real-d.imag*c.imag,u+=d.real*c.imag+d.imag*c.real}o&&(s/=r,u/=r),qne(i,s,u,a)}return i},e.prototype.depthToSpace=function(n,r,o){P(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o}),P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=n.shape[0],a=n.shape[1],s=n.shape[2],u=n.shape[3],l=a*r,c=s*r,d=u/(r*r),h=this.readSync(n.dataId),f=new Float32Array(i*l*c*d),p=0,v=0;v<i;++v)for(var y=0;y<l;++y)for(var m=Math.floor(y/r),g=y%r,x=0;x<c;++x)for(var w=Math.floor(x/r),b=(g*r+x%r)*d,C=0;C<d;++C){var E=C+b+u*(w+s*(m+a*v));f[p++]=h[E]}return hr(f,[i,l,c,d])},e.prototype.broadcastedBinaryOp=function(n,r,o,i){var a=qe(n.shape,r.shape),s=Be(a,o),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Ei(n.shape,a),d=Ei(r.shape,a),h=s.values;if(c.length+d.length===0)for(var f=0;f<h.length;++f)h[f]=i(u[f%u.length],l[f%l.length]);else{var p=this.bufferSync(n),v=this.bufferSync(r),y=function(m){var g=s.indexToLoc(m),x=g.slice(-n.rank);c.forEach(function(E){return x[E]=0});var w=p.locToIndex(x),b=g.slice(-r.rank);d.forEach(function(E){return b[E]=0});var C=v.locToIndex(b);h[m]=i(u[w],l[C])};for(f=0;f<h.length;++f)y(f)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,o){var i=qe(n.shape,r.shape),a=Be(i,"float32"),s=Be(i,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Ei(n.shape,i),d=Ei(r.shape,i),h=a.values,f=s.values;if(c.length+d.length===0)for(var p=0;p<h.length;p++){var v=p%u.length,y=p%l.length,m=o(u[2*v],u[2*v+1],l[2*y],l[2*y+1]);h[p]=m.real,f[p]=m.imag}else{var g=this.bufferSync(this.data.get(n.dataId).complexTensors.real),x=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=function(b){var C=a.indexToLoc(b),E=C.slice(-n.rank);c.forEach(function(N){return E[N]=0});var S=g.locToIndex(E),k=C.slice(-r.rank);d.forEach(function(N){return k[N]=0});var _=x.locToIndex(k),I=o(u[2*S],u[2*S+1],l[2*_],l[2*_+1]);h[b]=I.real,f[b]=I.imag};for(p=0;p<h.length;p++)w(p)}return this.complex(a.toTensor(),s.toTensor())},e.prototype.split=function(n,r,o){return nF(n,r,o)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,o,i,a,s){for(var u=n.shape,l=u[0],c=u[1],d=u[2],h=u[3],f=r.shape[0],p=i[0],v=i[1],y=Be([f,p,v,h],"float32"),m=this.readSync(r.dataId),g=this.readSync(o.dataId),x=this.readSync(n.dataId),w=n.strides,b=y.strides,C=0;C<f;C++){var E=4*C,S=m[E],k=m[E+1],_=m[E+2],I=m[E+3],N=g[C];if(!(N>=l))for(var $=p>1?(_-S)*(c-1)/(p-1):0,M=v>1?(I-k)*(d-1)/(v-1):0,B=0;B<p;B++){var D=p>1?S*(c-1)+B*$:.5*(S+_)*(c-1);if(D<0||D>c-1)for(var U=0;U<v;U++)for(var A=0;A<h;A++){var L=A+U*b[2]+B*b[1]+C*b[0];y.values[L]=s}else if(a==="bilinear"){var z=Math.floor(D),j=Math.ceil(D),q=D-z;for(U=0;U<v;U++)if((ee=v>1?k*(d-1)+U*M:.5*(k+I)*(d-1))<0||ee>d-1)for(A=0;A<h;A++)L=A+U*b[2]+B*b[1]+C*b[0],y.values[L]=s;else{var Y=Math.floor(ee),Z=Math.ceil(ee),oe=ee-Y;for(A=0;A<h;A++){var se=x[L=A+Y*w[2]+z*w[1]+N*w[0]],de=x[L=A+Z*w[2]+z*w[1]+N*w[0]],ue=x[L=A+Y*w[2]+j*w[1]+N*w[0]],Q=se+(de-se)*oe,X=ue+(x[L=A+Z*w[2]+j*w[1]+N*w[0]]-ue)*oe;L=A+U*b[2]+B*b[1]+C*b[0],y.values[L]=Q+(X-Q)*q}}}else for(U=0;U<v;++U){var ee;if((ee=v>1?k*(d-1)+U*M:.5*(k+I)*(d-1))<0||ee>d-1)for(A=0;A<h;A++)L=A+U*b[2]+B*b[1]+C*b[0],y.values[L]=s;else{var he=Math.round(ee),fe=Math.round(D);for(A=0;A<h;A++){var ve=A+he*w[2]+fe*w[1]+N*w[0],Se=A+U*b[2]+B*b[1]+C*b[0];y.values[Se]=x[ve]}}}}}return y.toTensor()},e.prototype.sparseToDense=function(n,r,o,i){var a=ch(0,n,o),s=a.sliceRank,u=a.numUpdates,l=a.sliceSize,c=a.strides,d=a.outputSize;return this.scatter(n,r,o,d,l,u,s,c,i,!1)},e.prototype.gatherND=function(n,r){var o=r.shape,i=o[o.length-1],a=T2(n,r),s=a[0],u=a[1],l=a[2],c=a[3];if(u===0)return kn([],s,n.dtype);for(var d=new ah([u,l],n.dtype),h=this.readSync(r.dataId),f=this.readSync(n.dataId),p=0;p<u;p++){for(var v=[],y=0,m=0;m<i;m++){var g=h[p*i+m];y+=g*c[m],v.push(g)}if(y<0||y>=n.size/l)throw new Error("Invalid indices: "+v+" does not index into "+n.shape);for(var x=0;x<l;x++)d.values[p*l+x]=f[y*l+x]}return d.toTensor().reshape(s)},e.prototype.scatterND=function(n,r,o){var i=ch(0,n,o),a=i.sliceRank,s=i.numUpdates,u=i.sliceSize,l=i.strides,c=i.outputSize,d=le(0);return this.scatter(n,r,o,c,u,s,a,l,d,!0)},e.prototype.fill=function(n,r,o){var i=oh(o=o||ec(r),_e(n));return i.fill(r),V.makeTensor(i,n,o,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=oh(n.dtype,_e(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,o){return O2(n,r,o)},e.prototype.scatter=function(n,r,o,i,a,s,u,l,c,d){var h=[i/a,a],f=this.readSync(n.dataId),p=this.readSync(r.dataId);if(i===0)return kn([],o,r.dtype);var v=new ah(h,r.dtype);v.values.fill(this.readSync(c.dataId)[0]);for(var y=0;y<s;y++){for(var m=[],g=0,x=0;x<u;x++){var w=f[y*u+x];m.push(w),g+=w*l[x]}if(g<0||g>=i/a)throw new Error("Invalid indices: "+m+" does not index into "+o);for(var b=0;b<a;b++)d?v.values[g*a+b]+=p[y*a+b]:v.values[g*a+b]=r.rank===0?p[0]:p[y*a+b]}return v.toTensor().reshape(o)},e}(eF);V.registerBackend("cpu",function(){return new Yae},1);for(var R0=0,bT=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e,i=o.boxes,a=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,h=n;J(i,"NonMaxSuppressionWithScore");var f=F2(h.data.get(i.dataId).values,h.data.get(a.dataId).values,u,l,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n;J(r,"square");for(var i=o.data.get(r.dataId).values,a=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];a[s]=u*u}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:fh,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,i=r.b,a=n;J([o,i],fh);var s=a.data.get(o.dataId).values,u=a.data.get(i.dataId).values,l=function(h,f,p,v,y,m){var g=qe(h,f),x=g.length,w=Co(g),b=Il(y,_e(g)),C=h.length,E=f.length,S=Co(h),k=Co(f),_=Ei(h,g),I=Ei(f,g);if(_.length+I.length===0)for(var N=0;N<b.length;++N)b[N]=m(p[N%p.length],v[N%v.length]);else{var $=function(M){var B=s3(M,x,w),D=B.slice(-C);_.forEach(function(z){return D[z]=0});var U=jx(D,C,S),A=B.slice(-E);I.forEach(function(z){return A[z]=0});var L=jx(A,E,k);b[M]=m(p[U],v[L])};for(N=0;N<b.length;++N)$(N)}return[b,g]}(o.shape,i.shape,s,u,o.dtype,function(h,f){var p=h-f;return p*p}),c=l[0],d=l[1];return{dataId:a.write(c,d,o.dtype),shape:d,dtype:o.dtype}}}];R0<bT.length;R0++)XM(bT[R0]);var uu,Qae=function(t){this.variableNames=["A"];var e=Hn(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Jae=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Hn(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var A0=0,ET=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.pixels,i=r.numChannels,a=typeof HTMLVideoElement!="undefined"&&o instanceof HTMLVideoElement,s=typeof HTMLImageElement!="undefined"&&o instanceof HTMLImageElement,u=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],c=u[1],d=[c,l],h=[c,l,i];(s||a)&&(uu==null&&(uu=document.createElement("canvas").getContext("2d")),uu.canvas.width=l,uu.canvas.height=c,uu.drawImage(o,0,0,l,c),o=uu.canvas);var f=n.makeTensorInfo(d,"int32");n.texData.get(f.dataId).usage=Nr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);var p=K().getBool("WEBGL_PACK")?new Jae(h):new Qae(h),v=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),v}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;rv("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=e,i=o.boxes,a=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,h=n,f=F2(h.readSync(i.dataId),h.readSync(a.dataId),u,l,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n,i=new We(r.shape,"return x * x;");return o.runWebGLProgram(i,[r],r.dtype)}},{kernelName:fh,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,i=r.b,a=n,s=K().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hi("return (a - b) * (a - b);",o.shape,i.shape):new Vt("return (a - b) * (a - b);",o.shape,i.shape);return a.compileAndRun(s,[o,i])}}];A0<ET.length;A0++)XM(ET[A0]);for(var N0=0,CT=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:fh,gradFunc:function(t,e){var n=e[0],r=e[1],o=le(2);return{a:function(){return Gn(t,Gn(o,cn(n,r)))},b:function(){return Gn(t,Gn(o,cn(r,n)))}}}}];N0<CT.length;N0++)tne(CT[N0]);var Zae=function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t}();K().get("IS_BROWSER")&&K().setPlatform("browser",new Zae);var P0,ese=function(){return require("node-fetch")},tse=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return K().global.fetch!=null?K().global.fetch(e,n):(P0==null&&(P0=ese()),P0(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t}();K().get("IS_NODE")&&K().setPlatform("node",new tse);var ow={float32:4,int32:4,uint16:2,uint8:1,bool:1},pv=4;function h4(t,e){for(var n={},r=0,o=function(s){var u=s.name,l=s.dtype,c=s.shape,d=_e(c),h=void 0;if("quantization"in s){var f=s.quantization;if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+f.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=ow[f.dtype],v=t.slice(r,r+d*p),y=f.dtype==="uint8"?new Uint8Array(v):new Uint16Array(v);if(l==="float32")h=Float32Array.from(y,function(C){return C*f.scale+f.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=Int32Array.from(y,function(C){return Math.round(C*f.scale+f.min)})}r+=d*p}else if(l==="string"){var m=_e(s.shape);h=[];for(var g=0;g<m;g++){var x=new Uint32Array(t.slice(r,r+pv))[0];r+=pv;var w=new Uint8Array(t.slice(r,r+x));h.push(w),r+=x}}else{var b=ow[l];if(v=t.slice(r,r+d*b),l==="float32")h=new Float32Array(v);else if(l==="int32")h=new Int32Array(v);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=new Uint8Array(v)}r+=d*b}n[u]=kn(h,c,l)},i=0,a=e;i<a.length;i++)o(a[i]);return n}function nse(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(i){if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(e),o=0;return n.forEach(function(i){r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var iw=typeof Buffer!="undefined"&&(typeof Blob=="undefined"||typeof atob=="undefined"||typeof btoa=="undefined");function _T(t){return iw?Buffer.byteLength(t):new Blob([t]).size}function tC(t){var e=0;t.forEach(function(o){e+=o.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(o){n.set(new Uint8Array(o),r),r+=o.byteLength}),n.buffer}function ST(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function mf(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:_T(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:_T(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Dr=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(i){var a=i(e,r);a!==null&&o.push(a)}),o},t}(),Qu="://",Ea=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){P(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Qu)&&(e=e.slice(0,e.indexOf(Qu))),P(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();P(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function Kp(t){if(t.indexOf(Qu)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Ea.getSchemes().join(","));return{scheme:t.split(Qu)[0],path:t.split(Qu)[1]}}function kT(t,e,n){return n===void 0&&(n=!1),be(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,d;return Ee(this,function(h){switch(h.label){case 0:return P(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),P((r=Dr.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),P(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),o=r[0],P((i=Dr.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),P(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),a=i[0],s=Kp(t).scheme,u=Kp(t).path,l=s===Kp(t).scheme,[4,o.load()];case 1:return c=h.sent(),n&&l?[4,Ea.getManager(s).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,a.save(c)];case 4:return d=h.sent(),!n||l?[3,6]:[4,Ea.getManager(s).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var ls="models_store",ca="model_info_store";function f4(){if(!K().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function aw(t){var e=t.result;e.createObjectStore(ls,{keyPath:"modelPath"}),e.createObjectStore(ca,{keyPath:"modelPath"})}var Ju=function(){function t(e){if(this.indexedDB=f4(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return be(this,void 0,void 0,function(){return Ee(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(o,i){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return aw(a)},a.onsuccess=function(){var s=a.result;if(n==null){var u=s.transaction(ls,"readonly"),l=u.objectStore(ls).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(v){return s.close(),i(l.error)},u.oncomplete=function(){return s.close()}}else{var c,d=mf(n),h=s.transaction(ca,"readwrite"),f=h.objectStore(ca),p=f.put({modelPath:r.modelPath,modelArtifactsInfo:d});p.onsuccess=function(){var v=(c=s.transaction(ls,"readwrite")).objectStore(ls).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:d});v.onsuccess=function(){return o({modelArtifactsInfo:d})},v.onerror=function(y){var m=(f=h.objectStore(ca)).delete(r.modelPath);m.onsuccess=function(){return s.close(),i(v.error)},m.onerror=function(g){return s.close(),i(v.error)}}},p.onerror=function(v){return s.close(),i(p.error)},h.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return i(a.error)}})},t.URL_SCHEME="indexeddb://",t}(),IT=function(t){return K().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ju.URL_SCHEME)?(e=t.slice(Ju.URL_SCHEME.length),new Ju(e)):null;var e};Dr.registerSaveRouter(IT),Dr.registerLoadRouter(IT);var rse=function(){function t(){this.indexedDB=f4()}return t.prototype.listModels=function(){return be(this,void 0,void 0,function(){var e=this;return Ee(this,function(n){return[2,new Promise(function(r,o){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return aw(i)},i.onsuccess=function(){var a=i.result,s=a.transaction(ca,"readonly"),u=s.objectStore(ca).getAll();u.onsuccess=function(){for(var l={},c=0,d=u.result;c<d.length;c++){var h=d[c];l[h.modelPath]=h.modelArtifactsInfo}r(l)},u.onerror=function(l){return a.close(),o(u.error)},s.oncomplete=function(){return a.close()}},i.onerror=function(a){return o(i.error)}})]})})},t.prototype.removeModel=function(e){return be(this,void 0,void 0,function(){var n=this;return Ee(this,function(r){var o;return e=(o=e).startsWith(Ju.URL_SCHEME)?o.slice(Ju.URL_SCHEME.length):o,[2,new Promise(function(i,a){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return aw(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(ca,"readwrite"),d=c.objectStore(ca),h=d.get(e);h.onsuccess=function(){if(h.result==null)return l.close(),a(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var f=d.delete(e),p=function(){var v=(u=l.transaction(ls,"readwrite")).objectStore(ls).delete(e);v.onsuccess=function(){return i(h.result.modelArtifactsInfo)},v.onerror=function(y){return a(h.error)}};f.onsuccess=p,f.onerror=function(v){return p(),l.close(),a(h.error)}},h.onerror=function(f){return l.close(),a(h.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return a(s.error)}})]})})},t}();if(K().getBool("IS_BROWSER"))try{Ea.registerManager(Ju.URL_SCHEME,new rse)}catch{}var mi="/",yu="tensorflowjs_models",p4="info",ose="model_topology",ise="weight_specs",ase="weight_data",sse="model_metadata";function m4(t){return{info:[yu,t,p4].join(mi),topology:[yu,t,ose].join(mi),weightSpecs:[yu,t,ise].join(mi),weightData:[yu,t,ase].join(mi),modelMetadata:[yu,t,sse].join(mi)}}function use(t){var e=t.split(mi);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(mi)}var Zu=function(){function t(e){if(!K().getBool("IS_BROWSER")||typeof window=="undefined"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=m4(this.modelPath)}return t.prototype.save=function(e){return be(this,void 0,void 0,function(){var n,r,o;return Ee(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=mf(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(a){if(iw)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return be(this,void 0,void 0,function(){var e,n,r,o,i,a,s;return Ee(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(i),n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,n.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(iw){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var d=atob(l),h=new Uint8Array(d.length),f=0;f<d.length;++f)h.set([d.charCodeAt(f)],f);return h.buffer}(s),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),TT=function(t){return K().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Zu.URL_SCHEME)?(e=t.slice(Zu.URL_SCHEME.length),new Zu(e)):null;var e};Dr.registerSaveRouter(TT),Dr.registerLoadRouter(TT);var lse=function(){function t(){P(K().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),P(typeof window=="undefined"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return be(this,void 0,void 0,function(){var e,n,r,o,i,a;return Ee(this,function(s){for(e={},n=yu+mi,r=mi+p4,o=0;o<this.LS.length;++o)(i=this.LS.key(o)).startsWith(n)&&i.endsWith(r)&&(a=use(i),e[a]=JSON.parse(this.LS.getItem(i)));return[2,e]})})},t.prototype.removeModel=function(e){return be(this,void 0,void 0,function(){var n,r;return Ee(this,function(o){var i;if(e=(i=e).startsWith(Zu.URL_SCHEME)?i.slice(Zu.URL_SCHEME.length):i,n=m4(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(K().getBool("IS_BROWSER"))try{Ea.registerManager(Zu.URL_SCHEME,new lse)}catch{}var cse="model",dse=".json",hse=".weights.bin";function RT(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var D0=function(){function t(e){if(!K().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=cse),this.modelTopologyFileName=e+dse,this.weightDataFileName=e+hse}return t.prototype.save=function(e){return be(this,void 0,void 0,function(){var n,r,o,i,a,s;return Ee(this,function(u){switch(u.label){case 0:if(typeof document=="undefined")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=i,[4,RT(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,RT(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:mf(e)}]}})})},t.URL_SCHEME="downloads://",t}(),fse=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return be(this,void 0,void 0,function(){var e,n,r=this;return Ee(this,function(o){return e=this.files[0],n=this.files.slice(1),[2,new Promise(function(i,a){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&i({modelTopology:c});var d=l.weightsManifest;if(d!=null){var h;try{h=r.checkManifestAndWeightFiles(d,n)}catch(y){return void a(y)}var f=[],p=[],v=[];d.forEach(function(y){y.paths.forEach(function(m){p.push(m),v.push(null)}),f.push.apply(f,y.weights)}),d.forEach(function(y){y.paths.forEach(function(m){var g=new FileReader;g.onload=function(x){var w=x.target.result,b=p.indexOf(m);v[b]=w,v.indexOf(null)===-1&&i({modelTopology:c,weightSpecs:f,weightData:tC(v),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},g.onerror=function(x){return a("Failed to weights data from file of path '"+m+"'.")},g.readAsArrayBuffer(h[m])})})}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)})]})})},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],o=n.map(function(u){return ST(u.name)}),i={},a=0,s=e;a<s.length;a++)s[a].paths.forEach(function(u){var l=ST(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),o.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");i[u]=n[o.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return i},t}();function AT(t,e,n,r){(function(i){P(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(t),function(i,a){P(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),P(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),P(a>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+a})}(n=n==null?0:n,r=r==null?1:r);var o=0;return Promise.all(t.map(function(i){return i.then(function(a){var s=n+ ++o/t.length*(r-n);return e(s),a}),i}))}function v4(t,e){return be(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c;return Ee(this,function(d){switch(d.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?K().platform.fetch:e.fetchFunc,r=t.map(function(h){return n(h,e.requestInit,{isBinary:!0})}),o=0,i=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=d.sent(),[3,4];case 2:return[4,AT(r,e.onProgress,o,i)];case 3:a=d.sent(),d.label=4;case 4:return s=a.map(function(h){return h.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,AT(s,e.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}})})}function NT(t){var e=this;return function(n,r,o){return r===void 0&&(r=""),be(e,void 0,void 0,function(){var i,a,s,u,l,c,d,h,f,p;return Ee(this,function(v){switch(v.label){case 0:if(i=n.map(function(){return!1}),a={},s=o!=null?o.map(function(){return!1}):[],u=[],n.forEach(function(y,m){var g=0;y.weights.forEach(function(x){var w="quantization"in x?x.quantization.dtype:x.dtype,b=ow[w]*_e(x.shape),C=function(){i[m]=!0,a[m]==null&&(a[m]=[]),a[m].push({manifestEntry:x,groupOffset:g,sizeBytes:b})};o!=null?o.forEach(function(E,S){E===x.name&&(C(),s[S]=!0)}):C(),u.push(x.name),g+=b})}),!s.every(function(y){return y}))throw l=o.filter(function(y,m){return!s[m]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=i.reduce(function(y,m,g){return m&&y.push(g),y},[]),d=[],c.forEach(function(y){n[y].paths.forEach(function(m){var g=r+(r.endsWith("/")?"":"/")+m;d.push(g)})}),[4,t(d)];case 1:return h=v.sent(),f={},p=0,c.forEach(function(y){for(var m=n[y].paths.length,g=0,x=0;x<m;x++)g+=h[p+x].byteLength;for(var w=new ArrayBuffer(g),b=new Uint8Array(w),C=0,E=0;E<m;E++){var S=new Uint8Array(h[p+E]);b.set(S,C),C+=S.byteLength}a[y].forEach(function(k){var _=h4(w.slice(k.groupOffset,k.groupOffset+k.sizeBytes),[k.manifestEntry]);for(var I in _)f[I]=_[I]}),p+=m}),[2,f]}})})}}Dr.registerSaveRouter(function(t){return K().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(D0.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new D0(e)}(t.slice(D0.URL_SCHEME.length)):null});var g4=function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(P(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=K().platform.fetch,P(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&P(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return be(this,void 0,void 0,function(){var n,r,o,i;return Ee(this,function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((i=a.sent()).ok)return[2,{modelArtifactsInfo:mf(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},t.prototype.load=function(){return be(this,void 0,void 0,function(){var e,n,r,o,i,a,s,u,l,c,d,h;return Ee(this,function(f){switch(f.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=f.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");f.label=2;case 2:return f.trys.push([2,4,,5]),[4,e.json()];case 3:return n=f.sent(),[3,5];case 4:throw f.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,i=n.weightsManifest,a=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,o==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:h=f.sent(),c=h[0],d=h[1],f.label=7;case 7:return[2,{modelTopology:o,weightSpecs:c,weightData:d,userDefinedMetadata:l,generatedBy:a,convertedBy:s,format:u}]}})})},t.prototype.loadWeights=function(e){return be(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,d,h;return Ee(this,function(f){switch(f.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var v=p.lastIndexOf("/"),y=p.lastIndexOf("?"),m=p.substring(0,v),g=y>v?p.substring(y):"";return[m+"/",g]}(n),o=r[0],i=r[1],a=this.weightPathPrefix||o,s=[],u=0,l=e;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return d=[],e.forEach(function(p){p.paths.forEach(function(v){d.push(a+v+i)})}),[4,v4(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=f.sent(),[2,[s,tC(h)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function sw(t){return t.match(g4.URL_SCHEME_REGEX)!=null}var PT=function(t,e){return typeof fetch=="undefined"?null:(Array.isArray(t)?t.every(function(n){return sw(n)}):sw(t))?uw(t,{onProgress:e}):null};function uw(t,e){return new g4(t,e)}Dr.registerSaveRouter(PT),Dr.registerLoadRouter(PT);var O0=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return be(this,void 0,void 0,function(){return Ee(this,function(e){return[2,this.modelArtifacts]})})},t}(),pse=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return be(this,void 0,void 0,function(){return Ee(this,function(n){return[2,this.saveHandler(e)]})})},t}(),y4=Object.freeze({browserFiles:function(t){return new fse(t)},browserHTTPRequest:function(t,e){return uw(t,e)},concatenateArrayBuffers:tC,decodeWeights:h4,encodeWeights:function(t,e){return be(this,void 0,void 0,function(){var n,r,o,i,a,s=this;return Ee(this,function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),i=function(l){var c=o[l],d=Array.isArray(t)?t[l].tensor:t[c];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+d.dtype);var h={name:c,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var f=new Promise(function(p){return be(s,void 0,void 0,function(){var v,y,m,g,x,w,b;return Ee(this,function(C){switch(C.label){case 0:return[4,d.bytes()];case 1:for(v=C.sent(),y=v.reduce(function(E,S){return E+S.length},0)+pv*v.length,m=new Uint8Array(y),g=0,x=0;x<v.length;x++)w=v[x],b=new Uint8Array(new Uint32Array([w.length]).buffer),m.set(b,g),g+=pv,m.set(w,g),g+=w.length;return p(m),[2]}})})});r.push(f)}else r.push(d.data());e!=null&&(h.group=e),n.push(h)},a=0;a<o.length;++a)i(a);return[4,Promise.all(r)];case 1:return[2,{data:nse(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new O0(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new O0({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new O0({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return Dr.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:mf,getSaveHandlers:function(t){return Dr.getSaveHandlers(t)},http:uw,isHTTPScheme:sw,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),be(this,void 0,void 0,function(){return Ee(this,function(o){return[2,NT(function(i){return v4(i,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return Dr.registerLoadRouter(t)},registerSaveRouter:function(t){return Dr.registerSaveRouter(t)},weightsLoaderFactory:NT,withSaveHandler:function(t){return new pse(t)},copyModel:function(t,e){return be(this,void 0,void 0,function(){return Ee(this,function(n){return[2,kT(t,e,!1)]})})},listModels:function(){return be(this,void 0,void 0,function(){var t,e,n,r,o,i,a;return Ee(this,function(s){switch(s.label){case 0:t=Ea.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(o=r[n],[4,Ea.getManager(o).listModels()]):[3,4];case 2:for(a in i=s.sent())e[o+Qu+a]=i[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return be(this,void 0,void 0,function(){return Ee(this,function(n){return[2,kT(t,e,!0)]})})},removeModel:function(t){return be(this,void 0,void 0,function(){var e;return Ee(this,function(n){return e=Kp(t),[2,Ea.getManager(e.scheme).removeModel(e.path)]})})}}),lu,mse=W({confusionMatrix_:function(t,e,n){var r=R(t,"labels","confusionMatrix"),o=R(e,"predictions","confusionMatrix");P(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),P(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),P(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),P(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),P(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var i=Zx(r.asType("int32"),n),a=Zx(o.asType("int32"),n);return i.transpose().matMul(a).asType("int32")}});Object.freeze({confusionMatrix:mse});var vse=W({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,i=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData!="undefined"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement!="undefined"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement)i=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);a=!0}if(o&&o&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(KM("FromPixels",V.backendName)!=null)return V.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=l[0],d=l[1];if(a?s=t.getContext("2d").getImageData(0,0,c,d).data:r||n?s=t.data:(i||o)&&(lu==null&&(lu=document.createElement("canvas").getContext("2d")),lu.canvas.width=c,lu.canvas.height=d,lu.drawImage(t,0,0,c,d),s=lu.getImageData(0,0,c,d).data),e===4)u=new Int32Array(s);else{var h=c*d;u=new Int32Array(h*e);for(var f=0;f<h;f++)for(var p=0;p<e;++p)u[f*e+p]=s[4*f+p]}return S2(u,[d,c,e],"int32")}}),nC=Object.freeze({toPixels:function(t,e){return be(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,d,h,f,p,v,y,m,g,x,w,b,C,E,S;return Ee(this,function(k){switch(k.label){case 0:if(n=R(t,"img","toPixels"),t instanceof $t||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=n.rank===2?1:n.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=k.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=k.sent(),d=c[0],h=c[1],f=d[0],p=h[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(f<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+p+"].")}for(v=n.dtype==="float32"?255:1,y=new Uint8ClampedArray(i*o*4),m=0;m<o*i;++m)g=void 0,x=void 0,w=void 0,b=void 0,a===1?(g=s[m]*v,x=s[m]*v,w=s[m]*v,b=255):a===3?(g=s[3*m]*v,x=s[3*m+1]*v,w=s[3*m+2]*v,b=255):a===4&&(g=s[4*m]*v,x=s[4*m+1]*v,w=s[4*m+2]*v,b=s[4*m+3]*v),y[(C=4*m)+0]=Math.round(g),y[C+1]=Math.round(x),y[C+2]=Math.round(w),y[C+3]=Math.round(b);return e!=null&&(e.width=i,e.height=o,E=e.getContext("2d"),S=new ImageData(y,i,o),E.putImageData(S,0,0)),n!==t&&n.dispose(),[2,y]}})})},fromPixels:vse}),x4=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t}(),w4=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function ja(t){P(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),P(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),P(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),w4.register(t)}Object.freeze({Serializable:x4,SerializationMap:w4,registerClass:ja});var gse=.001,b4=.1;function M0(){return V.backend.floatPrecision()===32?gse:b4}function F0(t,e,n){var r=!0;if((In(t)||In(e))&&(r=!1),In(t)&&In(e)&&(r=!0),r){var o=t.constructor.name,i=e.constructor.name;if(o!==i)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+i)}if(Array.isArray(t)&&Array.isArray(e)){var a=ii(t),s=ii(e);if(!Jt(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var u=In(t)?t:Oi(t),l=In(e)?e:Oi(e);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+`.
Actual:   `+u+`.
Expected: `+l+".");for(var c=0;c<l.length;++c){var d=u[c],h=l[c];if(!n(d,h))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+h+`.
Actual:   `+u+`.
Expected: `+l+".")}}function $0(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}Object.freeze({TEST_EPSILON_FLOAT16:b4,expectArraysClose:function(t,e,n){return n==null&&(n=M0()),F0(t,e,function(r,o){return $0(r,o,n)})},testEpsilon:M0,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){var n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return la(t)||la(t[0])||la(e)||la(e[0])?F0(t,n,function(r,o){return r==o}):F0(t,e,function(r,o){return $0(r,o,0)})},expectNumbersClose:function(t,e,n){if(n==null&&(n=M0()),!$0(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error("Value out of range:"+t[r]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}});Object.freeze({gpgpu_util:Ure,webgl_util:cne,forceHalfFloat:function(){K().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:DF,setWebGLContext:h3,GPGPUContext:kF});var Ys=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Ro(e,t),e.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var i=this.computeGradients(n,o),a=i.value,s=i.grads;if(o!=null){var u=o.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return Sr(s),r?a:(a.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return jne(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&Sr(this.iterations_)},e.prototype.saveIterations=function(){return be(this,void 0,void 0,function(){return Ee(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:le(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return be(this,void 0,void 0,function(){return Ee(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(n){return be(this,void 0,void 0,function(){return Ee(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(n){return be(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,n.slice(1)]}})})},e}(x4);Object.defineProperty(Ys,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var yse=function(t){function e(n,r,o){o===void 0&&(o=null);var i=t.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=o,i.accumulatedGrads=[],i.accumulatedUpdates=[],o==null&&(i.epsilon=V.backend.epsilon()),i}return Ro(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=V.registeredVariables[o];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:o+"/accum_grad",variable:pe(function(){return tt(a).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:o+"/accum_var",variable:pe(function(){return tt(a).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[i].variable,l=r.accumulatedUpdates[i].variable;pe(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),d=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),h=l.mul(r.rho).add(d.square().mul(1-r.rho));u.assign(c),l.assign(h);var f=d.mul(-r.learningRate).add(a);a.assign(f)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Sr(this.accumulatedGrads.map(function(n){return n.variable})),Sr(this.accumulatedUpdates.map(function(n){return n.variable})))},e.prototype.getWeights=function(){return be(this,void 0,void 0,function(){var n;return Ee(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},e.prototype.setWeights=function(n){return be(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(Ys);ja(yse);var xse=function(t){function e(n,r){r===void 0&&(r=.1);var o=t.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return Ro(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=V.registeredVariables[o];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:o+"/accumulator",variable:pe(function(){return Jo(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[i].variable;pe(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(V.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&Sr(this.accumulatedGrads.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return be(this,void 0,void 0,function(){return Ee(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return be(this,void 0,void 0,function(){return Ee(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(Ys);ja(xse);var wse=function(t){function e(n,r,o,i){i===void 0&&(i=null);var a=t.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=o,a.epsilon=i,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],pe(function(){a.accBeta1=le(r).variable(),a.accBeta2=le(o).variable()}),i==null&&(a.epsilon=V.backend.epsilon()),a}return Ro(e,t),e.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);pe(function(){var i=cn(1,r.accBeta1),a=cn(1,r.accBeta2);o.forEach(function(s,u){var l=V.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:pe(function(){return tt(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:pe(function(){return tt(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,h=r.accumulatedSecondMoment[u].variable,f=d.mul(r.beta1).add(c.mul(1-r.beta1)),p=h.mul(r.beta2).add(c.square().mul(1-r.beta2)),v=f.div(i),y=p.div(a);d.assign(f),h.assign(p);var m=v.div(y.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(m)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Sr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Sr(this.accumulatedSecondMoment.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return be(this,void 0,void 0,function(){var n;return Ee(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},e.prototype.setWeights=function(n){return be(this,void 0,void 0,function(){var r,o=this;return Ee(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),pe(function(){o.accBeta1.assign(hv(o.beta1,o.iterations_+1)),o.accBeta2.assign(hv(o.beta2,o.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(Ys);ja(wse);var bse=function(t){function e(n,r,o,i,a){i===void 0&&(i=null),a===void 0&&(a=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=i,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],pe(function(){s.iteration=le(0).variable(),s.accBeta1=le(r).variable()}),i==null&&(s.epsilon=V.backend.epsilon()),s}return Ro(e,t),e.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);pe(function(){var i=cn(1,r.accBeta1),a=vo(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach(function(s,u){var l=V.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:tt(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:tt(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,h=r.accumulatedWeightedInfNorm[u].variable,f=d.mul(r.beta1).add(c.mul(1-r.beta1)),p=h.mul(r.beta2),v=c.abs(),y=p.maximum(v);d.assign(f),h.assign(y);var m=a.div(i).mul(f.div(y.add(r.epsilon))).add(l);l.assign(m)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Sr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Sr(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return be(this,void 0,void 0,function(){return Ee(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(n){return be(this,void 0,void 0,function(){return Ee(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(Ys);ja(bse);var E4=function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Ro(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=Array.isArray(n)?n[i].tensor:n[o];if(a!=null){var s=V.registeredVariables[o];pe(function(){var u=r.c.mul(a).add(s);s.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=dne(le(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return be(this,void 0,void 0,function(){return Ee(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},e.prototype.setWeights=function(n){return be(this,void 0,void 0,function(){return Ee(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e}(Ys);ja(E4);var Ese=function(t){function e(n,r,o){o===void 0&&(o=!1);var i=t.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=o,i.accumulations=[],i.m=le(i.momentum),i}return Ro(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=V.registeredVariables[o];r.accumulations[i]==null&&(r.accumulations[i]={originalName:o+"/momentum",variable:pe(function(){return tt(a).variable(!1)})});var s=r.accumulations[i].variable,u=Array.isArray(n)?n[i].tensor:n[o];u!=null&&pe(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Sr(this.accumulations.map(function(n){return n.variable}))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return be(this,void 0,void 0,function(){return Ee(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return be(this,void 0,void 0,function(){return Ee(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(E4);ja(Ese);var Cse=function(t){function e(n,r,o,i,a){r===void 0&&(r=.9),o===void 0&&(o=0),i===void 0&&(i=null),a===void 0&&(a=!1);var s=t.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,i==null&&(s.epsilon=V.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Ro(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=V.registeredVariables[o];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:o+"/rms",variable:pe(function(){return tt(a).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:o+"/momentum",variable:pe(function(){return tt(a).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:o+"/mg",variable:pe(function(){return tt(a).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedMeanSquares[i].variable,l=r.accumulatedMoments[i].variable;pe(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[i].variable,h=d.mul(r.decay).add(s.mul(1-r.decay)),f=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(h.square().add(r.epsilon)).sqrt()));u.assign(c),d.assign(h),l.assign(f);var p=a.sub(f);a.assign(p)}else{var v=u.mul(r.decay).add(s.square().mul(1-r.decay));f=l.mul(r.momentum).add(s.mul(r.learningRate).div(v.add(r.epsilon).sqrt())),u.assign(v),l.assign(f),p=a.sub(f),a.assign(p)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Sr(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Sr(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Sr(this.accumulatedMoments.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return be(this,void 0,void 0,function(){var n;return Ee(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},e.prototype.setWeights=function(n){return be(this,void 0,void 0,function(){var r;return Ee(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(Ys);ja(Cse);$t.prototype.squaredDifference=function(t){return OF(this,t)},G=Xae;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lw=function(t,e){return lw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},lw(t,e)};function Le(t,e){lw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var jn=function(){return jn=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jn.apply(this,arguments)};function Ie(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((r=r.apply(t,e||[])).next())})}function Te(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],o=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function gd(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var el=function(){function t(e,n){if(!vs(e)||!vs(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function ny(t,e){return t instanceof $t&&t.shape.length===e}function _se(t){return ny(t,2)}function ry(t){return ny(t,3)}function Ca(t){return ny(t,4)}function Sse(t){return t%1!==0}function DT(t){return t%2===0}function kse(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function OT(t){return t&&t.width&&t.height}function Ise(t,e){var n=t.width,r=t.height,o=e/Math.max(r,n);return new el(Math.round(n*o),Math.round(r*o))}function rC(t){return t.reduce(function(e,n){return e.add(n)},new st(0,0)).div(new st(t.length,t.length))}function ph(t,e,n){return Array(t).fill(0).map(function(r,o){return e+o*n})}function vs(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function MT(t){return vs(t)&&0<=t&&t<=1}var st=function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),Na=function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},o=[r.left,r.top,r.right,r.bottom].every(vs),i=[r.x,r.y,r.width,r.height].every(vs);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],l=a[2],c=a[3];t.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(vs)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new st(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new st(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new st(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new st(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),n=e[0],r=e[1],o=e[2],i=e[3];return new t({x:n,y:r,width:o,height:i})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),n=e[0],r=e[1],o=e[2],i=e[3];return new t({x:n,y:r,width:o,height:i})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,o=e.width,i=e.height,a=Math.abs(o-i);return o<i&&(n-=a/2,o+=a),i<o&&(r-=a/2,i+=a),new t({x:n,y:r,width:o,height:i})},t.prototype.rescale=function(e){var n=OT(e)?e.width:e,r=OT(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],o=r[0],i=r[1],a=r[2],s=r[3];return new t({x:o,y:i,width:a,height:s})},t.prototype.clipAtImageBorders=function(e,n){var r=this,o=r.x,i=r.y,a=r.right,s=r.bottom,u=Math.max(o,0),l=Math.max(i,0),c=a-u,d=s-l,h=Math.min(c,e-u),f=Math.min(d,n-l);return new t({x:u,y:l,width:h,height:f}).floor()},t.prototype.shift=function(e,n){var r=this,o=r.width,i=r.height,a=this.x+e,s=this.y+n;return new t({x:a,y:s,width:o,height:i})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,o=this.height+1,i=1,a=1,s=r,u=o,l=this.left,c=this.top,d=this.right,h=this.bottom;return d>n&&(s=-d+n+r,d=n),h>e&&(u=-h+e+o,h=e),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:a,edy:u,dx:i,edx:s,y:c,ey:h,x:l,ex:d,w:r,h:o}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),oy=function(t){Le(e,t);function e(n,r,o,i,a){return a===void 0&&(a=!1),t.call(this,{left:n,top:r,right:o,bottom:i},a)||this}return e}(Na),C4=function(){function t(e,n,r,o,i){this._imageDims=new el(i.width,i.height),this._score=e,this._classScore=n,this._className=r,this._box=new Na(o).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new Na(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),ui=function(t){Le(e,t);function e(n,r,o){return t.call(this,n,n,"",r,o)||this}return e.prototype.forSize=function(n,r){var o=t.prototype.forSize.call(this,n,r),i=o.score,a=o.relativeBox,s=o.imageDims;return new e(i,a,s)},e}(C4);function Tse(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),o=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),i=r*o;return n?i/(t.area+e.area-i):i/Math.min(t.area,e.area)}function Rse(t){var e=t.map(function(s){return s.x}),n=t.map(function(s){return s.y}),r=e.reduce(function(s,u){return u<s?u:s},1/0),o=n.reduce(function(s,u){return u<s?u:s},1/0),i=e.reduce(function(s,u){return s<u?u:s},0),a=n.reduce(function(s,u){return s<u?u:s},0);return new oy(r,o,i,a)}function mh(t,e,n,r){r===void 0&&(r=!0);for(var o=e.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),i=[],a=function(){var s=o.pop();i.push(s);for(var u=o,l=[],c=0;c<u.length;c++){var d=u[c],h=t[s],f=t[d];l.push(Tse(h,f,r))}o=o.filter(function(p,v){return l[v]<=n})};o.length>0;)a();return i}function vf(t,e){return pe(function(){var n=e[0],r=e[1],o=e[2],i=Jo(gd(t.shape.slice(0,3),[1]),n),a=Jo(gd(t.shape.slice(0,3),[1]),r),s=Jo(gd(t.shape.slice(0,3),[1]),o),u=un([i,a,s],3);return cn(t,u)})}function Ase(t,e){return e===void 0&&(e=!1),pe(function(){var n=t.shape.slice(1),r=n[0],o=n[1];if(r===o)return t;var i=Math.abs(r-o),a=Math.round(i*(e?.5:1)),s=r>o?2:1,u=function(f){var p=t.shape.slice();return p[s]=f,Jo(p,0)},l=u(a),c=i-l.shape[s],d=e&&c?u(c):null,h=[d,t,l].filter(function(f){return!!f}).map(function(f){return f.toFloat()});return un(h,s)})}function L0(t){return 1/(1+Math.exp(-t))}var oC=function(t){Le(e,t);function e(n,r,o,i,a){return a===void 0&&(a=!1),t.call(this,{x:n,y:r,width:o,height:i},a)||this}return e}(Na),Nse=.5,Pse=.43,Dse=.45,mv=function(){function t(e,n,r){r===void 0&&(r=new st(0,0));var o=n.width,i=n.height;this._imgDims=new el(o,i),this._shift=r,this._positions=e.map(function(a){return a.mul(new st(o,i)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new st(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new st(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new st(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof ui?e.box.floor():new Na(e);return this.shiftBy(r.x,r.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),i=o.useDlibAlignment,a=o.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(a)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],o=e[2],i=function(d){return o.sub(d).magnitude()},a=(i(n)+i(r))/2,s=Math.floor(a/Dse),u=rC(e),l=Math.floor(Math.max(0,u.x-Nse*s)),c=Math.floor(Math.max(0,u.y-Pse*s));return new oC(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},t.prototype.alignMinBbox=function(e){var n=Rse(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),Ose=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],rC([n[3],n[4]])]},e}(mv),Mse=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(rC)},e}(mv),FT=function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+kse(this.distance)+")":"")},t}(),$T=function(t){Le(e,t);function e(n,r){var o=t.call(this,n)||this;return o._label=r,o}return e.assertIsValidLabeledBox=function(n,r){if(Na.assertIsValidBox(n,r),!vs(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(Na),sp=function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(r){return new Float32Array(r)});return new t(e.label,n)},t}();(function(t){Le(e,t);function e(n,r,o,i){var a=t.call(this,n,r)||this;return a._score=o,a._classScore=i,a}return e.assertIsValidPredictedBox=function(n,r){if($T.assertIsValidLabeledBox(n,r),!MT(n.score)||!MT(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})($T);function Fse(t){return t.detection instanceof ui}function iC(t,e){var n={detection:e};return Object.assign({},t,n)}function _4(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function S4(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(o,i){t.readFile(r,function(a,s){return a?i(a):o(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function k4(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=S4();return jn({Canvas:t||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:e||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:n,createImageElement:r,fetch:o},i)}function I4(){return typeof window=="object"&&typeof document!="undefined"&&typeof HTMLImageElement!="undefined"&&typeof HTMLCanvasElement!="undefined"&&typeof HTMLVideoElement!="undefined"&&typeof ImageData!="undefined"&&typeof CanvasRenderingContext2D!="undefined"}function T4(){return typeof global=="object"&&typeof require=="function"&&typeof S$!="undefined"&&typeof process!="undefined"&&!!process.version}var rn;function $se(){if(!rn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return rn}function cw(t){rn=t}function aC(){I4()&&cw(_4()),T4()&&cw(k4())}function Lse(t){if(rn||aC(),!rn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?rn.Canvas:e,r=t.Image,o=r===void 0?rn.Image:r;rn.Canvas=n,rn.Image=o,rn.createCanvasElement=t.createCanvasElement||function(){return new n},rn.createImageElement=t.createImageElement||function(){return new o},rn.ImageData=t.ImageData||rn.ImageData,rn.Video=t.Video||rn.Video,rn.fetch=t.fetch||rn.fetch,rn.readFile=t.readFile||rn.readFile}var Qn={getEnv:$se,setEnv:cw,initialize:aC,createBrowserEnv:_4,createFileSystem:S4,createNodejsEnv:k4,monkeyPatch:Lse,isBrowser:I4,isNodejs:T4};aC();function R4(t){return!Qn.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function Bs(t){var e=Qn.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var o=R4(t);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=o.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var LT;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(LT||(LT={}));function A4(t){var e=Qn.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function Bse(t){return new Promise(function(e,n){if(t instanceof Qn.getEnv().Canvas||A4(t))return e();function r(i){!i.currentTarget||(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",o),e(i))}function o(i){!i.currentTarget||(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",o),n(i))}t.addEventListener("load",r),t.addEventListener("error",o)})}function N4(t){var e=Qn.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new el(t.naturalWidth,t.naturalHeight):t instanceof r?new el(t.videoWidth,t.videoHeight):new el(t.width,t.height)}function iy(t){var e=t.width,n=t.height,r=Qn.getEnv().createCanvasElement,o=r();return o.width=e,o.height=n,o}function sC(t,e){var n=Qn.getEnv().ImageData;if(!(t instanceof n)&&!A4(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=e||N4(t),o=r.width,i=r.height,a=iy({width:o,height:i});return t instanceof n?Bs(a).putImageData(t,0,0):Bs(a).drawImage(t,0,0,o,i),a}function Use(t,e){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s;return Te(this,function(u){switch(u.label){case 0:return n=e||Qn.getEnv().createCanvasElement(),r=t.shape.slice(Ca(t)?1:0),o=r[0],i=r[1],a=r[2],s=pe(function(){return t.as3D(o,i,a).toInt()}),[4,nC.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function BT(t){var e=Qn.getEnv(),n=e.Image,r=e.Canvas,o=e.Video;return t instanceof n||t instanceof r||t instanceof o}function zse(t,e,n){n===void 0&&(n=!1);var r=Qn.getEnv(),o=r.Image,i=r.Canvas;if(!(t instanceof o||t instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=N4(t),s=e/Math.max(a.height,a.width),u=s*a.width,l=s*a.height,c=iy({width:e,height:e}),d=t instanceof i?t:sC(t),h=Math.abs(u-l)/2,f=n&&u<l?h:0,p=n&&l<u?h:0;return Bs(c).drawImage(d,f,p,u,l),c}var vv=function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(o,i){if(ry(o)){r._imageTensors[i]=o,r._inputDimensions[i]=o.shape;return}if(Ca(o)){var a=o.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");r._imageTensors[i]=o,r._inputDimensions[i]=o.shape.slice(1);return}var s=o instanceof Qn.getEnv().Canvas?o:sC(o);r._canvases[i]=s,r._inputDimensions[i]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return ph(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return Ise({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,pe(function(){var o=ph(r.batchSize,0,1).map(function(a){var s=r.getInput(a);if(s instanceof $t){var u=Ca(s)?s:s.expandDims();return u=Ase(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=Y2.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(s instanceof Qn.getEnv().Canvas)return nC.fromPixels(zse(s,e,n));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),i=$r(o.map(function(a){return a.toFloat()})).as4D(r.batchSize,e,e,3);return i})},t}();function xn(t){return Ie(this,void 0,void 0,function(){var e,n,r;return Te(this,function(o){switch(o.label){case 0:if(t instanceof vv)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(i){return Array.isArray(t)?" at input index "+i+":":""},r=e.map(R4),r.forEach(function(i,a){if(!BT(i)&&!ry(i)&&!Ca(i))throw typeof e[a]=="string"?new Error("toNetInput -"+n(a)+" string passed, but could not resolve HTMLElement for element id "+e[a]):new Error("toNetInput -"+n(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Ca(i)){var s=i.shape[0];if(s!==1)throw new Error("toNetInput -"+n(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return BT(i)&&Bse(i)}))];case 1:return o.sent(),[2,new vv(r,Array.isArray(t))]}})})}function uC(t,e){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s,u;return Te(this,function(l){switch(l.label){case 0:return n=Qn.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,xn(t)];case 1:if(o=l.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=o.getInput(0),i instanceof n?(a=i,[3,4]):[3,2];case 2:return[4,Use(i)];case 3:a=l.sent(),l.label=4;case 4:r=a,l.label=5;case 5:return s=Bs(r),u=e.map(function(c){return c instanceof ui?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var d=c.x,h=c.y,f=c.width,p=c.height,v=iy({width:f,height:p});return Bs(v).putImageData(s.getImageData(d,h,f,p),0,0),v})]}})})}function lC(t,e){return Ie(this,void 0,void 0,function(){return Te(this,function(n){if(!ry(t)&&!Ca(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Ca(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,pe(function(){var r=t.shape.slice(Ca(t)?1:0),o=r[0],i=r[1],a=r[2],s=e.map(function(l){return l instanceof ui?l.forSize(i,o).box:l}).map(function(l){return l.clipAtImageBorders(i,o)}),u=s.map(function(l){var c=l.x,d=l.y,h=l.width,f=l.height;return t4(t.as3D(o,i,a),[d,c,0],[f,h,a])});return u})]})})}function Wse(t,e){return Ie(this,void 0,void 0,function(){var n,r;return Te(this,function(o){switch(o.label){case 0:return n=Qn.getEnv().fetch,[4,n(t,e)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Vse(t){return Ie(this,void 0,void 0,function(){return Te(this,function(e){switch(e.label){case 0:return[4,Wse(t)];case 1:return[2,e.sent().json()]}})})}function P4(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var o=t.split("/").filter(function(s){return s}),i=t.endsWith(".json")?o[o.length-1]:n,a=r+(t.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return a=t.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+i:a+"/"+i}}function jse(t,e){return Ie(this,void 0,void 0,function(){var n,r,o,i;return Te(this,function(a){switch(a.label){case 0:return n=P4(t,e),r=n.manifestUri,o=n.modelBaseUri,[4,Vse(r)];case 1:return i=a.sent(),[2,y4.loadWeights(i,o)]}})})}var Ui=function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;return r[o]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),o=r.obj,i=r.objProp;o[i].dispose(),o[i]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof Tl})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof Tl)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,o=n.tensor;e.reassignParamFromPath(r,o.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,o=n.tensor,i=kn(o.dataSync());o.dispose(),e.reassignParamFromPath(r,i)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return Ie(this,void 0,void 0,function(){return Te(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return Ie(this,void 0,void 0,function(){var n;return Te(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,jse(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,d;return Te(this,function(h){switch(h.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Qn.getEnv().readFile,r=P4(e,this.getDefaultModelName()),o=r.manifestUri,i=r.modelBaseUri,a=function(f){return Promise.all(f.map(function(p){return n(p).then(function(v){return v.buffer})}))},s=y4.weightsLoaderFactory(a),c=(l=JSON).parse,[4,n(o)];case 1:return u=c.apply(l,[h.sent().toString()]),[4,s(u,i)];case 2:return d=h.sent(),this.loadFromWeightMap(d),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(i,a){if(!i.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+e);return{obj:i.nextObj,objProp:a,nextObj:i.nextObj[a]}},{nextObj:this.params}),r=n.obj,o=n.objProp;if(!r||!o||!(r[o]instanceof $t))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:o}},t}();function Or(t,e,n){return pe(function(){var r=H2(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=He(r,e.bias),r})}function B0(t,e,n){return n===void 0&&(n=!1),pe(function(){var r=Lt(n?He(ao(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):Or(t,e.conv0,[2,2])),o=Or(r,e.conv1,[1,1]),i=Lt(He(r,o)),a=Or(i,e.conv2,[1,1]);return Lt(He(r,He(o,a)))})}function up(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),pe(function(){var o=Lt(n?He(ao(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Or(t,e.conv0,r?[2,2]:[1,1])),i=Or(o,e.conv1,[1,1]),a=Lt(He(o,i)),s=Or(a,e.conv2,[1,1]),u=Lt(He(o,He(i,s))),l=Or(u,e.conv3,[1,1]);return Lt(He(o,He(i,He(s,l))))})}function _o(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),pe(function(){var o=He(ao(t,e.filters,[1,1],n),e.bias);return r?Lt(o):o})}function zi(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function ay(t,e){return function(n,r,o,i){var a=hr(t(n*r*o*o),[o,o,n,r]),s=Yt(t(r));return e.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:s}}}function cC(t,e){return function(n,r,o){var i=ba(t(n*r),[n,r]),a=Yt(t(r));return e.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:i,bias:a}}}var D4=function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t}();function dC(t,e){return function(n,r,o){var i=hr(t(9*n),[3,3,n,1]),a=hr(t(n*r),[1,1,n,r]),s=Yt(t(r));return e.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new D4(i,a,s)}}function hC(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),o=t(e+"/bias",1);return new D4(n,r,o)}}function Ha(t,e){return function(n,r,o){var i=t[n];if(!ny(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return e.push({originalPath:n,paramPath:o||n}),i}}function Wi(t){var e=t;function n(o){var i=e.slice(0,o);return e=e.slice(o),i}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function O4(t,e){var n=ay(t,e),r=dC(t,e);function o(a,s,u,l){l===void 0&&(l=!1);var c=l?n(a,s,3,u+"/conv0"):r(a,s,u+"/conv0"),d=r(s,s,u+"/conv1"),h=r(s,s,u+"/conv2");return{conv0:c,conv1:d,conv2:h}}function i(a,s,u,l){l===void 0&&(l=!1);var c=o(a,s,u,l),d=c.conv0,h=c.conv1,f=c.conv2,p=r(s,s,u+"/conv3");return{conv0:d,conv1:h,conv2:f,conv3:p}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:i}}function Hse(t){var e=[],n=Wi(t),r=n.extractWeights,o=n.getRemainingWeights,i=O4(r,e).extractDenseBlock4Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2"),l=i(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{dense0:a,dense1:s,dense2:u,dense3:l}}}function M4(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function F4(t,e){var n=Ha(t,e),r=M4(n),o=hC(n);function i(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),c=o(s+"/conv1"),d=o(s+"/conv2");return{conv0:l,conv1:c,conv2:d}}function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),c=o(s+"/conv1"),d=o(s+"/conv2"),h=o(s+"/conv3");return{conv0:l,conv1:c,conv2:d,conv3:h}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function qse(t){var e=[],n=F4(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return zi(t,e),{params:r,paramMappings:e}}var $4=function(t){Le(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return pe(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=vf(o,i).div(le(255)),s=up(a,r.dense0,!0);return s=up(s,r.dense1),s=up(s,r.dense2),s=up(s,r.dense3),s=pf(s,[7,7],[2,2],"valid"),s})},e.prototype.forward=function(n){return Ie(this,void 0,void 0,function(){var r;return Te(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return qse(n)},e.prototype.extractParams=function(n){return Hse(n)},e}(Ui);function jo(t,e){return pe(function(){return He(Zg(t,e.weights),e.bias)})}function Gse(t,e,n){var r=[],o=Wi(t),i=o.extractWeights,a=o.getRemainingWeights,s=cC(i,r),u=s(e,n,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:u}}}function Kse(t){var e=[],n=Ha(t,e);function r(i){var a=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:a,bias:s}}var o={fc:r("fc")};return zi(t,e),{params:o,paramMappings:e}}function L4(t){var e={},n={};return Object.keys(t).forEach(function(r){var o=r.startsWith("fc")?n:e;o[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var B4=function(t){Le(e,t);function e(n,r){var o=t.call(this,n)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return pe(function(){var i=n instanceof vv?r.faceFeatureExtractor.forwardInput(n):n;return jo(i.as2D(i.shape[0],-1),o.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,i=r.paramMappings;this._params=o,this._paramMappings=i},e.prototype.extractClassifierParams=function(n){return Gse(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=L4(n),o=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),Kse(i)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),i=o*r+o,a=n.slice(0,n.length-i),s=n.slice(n.length-i);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},e}(Ui),UT=["neutral","happy","sad","angry","fearful","disgusted","surprised"],Xse=function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);UT.forEach(function(r,o){n[r]=e[o]})}return t.prototype.asSortedArray=function(){var e=this;return UT.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t}(),Yse=function(t){Le(e,t);function e(n){return n===void 0&&(n=new $4),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return pe(function(){return Li(r.runNet(n))})},e.prototype.forward=function(n){return Ie(this,void 0,void 0,function(){var r;return Te(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.predictExpressions=function(n){return Ie(this,void 0,void 0,function(){var r,o,i,a,s=this;return Te(this,function(u){switch(u.label){case 0:return[4,xn(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return o=u.sent(),[4,Promise.all(ln(o).map(function(l){return Ie(s,void 0,void 0,function(){var c;return Te(this,function(d){switch(d.label){case 0:return[4,l.data()];case 1:return c=d.sent(),l.dispose(),[2,c]}})})}))];case 3:return i=u.sent(),o.dispose(),a=i.map(function(l){return new Xse(l)}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(B4);function U4(t,e){var n={expressions:e};return Object.assign({},t,n)}function Qse(t){return Fse(t)&&t.landmarks instanceof mv&&t.unshiftedLandmarks instanceof mv&&t.alignedRect instanceof ui}function fC(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),o=r.align(),i=t.detection.imageDims,a=new ui(t.detection.score,o.rescale(i.reverse()),i),s={landmarks:r,unshiftedLandmarks:e,alignedRect:a};return Object.assign({},t,s)}function Jse(t,e){var n=ay(t,e),r=dC(t,e);function o(a,s,u){var l=r(a,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),d=n(a,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:d}}function i(a,s){var u=r(a,a,s+"/separable_conv0"),l=r(a,a,s+"/separable_conv1"),c=r(a,a,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:i}}function Zse(t,e){var n=[],r=Wi(t),o=r.extractWeights,i=r.getRemainingWeights,a=Jse(o,n),s=a.extractConvParams,u=a.extractSeparableConvParams,l=a.extractReductionBlockParams,c=a.extractMainBlockParams,d=s(3,32,3,"entry_flow/conv_in"),h=l(32,64,"entry_flow/reduction_block_0"),f=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:d,reduction_block_0:h,reduction_block_1:f},v={};ph(e,0,1).forEach(function(x){v["main_block_"+x]=c(128,"middle_flow/main_block_"+x)});var y=l(128,256,"exit_flow/reduction_block"),m=u(256,512,"exit_flow/separable_conv"),g={reduction_block:y,separable_conv:m};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:v,exit_flow:g}}}function eue(t,e){var n=Ha(t,e),r=M4(n),o=hC(n);function i(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function a(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),c=o(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:i,extractMainBlockParams:a}}function tue(t,e){var n=[],r=eue(t,n),o=r.extractConvParams,i=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=o("entry_flow/conv_in"),l=a("entry_flow/reduction_block_0"),c=a("entry_flow/reduction_block_1"),d={conv_in:u,reduction_block_0:l,reduction_block_1:c},h={};ph(e,0,1).forEach(function(y){h["main_block_"+y]=s("middle_flow/main_block_"+y)});var f=a("exit_flow/reduction_block"),p=i("exit_flow/separable_conv"),v={reduction_block:f,separable_conv:p};return zi(t,n),{params:{entry_flow:d,middle_flow:h,exit_flow:v},paramMappings:n}}function z4(t,e,n){return He(ao(t,e.filters,n,"same"),e.bias)}function U0(t,e,n){n===void 0&&(n=!0);var r=n?Lt(t):t;return r=Or(r,e.separable_conv0,[1,1]),r=Or(Lt(r),e.separable_conv1,[1,1]),r=dn(r,[3,3],[2,2],"same"),r=He(r,z4(t,e.expansion_conv,[2,2])),r}function nue(t,e){var n=Or(Lt(t),e.separable_conv0,[1,1]);return n=Or(Lt(n),e.separable_conv1,[1,1]),n=Or(Lt(n),e.separable_conv2,[1,1]),n=He(n,t),n}var rue=function(t){Le(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return pe(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=vf(i,a).div(le(256)),u=Lt(z4(s,o.entry_flow.conv_in,[2,2]));return u=U0(u,o.entry_flow.reduction_block_0,!1),u=U0(u,o.entry_flow.reduction_block_1),ph(r._numMainBlocks,0,1).forEach(function(l){u=nue(u,o.middle_flow["main_block_"+l])}),u=U0(u,o.exit_flow.reduction_block),u=Lt(Or(u,o.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return Ie(this,void 0,void 0,function(){var r;return Te(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return tue(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return Zse(n,this._numMainBlocks)},e}(Ui);function oue(t){var e=[],n=Wi(t),r=n.extractWeights,o=n.getRemainingWeights,i=cC(r,e),a=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{fc:{age:a,gender:s}}}}function iue(t){var e=[],n=Ha(t,e);function r(i){var a=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:a,bias:s}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return zi(t,e),{params:o,paramMappings:e}}var gv;(function(t){t.FEMALE="female",t.MALE="male"})(gv||(gv={}));var aue=function(t){Le(e,t);function e(n){n===void 0&&(n=new rue(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return pe(function(){var i=n instanceof vv?r.faceFeatureExtractor.forwardInput(n):n,a=pf(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),s=jo(a,o.fc.age).as1D(),u=jo(a,o.fc.gender);return{age:s,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return pe(function(){var o=r.runNet(n),i=o.age,a=o.gender;return{age:i,gender:Li(a)}})},e.prototype.forward=function(n){return Ie(this,void 0,void 0,function(){var r;return Te(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return Ie(this,void 0,void 0,function(){var r,o,i,a,s,u,l=this;return Te(this,function(c){switch(c.label){case 0:return[4,xn(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return o=c.sent(),i=ln(o.age),a=ln(o.gender),s=i.map(function(d,h){return{ageTensor:d,genderTensor:a[h]}}),[4,Promise.all(s.map(function(d){var h=d.ageTensor,f=d.genderTensor;return Ie(l,void 0,void 0,function(){var p,v,y,m,g;return Te(this,function(x){switch(x.label){case 0:return[4,h.data()];case 1:return p=x.sent()[0],[4,f.data()];case 2:return v=x.sent()[0],y=v>.5,m=y?gv.MALE:gv.FEMALE,g=y?v:1-v,h.dispose(),f.dispose(),[2,{age:p,gender:m,genderProbability:g}]}})})}))];case 3:return u=c.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,i=r.paramMappings;this._params=o,this._paramMappings=i},e.prototype.extractClassifierParams=function(n){return oue(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=L4(n),o=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),iue(i)},e.prototype.extractParams=function(n){var r=1539,o=n.slice(0,n.length-r),i=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},e}(Ui),W4=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,o){var i=o.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),a=i.length;return pe(function(){var s=function(h,f){return $r([Jo([68],h),Jo([68],f)],1).as2D(1,136).as1D()},u=function(h,f){var p=i[h],v=p.width,y=p.height;return f(v,y)?Math.abs(v-y)/2:0},l=function(h){return u(h,function(f,p){return f<p})},c=function(h){return u(h,function(f,p){return p<f})},d=n.mul(Jo([a,136],r)).sub($r(Array.from(Array(a),function(h,f){return s(l(f),c(f))}))).div($r(Array.from(Array(a),function(h,f){return s(i[f].width,i[f].height)})));return d})},e.prototype.forwardInput=function(n){var r=this;return pe(function(){var o=r.runNet(n);return r.postProcess(o,n.inputSize,n.inputDimensions.map(function(i){var a=i[0],s=i[1];return{height:a,width:s}}))})},e.prototype.forward=function(n){return Ie(this,void 0,void 0,function(){var r;return Te(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.detectLandmarks=function(n){return Ie(this,void 0,void 0,function(){var r,o,i,a=this;return Te(this,function(s){switch(s.label){case 0:return[4,xn(n)];case 1:return r=s.sent(),o=pe(function(){return ln(a.forwardInput(r))}),[4,Promise.all(o.map(function(u,l){return Ie(a,void 0,void 0,function(){var c,d,h,f,p;return Te(this,function(v){switch(v.label){case 0:return h=(d=Array).from,[4,u.data()];case 1:return c=h.apply(d,[v.sent()]),f=c.filter(function(y,m){return DT(m)}),p=c.filter(function(y,m){return!DT(m)}),[2,new Mse(Array(68).fill(0).map(function(y,m){return new st(f[m],p[m])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return i=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(B4),V4=function(t){Le(e,t);function e(n){return n===void 0&&(n=new $4),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(W4);function sue(t){var e=[],n=F4(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return zi(t,e),{params:r,paramMappings:e}}function uue(t){var e=[],n=Wi(t),r=n.extractWeights,o=n.getRemainingWeights,i=O4(r,e).extractDenseBlock3Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{dense0:a,dense1:s,dense2:u}}}var lue=function(t){Le(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return pe(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=vf(o,i).div(le(255)),s=B0(a,r.dense0,!0);return s=B0(s,r.dense1),s=B0(s,r.dense2),s=pf(s,[14,14],[2,2],"valid"),s})},e.prototype.forward=function(n){return Ie(this,void 0,void 0,function(){var r;return Te(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return sue(n)},e.prototype.extractParams=function(n){return uue(n)},e}(Ui),cue=function(t){Le(e,t);function e(n){return n===void 0&&(n=new lue),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(W4);(function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(V4);function due(t,e){return He(Gn(t,e.weights),e.biases)}function pC(t,e,n,r,o){o===void 0&&(o="same");var i=e.conv,a=i.filters,s=i.bias,u=ao(t,a,n,o);return u=He(u,s),u=due(u,e.scale),r?Lt(u):u}function hue(t,e){return pC(t,e,[1,1],!0)}function j4(t,e){return pC(t,e,[1,1],!1)}function H4(t,e){return pC(t,e,[2,2],!0,"valid")}function fue(t,e){function n(s,u,l){var c=t(s),d=c.length/(u*l*l);if(Sse(d))throw new Error("depth has to be an integer: "+d+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return pe(function(){return Aa(hr(c,[u,d,l,l]),[2,3,1,0])})}function r(s,u,l,c){var d=n(s,u,l),h=Yt(t(u));return e.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:d,bias:h}}function o(s,u){var l=Yt(t(s)),c=Yt(t(s));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function i(s,u,l,c){var d=r(s,u,l,c+"/conv"),h=o(u,c+"/scale");return{conv:d,scale:h}}function a(s,u,l,c,d){d===void 0&&(d=!1);var h=i((d?.5:1)*s,u,l,c+"/conv1"),f=i(s,u,l,c+"/conv2");return{conv1:h,conv2:f}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function pue(t){var e=Wi(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],i=fue(n,o),a=i.extractConvLayerParams,s=i.extractResidualLayerParams,u=a(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),v=s(36864,64,3,"conv64_3"),y=s(147456,128,3,"conv128_down",!0),m=s(147456,128,3,"conv128_1"),g=s(147456,128,3,"conv128_2"),x=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),b=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),E=pe(function(){return Aa(ba(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var S={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:d,conv64_down:h,conv64_1:f,conv64_2:p,conv64_3:v,conv128_down:y,conv128_1:m,conv128_2:g,conv256_down:x,conv256_1:w,conv256_2:b,conv256_down_out:C,fc:E};return{params:S,paramMappings:o}}function mue(t,e){var n=Ha(t,e);function r(a){var s=n(a+"/scale/weights",1),u=n(a+"/scale/biases",1);return{weights:s,biases:u}}function o(a){var s=n(a+"/conv/filters",4),u=n(a+"/conv/bias",1),l=r(a);return{conv:{filters:s,bias:u},scale:l}}function i(a){return{conv1:o(a+"/conv1"),conv2:o(a+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:i}}function vue(t){var e=[],n=mue(t,e),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=r("conv32_down"),a=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),c=o("conv64_1"),d=o("conv64_2"),h=o("conv64_3"),f=o("conv128_down"),p=o("conv128_1"),v=o("conv128_2"),y=o("conv256_down"),m=o("conv256_1"),g=o("conv256_2"),x=o("conv256_down_out"),w=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!_se(w))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var b={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:d,conv64_3:h,conv128_down:f,conv128_1:p,conv128_2:v,conv256_down:y,conv256_1:m,conv256_2:g,conv256_down_out:x,fc:w};return zi(t,e),{params:b,paramMappings:e}}function Mo(t,e){var n=hue(t,e.conv1);return n=j4(n,e.conv2),n=He(n,t),n=Lt(n),n}function lp(t,e){var n=H4(t,e.conv1);n=j4(n,e.conv2);var r=pf(t,2,2,"valid"),o=St(r.shape),i=r.shape[3]!==n.shape[3],a=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(a){var s=gd(n.shape);s[1]=1;var u=St(s);n=un([n,u],1);var l=gd(n.shape);l[2]=1;var c=St(l);n=un([n,c],2)}return r=i?un([r,o],3):r,n=He(r,n),n=Lt(n),n}var gue=function(t){Le(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return pe(function(){var o=n.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],a=vf(o,i).div(le(256)),s=H4(a,r.conv32_down);s=dn(s,3,2,"valid"),s=Mo(s,r.conv32_1),s=Mo(s,r.conv32_2),s=Mo(s,r.conv32_3),s=lp(s,r.conv64_down),s=Mo(s,r.conv64_1),s=Mo(s,r.conv64_2),s=Mo(s,r.conv64_3),s=lp(s,r.conv128_down),s=Mo(s,r.conv128_1),s=Mo(s,r.conv128_2),s=lp(s,r.conv256_down),s=Mo(s,r.conv256_1),s=Mo(s,r.conv256_2),s=lp(s,r.conv256_down_out);var u=s.mean([1,2]),l=Zg(u,r.fc);return l})},e.prototype.forward=function(n){return Ie(this,void 0,void 0,function(){var r;return Te(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return Ie(this,void 0,void 0,function(){var r,o,i,a=this;return Te(this,function(s){switch(s.label){case 0:return[4,xn(n)];case 1:return r=s.sent(),o=pe(function(){return ln(a.forwardInput(r))}),[4,Promise.all(o.map(function(u){return u.data()}))];case 2:return i=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return vue(n)},e.prototype.extractParams=function(n){return pue(n)},e}(Ui);function q4(t,e){var n={descriptor:e};return Object.assign({},t,n)}function G4(t,e){var n={age:e};return Object.assign({},t,n)}function K4(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var X4=function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,o=n.scaleFactor,i=n.maxNumScales,a=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=i||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function yue(t,e){function n(u,l){var c=hr(t(9*u),[3,3,u,1]),d=Yt(t(u)),h=Yt(t(u)),f=Yt(t(u)),p=Yt(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:d,batch_norm_offset:h,batch_norm_mean:f,batch_norm_variance:p}}function r(u,l,c,d,h){var f=hr(t(u*l*c*c),[c,c,u,l]),p=Yt(t(l));return e.push({paramPath:d+"/filters"},{paramPath:d+"/"+(h?"batch_norm_offset":"bias")}),{filters:f,bias:p}}function o(u,l,c,d){var h=r(u,l,c,d,!0),f=h.filters,p=h.bias;return{filters:f,batch_norm_offset:p}}function i(u,l,c){var d=n(u,c+"/depthwise_conv"),h=o(u,l,1,c+"/pointwise_conv");return{depthwise_conv:d,pointwise_conv:h}}function a(){var u=o(3,32,3,"mobilenetv1/conv_0"),l=i(32,64,"mobilenetv1/conv_1"),c=i(64,128,"mobilenetv1/conv_2"),d=i(128,128,"mobilenetv1/conv_3"),h=i(128,256,"mobilenetv1/conv_4"),f=i(256,256,"mobilenetv1/conv_5"),p=i(256,512,"mobilenetv1/conv_6"),v=i(512,512,"mobilenetv1/conv_7"),y=i(512,512,"mobilenetv1/conv_8"),m=i(512,512,"mobilenetv1/conv_9"),g=i(512,512,"mobilenetv1/conv_10"),x=i(512,512,"mobilenetv1/conv_11"),w=i(512,1024,"mobilenetv1/conv_12"),b=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:d,conv_4:h,conv_5:f,conv_6:p,conv_7:v,conv_8:y,conv_9:m,conv_10:g,conv_11:x,conv_12:w,conv_13:b}}function s(){var u=o(1024,256,1,"prediction_layer/conv_0"),l=o(256,512,3,"prediction_layer/conv_1"),c=o(512,128,1,"prediction_layer/conv_2"),d=o(128,256,3,"prediction_layer/conv_3"),h=o(256,128,1,"prediction_layer/conv_4"),f=o(128,256,3,"prediction_layer/conv_5"),p=o(256,64,1,"prediction_layer/conv_6"),v=o(64,128,3,"prediction_layer/conv_7"),y=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),m=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),g=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),x=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),w=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),b=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),C=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),k=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),_=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),I=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),N={box_encoding_predictor:y,class_predictor:m},$={box_encoding_predictor:g,class_predictor:x},M={box_encoding_predictor:w,class_predictor:b},B={box_encoding_predictor:C,class_predictor:E},D={box_encoding_predictor:S,class_predictor:k},U={box_encoding_predictor:_,class_predictor:I};return{conv_0:u,conv_1:l,conv_2:c,conv_3:d,conv_4:h,conv_5:f,conv_6:p,conv_7:v,box_predictor_0:N,box_predictor_1:$,box_predictor_2:M,box_predictor_3:B,box_predictor_4:D,box_predictor_5:U}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function xue(t){var e=[],n=Wi(t),r=n.extractWeights,o=n.getRemainingWeights,i=yue(r,e),a=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,u=a(),l=s(),c=S2(r(5118*4),[1,5118,4]),d={extra_dim:c};if(e.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:d},paramMappings:e}}function wue(t,e){var n=Ha(t,e);function r(l,c,d){var h=n(l+"/Conv2d_"+c+"_pointwise/weights",4,d+"/filters"),f=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,d+"/batch_norm_offset");return{filters:h,batch_norm_offset:f}}function o(l){var c="mobilenetv1/conv_"+l,d="MobilenetV1/Conv2d_"+l+"_depthwise",h=c+"/depthwise_conv",f=c+"/pointwise_conv",p=n(d+"/depthwise_weights",4,h+"/filters"),v=n(d+"/BatchNorm/gamma",1,h+"/batch_norm_scale"),y=n(d+"/BatchNorm/beta",1,h+"/batch_norm_offset"),m=n(d+"/BatchNorm/moving_mean",1,h+"/batch_norm_mean"),g=n(d+"/BatchNorm/moving_variance",1,h+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:v,batch_norm_offset:y,batch_norm_mean:m,batch_norm_variance:g},pointwise_conv:r("MobilenetV1",l,f)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function a(l,c){var d=n(l+"/weights",4,c+"/filters"),h=n(l+"/biases",1,c+"/bias");return{filters:d,bias:h}}function s(l){var c=a("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),d=a("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:d}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:u}}function bue(t){var e=[],n=wue(t,e),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!ry(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return zi(t,e),{params:a,paramMappings:e}}function $o(t,e,n){return pe(function(){var r=ao(t,e.filters,n,"same");return r=He(r,e.batch_norm_offset),z2(r,0,6)})}var Eue=.0010000000474974513;function Cue(t,e,n){return pe(function(){var r=Jg(t,e.filters,n,"same");return r=UF(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,Eue),z2(r,0,6)})}function _ue(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function Sue(t,e){return pe(function(){var n=null,r=$o(t,e.conv_0,[2,2]),o=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(o.forEach(function(i,a){var s=a+1,u=_ue(s);r=Cue(r,i.depthwise_conv,u),r=$o(r,i.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function kue(t,e,n,r,o){var i=t.shape[0],a=Math.min(n,i),s=e.map(function(c,d){return{score:c,boxIndex:d}}).filter(function(c){return c.score>o}).sort(function(c,d){return d.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=a)){for(var d=c.score,h=l.length-1;h>=0;--h){var f=Iue(t,c.boxIndex,l[h]);if(f!==0&&(c.score*=u(f),c.score<=o))break}d===c.score&&l.push(c.boxIndex)}}),l}function Iue(t,e,n){var r=t.arraySync(),o=Math.min(r[e][0],r[e][2]),i=Math.min(r[e][1],r[e][3]),a=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),h=(a-o)*(s-i),f=(c-u)*(d-l);if(h<=0||f<=0)return 0;var p=Math.max(o,u),v=Math.max(i,l),y=Math.min(a,c),m=Math.min(s,d),g=Math.max(y-p,0)*Math.max(m-v,0);return g/(h+f-g)}function Tue(t){var e=ln(Aa(t,[1,0])),n=[cn(e[2],e[0]),cn(e[3],e[1])],r=[He(e[0],vo(n[0],le(2))),He(e[1],vo(n[1],le(2)))];return{sizes:n,centers:r}}function Rue(t,e){var n=Tue(t),r=n.sizes,o=n.centers,i=ln(Aa(e,[1,0])),a=vo(Gn(rw(vo(i[2],le(5))),r[0]),le(2)),s=He(Gn(vo(i[0],le(10)),r[0]),o[0]),u=vo(Gn(rw(vo(i[3],le(5))),r[1]),le(2)),l=He(Gn(vo(i[1],le(10)),r[1]),o[1]);return Aa($r([cn(s,a),cn(l,u),He(s,a),He(l,u)]),[1,0])}function Aue(t,e,n){return pe(function(){var r=t.shape[0],o=Rue(bo(Xu(n.extra_dim,[r,1,1]),[-1,4]),bo(t,[-1,4]));o=bo(o,[r,o.shape[0]/r,4]);var i=FF(ai(e,[0,0,1],[-1,-1,-1])),a=ai(i,[0,0,0],[-1,-1,1]);a=bo(a,[r,a.shape[1]]);var s=ln(o),u=ln(a);return{boxes:s,scores:u}})}function cu(t,e){return pe(function(){var n=t.shape[0],r=bo(_o(t,e.box_encoding_predictor),[n,-1,1,4]),o=bo(_o(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function Nue(t,e,n){return pe(function(){var r=$o(t,n.conv_0,[1,1]),o=$o(r,n.conv_1,[2,2]),i=$o(o,n.conv_2,[1,1]),a=$o(i,n.conv_3,[2,2]),s=$o(a,n.conv_4,[1,1]),u=$o(s,n.conv_5,[2,2]),l=$o(u,n.conv_6,[1,1]),c=$o(l,n.conv_7,[2,2]),d=cu(e,n.box_predictor_0),h=cu(t,n.box_predictor_1),f=cu(o,n.box_predictor_2),p=cu(a,n.box_predictor_3),v=cu(u,n.box_predictor_4),y=cu(c,n.box_predictor_5),m=un([d.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,y.boxPredictionEncoding],1),g=un([d.classPrediction,h.classPrediction,f.classPrediction,p.classPrediction,v.classPrediction,y.classPrediction],1);return{boxPredictions:m,classPredictions:g}})}var sy=function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),Y4=function(t){Le(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return pe(function(){var o=n.toBatchTensor(512,!1).toFloat(),i=cn(Gn(o,le(.007843137718737125)),le(1)),a=Sue(i,r.mobilenetv1),s=Nue(a.out,a.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return Aue(u,l,r.output_layer)})},e.prototype.forward=function(n){return Ie(this,void 0,void 0,function(){var r;return Te(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,xn(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var o,i,a,s,u,l,c,d,h,f,p,v,y,m,g,x,w,b,C,E,S;return Te(this,function(k){switch(k.label){case 0:return o=new sy(r),i=o.maxResults,a=o.minConfidence,[4,xn(n)];case 1:for(s=k.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,d=l[0],h=c[0],f=1;f<l.length;f++)l[f].dispose(),c[f].dispose();return y=(v=Array).from,[4,h.data()];case 2:return p=y.apply(v,[k.sent()]),m=.5,g=kue(d,p,i,m,a),x=s.getReshapedInputDimensions(0),w=s.inputSize,b=w/x.width,C=w/x.height,E=d.arraySync(),S=g.map(function(_){var I=[Math.max(0,E[_][0]),Math.min(1,E[_][2])].map(function(U){return U*C}),N=I[0],$=I[1],M=[Math.max(0,E[_][1]),Math.min(1,E[_][3])].map(function(U){return U*b}),B=M[0],D=M[1];return new ui(p[_],new oC(B,N,D-B,$-N),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),d.dispose(),h.dispose(),[2,S]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return bue(n)},e.prototype.extractParams=function(n){return xue(n)},e}(Ui);(function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Y4);var Pue=.4,Due=[new st(.738768,.874946),new st(2.42204,2.65704),new st(4.30971,7.04493),new st(10.246,4.59428),new st(12.6868,11.8741)],Oue=[new st(1.603231,2.094468),new st(6.041143,7.080126),new st(2.882459,3.518061),new st(4.266906,5.178857),new st(9.041765,10.66308)],Mue=[117.001,114.697,97.404],Fue="tiny_yolov2_model",$ue="tiny_yolov2_separable_conv_model",cp=function(t){return typeof t=="number"};function Lue(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!cp(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return cp(e.x)&&cp(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(cp)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function mC(t){return pe(function(){var e=Gn(t,le(.10000000149011612));return He(Lt(cn(t,e)),e)})}function qi(t,e){return pe(function(){var n=Xs(t,[[0,0],[1,1],[1,1],[0,0]]);return n=ao(n,e.conv.filters,[1,1],"valid"),n=cn(n,e.bn.sub),n=Gn(n,e.bn.truediv),n=He(n,e.conv.bias),mC(n)})}function Gi(t,e){return pe(function(){var n=Xs(t,[[0,0],[1,1],[1,1],[0,0]]);return n=H2(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=He(n,e.bias),mC(n)})}function Bue(t,e){var n=ay(t,e);function r(a,s){var u=Yt(t(a)),l=Yt(t(a));return e.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function o(a,s,u){var l=n(a,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var i=dC(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:i}}function Uue(t,e,n,r){var o=Wi(t),i=o.extractWeights,a=o.getRemainingWeights,s=[],u=Bue(i,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,d=u.extractSeparableConvParams,h;if(e.withSeparableConvs){var f=r[0],p=r[1],v=r[2],y=r[3],m=r[4],g=r[5],x=r[6],w=r[7],b=r[8],C=e.isFirstLayerConv2d?l(f,p,3,"conv0"):d(f,p,"conv0"),E=d(p,v,"conv1"),S=d(v,y,"conv2"),k=d(y,m,"conv3"),_=d(m,g,"conv4"),I=d(g,x,"conv5"),N=w?d(x,w,"conv6"):void 0,$=b?d(w,b,"conv7"):void 0,M=l(b||w||x,5*n,1,"conv8");h={conv0:C,conv1:E,conv2:S,conv3:k,conv4:_,conv5:I,conv6:N,conv7:$,conv8:M}}else{var f=r[0],p=r[1],v=r[2],y=r[3],m=r[4],g=r[5],x=r[6],w=r[7],b=r[8],C=c(f,p,"conv0"),E=c(p,v,"conv1"),S=c(v,y,"conv2"),k=c(y,m,"conv3"),_=c(m,g,"conv4"),I=c(g,x,"conv5"),N=c(x,w,"conv6"),$=c(w,b,"conv7"),M=l(b,5*n,1,"conv8");h={conv0:C,conv1:E,conv2:S,conv3:k,conv4:_,conv5:I,conv6:N,conv7:$,conv8:M}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:h,paramMappings:s}}function zue(t,e){var n=Ha(t,e);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function o(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function i(s){var u=o(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var a=hC(n);return{extractConvParams:o,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function Wue(t,e){var n=[],r=zue(t,n),o=r.extractConvParams,i=r.extractConvWithBatchNormParams,a=r.extractSeparableConvParams,s;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;s={conv0:e.isFirstLayerConv2d?o("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:u>7?a("conv6"):void 0,conv7:u>8?a("conv7"):void 0,conv8:o("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:o("conv8")};return zi(t,n),{params:s,paramMappings:n}}var zT;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(zT||(zT={}));var vC=function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),Q4=function(t){Le(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return Lue(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var o=qi(n,r.conv0);return o=dn(o,[2,2],[2,2],"same"),o=qi(o,r.conv1),o=dn(o,[2,2],[2,2],"same"),o=qi(o,r.conv2),o=dn(o,[2,2],[2,2],"same"),o=qi(o,r.conv3),o=dn(o,[2,2],[2,2],"same"),o=qi(o,r.conv4),o=dn(o,[2,2],[2,2],"same"),o=qi(o,r.conv5),o=dn(o,[2,2],[1,1],"same"),o=qi(o,r.conv6),o=qi(o,r.conv7),_o(o,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var o=this.config.isFirstLayerConv2d?mC(_o(n,r.conv0,"valid",!1)):Gi(n,r.conv0);return o=dn(o,[2,2],[2,2],"same"),o=Gi(o,r.conv1),o=dn(o,[2,2],[2,2],"same"),o=Gi(o,r.conv2),o=dn(o,[2,2],[2,2],"same"),o=Gi(o,r.conv3),o=dn(o,[2,2],[2,2],"same"),o=Gi(o,r.conv4),o=dn(o,[2,2],[2,2],"same"),o=Gi(o,r.conv5),o=dn(o,[2,2],[1,1],"same"),o=r.conv6?Gi(o,r.conv6):o,o=r.conv7?Gi(o,r.conv7):o,_o(o,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var o=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return pe(function(){var a=n.toBatchTensor(r,!1).toFloat();return a=o.config.meanRgb?vf(a,o.config.meanRgb):a,a=a.div(le(256)),o.config.withSeparableConvs?o.runMobilenet(a,i):o.runTinyYolov2(a,i)})},e.prototype.forward=function(n,r){return Ie(this,void 0,void 0,function(){var o;return Te(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,xn(n)];case 1:return[4,o.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var o,i,a,s,u,l,c,d,h,f,p,v,y,m,g=this;return Te(this,function(x){switch(x.label){case 0:return o=new vC(r),i=o.inputSize,a=o.scoreThreshold,[4,xn(n)];case 1:return s=x.sent(),[4,this.forwardInput(s,i)];case 2:return u=x.sent(),l=pe(function(){return ln(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),a)];case 3:return d=x.sent(),u.dispose(),l.dispose(),h=d.map(function(w){return w.box}),f=d.map(function(w){return w.score}),p=d.map(function(w){return w.classScore}),v=d.map(function(w){return g.config.classes[w.label]}),y=mh(h.map(function(w){return w.rescale(i)}),f,this.config.iouThreshold,!0),m=y.map(function(w){return new C4(f[w],p[w],v[w],h[w],c)}),[2,m]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return Wue(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return Uue(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,o){return Ie(this,void 0,void 0,function(){var i,a,s,u,l,c,d,h,f,p,v,y,m,g,x,w,b,C,E,S,k,_,I,N,$,M,B,D,U,A=this;return Te(this,function(L){switch(L.label){case 0:return i=r.width,a=r.height,s=Math.max(i,a),u=s/i,l=s/a,c=n.shape[1],d=this.config.anchors.length,h=pe(function(){var z=n.reshape([c,c,d,A.boxEncodingSize]),j=z.slice([0,0,0,0],[c,c,d,4]),q=z.slice([0,0,0,4],[c,c,d,1]),Y=A.withClassScores?Li(z.slice([0,0,0,5],[c,c,d,A.config.classes.length]),3):le(0);return[j,q,Y]}),f=h[0],p=h[1],v=h[2],y=[],[4,p.array()];case 1:return m=L.sent(),[4,f.array()];case 2:g=L.sent(),x=0,L.label=3;case 3:if(!(x<c))return[3,12];w=0,L.label=4;case 4:if(!(w<c))return[3,11];b=0,L.label=5;case 5:return b<d?(C=L0(m[x][w][b][0]),!o||C>o?(E=(w+L0(g[x][w][b][0]))/c*u,S=(x+L0(g[x][w][b][1]))/c*l,k=Math.exp(g[x][w][b][2])*this.config.anchors[b].x/c*u,_=Math.exp(g[x][w][b][3])*this.config.anchors[b].y/c*l,I=E-k/2,N=S-_/2,$={row:x,col:w,anchor:b},this.withClassScores?[4,this.extractPredictedClass(v,$)]:[3,7]):[3,9]):[3,10];case 6:return U=L.sent(),[3,8];case 7:U={classScore:1,label:0},L.label=8;case 8:M=U,B=M.classScore,D=M.label,y.push(jn({box:new oy(I,N,I+k,N+_),score:C,classScore:C*B,label:D},$)),L.label=9;case 9:return b++,[3,5];case 10:return w++,[3,4];case 11:return x++,[3,3];case 12:return f.dispose(),p.dispose(),v.dispose(),[2,y]}})})},e.prototype.extractPredictedClass=function(n,r){return Ie(this,void 0,void 0,function(){var o,i,a,s;return Te(this,function(u){switch(u.label){case 0:return o=r.row,i=r.col,a=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[o][i][a][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(Ui),Vue=function(t){Le(e,t);function e(n){n===void 0&&(n=!0);var r=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:Pue,classes:["face"]},n?{anchors:Oue,meanRgb:Mue}:{anchors:Due,withClassScores:!0});return r=t.call(this,o)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Ie(this,void 0,void 0,function(){var o;return Te(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return o=i.sent(),[2,o.map(function(a){return new ui(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?$ue:Fue},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(Q4),J4=function(t){Le(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e}(vC),gf=function(){function t(){}return t.prototype.then=function(e){return Ie(this,void 0,void 0,function(){var n;return Te(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return Ie(this,void 0,void 0,function(){return Te(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t}();function uy(t,e,n,r,o){return o===void 0&&(o=function(i){var a=i.alignedRect;return a}),Ie(this,void 0,void 0,function(){var i,a,s,u,l;return Te(this,function(c){switch(c.label){case 0:return i=t.map(function(d){return Qse(d)?o(d):d.detection}),s=r,s?[3,5]:e instanceof $t?[4,lC(e,i)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,uC(e,i)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return a=s,[4,n(a)];case 6:return l=c.sent(),a.forEach(function(d){return d instanceof $t&&d.dispose()}),[2,l]}})})}function gC(t,e,n,r,o){return Ie(this,void 0,void 0,function(){var i=this;return Te(this,function(a){return[2,uy([t],e,function(s){return Ie(i,void 0,void 0,function(){return Te(this,function(u){return[2,n(s[0])]})})},r,o)]})})}function jue(t){return pe(function(){return $r(ln(t,3).reverse(),3)})}var dp=2,yv=12;function Hue(t,e){var n=ay(t,e),r=cC(t,e);function o(l,c){var d=Yt(t(l));return e.push({paramPath:c}),d}function i(l,c,d){d===void 0&&(d=!1);var h=n(l[0],l[1],3,c+"/conv1"),f=o(l[1],c+"/prelu1_alpha"),p=n(l[1],l[2],3,c+"/conv2"),v=o(l[2],c+"/prelu2_alpha"),y=n(l[2],l[3],d?2:3,c+"/conv3"),m=o(l[3],c+"/prelu3_alpha");return{conv1:h,prelu1_alpha:f,conv2:p,prelu2_alpha:v,conv3:y,prelu3_alpha:m}}function a(){var l=i([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),d=n(32,4,1,"pnet/conv4_2");return jn(jn({},l),{conv4_1:c,conv4_2:d})}function s(){var l=i([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),d=o(128,"rnet/prelu4_alpha"),h=r(128,2,"rnet/fc2_1"),f=r(128,4,"rnet/fc2_2");return jn(jn({},l),{fc1:c,prelu4_alpha:d,fc2_1:h,fc2_2:f})}function u(){var l=i([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),d=o(128,"onet/prelu4_alpha"),h=r(1152,256,"onet/fc1"),f=o(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),v=r(256,4,"onet/fc2_2"),y=r(256,10,"onet/fc2_3");return jn(jn({},l),{conv4:c,prelu4_alpha:d,fc1:h,prelu5_alpha:f,fc2_1:p,fc2_2:v,fc2_3:y})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:u}}function que(t){var e=Wi(t),n=e.extractWeights,r=e.getRemainingWeights,o=[],i=Hue(n,o),a=i.extractPNetParams,s=i.extractRNetParams,u=i.extractONetParams,l=a(),c=s(),d=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:d},paramMappings:o}}function Gue(t,e){var n=Ha(t,e);function r(c){var d=n(c+"/weights",4,c+"/filters"),h=n(c+"/bias",1);return{filters:d,bias:h}}function o(c){var d=n(c+"/weights",2),h=n(c+"/bias",1);return{weights:d,bias:h}}function i(c){return n(c,1)}function a(c){var d=r(c+"/conv1"),h=i(c+"/prelu1_alpha"),f=r(c+"/conv2"),p=i(c+"/prelu2_alpha"),v=r(c+"/conv3"),y=i(c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:h,conv2:f,prelu2_alpha:p,conv3:v,prelu3_alpha:y}}function s(){var c=a("pnet"),d=r("pnet/conv4_1"),h=r("pnet/conv4_2");return jn(jn({},c),{conv4_1:d,conv4_2:h})}function u(){var c=a("rnet"),d=o("rnet/fc1"),h=i("rnet/prelu4_alpha"),f=o("rnet/fc2_1"),p=o("rnet/fc2_2");return jn(jn({},c),{fc1:d,prelu4_alpha:h,fc2_1:f,fc2_2:p})}function l(){var c=a("onet"),d=r("onet/conv4"),h=i("onet/prelu4_alpha"),f=o("onet/fc1"),p=i("onet/prelu5_alpha"),v=o("onet/fc2_1"),y=o("onet/fc2_2"),m=o("onet/fc2_3");return jn(jn({},c),{conv4:d,prelu4_alpha:h,fc1:f,prelu5_alpha:p,fc2_1:v,fc2_2:y,fc2_3:m})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function Kue(t){var e=[],n=Gue(t,e),r=n.extractPNetParams,o=n.extractRNetParams,i=n.extractONetParams,a=r(),s=o(),u=i();return zi(t,e),{params:{pnet:a,rnet:s,onet:u},paramMappings:e}}function dw(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function Xue(t,e,n){for(var r=n[0],o=n[1],i=yv/t,a=[],s=Math.min(r,o)*i,u=0;s>=12;)a.push(i*Math.pow(e,u)),s=s*e,u+=1;return a}var yC=function(t){Le(e,t);function e(n,r,o,i){return t.call(this,{left:n,top:r,right:o,bottom:i},!0)||this}return e}(Na);function Z4(t){return pe(function(){return Gn(cn(t,le(127.5)),le(.0078125))})}function tl(t,e){return pe(function(){return He(Lt(t),Gn(e,dv(Lt(dv(t)))))})}function xC(t,e,n){return n===void 0&&(n=!1),pe(function(){var r=_o(t,e.conv1,"valid");return r=tl(r,e.prelu1_alpha),r=dn(r,n?[2,2]:[3,3],[2,2],"same"),r=_o(r,e.conv2,"valid"),r=tl(r,e.prelu2_alpha),r=n?r:dn(r,[3,3],[2,2],"valid"),r=_o(r,e.conv3,"valid"),r=tl(r,e.prelu3_alpha),r})}function Yue(t,e){return pe(function(){var n=xC(t,e,!0),r=_o(n,e.conv4_1,"valid"),o=Gr(ey(r,3),3),i=Li(cn(r,o),3),a=_o(n,e.conv4_2,"valid");return{prob:i,regions:a}})}function Que(t,e){return pe(function(){var n=dw(e,t.shape.slice(1)),r=n.height,o=n.width,i=Y2.resizeBilinear(t,[r,o]),a=Z4(i);return Aa(a,[0,2,1,3])})}function Jue(t,e,n,r){for(var o=[],i=t.arraySync(),a=0;a<t.shape[0];a++)for(var s=0;s<t.shape[1];s++)i[a][s]>=r&&o.push(new st(s,a));var u=o.map(function(l){var c=new oy(Math.round((l.y*dp+1)/n),Math.round((l.x*dp+1)/n),Math.round((l.y*dp+yv)/n),Math.round((l.x*dp+yv)/n)),d=i[l.y][l.x],h=e.arraySync(),f=new yC(h[l.y][l.x][0],h[l.y][l.x][1],h[l.y][l.x][2],h[l.y][l.x][3]);return{cell:c,score:d,region:f}});return u}function Zue(t,e,n,r,o){o.stage1=[];var i=e.map(function(h){return pe(function(){var f={scale:h},p=Que(t,h),v=Date.now(),y=Yue(p,r),m=y.prob,g=y.regions;f.pnet=Date.now()-v;var x=ln(ln(m,3)[1])[0],w=ln(g)[0];return{scoresTensor:x,regionsTensor:w,scale:h,statsForScale:f}})}),a=i.map(function(h){var f=h.scoresTensor,p=h.regionsTensor,v=h.scale,y=h.statsForScale,m=Jue(f,p,v,n);if(f.dispose(),p.dispose(),!m.length)return o.stage1.push(y),[];var g=Date.now(),x=mh(m.map(function(w){return w.cell}),m.map(function(w){return w.score}),.5);return y.nms=Date.now()-g,y.numBoxes=x.length,o.stage1.push(y),x.map(function(w){return m[w]})}),s=a.reduce(function(h,f){return h.concat(f)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),d=mh(s.map(function(h){return h.cell}),s.map(function(h){return h.score}),.7);o.stage1_nms=Date.now()-c,l=d.map(function(h){return s[h].score}),u=d.map(function(h){return s[h]}).map(function(h){var f=h.cell,p=h.region;return new oy(f.left+p.left*f.width,f.top+p.top*f.height,f.right+p.right*f.width,f.bottom+p.bottom*f.height).toSquare().round()})}return{boxes:u,scores:l}}function e$(t,e,n){var r=n.width,o=n.height;return Ie(this,void 0,void 0,function(){var i,a,s,u=this;return Te(this,function(l){switch(l.label){case 0:return i=Bs(t),[4,Promise.all(e.map(function(c){return Ie(u,void 0,void 0,function(){var d,h,f,p,v,y,m,g;return Te(this,function(x){return d=c.padAtBorders(t.height,t.width),h=d.y,f=d.ey,p=d.x,v=d.ex,y=p-1,m=h-1,g=i.getImageData(y,m,v-y,f-m),[2,Qn.isNodejs()?sC(g):createImageBitmap(g)]})})}))];case 1:return a=l.sent(),s=[],a.forEach(function(c){var d=iy({width:r,height:o}),h=Bs(d);h.drawImage(c,0,0,r,o);for(var f=h.getImageData(0,0,r,o).data,p=[],v=0;v<f.length;v+=4)p.push(f[v+2]),p.push(f[v+1]),p.push(f[v]);s.push(p)}),[2,s.map(function(c){var d=pe(function(){var h=Aa(hr(c,[1,r,o,3]),[0,2,1,3]).toFloat();return Z4(h)});return d})]}})})}function ele(t,e){return pe(function(){var n=xC(t,e),r=bo(n,[n.shape[0],e.fc1.weights.shape[0]]),o=jo(r,e.fc1),i=tl(o,e.prelu4_alpha),a=jo(i,e.fc2_1),s=Gr(ey(a,1),1),u=Li(cn(a,s),1),l=jo(i,e.fc2_2),c=ln(u,1)[1];return{scores:c,regions:l}})}function tle(t,e,n,r,o){return Ie(this,void 0,void 0,function(){var i,a,s,u,l,c,d,h,f,p,v,y,m,g;return Te(this,function(x){switch(x.label){case 0:return i=Date.now(),[4,e$(t,e,{width:24,height:24})];case 1:return a=x.sent(),o.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map(function(w){var b=ele(w,r);return w.dispose(),b}),o.stage2_rnet=Date.now()-i,u=s.length>1?un(s.map(function(w){return w.scores})):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[x.sent()]),u.dispose(),h=l.map(function(w,b){return{score:w,idx:b}}).filter(function(w){return w.score>n}).map(function(w){var b=w.idx;return b}),f=h.map(function(w){return e[w]}),p=h.map(function(w){return l[w]}),v=[],y=[],f.length>0&&(i=Date.now(),m=mh(f,p,.7),o.stage2_nms=Date.now()-i,g=m.map(function(w){var b=s[h[w]].regions.arraySync();return new yC(b[0][0],b[0][1],b[0][2],b[0][3])}),y=m.map(function(w){return p[w]}),v=m.map(function(w,b){return f[w].calibrate(g[b])})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose()}),[2,{boxes:v,scores:y}]}})})}function nle(t,e){return pe(function(){var n=xC(t,e);n=dn(n,[2,2],[2,2],"same"),n=_o(n,e.conv4,"valid"),n=tl(n,e.prelu4_alpha);var r=bo(n,[n.shape[0],e.fc1.weights.shape[0]]),o=jo(r,e.fc1),i=tl(o,e.prelu5_alpha),a=jo(i,e.fc2_1),s=Gr(ey(a,1),1),u=Li(cn(a,s),1),l=jo(i,e.fc2_2),c=jo(i,e.fc2_3),d=ln(u,1)[1];return{scores:d,regions:l,points:c}})}function rle(t,e,n,r,o){return Ie(this,void 0,void 0,function(){var i,a,s,u,l,c,d,h,f,p,v,y,m,g,x;return Te(this,function(w){switch(w.label){case 0:return i=Date.now(),[4,e$(t,e,{width:48,height:48})];case 1:return a=w.sent(),o.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map(function(b){var C=nle(b,r);return b.dispose(),C}),o.stage3_onet=Date.now()-i,u=s.length>1?un(s.map(function(b){return b.scores})):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[w.sent()]),u.dispose(),h=l.map(function(b,C){return{score:b,idx:C}}).filter(function(b){return b.score>n}).map(function(b){var C=b.idx;return C}),f=h.map(function(b){var C=s[b].regions.arraySync();return new yC(C[0][0],C[0][1],C[0][2],C[0][3])}),p=h.map(function(b,C){return e[b].calibrate(f[C])}),v=h.map(function(b){return l[b]}),y=[],m=[],g=[],p.length>0&&(i=Date.now(),x=mh(p,v,.7,!1),o.stage3_nms=Date.now()-i,y=x.map(function(b){return p[b]}),m=x.map(function(b){return v[b]}),g=x.map(function(b,C){return Array(5).fill(0).map(function(E,S){var k=s[b].points.arraySync();return new st(k[0][S]*(y[C].width+1)+y[C].left,k[0][S+5]*(y[C].height+1)+y[C].top)})})),s.forEach(function(b){b.regions.dispose(),b.scores.dispose(),b.points.dispose()}),[2,{boxes:y,scores:m,points:g}]}})})}var ole=function(t){Le(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.load=function(n){return Ie(this,void 0,void 0,function(){return Te(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,n)]})})},e.prototype.loadFromDisk=function(n){return Ie(this,void 0,void 0,function(){return Te(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,n)]})})},e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var o,i,a,s,u,l,c,d,h,f,p,v,y,m,g,x,w,b,C,E,S;return Te(this,function(k){switch(k.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(i=n.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),u=pe(function(){return jue(Gr(nC.fromPixels(i)).toFloat())}),l=function(_){return u.dispose(),a.total=Date.now()-s,_},c=u.shape.slice(1),d=c[0],h=c[1],f=new X4(r),p=f.minFaceSize,v=f.scaleFactor,y=f.maxNumScales,m=f.scoreThresholds,g=f.scaleSteps,x=(g||Xue(p,v,[d,h])).filter(function(_){var I=dw(_,[d,h]);return Math.min(I.width,I.height)>yv}).slice(0,y),a.scales=x,a.pyramid=x.map(function(_){return dw(_,[d,h])}),w=Date.now(),[4,Zue(u,x,m[0],o.pnet,a)];case 1:return b=k.sent(),a.total_stage1=Date.now()-w,b.boxes.length?(a.stage2_numInputBoxes=b.boxes.length,w=Date.now(),[4,tle(i,b.boxes,m[1],o.rnet,a)]):[2,l({results:[],stats:a})];case 2:return C=k.sent(),a.total_stage2=Date.now()-w,C.boxes.length?(a.stage3_numInputBoxes=C.boxes.length,w=Date.now(),[4,rle(i,C.boxes,m[2],o.onet,a)]):[2,l({results:[],stats:a})];case 3:return E=k.sent(),a.total_stage3=Date.now()-w,S=E.boxes.map(function(_,I){return fC(iC({},new ui(E.scores[I],new oC(_.left/h,_.top/d,_.width/h,_.height/d),{height:d,width:h})),new Ose(E.points[I].map(function(N){return N.sub(new st(_.left,_.top)).div(new st(_.width,_.height))}),{width:_.width,height:_.height}))}),[2,l({results:S,stats:a})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var o;return Te(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,xn(n)];case 1:return[4,o.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),Ie(this,void 0,void 0,function(){var o;return Te(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,xn(n)];case 1:return[2,o.apply(this,[i.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Kue(n)},e.prototype.extractParams=function(n){return que(n)},e}(Ui),ile=.4,ale=[new st(1.603231,2.094468),new st(6.041143,7.080126),new st(2.882459,3.518061),new st(4.266906,5.178857),new st(9.041765,10.66308)],sle=[117.001,114.697,97.404],ule=function(t){Le(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:ile,classes:["face"],anchors:ale,meanRgb:sle,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Ie(this,void 0,void 0,function(){var o;return Te(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return o=i.sent(),[2,o.map(function(a){return new ui(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(Q4),yr={ssdMobilenetv1:new Y4,tinyFaceDetector:new ule,tinyYolov2:new Vue,mtcnn:new ole,faceLandmark68Net:new V4,faceLandmark68TinyNet:new cue,faceRecognitionNet:new gue,faceExpressionNet:new Yse,ageGenderNet:new aue},lle=function(t){return yr.tinyFaceDetector.load(t)},cle=function(t){return yr.faceLandmark68Net.load(t)},t$=function(t){Le(e,t);function e(n,r,o){var i=t.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=o,i}return e}(gf),wC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r,o=this;return Te(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,uy(n,this.input,function(a){return Ie(o,void 0,void 0,function(){return Te(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return yr.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(a,s){return U4(a,r[s])})]}})})},e.prototype.withAgeAndGender=function(){return new _C(this,this.input)},e}(t$),bC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r;return Te(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,gC(n,this.input,function(i){return yr.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,U4(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new SC(this,this.input)},e}(t$),EC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new kC(this,this.input)},e.prototype.withFaceDescriptors=function(){return new TC(this,this.input)},e}(wC),CC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new IC(this,this.input)},e.prototype.withFaceDescriptor=function(){return new RC(this,this.input)},e}(bC),n$=function(t){Le(e,t);function e(n,r,o){var i=t.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=o,i}return e}(gf),_C=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r,o=this;return Te(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,uy(n,this.input,function(a){return Ie(o,void 0,void 0,function(){return Te(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return yr.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(a,s){var u=r[s],l=u.age,c=u.gender,d=u.genderProbability;return G4(K4(a,c,d),l)})]}})})},e.prototype.withFaceExpressions=function(){return new wC(this,this.input)},e}(n$),SC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r,o,i,a;return Te(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,gC(n,this.input,function(u){return yr.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),o=r.age,i=r.gender,a=r.genderProbability,[2,G4(K4(n,i,a),o)]}})})},e.prototype.withFaceExpressions=function(){return new bC(this,this.input)},e}(n$),kC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new EC(this,this.input)},e.prototype.withFaceDescriptors=function(){return new TC(this,this.input)},e}(_C),IC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new CC(this,this.input)},e.prototype.withFaceDescriptor=function(){return new RC(this,this.input)},e}(SC),r$=function(t){Le(e,t);function e(n,r){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o}return e}(gf),TC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r;return Te(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,uy(n,this.input,function(i){return Promise.all(i.map(function(a){return yr.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(i,a){return q4(n[a],i)})]}})})},e.prototype.withFaceExpressions=function(){return new EC(this,this.input)},e.prototype.withAgeAndGender=function(){return new kC(this,this.input)},e}(r$),RC=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r;return Te(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,gC(n,this.input,function(i){return yr.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,q4(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new CC(this,this.input)},e.prototype.withAgeAndGender=function(){return new IC(this,this.input)},e}(r$),o$=function(t){Le(e,t);function e(n,r,o){var i=t.call(this)||this;return i.parentTask=n,i.input=r,i.useTinyLandmarkNet=o,i}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?yr.faceLandmark68TinyNet:yr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(gf),dle=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r,o,i,a,s=this;return Te(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof $t?[4,lC(this.input,r)]:[3,3];case 2:return i=u.sent(),[3,5];case 3:return[4,uC(this.input,r)];case 4:i=u.sent(),u.label=5;case 5:return o=i,[4,Promise.all(o.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return a=u.sent(),o.forEach(function(l){return l instanceof $t&&l.dispose()}),[2,n.map(function(l,c){return fC(l,a[c])})]}})})},e.prototype.withFaceExpressions=function(){return new EC(this,this.input)},e.prototype.withAgeAndGender=function(){return new kC(this,this.input)},e.prototype.withFaceDescriptors=function(){return new TC(this,this.input)},e}(o$),hle=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r,o,i,a;return Te(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof $t?[4,lC(this.input,[r])]:[3,3]):[2];case 2:return i=s.sent(),[3,5];case 3:return[4,uC(this.input,[r])];case 4:i=s.sent(),s.label=5;case 5:return o=i,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return a=s.sent(),o.forEach(function(u){return u instanceof $t&&u.dispose()}),[2,fC(n,a)]}})})},e.prototype.withFaceExpressions=function(){return new CC(this,this.input)},e.prototype.withAgeAndGender=function(){return new IC(this,this.input)},e.prototype.withFaceDescriptor=function(){return new RC(this,this.input)},e}(o$),i$=function(t){Le(e,t);function e(n,r){r===void 0&&(r=new sy);var o=t.call(this)||this;return o.input=n,o.options=r,o}return e}(gf),a$=function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r,o,i;return Te(this,function(a){switch(a.label){case 0:return n=this,r=n.input,o=n.options,o instanceof X4?[4,yr.mtcnn.forward(r,o)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(i=o instanceof J4?function(s){return yr.tinyFaceDetector.locateFaces(s,o)}:o instanceof sy?function(s){return yr.ssdMobilenetv1.locateFaces(s,o)}:o instanceof vC?function(s){return yr.tinyYolov2.locateFaces(s,o)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return Ie(n,void 0,void 0,function(){var o;return Te(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,r(o.map(function(a){return iC({},a)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new dle(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new wC(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new _C(this.runAndExtendWithFaceDetections(),this.input)},e}(i$);(function(t){Le(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Ie(this,void 0,void 0,function(){var n,r;return Te(this,function(o){switch(o.label){case 0:return[4,new a$(this.input,this.options)];case 1:return n=o.sent(),r=n[0],n.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return Ie(n,void 0,void 0,function(){var o;return Te(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,r(o?iC({},o):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new hle(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new bC(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new SC(this.runAndExtendWithFaceDetection(),this.input)},e})(i$);function WT(t,e){return e===void 0&&(e=new sy),new a$(t,e)}function s$(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(o,i){return o-r[i]}).reduce(function(o,i){return o+Math.pow(i,2)},0))}(function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,i=function(){return"person "+o++};this._labeledDescriptors=r.map(function(a){if(a instanceof sp)return a;if(a instanceof Float32Array)return new sp(i(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new sp(i(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return s$(r,e)}).reduce(function(r,o){return r+o},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,i=r.label;return new FT(i,n.computeMeanDistance(e,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new FT("unknown",n.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},t.fromJSON=function(e){var n=e.labeledDescriptors.map(function(r){return sp.fromJSON(r)});return new t(n,e.distanceThreshold)},t})();var Kr="/";function VT(t,e=!1){return new Promise((n,r)=>{const o=new Image;e&&(o.crossOrigin="anomymous"),o.src=t,o.onload=()=>n(o),o.onerror=r})}async function fle(t,e){await lle(`${Kr}models`),await cle(`${Kr}models`);const n=new J4({}),r=await VT(t,!0),o=await VT(e),i=WT(r,n).withFaceLandmarks().withFaceDescriptors(),a=WT(o,n).withFaceLandmarks().withFaceDescriptors(),s=s$(i,a);return s>=0&&s<=.4}function ple(t,e,n,r,o,i,a,s,u,l,c=!1,d=null){const h="08112eb80c574bbb897daea7663ef115";let f=null,p,v,y;const m=window.location.search;let x=new URLSearchParams(m).get("room"),w=[],b={},C=$=>{let M=document.getElementById("messages"),B=`<div class="message__wrapper">
                           <div class="message__body__bot">
                             <strong class="message__author__bot">\u{1F916} Face-app Bot</strong>
                             <p class="message__text__bot">${$}</p>
                            </div>
                          </div>`;M.insertAdjacentHTML("beforeend",B);let D=document.querySelector("messages .message__wrapper :last-child");D&&D.scrollIntoView()},E=async()=>{v=await AgoraRTM.createInstance(h),await v.login({uid:t,token:f}),await v.addOrUpdateLocalUserAttributes({name:o}),y=await v.createChannel(x),await i(y,v,C,o),C(`Welcome to the room ${o}! \u{1F44B}`),p=AgoraRTC.createClient({mode:"rtc",codec:"vp8"}),await p.join(h,x,f,t),p.on("user-published",k),p.on("user-left",_),S()},S=async()=>{w=await AgoraRTC.createMicrophoneAndCameraTracks({},{encoderConfig:{width:{min:640,ideal:1920,max:1920},height:{min:240,ideal:1080,max:1080}}});let $=`<div class="video_container" id="user-container-${t}">
                        <div class="video-player" id="user-${t}"></div>
                      </div>`;if(document.getElementById("stream__container").insertAdjacentHTML("beforeend",$),document.getElementById(`user-container-${t}`).addEventListener("click",e),w[1].play(`user-${t}`),await p.publish([w[0],w[1]]),console.log("Take Attendance",c),c){const M=document.querySelector(`div#user-${t} video`),B=document.createElement("canvas"),D=B.getContext("2d");B.width=M.videoWidth,B.height=M.videoHeight;let U=!1;console.log(M);async function A(){if(console.log("Play Enter"),!M.paused&&!M.ended&&!U){console.log("Play context"),D.drawImage(M,0,0);const L=B.toDataURL("image/png");console.log("Unknown Url"),await fle(d,L)&&(U=!0,await px(Pp(u,a,s,"attendance",l,"sessions",x,"participants",t),{present:!0}),console.log("Recorded attendance"))}}A(),setInterval(A,2500)}},k=async($,M)=>{b[$.uid]=$,await p.subscribe($,M);let B=document.getElementById(`user-container-${$.uid}`);if(B==null&&(B=` <div class="video_container" id="user-container-${$.uid}">
                     <div class= "video-player" id="user-${$.uid}"></div>
                     </div>`,document.getElementById("stream__container").insertAdjacentHTML("beforeend",B),document.getElementById(`user-container-${$.uid}`).addEventListener("click",e)),n.style.display){let D=document.getElementById(`user-container-${$.uid}`);D.style.height="100px",D.style.width="100px"}M==="video"&&$.videoTrack.play(`user-${$.uid}`),M==="audio"&&$.audioTrack.play()},_=async $=>{delete b[$.uid];let M=document.getElementById(`user-container-${$.uid}`);if(M&&M.remove(),r.value===`user-container-${$.uid}`){n.style.display=null;let B=document.getElementsByClassName("video_container");for(let D=0;B.length>D;D++)B[D].style.height="300px",B[D].style.width="300px"}},I=async $=>{let M=$.currentTarget;w[0].muted?(await w[0].setMuted(!1),M.classList.add("active")):(await w[0].setMuted(!0),M.classList.remove("active"))},N=async $=>{let M=$.currentTarget;w[1].muted?(await w[1].setMuted(!1),M.classList.add("active")):(await w[1].setMuted(!0),M.classList.remove("active"))};document.getElementById("camera-btn").addEventListener("click",N),document.getElementById("mic-btn").addEventListener("click",I),E()}function mle(){return async function(t,e,n,r){await t.join();let o=async v=>{console.log("A new member has joined the room",v),u(v);let y=await t.getMembers();l(y);let{name:m}=await e.getUserAttributesByKeys(v,["name"]);n(`Welcome to the room ${m}! \u{1F44B}`)},i=async v=>{c(v);let y=await t.getMembers();l(y)};t.on("MemberJoined",o);let a=async(v,y)=>{console.log("A new message was received");let m=JSON.parse(v.text);m.type==="chat"&&h(m.displayName,m.message)};t.on("MemberLeft",i),t.on("ChannelMessage",a),(async()=>{let v=await t.getMembers();l(v);for(let y=0;v.length>y;y++)u(v[y])})();let u=async v=>{let{name:y}=await e.getUserAttributesByKeys(v,["name"]),m=document.getElementById("member__list"),g=`<div class="member__wrapper" id="member__${v}__wrapper">
        <span class="green__icon" />
        <span class="member_name">${y}</p>
         </div>`;m.insertAdjacentHTML("beforeend",g)},l=async v=>{let y=document.getElementById("members__count");y.innerText=v.length},c=async v=>{let y=document.getElementById(`member__${v}__wrapper`),m=y.getElementsByClassName("member_name")[0].textContent;y.remove(),n(` ${m} has left the room`)},d=async v=>{v.preventDefault();const y=document.querySelector("#message__form > input");let m=y.value;t.sendMessage({text:JSON.stringify({type:"chat",message:m,displayName:r})}),h(r,m),y.value=""},h=(v,y)=>{let m=document.getElementById("messages"),g=`<div class="message__wrapper">
                                  <div class="message__body">
                                    <strong class="message__author">${v}</strong>
                                     <p class="message__text">${y}</p>
                                   </div>
                                </div>`;m.insertAdjacentHTML("beforeend",g);let x=document.querySelector("messages .message__wrapper :last-child");x&&x.scrollIntoView()},f=async()=>{await t.leave(),await e.logout()};window.addEventListener("beforeunload",f),document.getElementById("message__form").addEventListener("keyup",v=>{(v.key=="enter"||v.keyCode==13)&&d(v)})}}function vle({auth:t,socket:e,db:n}){const r=CE(),[o,i]=T.exports.useState(null),[a,s]=T.exports.useState(!1),[u,l]=T.exports.useState(""),[c,d]=T.exports.useState([]),[h,f]=T.exports.useState(!1),p=T.exports.useCallback(E=>{E!==null&&(E.scrollTop=E.scrollHeight)},[]),v=async()=>{o!=null&&await navigator.share({text:`To join this meeting go to https://face-api-917.herokuapp.com. Then click Join Meeting and enter the code ${o}`})};function y(E,S=window.location.href){E=E.replace(/[\[\]]/g,"\\$&");var k=new RegExp("[?&]"+E+"(=([^&#]*)|&|#|$)"),_=k.exec(S);return _?_[2]?decodeURIComponent(_[2].replace(/\+/g," ")):"":null}T.exports.useEffect(()=>{t.onAuthStateChanged(async()=>{if(t.currentUser==null){r("/login");return}else{const E=y("room");if(!E||!Boolean(await(await fetch(`${Kr}roomMemberExists/${E}/${t.currentUser.uid}`)).text())){l("This room does not exist or you are not present in this room!"),s(!0),await Ux(1e3),r("/");return}i(E);const S=Boolean(await(await fetch(`${Kr}isHost/${E}/${t.currentUser.uid}`)).text());f(S),S&&e.on("getWaitingRoom",({participants:z})=>{d(z)});const k=await(await fetch(`${Kr}get_host/${E}`)).text(),_=await(await fetch(`${Kr}getAttendanceListId/${E}`)).text(),I=await(await fetch(`${Kr}getPhoto/${E}/${t.currentUser.uid}`)).text(),N=await(await fetch(`${Kr}meetingDate/${E}`)).text(),$=I&&I!=="null";let M=z=>{let j=B.children[0];j&&document.getElementById("streams__container").appendChild(j),B.style.display="block",z.currentTarget.style.width="100%",z.currentTarget.style.height="100%",B.appendChild(z.currentTarget),U.value=z.currentTarget.id;for(let q=0;A.length>q;q++)A[q].id!=U.value&&(A[q].style.height="100px",A[q].style.width="100px")},B=document.getElementById("stream_box");const D=mle();let U={value:null};ple(t.currentUser.uid,M,B,U,t.currentUser.displayName,D,k,_,n,N,$,I);let A=document.getElementsByClassName("video_container");for(let z=0;A.length>z;z++)A[z].addEventListener("click",M);let L=()=>{U.value=null,B.style.display=null;let z=B.children[0];document.getElementById("streams__container").appendChild(z);for(let j=0;A.length>j;j++)A[j].style.height="300px",A[j].style.width="300px"};B.addEventListener("click",L)}}),e.on("meeting-ended",async()=>{l("Meeting has ended!"),s(!0),await Ux(1e3),window.open("/","_self")})},[]);const m=T.exports.useRef(null),g=T.exports.useRef(null),[x,w]=T.exports.useState(!1),[b,C]=T.exports.useState(!1);return F(sa,{children:ie("div",{children:[ie("header",{id:"nav",className:"bg-slate-700 px-6 py-3",children:[ie("div",{className:"nav--list",children:[F("button",{id:"members__button",onClick:()=>{x?(m.current.classList.add("hidden"),m.current.classList.remove("shown")):(m.current.classList.remove("hidden"),m.current.classList.add("shown")),w(E=>!E)},children:F("svg",{width:24,height:24,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",children:F("path",{d:"M24 18v1h-24v-1h24zm0-6v1h-24v-1h24zm0-6v1h-24v-1h24z",fill:"#ede0e0",children:F("path",{d:"M24 19h-24v-1h24v1zm0-6h-24v-1h24v1zm0-6h-24v-1h24v1z"})})})}),F("span",{className:"text-lg font-semibold select-none",children:"Face App"})]}),ie("div",{id:"nav__links",children:[F("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800",onClick:()=>v(),children:"Invite"}),F("button",{id:"chat__button",onClick:()=>{b?g.current.style.display="none":g.current.style.display="block",C(E=>!E)},children:F("svg",{width:24,height:24,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",fill:"#ede0e0",clipRule:"evenodd",children:F("path",{d:"M24 20h-3v4l-5.333-4h-7.667v-4h2v2h6.333l2.667 2v-2h3v-8.001h-2v-2h4v12.001zm-15.667-6l-5.333 4v-4h-3v-14.001l18 .001v14h-9.667zm-6.333-2h3v2l2.667-2h8.333v-10l-14-.001v10.001z"})})})]})]}),F("main",{className:"container bg-gradient-to-r from-slate-800 to-gray-600",children:ie("div",{id:"room__container",children:[ie("section",{id:"members__container",className:"bg-gradient-to-r from-slate-900 to-gray-700",ref:m,children:[h&&ie("div",{className:"waiting__room w-full",children:[c.length>0&&F(sa,{children:ie("div",{className:"w-full px-2 py-1 bg-gradient-to-r from-slate-700 to-stone-500 flex flex-row gap-2 mb-2",children:[F("span",{className:"text-sm",children:"Waiting Participants"}),F("span",{className:"bg-slate-800 p-4",children:c.length})]})}),c.map(E=>ie("div",{className:"flex flex-row w-full pl-2",children:[F("span",{className:"text-sm",children:E.displayName}),F("button",{className:"ml-2 focus:outline-none text-white bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm px-3 py-1 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900",onClick:()=>{e.emit("allowParticipant",t.currentUser.uid,E.id,y("room"))},children:"Allow"})]},E.id))]}),ie("div",{id:"members__header",children:[F("p",{children:"Participants"}),F("strong",{id:"members__count",children:"0"})]}),F("div",{id:"member__list"})]}),ie("section",{id:"stream__container",children:[F("div",{id:"stream_box",children:" "}),F("div",{id:"streams__container"}),ie("div",{className:"stream__actions",children:[F("button",{id:"camera-btn",className:"active",children:F("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:F("path",{d:"M5 4h-3v-1h3v1zm10.93 0l.812 1.219c.743 1.115 1.987 1.781 3.328 1.781h1.93v13h-20v-13h3.93c1.341 0 2.585-.666 3.328-1.781l.812-1.219h5.86zm1.07-2h-8l-1.406 2.109c-.371.557-.995.891-1.664.891h-5.93v17h24v-17h-3.93c-.669 0-1.293-.334-1.664-.891l-1.406-2.109zm-11 8c0-.552-.447-1-1-1s-1 .448-1 1 .447 1 1 1 1-.448 1-1zm7 0c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-2c-2.761 0-5 2.239-5 5s2.239 5 5 5 5-2.239 5-5-2.239-5-5-5z"})})}),F("button",{id:"mic-btn",className:"active",children:F("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:F("path",{d:"M12 2c1.103 0 2 .897 2 2v7c0 1.103-.897 2-2 2s-2-.897-2-2v-7c0-1.103.897-2 2-2zm0-2c-2.209 0-4 1.791-4 4v7c0 2.209 1.791 4 4 4s4-1.791 4-4v-7c0-2.209-1.791-4-4-4zm8 9v2c0 4.418-3.582 8-8 8s-8-3.582-8-8v-2h2v2c0 3.309 2.691 6 6 6s6-2.691 6-6v-2h2zm-7 13v-2h-2v2h-4v2h10v-2h-4z"})})}),F("button",{id:"leave-btn",onClick:()=>{t.currentUser!=null&&o!=null&&e.emit("leaveMeeting",t.currentUser.uid,o),window.open("/","_self")},children:F("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",children:F("path",{d:"M16 10v-5l8 7-8 7v-5h-8v-4h8zm-16-8v20h14v-2h-12v-16h12v-2h-14z"})})})]})]}),ie("section",{id:"messages__container",className:"bg-gradient-to-r from-stone-800 to-slate-800",ref:g,children:[F("div",{id:"messages",ref:p}),F("div",{id:"message__form",children:F("input",{type:"text",name:"message",placeholder:"Send a message...."})})]})]})}),F(uf,{style:{left:"35%"},open:a,onClose:()=>s(!1),autoHideDuration:3e3,message:u})]})})}function gle({onChange:t,label:e,accept:n}){return ie("div",{className:"flex flex-col",children:[F("label",{className:"block mb-2 text-sm font-medium text-gray-900",htmlFor:"file",children:e}),F("input",{className:"block mb-5 w-full text-sm text-gray-900 bg-gray-50 border border-gray-300 cursor-pointer focus:outline-none",id:"file",type:"file",accept:n,onChange:t})]})}function yle({onChange:t}){return ie("div",{className:"mt-3",children:[F("label",{for:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Email address"}),F("input",{type:"email",id:"email",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"john.doe@company.com",onChange:t,required:!0})]})}function xle(t){return new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=function(){e(r.result)},r.onerror=n})}var AC={exports:{}},u$=function(e,n){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return e.apply(n,o)}},wle=u$,NC=Object.prototype.toString,PC=function(t){return function(e){var n=NC.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function Qs(t){return t=t.toLowerCase(),function(n){return PC(n)===t}}function DC(t){return Array.isArray(t)}function xv(t){return typeof t=="undefined"}function ble(t){return t!==null&&!xv(t)&&t.constructor!==null&&!xv(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var l$=Qs("ArrayBuffer");function Ele(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&l$(t.buffer),e}function Cle(t){return typeof t=="string"}function _le(t){return typeof t=="number"}function c$(t){return t!==null&&typeof t=="object"}function Xp(t){if(PC(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var Sle=Qs("Date"),kle=Qs("File"),Ile=Qs("Blob"),Tle=Qs("FileList");function OC(t){return NC.call(t)==="[object Function]"}function Rle(t){return c$(t)&&OC(t.pipe)}function Ale(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||NC.call(t)===e||OC(t.toString)&&t.toString()===e)}var Nle=Qs("URLSearchParams");function Ple(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Dle(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function MC(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),DC(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function hw(){var t={};function e(o,i){Xp(t[i])&&Xp(o)?t[i]=hw(t[i],o):Xp(o)?t[i]=hw({},o):DC(o)?t[i]=o.slice():t[i]=o}for(var n=0,r=arguments.length;n<r;n++)MC(arguments[n],e);return t}function Ole(t,e,n){return MC(e,function(o,i){n&&typeof o=="function"?t[i]=wle(o,n):t[i]=o}),t}function Mle(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function Fle(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)}function $le(t,e,n){var r,o,i,a={};e=e||{};do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)i=r[o],a[i]||(e[i]=t[i],a[i]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e}function Lle(t,e,n){t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return r!==-1&&r===n}function Ble(t){if(!t)return null;var e=t.length;if(xv(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n}var Ule=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array)),Fn={isArray:DC,isArrayBuffer:l$,isBuffer:ble,isFormData:Ale,isArrayBufferView:Ele,isString:Cle,isNumber:_le,isObject:c$,isPlainObject:Xp,isUndefined:xv,isDate:Sle,isFile:kle,isBlob:Ile,isFunction:OC,isStream:Rle,isURLSearchParams:Nle,isStandardBrowserEnv:Dle,forEach:MC,merge:hw,extend:Ole,trim:Ple,stripBOM:Mle,inherits:Fle,toFlatObject:$le,kindOf:PC,kindOfTest:Qs,endsWith:Lle,toArray:Ble,isTypedArray:Ule,isFileList:Tle},du=Fn;function jT(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var d$=function(e,n,r){if(!n)return e;var o;if(r)o=r(n);else if(du.isURLSearchParams(n))o=n.toString();else{var i=[];du.forEach(n,function(u,l){u===null||typeof u=="undefined"||(du.isArray(u)?l=l+"[]":u=[u],du.forEach(u,function(d){du.isDate(d)?d=d.toISOString():du.isObject(d)&&(d=JSON.stringify(d)),i.push(jT(l)+"="+jT(d))}))}),o=i.join("&")}if(o){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},zle=Fn;function ly(){this.handlers=[]}ly.prototype.use=function(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};ly.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ly.prototype.forEach=function(e){zle.forEach(this.handlers,function(r){r!==null&&e(r)})};var Wle=ly,Vle=Fn,jle=function(e,n){Vle.forEach(e,function(o,i){i!==n&&i.toUpperCase()===n.toUpperCase()&&(e[n]=o,delete e[i])})},h$=Fn;function Al(t,e,n,r,o){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}h$.inherits(Al,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var f$=Al.prototype,p$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){p$[t]={value:t}});Object.defineProperties(Al,p$);Object.defineProperty(f$,"isAxiosError",{value:!0});Al.from=function(t,e,n,r,o,i){var a=Object.create(f$);return h$.toFlatObject(t,a,function(u){return u!==Error.prototype}),Al.call(a,t.message,e,n,r,o),a.name=t.name,i&&Object.assign(a,i),a};var rc=Al,m$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lo=Fn;function Hle(t,e){e=e||new FormData;var n=[];function r(i){return i===null?"":lo.isDate(i)?i.toISOString():lo.isArrayBuffer(i)||lo.isTypedArray(i)?typeof Blob=="function"?new Blob([i]):Buffer.from(i):i}function o(i,a){if(lo.isPlainObject(i)||lo.isArray(i)){if(n.indexOf(i)!==-1)throw Error("Circular reference detected in "+a);n.push(i),lo.forEach(i,function(u,l){if(!lo.isUndefined(u)){var c=a?a+"."+l:l,d;if(u&&!a&&typeof u=="object"){if(lo.endsWith(l,"{}"))u=JSON.stringify(u);else if(lo.endsWith(l,"[]")&&(d=lo.toArray(u))){d.forEach(function(h){!lo.isUndefined(h)&&e.append(c,r(h))});return}}o(u,c)}}),n.pop()}else e.append(a,r(i))}return o(t),e}var v$=Hle,z0=rc,qle=function(e,n,r){var o=r.config.validateStatus;!r.status||!o||o(r.status)?e(r):n(new z0("Request failed with status code "+r.status,[z0.ERR_BAD_REQUEST,z0.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))},hp=Fn,Gle=hp.isStandardBrowserEnv()?function(){return{write:function(n,r,o,i,a,s){var u=[];u.push(n+"="+encodeURIComponent(r)),hp.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),hp.isString(i)&&u.push("path="+i),hp.isString(a)&&u.push("domain="+a),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Kle=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Xle=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e},Yle=Kle,Qle=Xle,g$=function(e,n){return e&&!Yle(n)?Qle(e,n):n},W0=Fn,Jle=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Zle=function(e){var n={},r,o,i;return e&&W0.forEach(e.split(`
`),function(s){if(i=s.indexOf(":"),r=W0.trim(s.substr(0,i)).toLowerCase(),o=W0.trim(s.substr(i+1)),r){if(n[r]&&Jle.indexOf(r)>=0)return;r==="set-cookie"?n[r]=(n[r]?n[r]:[]).concat([o]):n[r]=n[r]?n[r]+", "+o:o}}),n},HT=Fn,ece=HT.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),r;function o(i){var a=i;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(a){var s=HT.isString(a)?o(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),fw=rc,tce=Fn;function y$(t){fw.call(this,t==null?"canceled":t,fw.ERR_CANCELED),this.name="CanceledError"}tce.inherits(y$,fw,{__CANCEL__:!0});var cy=y$,nce=function(e){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""},Dc=Fn,rce=qle,oce=Gle,ice=d$,ace=g$,sce=Zle,uce=ece,lce=m$,di=rc,cce=cy,dce=nce,qT=function(e){return new Promise(function(r,o){var i=e.data,a=e.headers,s=e.responseType,u;function l(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}Dc.isFormData(i)&&Dc.isStandardBrowserEnv()&&delete a["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(d+":"+h)}var f=ace(e.baseURL,e.url);c.open(e.method.toUpperCase(),ice(f,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function p(){if(!!c){var m="getAllResponseHeaders"in c?sce(c.getAllResponseHeaders()):null,g=!s||s==="text"||s==="json"?c.responseText:c.response,x={data:g,status:c.status,statusText:c.statusText,headers:m,config:e,request:c};rce(function(b){r(b),l()},function(b){o(b),l()},x),c=null}}if("onloadend"in c?c.onloadend=p:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(p)},c.onabort=function(){!c||(o(new di("Request aborted",di.ECONNABORTED,e,c)),c=null)},c.onerror=function(){o(new di("Network Error",di.ERR_NETWORK,e,c,c)),c=null},c.ontimeout=function(){var g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",x=e.transitional||lce;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),o(new di(g,x.clarifyTimeoutError?di.ETIMEDOUT:di.ECONNABORTED,e,c)),c=null},Dc.isStandardBrowserEnv()){var v=(e.withCredentials||uce(f))&&e.xsrfCookieName?oce.read(e.xsrfCookieName):void 0;v&&(a[e.xsrfHeaderName]=v)}"setRequestHeader"in c&&Dc.forEach(a,function(g,x){typeof i=="undefined"&&x.toLowerCase()==="content-type"?delete a[x]:c.setRequestHeader(x,g)}),Dc.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),s&&s!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(m){!c||(o(!m||m&&m.type?new cce:m),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),i||(i=null);var y=dce(f);if(y&&["http","https","file"].indexOf(y)===-1){o(new di("Unsupported protocol "+y+":",di.ERR_BAD_REQUEST,e));return}c.send(i)})},hce=null,hn=Fn,GT=jle,KT=rc,fce=m$,pce=v$,mce={"Content-Type":"application/x-www-form-urlencoded"};function XT(t,e){!hn.isUndefined(t)&&hn.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function vce(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=qT),t}function gce(t,e,n){if(hn.isString(t))try{return(e||JSON.parse)(t),hn.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}var dy={transitional:fce,adapter:vce(),transformRequest:[function(e,n){if(GT(n,"Accept"),GT(n,"Content-Type"),hn.isFormData(e)||hn.isArrayBuffer(e)||hn.isBuffer(e)||hn.isStream(e)||hn.isFile(e)||hn.isBlob(e))return e;if(hn.isArrayBufferView(e))return e.buffer;if(hn.isURLSearchParams(e))return XT(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r=hn.isObject(e),o=n&&n["Content-Type"],i;if((i=hn.isFileList(e))||r&&o==="multipart/form-data"){var a=this.env&&this.env.FormData;return pce(i?{"files[]":e}:e,a&&new a)}else if(r||o==="application/json")return XT(n,"application/json"),gce(e);return e}],transformResponse:[function(e){var n=this.transitional||dy.transitional,r=n&&n.silentJSONParsing,o=n&&n.forcedJSONParsing,i=!r&&this.responseType==="json";if(i||o&&hn.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?KT.from(a,KT.ERR_BAD_RESPONSE,this,null,this.response):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hce},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};hn.forEach(["delete","get","head"],function(e){dy.headers[e]={}});hn.forEach(["post","put","patch"],function(e){dy.headers[e]=hn.merge(mce)});var FC=dy,yce=Fn,xce=FC,wce=function(e,n,r){var o=this||xce;return yce.forEach(r,function(a){e=a.call(o,e,n)}),e},x$=function(e){return!!(e&&e.__CANCEL__)},YT=Fn,V0=wce,bce=x$,Ece=FC,Cce=cy;function j0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Cce}var _ce=function(e){j0(e),e.headers=e.headers||{},e.data=V0.call(e,e.data,e.headers,e.transformRequest),e.headers=YT.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),YT.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var n=e.adapter||Ece.adapter;return n(e).then(function(o){return j0(e),o.data=V0.call(e,o.data,o.headers,e.transformResponse),o},function(o){return bce(o)||(j0(e),o&&o.response&&(o.response.data=V0.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},Tr=Fn,w$=function(e,n){n=n||{};var r={};function o(c,d){return Tr.isPlainObject(c)&&Tr.isPlainObject(d)?Tr.merge(c,d):Tr.isPlainObject(d)?Tr.merge({},d):Tr.isArray(d)?d.slice():d}function i(c){if(Tr.isUndefined(n[c])){if(!Tr.isUndefined(e[c]))return o(void 0,e[c])}else return o(e[c],n[c])}function a(c){if(!Tr.isUndefined(n[c]))return o(void 0,n[c])}function s(c){if(Tr.isUndefined(n[c])){if(!Tr.isUndefined(e[c]))return o(void 0,e[c])}else return o(void 0,n[c])}function u(c){if(c in n)return o(e[c],n[c]);if(c in e)return o(void 0,e[c])}var l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return Tr.forEach(Object.keys(e).concat(Object.keys(n)),function(d){var h=l[d]||i,f=h(d);Tr.isUndefined(f)&&h!==u||(r[d]=f)}),r},b$={version:"0.27.2"},Sce=b$.version,Yi=rc,$C={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){$C[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var QT={};$C.transitional=function(e,n,r){function o(i,a){return"[Axios v"+Sce+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return function(i,a,s){if(e===!1)throw new Yi(o(a," has been removed"+(n?" in "+n:"")),Yi.ERR_DEPRECATED);return n&&!QT[a]&&(QT[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,a,s):!0}};function kce(t,e,n){if(typeof t!="object")throw new Yi("options must be an object",Yi.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),o=r.length;o-- >0;){var i=r[o],a=e[i];if(a){var s=t[i],u=s===void 0||a(s,i,t);if(u!==!0)throw new Yi("option "+i+" must be "+u,Yi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Yi("Unknown option "+i,Yi.ERR_BAD_OPTION)}}var Ice={assertOptions:kce,validators:$C},E$=Fn,Tce=d$,JT=Wle,ZT=_ce,hy=w$,Rce=g$,C$=Ice,hu=C$.validators;function Nl(t){this.defaults=t,this.interceptors={request:new JT,response:new JT}}Nl.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=hy(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&C$.assertOptions(r,{silentJSONParsing:hu.transitional(hu.boolean),forcedJSONParsing:hu.transitional(hu.boolean),clarifyTimeoutError:hu.transitional(hu.boolean)},!1);var o=[],i=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(n)===!1||(i=i&&f.synchronous,o.unshift(f.fulfilled,f.rejected))});var a=[];this.interceptors.response.forEach(function(f){a.push(f.fulfilled,f.rejected)});var s;if(!i){var u=[ZT,void 0];for(Array.prototype.unshift.apply(u,o),u=u.concat(a),s=Promise.resolve(n);u.length;)s=s.then(u.shift(),u.shift());return s}for(var l=n;o.length;){var c=o.shift(),d=o.shift();try{l=c(l)}catch(h){d(h);break}}try{s=ZT(l)}catch(h){return Promise.reject(h)}for(;a.length;)s=s.then(a.shift(),a.shift());return s};Nl.prototype.getUri=function(e){e=hy(this.defaults,e);var n=Rce(e.baseURL,e.url);return Tce(n,e.params,e.paramsSerializer)};E$.forEach(["delete","get","head","options"],function(e){Nl.prototype[e]=function(n,r){return this.request(hy(r||{},{method:e,url:n,data:(r||{}).data}))}});E$.forEach(["post","put","patch"],function(e){function n(r){return function(i,a,s){return this.request(hy(s||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Nl.prototype[e]=n(),Nl.prototype[e+"Form"]=n(!0)});var Ace=Nl,Nce=cy;function Pl(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(o){e=o});var n=this;this.promise.then(function(r){if(!!n._listeners){var o,i=n._listeners.length;for(o=0;o<i;o++)n._listeners[o](r);n._listeners=null}}),this.promise.then=function(r){var o,i=new Promise(function(a){n.subscribe(a),o=a}).then(r);return i.cancel=function(){n.unsubscribe(o)},i},t(function(o){n.reason||(n.reason=new Nce(o),e(n.reason))})}Pl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Pl.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Pl.prototype.unsubscribe=function(e){if(!!this._listeners){var n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}};Pl.source=function(){var e,n=new Pl(function(o){e=o});return{token:n,cancel:e}};var Pce=Pl,Dce=function(e){return function(r){return e.apply(null,r)}},Oce=Fn,Mce=function(e){return Oce.isObject(e)&&e.isAxiosError===!0},eR=Fn,Fce=u$,Yp=Ace,$ce=w$,Lce=FC;function _$(t){var e=new Yp(t),n=Fce(Yp.prototype.request,e);return eR.extend(n,Yp.prototype,e),eR.extend(n,e),n.create=function(o){return _$($ce(t,o))},n}var Ir=_$(Lce);Ir.Axios=Yp;Ir.CanceledError=cy;Ir.CancelToken=Pce;Ir.isCancel=x$;Ir.VERSION=b$.version;Ir.toFormData=v$;Ir.AxiosError=rc;Ir.Cancel=Ir.CanceledError;Ir.all=function(e){return Promise.all(e)};Ir.spread=Dce;Ir.isAxiosError=Mce;AC.exports=Ir;AC.exports.default=Ir;var tR=AC.exports;function Bce(t,e){return t/e*100}function Uce({auth:t,db:e}){const[n,r]=T.exports.useState({}),[o,i]=T.exports.useState([]),[a,s]=T.exports.useState([]),[u,l]=T.exports.useState(null),[c,d]=T.exports.useState(null),[h,f]=T.exports.useState(!1),[p,v]=T.exports.useState(!1),[y,m]=T.exports.useState(""),[g,x]=T.exports.useState(null),[w,b]=T.exports.useState(""),[C,E]=T.exports.useState(!0),[S,k]=T.exports.useState(!1),[_,I]=T.exports.useState(""),N=M=>{d(M.currentTarget)},$=()=>{d(null)};return T.exports.useEffect(()=>{let M=null;t.onAuthStateChanged(()=>{M&&(M(),M=null),t.currentUser==null?(I("You are not logged in!"),k(!0),setTimeout(()=>navigate("login"),1e3)):M=mx(Np(e,t.currentUser.uid),B=>{const D=[];B.forEach(U=>{D.push(U.id)}),i(D),o.length>0&&l(o[0])})})},[]),T.exports.useEffect(()=>{let M=null;t.onAuthStateChanged(async()=>{if(M&&(M(),M=null),t.currentUser!=null&&u){const B=t.currentUser.uid,D=u;console.log(D),s([]),M=mx(Np(e,B,D,"participants"),L=>{const z=[];L.forEach(j=>{const q=j.data();z.push(lc({id:j.id},q))}),s(z)}),r({});const U=[...await(await fetch(`${Kr}getDatesInSelection/${B}/${D}`)).json()];console.log(U);const A={};for(let L of U){const z=[...await(await fetch(`${Kr}getSessionsInDate/${B}/${D}/${L}`)).json()];for(let j of z){const q=await Promise.all(z.map(Y=>TH(Np(e,B,D,"attendance",L,"sessions",Y,"participants"))));for(let Y of q)for(let Z of Y.docs){const oe=await(await fetch(`${Kr}get_email_by_uid/${Z.id}`)).text();console.log(oe),typeof A[oe]!="undefined"?A[oe]++:A[oe]=1}}}r({totalDates:U.length,analytics:A})}})},[u]),ie(sa,{children:[ie("div",{className:"m-cont bg-gradient-to-tr from-orange-500 to-red-600 min-h-screen flex flex-col md:flex-row justify-center items-center",children:[ie("div",{className:"chips flex flex-row items-center justify-center md:flex-col gap-3 md:gap-1",children:[F(SI,{label:"Analytics",style:{backgroundColor:C?"rgb(51 65 85)":"rgb(71 85 105)",color:"white",borderRadius:"10px"},onClick:()=>{E(!0)}}),F(SI,{label:"Settings",style:{backgroundColor:C?"rgb(71 85 105)":"rgb(51 65 85)",color:"white",borderRadius:"10px"},onClick:()=>{E(!1)}})]}),F("div",{className:"f-cont min-h-screen w-full p-4",children:ie("div",{className:"glassy min-h-screen p-5 flex flex-col items-center w-full",children:[ie("div",{style:{minWidth:"50%"},children:[ie(Bg,{className:"bg-gradient-to-r py-1 px-5 from-orange-500 to-red-500 shadow-xl shadow-orange-400 border border-red-600 rounded-md text-center text-black w-full",sx:{cursor:"pointer",minHeight:"2rem",fontSize:"1.3rem"},"aria-label":"account of current user","aria-controls":"attendance-list","aria-haspopup":"true",onClick:N,children:[u||"---",F(h2,{})]}),ie(Ym,{id:"attendance-list",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(c),onClose:$,children:[o.map(M=>F(pd,{onClick:()=>{$(),l(M)},children:M},M)),ie(pd,{onClick:()=>{$(),v(!0)},children:[F(Qm,{})," Create New Item"]})]})]}),C?F(sa,{children:n.analytics&&ie(sa,{children:[F("div",{className:"h-4"}),Object.keys(n.analytics).map(M=>F(xte,{title:`Attended ${n.analytics[M]} sessions out of ${n.totalDates}`,children:ie("div",{className:"flex flex-col w-full items-center",children:[F(DZ,{variant:"determinate",sx:{height:"1.5rem",width:"100%",borderRadius:"10px"},value:Bce(n.analytics[M],n.totalDates)}),F("span",{className:"text-lg",children:M})]})},M))]})}):ie(sa,{children:[a.map(M=>ie("div",{className:"w-full flex flex-row",children:[F("img",{src:M.photo,alt:M.email,className:"w-10 mr-3 rounded-full shadow-md shadow-orange-300"}),F("span",{className:"text-base",children:M.email})]},M.id)),u&&ie(tr,{className:"flex w-fit",variant:"contained",sx:{marginTop:"1rem",borderRadius:"1.2rem"},onClick:()=>{f(!0)},children:[F(Qm,{})," Create New Participant"]})]})]})})]}),ie(ss,{TransitionComponent:nR,open:h,onClose:()=>{m(""),x(null),f(!1)},children:[F(Ku,{children:"Add new Participant"}),ie(Gu,{children:[F(gle,{accept:"image/png, image/jpeg",label:"Upload Picture of Participant",onChange:M=>{x(M.target.files[0])}}),F(yle,{onChange:M=>{m(M.target.value)}})]}),ie(qu,{children:[F(tr,{onClick:()=>{m(""),x(null),f(!1)},children:"Cancel"}),F(tr,{onClick:async()=>{if(!g||!y||!g.type.startsWith("image"))I("Enter all fields properly!"),k(!0);else{const M=y,B=await xle(g),D=await(async()=>{try{return await tR({method:"POST",url:`${Kr}/get_uid_by_email`,headers:{},data:{email:M}})}catch{return{status:402}}})();if(!String(D.status).startsWith("2"))I("Enter email properly!"),k(!0);else{const U=D.data,A=Pp(e,t.currentUser.uid,u,"participants",U);if((await bk(A)).exists())I("User already exists in list!"),k(!0);else{const L=(await tR({method:"POST",url:"https://image-api-8265.herokuapp.com/upload",headers:{},data:{image:B}})).data;console.log(L),await px(A,{email:M,photo:L}),I("Added user successfully!"),k(!0),f(!1)}}}},children:"Add"})]})]}),ie(ss,{TransitionComponent:nR,open:p,onClose:()=>{b(""),v(!1)},children:[F(Ku,{children:"Add new Attendance List"}),F(Gu,{children:F(Ii,{autoFocus:!0,onChange:M=>b(M.target.value),margin:"dense",label:"Enter name of attendance list",type:"text",fullWidth:!0,variant:"standard"})}),ie(qu,{children:[F(tr,{onClick:()=>{b(""),v(!1)},children:"Cancel"}),F(tr,{onClick:async()=>{(await bk(Pp(e,t.currentUser.uid,w))).exists()?I("List already exists!"):(await px(Pp(e,t.currentUser.uid,w),{id:w}),I("Added list!")),k(!0),v(!1)},children:"Add"})]})]}),F(uf,{style:{left:"35%"},open:S,onClose:()=>k(!1),autoHideDuration:3e3,message:_})]})}const nR=T.exports.forwardRef(function(e,n){return F(PM,lc({direction:"up",ref:n},e))}),zce={apiKey:"AIzaSyCBUDR2UOTByLYWAjt5NR3asDRc3UUHS9Y",authDomain:"face-recognition-app-de529.firebaseapp.com",projectId:"face-recognition-app-de529",storageBucket:"face-recognition-app-de529.appspot.com",messagingSenderId:"128766852818",appId:"1:128766852818:web:670b7d5c8752ed60daf70b",measurementId:"G-PK5S9BWM07"},xu=pz(zce),rR=Fp(),H0=mH(xu);q0.createRoot(document.getElementById("root")).render(F(G8,{children:ie(j8,{children:[F(fu,{path:"/",element:F(xc,{component:F(Ute,{auth:wc(xu),socket:rR,db:H0}),title:"Face App"})}),F(fu,{path:"login",element:F(xc,{component:F(Yte,{auth:wc(xu)}),title:"Login to Face App"})}),F(fu,{path:"signup",element:F(xc,{component:F(Qte,{auth:wc(xu)}),title:"Signup for Face App"})}),F(fu,{path:"room",element:F(xc,{component:F(vle,{auth:wc(xu),db:H0,socket:rR}),title:"Face App"})}),F(fu,{path:"attendance",element:F(xc,{component:F(Uce,{auth:wc(xu),db:H0}),title:"Attendance Portal"})})]})}))});export default Wce();
